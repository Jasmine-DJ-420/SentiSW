issue_id,Annotation,text
3001,Negative,"I have a component with these options:

```
{
  data() {
    return {
      ...
      controls: {
        ...
        showProduct: {
          11: true,
          13: true,
          15: false
        }
      }
    }
  },

  watch: {
    ...
    'controls.showProduct': {
      handler(newValue, oldValue) { // some function },
      deep: true
    }
  }
}
```

Whenever I change the value of any product (i.e. controls.showProduct[ x ]) the watcher fires, but newValue and oldValue are always the same with controls.showProduct[ x ] set to the new value.
"
3002,Neutral,"### Version
2.2.5

### Reproduction link
[https://jsfiddle.net/evertramos/zn91j20b/](https://jsfiddle.net/evertramos/zn91j20b/)

### Steps to reproduce
Add a select tag with some options using vue with some properties from and object of database.

If you want to have a default value selected in your form when the user enter the form, you must use a **:select=""condition...""**, as of below:

````
 <select>
      <option
        :selected=""true"">
      </option>
  </select>
````

If you add __v-model__ to the select tag **<select v-model=""selected_option"">** the **:selected...** stop working.

### What is expected?
When adding the v-model option to the selected tag, the default value **:selected** stop working.

### What is actually happening?
Should send the value selected to the v-model property.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3003,Positive,"### What problem does this feature solve?
Let me start by saying I love Vue. It is an awesome framework you guys have created, I enjoy using it, and it is at the very top of Frameworks of choice.

But from day one there has been one small area where I found Vue lacking, this is in the Custom Directives department.

I wasn't around for Vue 1, but from what I can gather a decision was made to ""underpower"" Custom Directives in favor of Components. And I agree, when you are developing applications Components is most likely all you need.

The problem starts when you want to create plugins, especially UI plugins. I have created UI plugins in other Frameworks, specifically a Bootstrap native implementation, I have several features that are implemented with Custom Directives, I like how clean they are that way. But when I tried to achieve the same thing with Vue, well I got frustrated very quickly.

Problem Number 1: We don't have a Vue instance. I wish we could create Custom Directives the Same way we create Custom Components. so we have an actual Vue Instance and we can use this. Right now you have to manually extract the directive bindings and store them in the in the element itself. It is not clean since I have to pass the el object around to have access to those properties. It is doable but not very clean.

Problem Number 2: The update hook function it is not being called consistently. For instance, I have this: v-myDirective={foo: bar}; when bar changes the update method is not called, only when something in the DOM changes then update is called. This is super frustrating because many times you want to control the state of your directive based off a property value, but you have no consistent way to know if its value has changed. This is a real problem because there are things that cannot be done without a consistent way to know if a binded property has changed. I wish I could have a Vue instance and have watch methods to react to changes accordingly.

I LOVE Vue, it is an awesome framework, I will continue to enjoy using it and to recommend it. But if this is improved I would have absolutely no reason to ever use any other framework.

Thanks for the hard work and love that goes into Vue.

### What does the proposed API look like?
The API will basically be the same one we have for Custom Components. The example is silly, but I would love to be able to do something like this:

```
Vue.directive('myDirective', {
  data: {
    el: null
  },
  props: ['foo', 'name'],
  bind (el, binding, vnode, oldVnode) {
    this.el = el
    //Bind
  },
  inserted (el, binding, vnode, oldVnode) {
    //Inserted
  },
  unbind (el, binding, vnode, oldVnode) {
    //Unbind
  },
  computed: {
    name () { return `My name is ${this.name}`}
  },
  watch: {
    name (value) { this.nameUpdated(value)}
  },
  methods: {
    nameUpdated (value) {
      this.$emit('nameUpdated', value)
    }
  }
})
```

<!-- generated by vue-issues. DO NOT REMOVE -->"
3004,Neutral,"I am trying to get some multi page setup similar to the example here: https://github.com/yyx990803/vue/blob/master/test/functional/fixtures/routing.html

But how do I get the current view model as I would like to set the data in there.
"
3005,Neutral,"Hi,

I am using [Vis Network](http://visjs.org/docs/network) with [Vue.js](https://vuejs.org) and I created two very simple applications, but none of them is working properly.

## 1) The first app is here: https://jsfiddle.net/Filip_Z/9k2s3dgj/4/

The problem is that it cannot delete only the first node (with id=0). All of the other nodes can be deleted. 

![vis vue - deletenode - jsfiddle - mozilla firefox 2017-01-02 02 54 46](https://cloud.githubusercontent.com/assets/18264428/21583988/1895b128-d097-11e6-8bab-f572e05a0105.png)

In the browser console there are no errors.

```
    Vue.component('ovs-network', {
        template: ""#mytmp"",
        data() {
            return {
                network: null,
                nodes: [
                    { id: 0, label: '0' },
                    { id: 1, label: '1' },
                    { id: 2, label: '2' },
                    { id: 3, label: '3' },
                    { id: 4, label: '4' }
                ],
                edges: [],
                options: {
                    manipulation: {
                        enabled: true,
                        initiallyActive: true,
                        deleteNode: function (deleteData, callback) {
                            callback(deleteData)
                        }
                    }
                },
                container: ''
            }
        },

        mounted() {
            this.container = document.getElementById('mynetwork');
            var data = {
                nodes: this.nodes,
                edges: this.edges
            };
            this.network = new vis.Network(this.container, data, this.options);
        }
    });


    const app = new Vue({
        el: '#app'
    });
```





## 2) The second app is here: https://jsfiddle.net/Filip_Z/3ead4r51/1/

The problem is that after applying the `setData` method, wrong labels are displayed. As you can see in the example, when you click on the button - this Vue method will be executed:
```
                updateData() {
                    var nodes = [
                        { id: 0, label: '0' },
                        { id: 1, label: '1' },
                        { id: 4, label: '4' }
                    ];

                    this.network.setData({ nodes: nodes, edges: []});
                    console.log('Updated!');
                    this.disabled = true;
                }
```
So there will be three nodes but, for some reason, all these nodes will have the same label: '4'. 

![vis vue - dataset - jsfiddle - mozilla firefox 2017-01-02 02 58 55](https://cloud.githubusercontent.com/assets/18264428/21584009/b0ef528a-d097-11e6-95ad-896ad1fdad56.png)

In the browser console there are no errors.

Now, I'm not sure where the problem is (Vue or Vis)."
3006,Neutral,"To avoid having to do something like `binding.modifiers && binding.modiers.foo` to check for the existence of a modifier, should `binding.modifiers` be an empty object if none are provided?
"
3007,Negative,"Hello!
Sometimes its nice to have an option to pass custom params into a partial. Like that:

`<partial name=""block"" :add-link=""true"">`
The principle I see is the same as lightweight VMs in `v-for` elements.

This would also require (probably) alternative syntax for partials: 

```
partials: {
    block: {
        props: {addLink: null},
        template: '<div>123</div>'
    }
}
```

You could say ""use components then"", but the point is I don't want most of components' features here. Just new data scope.
"
3008,Neutral,"I tryed input multibyte string in the textbox in the site below.
http://vuejs.org/guide/forms.html
In the case of IE11 in windows7, could not display multibyte string.
Other browser firefox or chrome case ok.
In the case of ascii string in IE11 Ok.
"
3009,Neutral,"node_modules/vue/dist/vue.js: Line 6460: Invalid regular expression
```
```
const $ = jQuery = require('jquery');
const bootstrap = require('bootstrap')
var fs = require('fs')
var path = require('path')
var Vue = require('vue/dist/vue.js');


function getDirectories(srcpath) {
  return fs.readdirSync(srcpath).filter(function(file) {
    console.log(file)
    return fs.statSync(path.join(srcpath, file)).isDirectory();
  });
}
getDirectories('./')
    var app = new Vue({
        el: '#main',
        data: {
            message: 'Hello .js!',
        }
    });
```

```


`  
`  ""vue"": ""^2.1.6""`
`"
3010,Neutral,"### Version
2.5.2

### Reproduction link
[https://jsfiddle.net/xkkbfL3L/1916](https://jsfiddle.net/xkkbfL3L/1916)

### Steps to reproduce
Click to table header more then 1 time.

### What is expected?
List of names should be sorted evrytime when click on header.

### What is actually happening?
The list is sorted once.

---
Works fine if use temp variable like
```
 var tmp = this.sortOrders ;
   Vue.set(tmp, key, order); 
   this.sortOrders = [];
   this.sortOrders = tmp;
```

<!-- generated by vue-issues. DO NOT REMOVE -->"
3011,Neutral,"Here is the fiddle: http://jsfiddle.net/th0r/gLCqY/
The problem is when the form is reset, no `input` events are fired on the inputs - `reset` event is fired on the form instead.
"
3012,Neutral,"### Vue.js version

[2.0.0-rc.2]
### Reproduction Link

https://jsfiddle.net/WhiteCusp/n6cee6vt/
### Steps to reproduce

click the list item
### What is Expected?

alert('click')
### What is actually happening?

do not alert anything
"
3013,Neutral,"在使用v-for过程，有时候需要对item进行一些操作，这个时候使用filter,method都可以实现。
不过，比如我会在**两处**地方使用`item | filter`，这个时候会进行两次filter过滤运算，而且代码上，还要写两次 `| filter`。
我想有没有跟v-for对应的指令，比如`v-save.test=""item | filter""`，用来保存一次过滤后的结果，可以在之后使用test变量值。
"
3014,Neutral,"### Version
2.4.1

### Reproduction link
[https://jsfiddle.net/alexsasharegan/ojymho07/](https://jsfiddle.net/alexsasharegan/ojymho07/)

### Steps to reproduce
- Create a functional component:
  - create an event handler that calls `Event.stopImmediatePropagation`
  - put the context's event handler in an array with the component's handler, but place the component's handler at the first index. (Allowing the component's handler the first chance to stop propagation)
- Using this functional component in a parent component, bind a listener to the same event (e.g. `""click""`)
- Execute the event

### What is expected?
1. The functional component's handler should be called first, since it is first in the array
2. The functional component's handler should execute the `stopImmediatePropagation` call, and kill the event loop.

### What is actually happening?
1. Execution order is preserved correctly.
2. The parent component's handler is still being invoked (but additional handlers bound through `EventTarget.addEventListener` are not).

---
My use case starts at creating a link component that will respect a `disabled` property, but continues on to various other components to create a cohesive UI component API.

It would be beneficial to have some way to cancel the Vue event loop. I don't know my way around the source well enough, but I imagine that Vue internally tracks all event handlers for a given node, intercepts the native event first, then invokes all callbacks. This is why natively bound callbacks do not get invoked, but callbacks bound by Vue are invoked.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3015,Negative,"I've had a moderate size app working for some time and I somehow broke it.  I stripped the app down to find out what change broke it and I got all the way down to this small example.  But even this is getting `[Vue warn]: Failed to resolve directive: component`.  Can someone please tell me why this doesn't work?

```
Vue = require 'vue'

Vue.component 'header', 
  template: '<div>Hello World</div>'

document.body.innerHTML = 
  '<div v-component=""header""></div>'

new Vue
  el: 'body'
```
"
3016,Neutral,
3017,Negative,"### Version
2.4.2

### Reproduction link
[https://github.com/backspaces/asx](https://github.com/backspaces/asx)

### Steps to reproduce
Search SO & Forum for modern browser/javascript usage. No modern browser/javascript usage is discussed. Posted questions on both with no answer. For example, the ""simple"" cli template could easily be used for minimal .vue file transpiling into es6 friendly output.

### What is expected?
Documentation. For example, if using the cli, how do I avoid babel transpiling to es5 and bundling to remove es6 module use.

### What is actually happening?
No luck so far, no answers to questions. Possibly this is simply a documentation issue? Or is es6/Modules use currently simply not possible with Vue

---
The url is simply my main repo and does not use Vue yet because it is:
- es6 & Module based with a temporary dual build for legacy (es5/bundling)
- My workflow is strictly npm run scripts and node scripts. They do call Rollup for example but are not built on a task manager.

See:
https://medium.com/@backspaces/es6-modules-part-1-migration-strategy-a48de0b7f112
https://medium.com/@backspaces/es6-modules-part-2-libs-wrap-em-up-8715e116d690

My documentation is Docsify based which I believe is built on Vue.
- http://backspaces.github.io/asx/#/

<!-- generated by vue-issues. DO NOT REMOVE -->"
3018,Neutral,
3019,Positive,"Hello!

Please look at the following jsfiddle: http://jsfiddle.net/3fcuaomx/

Triple mustache should insert the content as HTML.
But the first (top) example doesnt perform that.
It begins to work only when the real &lt;br&gt; tag is added (second, bottom example).

It looks like it validates, does the content really contain HTML, and echoes this content as HTML only in this case. But it does not catch html symbol codes (both decimal and hexadecimal).

Thank you!
"
3020,Neutral,"### Version
2.3.2

### Reproduction link
[https://jsfiddle.net/luandapipi/vnq3ye9L/](https://jsfiddle.net/luandapipi/vnq3ye9L/)

### Steps to reproduce
1.new a iamges array
2. change array item value

### What is expected?
Old pictures are modified for new pictures, everything else is the same.

### What is actually happening?
The picture changed, but the style  background-size was gone.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3021,Neutral,"``` js
 new Vue({
      el: '#dataView',
      template:'#item-template',
      data: {
            items:data
       }
});
 side('#sideBox',{'photos':photoArray});//这个#sideBox  dom在模版里面，怎么绑定这个幻灯插件事件？
```
"
3022,Neutral,"Or if I call something like this.$parent.$watch(""property""), will this watcher be destroyed automatically when I switch the v-view?
"
3023,Neutral,"I setup a paramWatcher to watch a dynamic parameter passed to a directive.
The param is called 'options'. When I make a change in 'options' from the parent vm and print out the oldVal and newVal in the param watcher function, both give me the same value.  
http://jsfiddle.net/tianhai/uco50er6/2/
"
3024,Neutral,"Hi, I think there is a problem with $set function when trying to modify an array item inside the array.

```
 this.part.$set(1, this.part[1].push(9));
```

Here is an exemple :
http://jsfiddle.net/avOff/cnu5uo20/1/

The result of part[1] should be 5, 6, 7, 8, 9 but it is 5 (which is equals to the length of the array).

The work around I find is to save the final array in a variable and not directly modify it, as so :

```
var tab = this.part[1];
tab.push(9);
this.part.$set(1, tab);
```
"
3025,Negative,"### Version
2.2.6

### Reproduction link
[https://jsfiddle.net/monkindey/5ssxjkuo/2/](https://jsfiddle.net/monkindey/5ssxjkuo/2/)

### Steps to reproduce
As above code, and open the console to see the warning.

### What is expected?
Give me the `invalid expression: :class=""{"" ` warning rather than `Property or method ""arr"" is not defined on the instance`

### What is actually happening?
The warning is `Property or method ""arr"" is not defined on the instance` which took me a lot time to debug.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3026,Negative,"
Here, [Original Question](http://stackoverflow.com/questions/40927338/why-all-values-are-not-dynamically-passed-in-html-using-vue-js/40933103#40933103)

I can't pass the initial value from one component to another.
Value only changed on click only, event i can pass the value of ""t_id"" (here) directly, 
but i cant send 't_showList' value.

HTML (Template):

```
 <template v-if=""showTemplate"" id=""segment_body"">
    <div class=""col-md-2"" align=""center"">
      <b>Grid</b><br>
      <a href=javascript:void(0) @click=""t_showList=false""><i class=""""></i>Grid</a> |
      <a href=javascript:void(0) @click=""t_showList=true""><i class=""""></i>List</a>
    </div>
    <b>ID : @{{ t_id }}</b><br>
    <b>LIST : @{{ t_showList }}</b>
</template>
```

HTML (Data Source):

```
<script> var a = { list: false} </script>

 <div>
    <campaign_segment :t_id=1 :t_showList=""a.list""></campaign_segment>
 </div>
```

VueJS :

```
Vue.component('campaign_segment', {
      template: '#segment_body',
      props: ['t_showList','t_id']
 });

```
OUPUT :

```
 ID : 1
 LIST : 
```

If i click Option ""Grid"",

OUTPUT :

```
 ID: 1
 LIST : False
```

What's wrong with this ?
Is i did anything wrong ?"
3027,Neutral," Soucce code of  defined transition-demo component
```
<template>
  <div class=""doc-ctn computed"">
    <h4 class=""ctn-title"">transition</h4>
    <div class=""ctn-demo"">

      <transition name=""demo"">
        <!-- slot fangzai   -->
        <slot ></slot>
      </transition>
    </div>
  </div>
</template>
```
Then i use transition demo component in  parent component:
```
<transition-demo>
        I am disappearing
</transition-demo>
```

content ' I am disappearing' dose not rendered.

"
3028,Neutral,"### Version
2.5.2

### Reproduction link
[https://router.vuejs.org/zh-cn/advanced/lazy-loading.html#](https://router.vuejs.org/zh-cn/advanced/lazy-loading.html#)

### Steps to reproduce
无法使用import()定义异步子组件

### What is expected?
无法使用import()定义异步子组件

### What is actually happening?
无法使用import()定义异步子组件

---
无法使用import()定义异步子组件

<!-- generated by vue-issues. DO NOT REMOVE -->"
3029,Neutral,"### Version
2.4.2

### Reproduction link
[https://jsfiddle.net/j0q12fsh/22/](https://jsfiddle.net/j0q12fsh/22/)

### Steps to reproduce
请先理解官方mounted钩子的注释:
注意 mounted 不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用 vm.$nextTick 替换掉 mounted

### What is expected?
正常顺序应该1,2,3,4

### What is actually happening?
实际顺序显示为2,4,1,3

<!-- generated by vue-issues. DO NOT REMOVE -->"
3030,Neutral,"```
<label for=""draft"">
    <input type=""checkbox"" name=""draft"" id=""draft"" v-model=""!object.isDisplay""/>
    保存为草稿
</label>
```

因为`isDisplay`表示是否在前端显示，因此草稿状态，其为`false`，`checked`为`true`。
但在测试发现，无论该 `checkbox` 是否 `checked`，`object.isDisplay` 一直为 `true`
"
3031,Neutral,"想要做到切换 classname 的目的，怎么做比较好目前代码：

http://jsfiddle.net/yolio2003/otqcz1fm/4/

感觉不好。
"
3032,Neutral,"ref: #1363
"
3033,Neutral,"### What problem does this feature solve?
I have a change event handler that changes values for other fields that have change event handlers, and I want to suppress or disable those event handlers while i'm in changing the values. This is a common pattern in other frameworks (I do it a lot in SharePoint). 

### What does the proposed API look like?
perhaps just a global flag like vm.disableChangeEvents?

<!-- generated by vue-issues. DO NOT REMOVE -->"
3034,Positive,"Hey there,

The fact is that I like some of Vue's features, such as the view Angular-like stuff: directives, filters.

However I don't want the extra stuff: event system, watching, dom functionality etc.

Would it be possible in the future to extract these by functionality into separate repos so that people can install them with NPM/bower? (for example this is how Mercury does it: https://github.com/Raynos/mercury/blob/master/index.js#L27-L43)

Thank you.

/cc @yyx990803 
"
3035,Neutral,"### What problem does this feature solve?
In a normal Vue instance, click the button which will invoke a function that create a vnode by calling `this.$createElement` function.

            tryCreated() {
                let vm = this;
          
                let h1tag = vm.$createElement('h1', 'This is an h1 tag')
               
            }
 
How can I insert the `h1tag` into `this`?


 

### What does the proposed API look like?
`$createElement`, `Render Function`

<!-- generated by vue-issues. DO NOT REMOVE -->"
3036,Neutral,"<!--
中文用户请注意：

1. issue 只接受带重现的 bug 报告，请不要用来提问题！不符合要求的 issue 会被直接关闭。
2. 请尽量用英文描述你的 issue，这样能够让尽可能多的人帮到你。

Got a question?
===============
The issue list of this repo is **exclusively** for bug reports and feature requests. For simple questions, please use the following resources:

- Read the docs: https://vuejs.org/guide/
- Watch video tutorials: https://laracasts.com/series/learning-vue-step-by-step
- Ask in the Gitter chat room: https://gitter.im/vuejs/vue
- Ask on the forums: http://forum.vuejs.org/
- Look for/ask questions on stack overflow: https://stackoverflow.com/questions/ask?tags=vue.js

Reporting a bug?
================
- Try to search for your issue, it may have already been answered or even fixed in the development branch.

- Check if the issue is reproducible with the latest stable version of Vue. If you are using a pre-release, please indicate the specific version you are using.

- It is **required** that you clearly describe the steps necessary to reproduce the issue you are running into. Issues with no clear repro steps will not be triaged. If an issue labeled ""need repro"" receives no further input from the issue author for more than 5 days, it will be closed.

- It is recommended that you make a JSFiddle/JSBin/Codepen to demonstrate your issue. You could start with [this template](https://jsfiddle.net/39epgLj0/) that already includes the latest version of Vue.

- For potential SSR (Server Side Rendering) issue or bugs that involves build setups, you can create a reproduction repository with steps in the README.

- If your issue is resolved but still open, don’t hesitate to close it. In case you found a solution by yourself, it could be helpful to explain how you fixed it.

Have a feature request?
=======================
Remove the template from below and provide thoughtful commentary *and code samples* on what this feature means for your product. What will it allow you to do that you can't do today? How will it make current work-arounds straightforward? What potential bugs and edge cases does it help to avoid? etc. Please keep it product-centric.
-->

<!-- BUG REPORT TEMPLATE -->
### Vue.js version
2.0.2

### Reproduction Link
<!-- A minimal JSBin, JSFiddle, Codepen, or a GitHub repository that can reproduce the bug. -->
<!-- You could start with this template: https://jsfiddle.net/39epgLj0/ -->
http://pastebin.com/YmfpnjkA

### Steps to reproduce
1. Try to drag and drop any of the list items over other item or the square below.
2. See the output from the console.

### What is Expected?
The indexes are correct as per the console, so the view should be updated to reflect the 'ordered' computed property (which depends on 'indexes').

### What is actually happening?
The indexes shown at the console do not reflect the computed element order"
3037,Negative,"I'm bundling my code only  and using Vue from [unpkg](https://unpkg.com/).
But even if I'm not using the `template` option, I'm forced to use the standalone build because the runtime-only one has some node variables, like `process` or `module`.

> Uncaught ReferenceError: process is not defined
"
3038,Neutral,"### 1.0.21

I use the vue-router.
When using the back button, that is,`history.back ()`
Would be such an error

```
[vue-router] Uncaught error during transition: 
```

The scene is this, for example, my URL is `localhost:8080/message/id/10`
It's from `locahost:8080/message/id/9`
URL will become`localhost:8080/message/id/9` when you click back

But the data on the `localhost:8080/message/id/9` page will not be rendered and will be reported to the above.
"
3039,Neutral,"```
Module parse failed: /Users/Jokcy/workspace/office/vue-example/node_modules/babel-loader/index.js!/Users/Jokcy/workspace/office/vue-example/src/vue/src/util/index.js Line 3: Unexpected token
You may need an appropriate loader to handle this file type.
| 'use strict';
|
| import _Object$defineProperty from 'babel-runtime/core-js/object/define-property';
| Object.defineProperty(exports, ""__esModule"", {
|   value: true
 @ ./src/vue/src/observer/index.js 44:13-37
```
"
3040,Neutral,"<!--
IMPORTANT: Please use the following link to create a new issue:

  https://new-issue.vuejs.org/

If your issue was not created using the app above, it will be closed immediately.

中文用户请注意：
请使用上面的链接来创建新的 issue。如果不是用上述工具创建的 issue 会被自动关闭。
-->
<template>
  <div id=""app"">
    <v-header :seller=""seller""></v-header>
    <div class=""tab border-1px"">
      <div class=""tab-item"">
        <router-link to=""/goods"">商品</router-link>
      </div>
      <div class=""tab-item"">
        <router-link to=""/ratings"">评价</router-link>
      </div>
      <div class=""tab-item"">
        <router-link to=""/seller"">商家</router-link>
      </div>
    </div>
    <router-view></router-view>
  </div>
</template>

<script type=""text/ecmascript-6"">
  const Err = 0;
  import header from './components/header/v-header.vue';
export default {
    data() {
      return {
        seller: {}
      };
    },
    created() {
      this.$http.get('/api/goods').then(response => {
        response = response.body;
        if (response.errno === Err) {
          this.seller = response.data;
        }
      });
    },
    components: {
    'v-header': header
    }
};
</script>


<template>
  <div class=""header"">
  <div class=""content-wrapper"">
    <div class=""avatar"">
      <img  width=""64"" height=""64"" :src=""seller.avatar"">
    </div>
    <div class=""title"">
        <span class=""brand""></span>
        <span class=""text"">{{seller.name}}</span>
    </div>
  </div>
  <div class=""bulletin-wrapper""></div>
  </div>
</template>
<script type=""text/ecmascript-6"">
export default {
  props: {
    'seller': Object
  }
};"
3041,Neutral,"child:

```
<div v-for=""x of xx"">
  <slot></slot>
</div>
```

parent:

```
<child>
  <div @click=""doSth(x)"">如何获取到x?</div>
</child>
```
"
3042,Neutral,"### What problem does this feature solve?
A vue component of mine, when applied a certain model generates certain HTML/CSS. Is there any CLI for extracting the output HTML/CSS into seperate entities? Currently I duplicate the Vue file with my own node templating generation.

### What does the proposed API look like?
Some CLI that lets you pass in a model and a Vue component, which outputs the html/css file appropriate to the input model.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3043,Positive,"For example, I would add a event listener when bind and remove it when unbind. So I wrote:

```
Vue.directive('xxx', {
  bind: function () {
    this.vm.handler = function () {...};
    this.el.addEventListener('click', this.vm.handler);
  },
  unbind: function () {
    this.el.removeEventListener('click', this.vm.handler);
    delete this.vm.handler;
  }
});
```

But the `handler` is exposed out to `vm`.
Is there any better way?

Thanks.
"
3044,Neutral,"Vue.js version
2.1.4

I found that vue.js unsupport html5 tag 'm'
[Vue warn]: Unknown custom element: <m> - did you register the component correctly? For recursive components, make sure to provide the ""name"" option. "
3045,Negative,"### What problem does this feature solve?
i try create component based on the pattern facade. On example my component named `Windows` and it would add data variables, methods, watchers and listeners to direct child, which wrap and make component with window-functional.

I can't use `methods: `, because `this.getDraggableElement.call(comp)` not work!
I use this construction:
```
var DEBUG = true
function getDraggableElement () {
  if (DEBUG) console.log('getDraggableElement()', this.$el)
  return this.$el
}
export default {
  methods: {
    implantateChild (comp, i) {
      comp.$el.classList.add('window')
      comp.$el.style.width = '500px'
      comp.$el.style.height = '500px'
      comp.$el.style.top = `${50 * (i   1)}px`
      comp.$el.style.left = `${50 * (i   1)}px`
      comp.getDraggableElement = () => getDraggableElement.call(comp)
    }
  },
  updated () {
    this.$children.forEach((comp, i) => {
      this.implantateChild(comp, i)
    })
  }
}
```
so i I carry `function getDraggableElement ()` beyond `export default`. I fear that, when i would expand my facade-component, file of component turn unreadable monster...

Also pay attention to how i assign classes and styles to DOM of my child. I think that this artisanal method, but i don't find better solution.

### What does the proposed API look like?
```
export default {
  methods: {
    getDraggableElement () {
      return this.$el
    },
    implantateChild (comp, i) {
      let class = 'window'
      let styles = {
        width: '500px',
        height: '500px',
        top: `${50 * (i   1)}px`,
        left: `${50 * (i   1)}px`
      }
      comp.$class.add(class)
      comp.$styles.add(styles)
      comp.getDraggableElement = () => this.getDraggableElement.call(comp)
    }
  },
  mounted () {
    this.$children.forEach((comp, i) => {
      this.implantateChild(comp, i)
    })
  }
}
```

<!-- generated by vue-issues. DO NOT REMOVE -->"
3046,Neutral,"We are trying to find a solution for being notified before a dom update takes place.

In our particular usecase we are integrating vue with a third party plugin that also manipulated the DOM. We are looking for a safe way to ensure this execution order:
1. vue renders dom
2. lib initializes (dom modification)
   ==> state update ($set)
3. lib uninitialize (revert dom modification)
4. vue rerenders dom
5. lib initializes (dom modification)

We've tried to use a directive for this but this only solves step 2 and 5 (`Directive.update`). We are looking for something like `beforeUpdate` inside the directive to handle 3.

Is there a proper way to handle this? 
"
3047,Neutral,"### What problem does this feature solve?
Although it is not documented in the release notes for 2.2.0 and was only edited in the Docs 2 weeks ago (commit 
 bffedab6d824cc7983856b6f286e69f0d818c3a7) Vue.delete does not work anymore (since 2.2.0) on objects.
When I need to add/remove an item from an array it is as simple as using push/splice.
When I need to manipulate an object I have only Vue.set() to reactively add, but delete doesn't seem to have any built-in reactive solution.

If there's a built-in way of doing that I would like to know, if not - is it possible to implement one?

### What does the proposed API look like?
I'm not sure about the code, but an API which implements the javascript built-in delete operator (while maintaining reactivity) would be excellent.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3048,Neutral,"I am not sure where it's best to post this one, but here this code:

``` vue
<template>
<img :src=""property"">
<img v-bind:src=""property"">
</template>
```

breaks webpack loader with the next error:

```
Module not found: Error: Cannot resolve 'file' or 'directory' ./property in ...
```

``` vue
<template>
<img :src.sync=""property"" >
</template>
```

compiles fine (but is incorrect, I know).

The deal is definitely in the way `src` attr is handled in Webpack. 

Ideas?
"
3049,Neutral,"Having this issue with Vue 1.0.0 beta 3

```
    export default {
        data      : function () {
            return {
                user: {
                    email: """",
                    password: """",
                    repeatPassword: """"
                }
            }
        },
        watch: {
            user: {
                handler: function(val, oldVal){
                    console.log(val == oldVal)  //returns TRUE on change but should return FALSE
                },
                deep: true
            }
        }
```

```
             <div>
                    <label for=""email"">E-mail</label>
                    <input type=""email"" name=""email"" v-model=""user.email"">
                </div>

                <div>
                    <label for=""password"">Password</label>
                    <input type=""password"" name=""password"" v-model=""user.password"" >
                </div>

                <div>
                    <label for=""repeat-password"">Gentag adgangskode</label>
                    <input type=""password"" name=""repeat-password"" v-model=""user.repeatPassword"">
                </div>
```
"
3050,Negative,"Hi man,

need help on this: http://jsfiddle.net/wt1jpw31/

I followed your TreeView sample but, I am confused, the last UL appends extra items, when it shouldn't
"
3051,Positive,"Hi,

I was prototyping an app with vue and nestedsortable (https://github.com/ilikenwf/nestedSortable)

It was working with vue 0.11
http://jsfiddle.net/0vjec2h4/3/
(nb: this demo works with Firefox & Opera, but not with Chrome or IE)

But with vue 0.12 and the end of v-component, I haven't succeeded in porting that code. 
The nestedSortable library is not made to use custom components, and there is always something not working in any variation that I tried.

So, would it be possible to make an exception for ul/ol/li elements to still have the v-component directive ? like the exception for table elements, in order to not break usage with jquery plugins that use list elements.

Thanks !
"
3052,Neutral,"http://jsfiddle.net/5sH6A/101/

Only if an initial value is set (for checkbox three), the output is working properly. For the other checkboxes the selected Object is changed, but nothing changes on the output.
"
3053,Negative,"I'm stuck on an issue that cause awkward pages transitions using `v-transition` and `v-view` on poor memory devices (tested on an iPad 4th gen so far).

I am translating full-viewport views to `-100%` _(v-leave)_ `100%` _(v-enter)_, and it works fine on desktop.

But on the device, there is a delay on the `v-leave` that reveal a blank between the two views.

I guess this is caused by the time it takes the iPad to insert the view in the dom, but I tried with multiple `v-show` instead of `v-view` but unfortunately, same behavior here (maybe a shorter delay).

Is it an issue or a design mistake in my app pages transitions? How could I link two v-transition to wait each other to avoid this blank gap between them?
"
3054,Neutral,"### Version
2.4.2

### Reproduction link
[https://jsbin.com/firujumohe/edit?html,js,console,output](https://jsbin.com/firujumohe/edit?html,js,console,output)

### Steps to reproduce
实例中对数组进行 watch，在对数组进行 push 操作后，watch 的两个参数“当前值”，“更新前值”并不能得到预期中的值。但是通过另外的“曲线”方式，如 concat 了一个新数组然后赋值给原来的数组则能正常得到值。但是我想，push 的问题应该是存在 bug 吧。具体见提供链接里。

### What is expected?
ids:[];
watch:{ids.....}
ids.push(0);
// [0], []

### What is actually happening?
ids:[];
watch:{ids.....}
ids.push(0);
// [0], [0]

---
ids:[];
ids=ids.concat([0]);
// [0], []

这是一种解决方案...

<!-- generated by vue-issues. DO NOT REMOVE -->"
3055,Neutral,"### Version
2.4.1

### Reproduction link
[http://plnkr.co/edit/Gtp3uFFiBIxYMmyh3Se9](http://plnkr.co/edit/Gtp3uFFiBIxYMmyh3Se9)

### Steps to reproduce
webpack config rules : {test: /\.css$/, loader: ""vue-style-loader!css-loader""}
```html
<script>
import './common.css';
export default {
	name: 'app',
};
</script>
<template src=""./app.html""></template>
```
context has _styles property but context.renderStyles() returns empty string why is it?
client side works fine.
I don't know what I missed. please help.

有context._styles，不过context.renderStyles()的结果是“” 为什么？
浏览器上是正常添加STYLE。
不知道错过了什么，求解
![1](https://user-images.githubusercontent.com/9513647/28255815-cb3680c4-6af6-11e7-8a11-1b65fe8805ee.PNG)
![2](https://user-images.githubusercontent.com/9513647/28255817-ccb1735a-6af6-11e7-9497-7e3ac097aa95.PNG)


### What is expected?
context.renderStyles() => ""<style>body {..}</style>""

### What is actually happening?
context.renderStyles() => """"

<!-- generated by vue-issues. DO NOT REMOVE -->"
3056,Negative,"### Vue.js version
2.2.1

### Steps to reproduce
I'm not exactly sure how to reproduce this error. It started happening when I upgraded to v2.2.1. I downgraded down to 2.1.1 and the issue disappeared. Also, I removed all instances of `this.$nextTick` in my code, but the issue still persists.

### What is actually happening?
![image](https://cloud.githubusercontent.com/assets/11958359/23387936/93d8c836-fdb3-11e6-841e-d7557bfcd780.png)
"
3057,Neutral,"like this one: http://vuejs.org/images/vue-component.png
"
3058,Negative,"My style bindings are not working after I build the code for production (I'm using the Webpack skeleton initially generated by vue-cli).

The code is for a simple parallax component - you can find it here: https://gist.github.com/esahione/6a7dc75f1dec971c4c06

Here's my Webpack production config file: https://gist.github.com/esahione/c8d75d51ff7e59b10d5a
And here's the Webpack development configuration file: https://gist.github.com/esahione/c305121816040f849547

The code should be self explanatory. It works flawlessly on development, but when I try to build it for production it stops working. In fact, when I look at the code through the browser there is no style tag.

Is this a bug? Am I doing something wrong?
"
3059,Neutral,"I am using watch to listen for changes done to an array which is shared between components, and i see a strange behavior. The function that watches the array gets triggered multiple times instead of one time. for example if i insert an item to this array the watch function gets called 3 times... any idea what is happening ?

component:

```
data: function() {
        return {
            sharedState: store.state }
}
```

```
watch: {
        'sharedState.selectedItems': function(val , oldVal){ console.log('i got triggered') }
}
```
"
3060,Neutral,"i dont know if i am missing something... but the following code is not working

```
let nav = Vue.extend({
            template: require('../templates/nav/nav.html'),
            components: {
                'item': { 
                      name:'item',
                      template: require('../templates/nav/item.html') 
                 }
            }
        });

Vue.component('nav', nav);
```

```
<nav>
    <item></item>
</nav>
```

it says..

```
app.js:1112 [Vue warn]: Unknown custom element: <item> - did you register the component correctly? For recursive components, make sure to provide the ""name"" option.
```

Vue v1.0.25
"
3061,Neutral,"Components that use both sub-components and partials throw error on $destroy.

``` js
var view = new Vue({
  template: '<div><div v-component=""dialog""><div v-partial=""hello""></div></div></div>',
  partials: {
    hello: 'Hello {{name}}'
  },
  components: {
    dialog: {
      template: '<content>'
    }
  }
});
view.$mount();
view.$appendTo(document.body);
view.$destroy();
```

Result:

```
Error: 'undefined' is not an object (evaluating 'this._directives[i]._teardown')
    {anonymous}() node_modules/vue/src/api/lifecycle.js:87
    ...
```
"
3062,Positive,"### What problem does this feature solve?
I have a large, nested tree of components built from a data schema. Some of the containing components have `keep-alive` set for easy type switching.

When the tree changes, all child components all the way down the tree change (are destroyed and rebuilt according to the new data), but the `keep-alive` components stay around even though they are now most likely completely useless. Imagine a schema-built interface with the schema changing, or a filesystem tree after changing to a totally different path or server.

I would like to destroy all inactive components when the tree changes. I can run over Vnodes myself and check for the `_inactive` property, but this is a private property.

So this is a request for either a clear, approved way to identify inactive `keep-alive` child components or a way to clear the whole cache.

I'm also happy with a reply along the lines of ""just use _inactive"" or any other better way to handle this particular situation given what is available in the API.

### What does the proposed API look like?
(I admit not being very familiar with the Vue codebase.)

Either expose a public `vm.inactive` and `vm.isKeepAlive` to check for keep-alive components or a `vm.destroy_inactive()` method. Maybe there could be a filter method on `vm.$children` to select specific children, such as `keep-alive`, `inactive`, `functional` or any other `_is...` state; this would then hide implementation details such as private booleans.

<!-- generated by vue-issues. DO NOT REMOVE -->"
3063,Neutral,"### What problem does this feature solve?
According to the [SSR hydration docs](https://ssr.vuejs.org/en/hydration.html):

> In development mode, Vue will assert the client-side generated virtual DOM tree matches the DOM structure rendered from the server. If there is a mismatch, it will bail hydration, discard existing DOM and render from scratch. In production mode, this assertion is disabled for maximum performance.

How would one know if hydration succeeded/failed?  If ""this assertion is disabled"" in production, does that mean Vue defaults to discarding the DOM, or does Vue assume the server sent the proper markup?  I would imagine a failed hydration would be something that would be nice to capture (eg. via `Raven.captureException()`) so it can be tracked / fixed.


### What does the proposed API look like?
If there is indeed a ""hydration mode"", can that exposed as a global `Vue.mode === 'hydration'` (or `Vue.hydrationMode === true` if there are multiple ""modes"" that Vue can run in simultaneously)?  Can a boolean/exception be exposed to let the developer know hydration succeeded?

<!-- generated by vue-issues. DO NOT REMOVE -->"
3064,Positive,"Thank's for reading.

I'm developing a todoDemo, and I'm trying to use vue 1.0.0-alpha.2 version. When I update sub-compnents props use `prop-` prefix, I got a invalid expression error. 
I want to use a filter with a computed property that filter by todo types.
vue config:

``` javascript
let filters = {
  all: (todos) => todos.filter((todo) => todo.isDelete === false),
  active: (todos) => todos.filter((todo) => todo.isFinished === false && todo.isDelete === false),
  finished: (todos) => todos.filter((todo) => todo.isFinished === true && todo.isDelete === false)
};

let vm = new Vue({
  data: () => ({
    todos: [
      {
        content: 'hello world'
      },
      // some todos from localStorage
    ],
    filter: 'all',
    query: '' // todo content filter.
  }),
  computed: {
    filteredTodos() {
      return filters[this.filter](this.todos);
    }
  },
  components: {
    'todo-list': compTodoList
  },
  filters: {
    orderTodos(todos) {
      return todos.sort((todo1, todo2) => {
        if (todo1.isDelete === todo2.isDelete) {
          if (todo1.isFinished === todo2.isFinished) {
            return new Date(todo2.lastModified).getTime()
                    - new Date(todo1.lastModified).getTime();
          }
          return todo1.isFinished - todo2.isFinished;
        }
        return todo1.isDelete - todo2.isDelete;
      });
    }
  }
});
```

component:

``` html
<todo-list v-if=""todos.length"", prop-todos=""filteredTodos | filterBy query in 'content' | orderTodos""></todo-list>
```

After using webpack to package a `.vue` file into `build.js` file. Open it in browser I had get a error from developer tools.

```
[Vue warn]: Invalid expression. Generated function body:  scope.filteredTodos|scope.filterByqueryin'content'|scope.orderTodos
```

But when I call vue instance's `$eval` method and pass string `filteredTodos | filterBy query in ""content"" | orderTodos` as parameter, I will get correct result.

thx.
"
3065,Neutral,"A vue project works fine in other browser, including chrome, firefox. But in IE9, there is an error reported. 
Didn't test in other IE browsers, this is under dev mode with hot reload enabled.

Error picture.

![image](https://cloud.githubusercontent.com/assets/7252540/21386206/b90ea02c-c7ac-11e6-9f68-e1d0313d430a.png)
"
3066,Positive,"### Problem

The event system seemed like a useful idea when I first implemented it. It is still very useful internally, but I've found that I almost never use it in my application code because the accidental complexity `$broadcast()` and `$dispatch()` can introduce. Here are some issues:
1. Their behavior relies on the structure of the component tree. On the surface it decouples the components, but in fact it still couples them quite tightly. Once a event relationship is set up, your components need to stick to that structure; you can accidentally break your event chain by moving the components around.
2. Namespacing. When you listen to an event, you have no idea if a child component somewhere might dispatch an event with that name and screw things up. You just can't prevent that.
3. Events are often (ab)used to trigger state changes, but their propagation inside the component tree is very abstract and implicit. Because the events can go both ways, the events flow inside a large application quickly gets very hard to wrap your head around, and it becomes even harder to understand where your app state to change originated from. A lot of times, a simple global event bus can make things centralized and thus a lot easier to understand. (You can even adopt Flux if you want to go further)
### Proposal
1. ~~Deprecate `$broadcast()` and `$dispatch()`. Other event methods still remain, which means Vue isntances are still event emitters.~~ Stop propagation by default in `$broadcast()` and `$dispatch()`, unless the user calls the second argument `propagate`.
2. Expose a global utility so users can construct their own event bus. Something like `new Vue.Emitter()`.
3. (Outside of core) Investigate recommendation for state management. You can use libraries like [vuex](https://github.com/vuejs/vuex) or Redux.
"
3067,Positive,"@simplesmiler I, too, think it's worth the check on non-production mode. Those warnings are always helpful and makes Vue awesome. The doc is pretty clear IMO so there's nothing more to add
"
3068,Negative,"The use case is not clear to me. The example is just changing the number until it reaches 100
If we introduce the warning, what will it check? Using object literals is quite usual for class and style bindings. If we warn the user about that, we're kind of forcing him to fix it because nobody wants to leave a warning on their console 😛 
I think it's good to tell the user to use a computed property instead but wanted to point out that
"
3069,Neutral,"Can you give an example of what it would be helpful for?
"
3070,Negative,"@posva I just don't buy that.

Asking everyone who wants to use your software to develop in Chrome is not a good enough answer."
3071,Positive,"Thanks, this should indeed be the correct behavior. Also glad to know it's improving performance for your app :)
"
3072,Positive,"Hello ...,

thank you for your filing this issue.

Please follow the [guidelines](https://github.com/vuejs/vue/blob/dev/CONTRIBUTING.md) on how to report an issue. In particular, provide an example on www.jsfiddle.net (or a similar service) that reproduces the problem.

Thank you.
"
3073,Neutral,"enable on debug:

```
<div id=""test"">
    <child msg=""abc""></child>
</div>

Vue.config.debug = true;

Vue.component('child', {
    template: '<div>{{ msg }}</div>',
    props: {
        msg: Number
    }
})

var vm = new Vue({
    el: '#test',
})
```

 In console there is no errors and warnings!
"
3074,Positive,"Ok, I figured and agree.  And know this is not a forum for questions...  (a horrible preface to a _question_)...  Is there an _approved_ way to get at the runtime rendered ID of the component?  I need to integrate a vue component with another library, and that library needs the ID so it can progressively enhance...  I'll understand if you ignore the question, just that the general consensus from my (admittedly limited) research was to use `_uid`."
3075,Positive,"thanks @simplesmiler , it solve my problem. I think it will take a long time
"
3076,Negative,"When I read the post on vue 2.0, I was stoked about all the new possibilities (especially the virtual dom and the server rendering), but I was also surprised and a little sad to that the filters are gone.

They were one of my favorite parts of vue, not only because they were easily usable and chainable, but mainly because they were easily extensible and had a beautiful syntax to use them in the template directly. Especially in combination with `v-for` loops, they were a perfect match.

Thinking that I'll have to use computed properties to replace the filtering for each and every prop I want, I'm worried that I'll be writing a lot of boilerplate in the future. While mixins might mitigate a part of the problem, I still feel like a part of the elegance and ease of using vue is going to be missing.
"
3077,Neutral,"Doing some local debugging, I found changing this line:
https://github.com/vuejs/vue/blob/3e1d70e87c0b9441bc4bce9126c8bde3a1df9043/src/directives/public/model/select.js#L42
to:
`this.vm.$nextTick(this.forceUpdate);`

Solved the issue. From what I can see it doesn't break existing functionality.  

A separate but related issue (in IE) is when a select element is moved (either the element itself or when it's a descendant of a moved element)  within the DOM, even with the above code change, it will reset and present the same issue as above (displaying the first option instead of a blank).
e.g:

``` html
<div id=""move"">
   <label> Test
       <select v-model=""selected"">...</select>
   </label>
</div>
<div id=""dest""></div>
```

``` javascript
document.querySelector('#dest').appendChild(document.querySelector('#move'));
```
"
3078,Neutral,"This is interesting to me. If you cannot change them in the `.vue` files you have inconsistency with applications that are harder to change. In Craft 3.0 I cannot see how to change the lexers globally. Even if I could find this it would likely break any Craft plugins that expect them to be the Twig default.

I think the same argument could be made for the other applications, there may be reasons there not to change the Lexers. I think allowing `.vue` components to change their own delimiters would make sense, however, I do agree with the argument that they should not be changed globally for a Vue application for the same reason. IMHO the best way to do it is to allow the developer to choose when to change them, even on a component that is in a `.vue` file."
3079,Neutral,"`<li v-for=""(item, index) in listOfThings"">` or if you prefer: `(item, $index)`

https://vuejs.org/v2/guide/list.html#Basic-Usage"
3080,Negative,"What's weird is the databinding seems to be recognized, but nothing shows. ie. if I add some list elements to the example, the list elements show up, but no text within them:

```
<div id=""app"">
    <span>{{ message }}</span>
    <textarea :value=""message""></textarea>
    <ol>
        <li v-for=""todo in todos"">
          {{ todo.text }}
        </li>
     </ol>
</div>
```

```
var app = new Vue({
  el: '#app',
  data: {
    message: 'hello',
    todos: [
        { text: 'Learn JavaScript' },
        { text: 'Learn Vue' },
        { text: 'Build something awesome' }
    ]
  }
})
```

Displays:

```
(textarea with message)
1.
2.
3.
```

But the list elements have no text... weird?
"
3081,Neutral,"Vue was set to test prefixed version before the non-prefixed by https://github.com/vuejs/vue/commit/8dd598c2106c74932e20fa0bd9d53bc46ec04119 to fix https://github.com/vuejs/vue/issues/2219.
I think it should test non-prefixed version first, with the exception for buggy properties (like `filter`).
"
3082,Neutral,what @sqal said 🙂 
3083,Neutral,"I believe the problem is that vue cannot detect a change in `labelStyle` when only its children properties are updated, and if its not explicitly used in the template.

A solution would be to recreate the whole `labelStyle` object when changing one style to force a update, this can be easily done with the es2015 spread operator.

So instead of setting the new background color like this: 
```javascript
this.labelStyle.background = newColor
```
You should do it like this:
```javascript
this.labelStyle = {
  ...this.labelStyle,
  background: newColor 
}
```
this will keep everything the same but overwrite the background propery.
here is a working example: https://jsfiddle.net/50wL7mdz/57072/"
3084,Neutral,"Linked this issue in Chromium's issue list: https://code.google.com/p/chromium/issues/detail?id=351764
Closing.
"
3085,Positive,`runInThisContext` is significantly faster! Looking forward to the new release!
3086,Positive,"Thanks, thats what i thought too.

Feature Request: enable use of lazy loaded components"
3087,Neutral,"I feel it belongs to userland, it's something needed by your use-case project but not really by Vue in general.
"
3088,Positive,"Thanks, I am looking into it."
3089,Neutral,"> We could think of dozens of small convenvience functions like yours, but that would just inflate the API unnessessarily.

Therefor one could aggregate helpers like this in a plugin and have the core clean."
3090,Positive,"@kristoferjoseph thanks for offering to help! v0.10 is closing up and almost ready, but feel free to contribute to future issues after the release.
"
3091,Neutral,"Hi @klehelley and thanks for this detailed reproduction.

### What's going on?

Chrome only opens the file picker when the `click()`event's programmatic invocation happened during a user-interaction (i.e. a user clicking a button).

Now on the surface, this is what happens, right? The user clicks ""Add file"", and a file input is added and clicked programmatically. But the issue is that Vue's update mechanism after data changes runs asynchronously. So the call stack of the original ""Add file"" click event has already finished before the new component is created.

Therefore, the `click()` call in the new component's `mounted` hook is not triggered by a user-event, from Chrome's perspective, and consequently is ignored.

You can see Chrome's behaviour, without Vue and very simplified, here: https://jsfiddle.net/0L794s53/1/

### So how to solve this? 
My suggestion would be to change the `Files.vue` component. 

I would add a hidden file input to *that* component and use it for every new file. After the file has been selected, read it from the input, add it to the file list, and reset the file input.

That way, the `FileUpload.vue` component itself would never contain an actual file input.

If that doesn't work for you, because you actually *need* an input per file (I can't think of a reason but you might very well have one), you will have to come up with another way to have the input already in the DOM *before* that button is clicked. maybe always have a ""new"" file in the `this.files` list and hide the last entry until the user selected something, or whatever.

### Closure & Further support

I think this is not something we can solve in Vue internals - the asynchronous update queue is here to stay. Rather, you will have to find ways to work around this, as described above. If you need further help with this, Please join us on forum.vuejs.org or chat.vuejs.org and we can work this out."
3092,Neutral,FYI this is already shipped in 2.0 with the new `$refs`. Don't know if Evan wants to back port it to 1.x though.
3093,Neutral,+1
3094,Neutral,"As said in the PR, you should use plain objects instead of `Vue.extend` for mixins: http://jsfiddle.net/yjw4nafL/

You can achieve something similar with `extend` too: 
http://jsfiddle.net/sg0db7no/"
3095,Positive,"Wow! Incredible speed, man! This is becoming a framework of the dream! Thanks! =) 
"
3096,Neutral,@fadexiii   #6961  和你一样的需求，请问下你们怎么解决的呀
3097,Negative,"@yyx990803 i just tried in jsfiddle it worked. but it does not work with webpack require.
"
3098,Positive,"fixed, thanks!
"
3099,Neutral,"I'm looking into the template compiler to see if this is possible. In theory, depending on how vue 2.0 generates its AST, it should be possible to add component-level delimiters, but I'm not sure of this.
"
3100,Positive,"Thanks for the proposal. Right now, we're very lean on adding syntax sugar. The reason there's one for `v-model` is that it exists for inputs, and being able to use it in components, especially in UI components, makes the code more readable. But adding a new syntax for something that is already feasible and short, isn't the direction we want to go.

If, however, you think we can improve the docs, we'll happily take a PR for that at https://github.com/vuejs/vuejs.org 👍 "
3101,Neutral,This may help you: https://vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats
3102,Negative,"Yep, sorry. It seems that I was using old bootstrap-select plugin.
"
3103,Neutral,"> But, couldn't Vue offer the filters as core plugins too? Like Vuex and Vue-Router?

That's exactly what @blake-newman [shared](https://github.com/vuejs/vue/issues/2756#issuecomment-215516343) earlier.
"
3104,Neutral,Previous attempt at opening this issue: #6058.
3105,Negative,"@yyx990803 Noticed that trying to create this feature. VueJS documentation didn't mention `:transition` :(
"
3106,Neutral,"@yyx990803 感谢回复！sorry , 由于节假日，今日才来回复。
我经过测试，又重新定位了一下问题，其实我在那个符合 v-model 的时候，拿到了  val 的值，进行了 ajax查询，查询出的结果对`$data`的属性赋值之后，才发生了那样的问题
`this.muiAjax(mixins.pkg.interface.getQQInfo, {qq: value}, function (result,vm) {
                        vm.qqInfo=result.data
                    })`。如果不是通过ajax查询出的结果进行赋值，不管是  `v-if , v-show`在哪个安卓版本下,都没问题。不知道这块在安卓4.1.X中，进行 ajax查询对`$data`的属性进行赋值时,如何避免键盘会弹下去。正在探索中,目前还没更好的解决方案，
"
3107,Positive,"Yes, I have misunderstood the scoping rules.
Everything is working fine now without `inherit: true`.
Thanks!
"
3108,Negative,Same fail
3109,Neutral,"Would it be better to have the modifier as
""notrim""   and make trimming default, at least for 2.0?
Most scenarios need trimming so having a lot of .trim in the form is a bit cluttering
"
3110,Positive,Sever-side rendering without a node dependency would be a huge improvement for us as our backend heavily depends on a python stack. A V8 plugin would come in very handy.
3111,Positive,"Hi, thanks for filling this issue. Since vue's render process is async, the proper way of accessing rendered element's properties is using a `nextTick` callback, e.g.

```js
this.$nextTick(() => console.log(this.$el.clientWidth))
```"
3112,Negative,"@yyx990803 Yes, it only triggers jQuery events...and the problem is that all other jQuery plugins works the same way =(
The solution with the native event seems a little tricky... Maybe `vue` could be a little more friendly to jQuery? It would simplify things a lot.
"
3113,Positive,"@thelinuxlich it matters even less in huge SPAs, because building an SPA with a framework means you have to fully adopt the framework's idioms, so the tolerance for API intrusiveness is higher.

I think people advocating the `v-` prefix mostly use Vue as an enhancement to existing HTML, thus for them keeping Vue ""easily spottable"" is important. This is understandable, but it is not the only use case for Vue, and I believe the new syntax is a worthwhile tradeoff.
"
3114,Negative,"I think bringing `.sync` back as sugar will already please most library developers. AFAIK quite a few Vue developers are stuck with `1.x` just because they rely on `.sync` so much. For me we are now developing a UI library and I'm looking into how others are solving this problem. The paradigm most libs are using seems weird to me but they have no choice.

Even if we cannot bring back `.sync` directly, I still hope custom directives or something like this can provide similar feature. But right now it seems not possible to replace a prop/event listener pair with a custom directive (prop bindings are already compiled into the render function and we have no runtime API to add new ones)."
3115,Neutral," v1.0 style

``` javascript
<input type=""text"" v-bind:class=""myClass""  v-bind:min=""myMin"">
```

or

``` javascript
<input type=""text"" :class=""myClass""  :min=""myMin"">
```
"
3116,Negative,"It will be there when it should be.
"
3117,Neutral,"Please open issue at the corresponding vue-cli template instead. https://github.com/vuejs-templates
"
3118,Negative,"Oh, right. I could have _sworn_ this wasn't an issue, but was confused by the lack of a warning. Didn't notice that he was using the production build...
"
3119,Neutral,"我这样做了，就可以
```javascript
next()
router.push(from.fullPath)```"
3120,Positive,"wow, thanks, very fast :zap:

I still have one question: _Why `$index` does not pass in my component, when I write `inherit: true`? It is correct behaviour?_
"
3121,Positive,"Adding @transitionend.stop worked. Thanks!  I thought it should be something related with the handling of the transitionend event, but I have not found where is that on Vue 2 to try patching it.
"
3122,Neutral,"Thanks, but this only works if the browser supports ES6 computed property names. This is not a Vue feature and it will not work in old browsers.
"
3123,Positive,I understand. Would you agree that adding a warning would be appropriate?
3124,Negative,"I closed it too fast, the ""grouping"" way make my code be fatter...
And should it be an 'enhancement' tag?
"
3125,Negative,"What are the arguments against variardic?  Other than being ugly, I don't know of any issues using that syntax, whereas array style I know would take a hit in garbage collection after repeated calls.  That is, creating an array every time render is called would have an adverse (but probably marginal) effect on performance in a very large application.

I'm trying to understand your position better, since I am suggesting adding an additional signature, not replacing the existing behavior."
3126,Positive,"@kazupon Thanks! I really like the quick response of Vuejs Team, you're awesome!
"
3127,Positive,"That's an interesting thought, but I feel it's unwarranted as the web platform prioritises backwards compatibility.

The IE & IE9 detections are locked down; they will never change as they'll never release new versions of these browsers.

The Chrome detection would break a lot of things if they removed `window.chrome`. A [GitHub search reveals 16,427,300 results](https://github.com/search?q=window.chrome&type=Code&utf8=%E2%9C%93).

`'WebkitAppearance` and `'MozAppearance` [have existed from Safari v3, Chrome v1 & Firefox v1](https://developer.mozilla.org/en/docs/Web/CSS/-moz-appearance). The existence of `'WebkitAppearance'` was deemed so important that Edge also implemented it for compatibility reasons. A GitHub search reveals 7,919,623 hits for `-webkit-appearance`, 1,507,796 for `-moz-appearance` and 510,663 and 115,429 for their `Webkit/Moz` equivalents. There are many millions more results for `appearance:`, which you'd assume are being auto-prefixed.

The iOS detection is less well known. There's also `'WebkitTouchCallout'` (which has more results in GitHub), but I'd be worried if a touch-screen Mac was released, this would also then exist in Safari there. We could also check for the absence of `'WebkitDashboardRegion'` which has [only existed in desktop Safari since v3](https://developer.apple.com/library/content/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/doc/uid/TP30001266--webkit-dashboard-region), but we'd need to also add `!isAndroid`.

Which leaves Edge. Here is a list of the `ms` prefixed properties that have existed since Edge launched (they haven't changed from 11 – 14):

```
msContentZoomChaining: ;
msContentZooming: ;
msContentZoomLimit: ;
msContentZoomLimitMax: ;
msContentZoomLimitMin: ;
msContentZoomSnap: ;
msContentZoomSnapPoints: ;
msContentZoomSnapType: ;
msFlowFrom: ;
msFlowInto: ;
msFontFeatureSettings: ;
msGridColumn: ;
msGridColumnAlign: ;
msGridColumns: ;
msGridColumnSpan: ;
msGridRow: ;
msGridRowAlign: ;
msGridRows: ;
msGridRowSpan: ;
msHighContrastAdjust: ;
msHyphenateLimitChars: ;
msHyphenateLimitLines: ;
msHyphenateLimitZone: ;
msHyphens: ;
msImeAlign: ;
msOverflowStyle: ;
msScrollChaining: ;
msScrollLimit: ;
msScrollLimitXMax: ;
msScrollLimitXMin: ;
msScrollLimitYMax: ;
msScrollLimitYMin: ;
msScrollRails: ;
msScrollSnapPointsX: ;
msScrollSnapPointsY: ;
msScrollSnapType: ;
msScrollSnapX: ;
msScrollSnapY: ;
msScrollTranslation: ;
msTextCombineHorizontal: ;
msTextSizeAdjust: ;
msTouchSelect: ;
msUserSelect: ;
msWrapFlow: ;
msWrapMargin: ;
msWrapThrough: ;
```

Perhaps testing for the `support` of `ms-high-contrast-adjust` would be better since it's a native OS accessibility feature?

FYI all of the supported CSS features I mention have been obtained via opening http://mattstow.com/style.html in each browser and comparing the output (since January 2013).
"
3128,Neutral,"After a quick review I noticed that it worked because I had accidently reverted to 0.12 again;
As shown in this updated fiddle, this doesn't work; http://jsfiddle.net/30LLtrx6/1/
"
3129,Neutral,"`npm update vue`

Fixed it for me
"
3130,Positive,"@andreiglingeanu there are a number of projects / blog posts discussing the merits with some example implementations. basically they render into the vdom in the worker then transmit the patch to the ui thread which then applies it to the actual dom and the dom event handlers forward to the web worker. there is more work total but spread across two threads (which most even low level phones have cores for) and the ui thread is not blocked easily by xmlhttprequest parsing etc. 

but as I said its not a priority right now for us either. I am interested in seeing vue succeed though and was concerned that @wormen's question went totally without response of any kind. I am glad he found another solution for his issue of course"
3131,Positive,"@TMiguelT and @builtap Thanks guys.. the reason I am doing this is to make something like a library of Component for a frontend I am making, something like a common admin cp type of applications, that has a lot of components that can be added and such.. I admit some documentations with vuejs are so far very basic and some sample application uses the vue-loader which i am only using plain javascript.. Thanks again for the pointers, appreciated it and happy new year!
"
3132,Positive,"I didn't use `inline-template` at all, so it surprised me that there are many people who don't want the syntax be removed from this library. Reading your comments, I understood that it gives us some benefits.
1. I understood that those who utilizing it would like to combine logics and templates in their own ways. Is this correct? How about creating component constructors for each items like the example, instead of writing it to your templates?
2. Are there anyone here who think about the reason why `inline-template` is treated as a bad practice?

``` javascript
// example
var Base = Vue.extend({
  data: function() {
    return {}
  },
  methods: {}
})

var app = new Vue({
  components: {
    ComponentA: Base.extend({
      template: ""#templateA""
    }),
    ComponentB: Base.extend({
      template: ""<div></div>""
    })
  }
})
```
"
3133,Negative,"Actually Vue checks the element against a list of [common tags](https://github.com/vuejs/vue/blob/13e033551ad2b23f1d5883926c4786d767bb72ba/src%2Futil%2Fcomponent.js#L12), just like what you suggested. `el.toString()` test is only triggered in non-production environments for warnings. It seems the common tag list is missing several tags though (`audio`, `video`, `track`, `t(head|body|foot)`…) @yyx990803 or am I simply misunderstanding anything here?
"
3134,Neutral,"http://vuejs.org/guide/components.html#activate_Hook
"
3135,Neutral,"Not yet. A workaround might be not using vue-router and replace it with <component is=""..."">.
"
3136,Negative,"I don't think this is fixable in Vue framework, though. I have tried some way to optimize away `getBoundingClientRect` call but it requires `getTransformationInfo` which causes style recalculation as well. Since transition-group is designed for FLIP technique, there is little chance we can avoid at least one style recalculation call. 

Fairly, the click event listener still respond in about 100ms even for CPU 20X slowdown, which seems acceptable. If the CSS framework adds too many rules, well, then FLIP technique is something you might want to avoid."
3137,Neutral,"+1 for v-once
"
3138,Neutral,Or I should use `style.b.split(' ')[0]` instead?
3139,Neutral,"fixed in 0.11.
"
3140,Negative,"Things like an infinite list/virtual scroll, where there could be many many
detached but kept-alive components.

On Mon, Oct 17, 2016, 16:06 Eduardo San Martin Morote <
notifications@github.com> wrote:

> When does this come in handy? @fnlctrl https://github.com/fnlctrl
> 
> —
> You are receiving this because you were mentioned.
> 
> Reply to this email directly, view it on GitHub
> https://github.com/vuejs/vue/issues/3961#issuecomment-254139658, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AFTLl4TZirvo38fVtk5pGhutZSBShkGBks5q0yyJgaJpZM4KYT_-
> .
"
3141,Positive,"We can have some fun with this! :)
http://jsfiddle.net/marfalkov/P5FXb/
"
3142,Neutral,"You can always avoid warning by exporting the variable.
"
3143,Neutral,Did you try it with 3 components? I posted an example with 3 components and I wanted to style the button component which was the most deeply nested component which I couldn't overwrite  the scoped style from the root component. Maybe I am doing something wrong? (I am only using scoped styles avoiding global styles on purpose) 
3144,Positive,"Hello, your issue has been closed because it does not conform to our issue requirements. Please use the [Issue Helper](https://new-issue.vuejs.org) to create an issue - thank you!
"
3145,Neutral,"@yyx990803 Looks like the issue is in Observer.ensurePath
"
3146,Neutral,"Fiddle in duplicate #713.
"
3147,Negative,"I don't think this is Vue's responsibility. Also a computed property may get used in non-template scenarios. Instead you can detect unused code with a coverage tool.
"
3148,Negative,"Proof?
"
3149,Neutral,"@thelinuxlich good point, Aurelia also uses the syntax of `prop.bind=""xxx""`, `prop.two-way=""xxx""`, `prop.one-time=""xxx""`, but the template is going to be quite verbose.

``` html
<comp
  :my-prop=""something""
  :my-prop.one-time=""something""
  :my-prop.two-way=""something"">
</comp>
```

I think the special char is more or less a tradeoff between easier to type and more succinct templates vs. being able to understand what is going on without reading the docs. Although the value of the latter quickly diminishes once you become familiar with the framework.

Assuming that we keep the binding indicators, I think the idea of indicating a literal directive also by adding a special symbol before `=` makes sense because:
1. It keeps the idea of ""directives start with `v-`"" consistent;
2. It is consistent with the prop binding type indicators.

Which special char to use is largely stylistic preference. I'll just list everything (`*` and `@` are already taken):

``` html
<!-- current 1.0.0-alpha.3 syntax -->
<a v-link.=""/abc""></a>

<a v-link#=""/abc""></a>

<a v-link$=""/abc""></a>

<a v-link%=""/abc""></a>

<a v-link^=""/abc""></a>

<a v-link&=""/abc""></a>
```

Or, be super explicit:

``` html
<a v-link.literal=""/abc""></a>
```
"
3150,Positive,"perfect,Even!!!"
3151,Negative,"but is have so much code write in v1.0.2
"
3152,Neutral,"At server side there is no necessary to manpulate dom with a data binding libary , but if you guys are talking and interesting in the prebuild process like what component did , I am one of you. And recently the riverjs wrote by me contains this feature and also data binding , there is a build to make the prebuild process worked , you can see it from my responstery or install riverjs -g from npm.
"
3153,Neutral,"This may be an issue related to https://github.com/vuejs/vue/blob/dev/src/compiler/parser/html-parser.js#L47 . Pug is not a xml-like templting engine, so it can contain anything like script tag and style tag. Without specific treat, ""<"" may break html-parser's parsing procedure.
"
3154,Negative,"That makes sense, but it seems like the `isLiteral` option isn't very useful, then as getting access to directive arguments is inconsistent.

Further example: 
http://jsfiddle.net/billiamthesecond/y85usxaL/5/

With isLiteral set to true, and a non-expression argument, the argument can only be accessed via `this.expression` in the bind method.

With isLiteral set to true, and an expression argument with mustaches, the argument is available via `this.expression` and the `value` argument in both the bind and update methods.

With isLiteral set to true, and an expression argument with a filter, the value is only available via `this.raw` in the bind method, and only in the non-calculated state (and update is not called).

In all cases, the bind value is undefined as you mentioned, but this doc suggests that a value argument will be available: http://vuejs.org/guide/custom-directive.html

Is that all as designed?
"
3155,Positive,"@simonmurdock For the record, can you add a reproduction on jsfiddle? Thanks."
3156,Negative,"Not sure if this is the ""right"" way, but I got around this issue with async options by using `v-if` on the component to not render it until the async operation was complete.

https://jsfiddle.net/paulredmond/a085bpmn/2/"
3157,Positive,"I'm a bit surprised namespaces are ignored, but hey ho."
3158,Positive,@krsrk you found _a_ trouble or __the__ trouble? If it's the second you should close the issue 😉 
3159,Negative,"(This all assumes that my guess of the cause is correct...)

I don't think this is happening just because of the absolute positioning, I think it's just the _ordering_ of the FLIP calculations and applying the style changes.  If I remove three items in one go, then they collapse towards the location of the first removed item (and only the first will fall directly downwards).

It seems to me that the FLIP calculation works out the correct animation before applying the absolute positioning, and that works fine -- as long as only a single item is removed!

This issue is that when two or more items are removed, the calculation fails to correctly calculate the item's end position, and it seems to make sense that the absolute positioning is being applied by the transition-group **as it iterates** through its children -- it seems to make changes to the classes/styles as it goes through the items (when multiple elements are removed), each change affects subsequent items in an unexpected way (so any previous elements in this removal have **already** been removed from the flow before it calculates their end position).  This explains why there is no issue with a single removal, and the problem is only seen when multiple items are removed.

It would work as the user expects if the transition group firstly calculated the FLIP positions for the removed elements **as they currently stand** (without yet mutating the classes/styles), and **only after doing them all** made any changes to the classes/styles of the elements.  This way, the elements would animate as expected.

"
3160,Negative,"Hmm.. The `options` parameter isn't its own directive, just a `select` specific parameter to `v-model` hence expressions are not evaluated. What is the case where you want a `select` input with no output (`v-model`). That seems strange..
"
3161,Negative,"Sorry, this is indeed a bug. The directive skips setting up a watcher with a falsy initial value... if you give `currentView` a truthy initial value it will work. In the meanwhile it's been fixed in the next branch.
"
3162,Neutral,"Got it, its added to array proto here:  https://github.com/vuejs/vue/blob/dev/src/observer/array.js :rose:
"
3163,Neutral,"@yyx990803 like the [fork](https://github.com/ken1987/vue-ssr-demo)
"
3164,Negative,"I would say this is not Vue's problem, but Bootstrap's problem. It's Bootstrap using !important that forces everyone into this specificity war. If I were you I'd not use static CSS that has !important unless for very specific reasons like printing. And I don't think this is a common case.
"
3165,Neutral,"When you change component (`currentSection.name`), vue fires transition. Or I misunderstood?
"
3166,Negative,"btw, Evan. Couple of times, I had problem setting paths containing `.` in key. Specifically, using `Vue.set()`. I worked around, but maybe you have some good solution for this? (i just thought, maybe escaping dot is possible in path?)
"
3167,Positive,"@yyx990803 , same question with sqal. Currently, i solve this in-compatible issue with additional code in addition to the vm.$destroy():

```
vm.$el.parentNode.removeChild(vm.$el)
```

It seems strange, i must append above code with vm.$destroy(true) itself
If we can still support that parameter, it will be great
thanks!~
"
3168,Neutral,"This is expected behavior. First because of the [`externals` config](https://github.com/epiloque/vueSSRTest/blob/master/app/webpack.config.js#L9), the app's dependencies like `vue` are not bundled into the server bundle. They will be loaded dynamically at runtime. However, the server-renderer can only load dependencies from where itself is installed. This means it needs to be in the same node_modules tree with your app's dependencies.

Is there any particular reason you have to structure your project this way?"
3169,Neutral,"@murphymeng you would have to:
1. Avoid using `v-model` and `.sync` in favor of unidirectional data flow (`:value=""..."" @change=""...""`).
2. Use immutable data (there's a useful library called [object-path-immutable](https://github.com/mariocasciaro/object-path-immutable)).
3. Whenever watch triggered, run a comparison to figure out what has changed and what didn't.
"
3170,Neutral,"@yyx990803   OK 
"
3171,Neutral,"@kenberkeley partials have been deprecated in vue2, haven't they?

https://vuejs.org/v2/guide/migration.html#Vue-partial-removed
"
3172,Neutral,"https://jsfiddle.net/Twiknight/bftLgo0e/

This is a demo.
@lbineau 
"
3173,Neutral,"It is required that a `key` should be present on item in `v-for`.

https://jsfiddle.net/jxprjt0c/2/

Check the changelog out:  https://github.com/vuejs/vue/releases/tag/v2.2.0"
3174,Positive,"@jiyinyiyong thanks, fixed. Currently GitHub is the community, essentially. There's also an IRC channel on freenode (#vuejs) although I'm not always active there.
"
3175,Negative,"We are using Vue 2.3.4 and just realized the following:
If you use camelCase in the HTML prop it will just work fine, although the documentation suggests kebab-case for those. No problem here BUT if I use the webpack UglifyPlugin to minify the bundle all those camelCase props will lead to errors. This bug is pretty nasty and I think camelCase should be forbidden in general for html-props"
3176,Positive,"We are lucky @yyx990803 is the BDFL, just look how Vue stands out. I've seen many shitty suggestions(and I suggested some of them) because people can't see the big picture
"
3177,Negative,"I tried this sample here that uses the deprecated v-view - and 3 v-components: I see memory leaks too.
http://jsbin.com/jizegefape/2/edit
I am about to sadly conclude that vue is not ready for prod.
"
3178,Neutral,"I tried it in version 60.0.3112.32
it looks like it is normal"
3179,Neutral,"The short tag syntax [does not exist in HTML5 (see 6)](http://dev.w3.org/html5/spec-author-view/syntax.html#syntax-start-tag).

> Then, if the element is one of the **void elements**, or if the element is a **foreign element**, then there may be a single U+002F SOLIDUS character (/). This character has no effect on void elements, but on foreign elements it marks the start tag as self-closing.

A custom element is not a foreign element, nor a void element.

In your case, if we remove the final /, we get this:

```
<my-choices v-with=""choices"">
<my-add-choice>
```

The browser will then try to close the tags:

```
<my-choices v-with=""choices"">
<my-add-choice></my-add-choice>
</my-choices>
```

And that is exactly what I get in the Firefox DOM inspector:

![](https://i.cloudup.com/O6dg8sI2IK-3000x3000.png)
"
3180,Neutral,"objects are now supported in `v-class` via https://github.com/yyx990803/vue/commit/4e83218c0cbb85f99485c51938e510a6da2453a3
"
3181,Positive,"I got it: thanks!
"
3182,Neutral,"I agree with setting the default to `false`, especially since most computed properties are simple.  This would allow the developer to fine-tune an application by applying caching where it is needed rather than removing caching everywhere that it is not.
"
3183,Neutral,"Please open an issue with a reproduction link at: https://github.com/vuejs/vue-router
"
3184,Neutral,"http://forum.vuejs.org/topic/4019/vue-js%E4%B8%8D%E6%94%AF%E6%8C%81html5%E7%9A%84video%E6%A0%87%E7%AD%BE
"
3185,Neutral,"+1
"
3186,Neutral,@stepbeta in your case u must iterate `c.messages` and set `verboseTime` for every message individually. The better option is make a separated component like `<verbose-time>`.
3187,Neutral,"补充下，v-loading 在执行过程中我会在指定的 dom 上做一些动画效果，loading 结束就销毁动画。
"
3188,Negative,"Alright, at least your example works.
Now with the added state, the real issue is the combination with Vuex.

Since the Vuex getters aren't yet available when the state is defined, we can't use them to populate the values.

We could use `mounted` or something, but again, that's quite dirty.
"
3189,Positive,"Hi, thanks for filling this issue. There are many other css properties like `line-height` that works with numerical values, i.e. `line-height: 40`. So appending `px` by default will break these usages."
3190,Neutral,"实际上退场动画已经执行了，因为部分元素已经退出，还残留了一部分元素没有被清理。
没有被清理的元素的CSS退场动画也执行完毕，唯一缺少的就是将元素从document中删除
用js钩子检测发现最后一步afterLeave并没有被触发
刚刚又试了一下发现其实stagger貌似能防止一点，但具体能不能完全防止这个问题还不知道
"
3191,Neutral,"You shouldn't use ```slot``` in this case, ```v-show``` is invalid with ```<slot>``` tag,  ```v-for``` and ```v-if``` are working because they are processed at compilation phase before ```<slot>```."
3192,Positive,"Sorry to be so deep ""in the zone"" LOL. Yes, @LinusBorg, you summarized it pretty well, thanks :)"
3193,Negative,"ugh, stupid IE... I guess we'll go with the no flicker version of it (they can share the same callback) - PR welcome.
"
3194,Positive,thanks @sirlancelot 
3195,Neutral,"Hey there! I believe the issue is occurring because you are tracking by id (`track-by=""id""`) but toggling the visibility based on the index of the array which gets shuffled (`cti == i`).

I'd suggest tracking by another property or changing the way `cti` is computed. I've created another fiddle for you to see what I mean: [JSFiddle Demo](https://jsfiddle.net/awuxva59/).

Also note that the opacity was changed from `0.1` to `0`.

I'm going to go ahead and close this, however if you feel that this doesn't actually solve the issue please feel free to reopen the issue and we can take a deeper look.
"
3196,Negative,@yyx990803 Is this still the case? I tried doing this and the debounce didn't apply.
3197,Neutral,"#3974 
"
3198,Neutral,"Yeah sure, but then that value will go from your parent component *down* to the `<loading>` compoent, not up *from* the loading component. That value is not changed in the `<loading>` component, which is the only situation that you would need `v-model` or `.sync` for.

Maybe you have a missunderstanding how props work, at least in combination with computed properties?"
3199,Neutral,"@FranzSkuffka @yyx990803 I encountered a very similar problem when using Vue to [wrap](https://github.com/xkjyeah/vue-google-maps/issues/39) the [Google Maps OverlayView](https://developers.google.com/maps/documentation/javascript/examples/overlay-simple) elements. 

Initially I didn't set the `:key` attribute on the wrapping node (used with `v-for`), and the OverlayView DOM nodes on the rendered Google Map randomly and wrongly got re-rendered when the underlying observed array changed (new items pushed, existing items' own array got new items pushed).

Then I realized I need to set a `:key` to help Vue map the DOM nodes to the data array. I first tried to use a `String` type uuid of each item as the value for the `:key`, then I encountered the same error this issue mentioned. The situation is similar because the mounted DOM node for this wrapper component got ""tampered"" as required by the Google Maps API, specifically the root node's `position` style property is changed to `absolute`, and `left` and `top` changed to the appropriate ones for them to display on the map correctly based on the item's `lat` and `lng`.

Then I changed to use a POJO `{ location: { lat: <Number>, lng: <Number> } }` as the value for the `:key`, both issues are solved: DOM nodes are updated correctly with underlying array change, and no longer seeing the exception mentioned in this issue `DOMException: Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.`.

I guess because the `:key` is a POJO, which is an instance of Object, that's not passed around by value (initially I used String), but by reference, helped to work around the issue?"
3200,Neutral,"Hi, thanks for your interest but Github issues are for bug reports and feature requests only. You can ask questions on the [forum](http://forum.vuejs.org/), the [Discord server](https://vue-land.js.org/), [gitter](https://gitter.im/vuejs/vue) or [StackOverflow](http://stackoverflow.com/tags/vue.js)."
3201,Neutral,"Please make sure to read the [Issue Reporting Guidelines](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#issue-reporting-guidelines) before opening new issues. Questions should be posted to the [forum](http://forum.vuejs.org/) or [StackOverflow](http://stackoverflow.com/tags/vue.js). Thanks.
"
3202,Positive,"No need to be sorry, Always glad to help :)
"
3203,Neutral,"since `_.remove` doesn't work with Vue, I ended up simply creating a method that traverses the object and deletes the element marked for deletion regardless of the depth.  here's the method I created granted it was my first pass at it.

```
    deepClean (obj, keys) {
      if (keys.length === 0) return

      let currkey = keys[0]

      if (keys.length === 1) {
        obj.splice(currkey, 1)
      } else {
        keys.splice(0, 1)
        this.deepClean(obj[currkey], keys)
      }
    }
```
and the way I use it is I build the path to what I want deleted as an array so `this.whatever.0.children.5.children.9` would be the element path, I'd pass 
```
deepClean (this.whatever, [0,'children',5,'children',9]) 
```
and whant ends up happening is this.whatever gets updated accordingly regardless of depth.

there are other ways of doing it (that requires less code) am sure, but this works."
3204,Neutral,"See the note in api docs: http://vuejs.org/api/#vm-watch
"
3205,Neutral,"0.12.4 has the correct and intended behavior. Read more about this: http://vuejs.org/guide/components.html#Content_Insertion and http://vuejs.org/guide/best-practices.html#Component_Scope
"
3206,Negative,"Sorry, I don't use **v-with**. Ah ... I see ""with.js:13"" ... But I don't find any ""with"" in my code :/
"
3207,Neutral,"Quick question: notifications are for the whole todo list right? Single elements of the list do not have notifications of their own.

If they did, Vue.swap above would miss notifications on arr[x].

For example can we have something like:
data: {
  msg: {x:1, y:2}, // reactive var
  todos: [ msg, ""td1"", ..] // reactive list
}"
3208,Neutral,It should be a js object. Please refer https://vuejs.org/v2/guide/class-and-style.html#Object-Syntax
3209,Neutral,"@roblav96

There are some changes needed to be compatible, we are hoping to better incorporate the Router into Vue. 
"
3210,Neutral,"@simplesmiler we are keeping `v-` for directives. People are arguing about `v-` for everything Vue related.
"
3211,Neutral,"Looks like you are using a quite out-of-date version of Vue - please consider upgrade to the latest version.
"
3212,Positive,@yyx990803 Thx!
3213,Neutral,"Was hoping I wouldn't have to add a property in my data object for this, all the logic's contained in the template  

Usage is kind of like:  

``` html
<div>
    One place to add a thing: <input $$.input-a type=""text"" on-keyup-enter=""addItem($$.inputA.value)"">
    <button on-click=""addItem($$.inputA.value)"" bind-disabled=""$$.inputA.value"">submit (disabled if textbox value empty)</button>
</div>
...
<div>
    Another place to add a thing to the same array: <input $$.input-b type=""text"" on-keyup-enter=""addItem($$.inputB.value)"">
</div>
```

http://jsfiddle.net/r34ac4p2/

And that works (didn't used to be able to do this before v-el and v-ref became reactive), except for binding the button's disabled property to the input element's value  

Having to use a v-model and add a property to the data object to make the value reactive would seem to add just a little bit of cruft, and also sync the value of two separate input boxes (which I don't want)
"
3214,Positive,"well, then show some code :)
"
3215,Negative,"key the dynamic components accordingly:

`<div is=""child"" inline-template  :key=""value"">`

Unfortunately, the docs are not very clear on this currently, but this is expected behaviour. 

As stated somewhere else, about switching between elements:

> When toggling between elements that have the same tag name, you must tell Vue that they are distinct elements by giving them unique key attributes. Otherwise, Vue’s compiler will only replace the content of the element for efficiency.

https://vuejs.org/v2/guide/transitions.html#Transitioning-Between-Elements

It works similary for dynamic components.

@chrisvfritz Can you think of a better place in the docs to mention / expand on this?
"
3216,Neutral,Is there any update on this? It has been open a while now - is there anything that can be done to help move this issue?
3217,Positive,@RobertBColton in your example `$event.target._value` would work ;) just a hint.
3218,Neutral,"Vue.config.delimiters = ['${', '}'] and new Vue({delimiters: ['${', '}']}} not working.

```
        Vue.config.delimiters = ['${', '}'];
        Vue.component('message', {
            props: ['body', 'author', 'created'],
            template: '<div>' +
            '<div class=""message"">' +
            '<div class=""author"">{$author}</div>' +
            '<div class=""body"">{$body}</div>' +
            '<div class=""created"">{$created}</div>' +
            '</div>' +
            '</div>'
        });

        new Vue({
            delimiters: ['${', '}'],
            el: '#chat'
        });
```

```
<div id=""chat"">
        <message body=""Hello world"" author=""Admin"" created=""12.12.2917 12:12:19""></message>
</div>
```"
3219,Neutral,"I believe this should not take the name of `transition-mode`, because this would clash with the existing meaning of [`transition-mode`](http://vuejs.org/guide/components.html#transition-mode).
"
3220,Positive,"@yyx990803 In my case, I was watching for changes of entity's attributes excluding relationships. Anyway, thank you so much for the advice !
"
3221,Neutral,"This is indeed a bug, because two `v-repeat` directives are racing for setting the $index on their children's $data. This will most likely be resolved in 0.11 since each vm will have its own scope which is separate from the data being shared.
"
3222,Negative,"Ok, reopening this. It actually works with the standalone build: https://jsfiddle.net/Linusborg/chw886jk/1/

So it should work with runtime-only and precomiled templates. Seems like a bug indeed.

Sorry for the premature close.
"
3223,Neutral,"1、重现代码请见#1656 回复内容，直接在给的grid案例上加上几行代码就可以重现。
2、2&3既然是你给的回复，那么就是官方的了。
     文档又仔细看了一遍，对于非字符串类型并没有强调说明必须是表达式。
     对于bool 、数值等可以像字符串一样设置属性值，是不是更简洁些？
"
3224,Neutral,"With your latest comment in mind, my proposal would be to then clone the old item when a new one gets swapped in. The cloned object will not have reactive properties. Then, take that cloned object and assign it back to the array: `items[oldIndex] = Object.assign({}, oldItem)`

In this method, you maintain the single source of truth because the picked item is being made reactive in-place when you pick it, and then cloned back to a non-reactive item when you're done with it."
3225,Neutral,"the code from Fiddle
"
3226,Neutral,"@patrick-hertling I don't think this should be solved by vue, but rather by the external library you are using. With jQuery-stuff you should `$(element).trigger('change')` or `$(element).trigger('input')`, depending on your needs. In general case, custom two-way directives are the solution you might be looking for.
"
3227,Neutral,"i checked the dist/vue.js source code its the line dont change this i made this only for me
5549 
i changed from
`var decoder = document.createElement('div')`
to and now it works not sure this will break other stuff but why should it xD
`var decoder = inBrowser ? document.createElement('div') : false`


"
3228,Positive,"@simplesmiler it works!  thanks
"
3229,Positive,"What @gamperl said ;)
"
3230,Positive,"OK, I'll take a look :)
"
3231,Neutral,"@SeoFood What about sharing that directive? :stuck_out_tongue: 
"
3232,Neutral,"no, they wouldn't
Right now, a non required prop with no value never runs the validator which means that in order to support your usecase, we'll have to run the validator even when a value is not provided, which will show a warning (or throw an error depending of the validator) for other people using them to actually validate the information. Basically, I think `validator` is the wrong place to do this.
We could maybe support a function for `required` that gets passed all the props:

```js
required: ({a, b}) => a || b
```
But this should be stripped off on production 🤔
edit: I'm not sur letting `required` be a function is a good idea"
3233,Positive,Please follow the [Issue Reporting Guidelines](https://github.com/vuejs/vue/blob/dev/.github/CONTRIBUTING.md#issue-reporting-guidelines) and provide a minimal JSFiddle or Github repository containing a set of reproducible steps that can lead to the behaviour you described. Make sure to boil down the problem as much as possible. Thanks!
3234,Negative,"Do you have any reason why you have to debug the issue in production? You should be using the non-minified version during development.
"
3235,Positive,"Hi, thanks for your interest but Github issues are for bug reports and feature requests only. You can ask questions on the [forum](http://forum.vuejs.org/), the [Discord server](https://vue-land.js.org/), [gitter](https://gitter.im/vuejs/vue) or [StackOverflow](http://stackoverflow.com/tags/vue.js).

---

It's probably better to use a component for that purpose (let the dev pass components) or use slots. That also allows you to combine jsx and templates in one project"
3236,Positive,"@LinusBorg 
I'm ok with this, I think you meant @leupom ;D"
3237,Negative,"@posva I think it is not working as expected, because it does not make sense that when I make computed data with `no cache`, then call it again in component. At last I will get the value never computed.

It will make me confuse that it is not computed value, just a cached value, although it is cache: false.
"
3238,Negative,"For me filters feel are very beautiful, the syntax is exactly what a filter syntax should look like.

Also one attractive thing about Vue for me is that it comes with (some) batteries included. It would be really sad to lose either of these things -- both which, in my opinion, make Vue stand out.
"
3239,Neutral,"You mean `{{$value}}` & `{{$index}}` doesn't belongs to the parent scope in the following ?

```
<div v-repeat=""items"" v-component=""component-demo"">{{$value}} - number {{$index}}</div>
```
"
3240,Neutral,"@jkzing, Oh, so you told him it's expected behaviour as I see. Can I close this issue?"
3241,Neutral,"Could 'computed' values,  with a set option resolve this issue for you? Could you post a small example of the code surrounding your needs so we can try to evaluate your use case. 
"
3242,Negative,I'm sorry but I don't understand what you are requesting. the Vue core library doesn't offer e2e testing or AJAX functionality.
3243,Neutral,Computed properties are the best way. You get automatic caching.
3244,Neutral,"Please provide a debuggable reproduction using jsfiddle or a similar service.
"
3245,Negative,"Why the separate `prop-` prefix? Why not just use `bind-` for properties too? And if there's no `bind-` prefix, it becomes a literal string.

I'm also torn about losing mustaches. This makes sense, and it would be nice to still be able to do it:

```
<p class=""a b {{c}}"" title=""More info: {{foo}}"">{{bar}}</p>
<my-component foo=""foo-{{bar}}"">{{baz}}</my-component>
```

(if `bar === 123`, the value of foo in my-component here should be the string ""foo-123"").

But then you have this:

```
<my-component foo=""{{bar}}"">{{baz}}</my-component>
```

This should mean that the value of foo is always a string, and it's always a one-way binding, the same way `<input value=""{{foo}}"" />` works. It actually means `bind-foo=""bar""` (so you can do `foo=""{{'123'}}""` to pass a string and `foo=""{{123}}""` to pass a number), and it would break BC to change that.
If it were changed to just string templating, which would be consistent, the difference between this and `bind-` would be subtle and confusing. It would make sense, but only if you think about it.

Also, taking this to its logical extreme:

```
<my-component bind-foo=""prop{{bar}}"">{{baz}}</my-component>
```

which would mean bind `foo` to the variable whose name starts with `""prop""` and ends with the value in `bar`.
"
3246,Neutral,"@pesho having to nest methods is a sign that you might be putting too much responsibilty in a single ViewModel. Split the logic into smaller components when appropriate.
"
3247,Positive,"Alright, thank you for explaining, that really helped!
"
3248,Positive,"Nice! I had tried to use the javascript effects, but the docs weren't enough for my brains to understand..., but now with the jsfiddle example I finally got it! Thanks!

For learning more, I extended your jsfiddle into an Accordion list with a nice slideTransition. http://jsfiddle.net/jola16/v24SV/
It works quite nice, but I now run into a different _problem_:

How can/should a parent VM access its children VMs (created by a v-repeat)? I ended up with this ugly code accessing the internal state of the parent VM:

``` javascript
                var childCompilers = this.$compiler.childCompilers;
                for (i = 0; i < childCompilers.length; i++) {
                    var childItem = childCompilers[i].vm;
                    ...
```

I guess/hope there is some other better way?
"
3249,Negative,"I've never used two-way filters, but I would really miss the filters! I can (and sometimes I do) use computed properties, but in some simple cases, it is a convenience that really speeds up the workflow.

Consider this very simple example 

``` html
<input type=""text"" v-model=""filter"">

<ul>
    <li v-for=""item in items | filterBy filter"">{{ item }}</li>
</ul>
```

The above is so much easier to write in cases where it's not required to have some more complex filtering.

Now compare it to the following

``` html
<input type=""text"" v-model=""filter"">

<ul>
    <li v-for=""item in filteredItems"">{{ item }}</li>
</ul>
```

``` javascript
new Vue({
    el: 'body',

    data: {
        items: [],
        filter: ''
    },

    computed: {
        filteredItems() {
            var self = this
            return this.items.filter(function(item) {
                return item.indexOf(self.filter) > -1
            })
        }
    }
})
```

I'm not saying the second one is hard to write, but when you use it in many places, you will start repeating yourself, and it just takes some extra time you could perhaps use on some other, more useful features!

Either way I will stay a happy Vue user, just sharing my opinion on the filters being deprecated!
"
3250,Negative,"@simplesmiler  v0.11.10  sorry ,I got the wrong version 
"
3251,Negative,"Well. According to [Wikipedia](https://en.wikipedia.org/wiki/Mixin#Definition) I would not say that there is no ""common sense"" for mixins. Also I wouldn't say that `Vue.extends` works consistently here. On the other hand, just documenting this more accurately would have saved some nerves."
3252,Negative,"Input tags are self closing, so yeah...
I think it's worth mentioning in the guide a tiny example about a textarea. I couldn't find one
"
3253,Neutral,"@leyec had similar issue in vue 2.0, with v-model on child component that wraps an input.  When the input is changed the browser (Chrome) froze. Had to restart be browser.

The issue was with ""this.$emit('input', this.someValue)"" on child input. Solved the issue by changing the 'this.someValue' to string ""this.$emit('input', """" + this.someValue)""

This issue was solved,
"
3254,Neutral,"Oh, check the console, we have `[Vue warn]: Error compiling template`"
3255,Neutral,"This is a little off-topic.

Since filters are supported in `v-bind` expressions again after version 2.1.0 (https://github.com/vuejs/vue/commit/71ce60da9a355263ad520acead8b7380dd2e1ae7), does this issue need to be revisited? Maybe some syntax improvement that could distinguish actual filters from bitwise operations?

On the other hand, as of the [migration guide](https://vuejs.org/v2/guide/migration.html#Filters), filters in directives (including `v-bind`) were deprecated. The same objectives can still be done with computed properties. So I'm wondering whether adding this feature back is against the original idea. Any insights to share?
"
3256,Neutral,"@For-me I've struggled with focus in the past, and written a module that helps with common focus use cases: https://github.com/simplesmiler/vue-focus
In this particular use case you would put `v-focus-auto` on the input.
"
3257,Neutral,"@ayamflow  i reckon you will want to pick the old element up in any lifecycle callback before 'attach', such as 'created'?

also, you may be able to pick up embedded template by using the hash tag:

> If it starts with # it will be used as a querySelector and use the selected element’s innerHTML and the template string. This allows the use of the common `<script type=""x-template"">` trick to include templates.

http://vuejs.org/api/options.html
"
3258,Neutral,"moved to mithril.
"
3259,Positive,Thanks for the solution on v-model.number. @pengchongfu @javoski 
3260,Neutral,"Cannot reproduce in latest version. I think this has been fixed a while ago, you are likely using an old version."
3261,Neutral,"方便提供一个可重现的例子吗？
"
3262,Positive,"> will call move(something) right away, and set its returned value to binding.value, which is not what we want.

Unfortunately, yes, it is. The `v-on` directive is an exception because you often need to execute an inline statement. On the other hand, a custom directive, as other directives, expects a value. This would also be a breaking change

You can already pass a function (no params):

```html
<element v-directive=""dontCallMeNow""></element>
```

and, as in your example, bind arguments with `bind`

```html
<element v-directive=""dontCallMeNow.bind(null, parameter)""></element>
```

`bind` being a commonly used part of js, it's better to know it and benefit from 🙂 "
3263,Positive,"Indeed, it is all javascript. 
Playing much better now with new Vue 2 transitions!
"
3264,Negative,"The fiddle isn't really reproducing the issue, so I can only give vague feedback.

`<keep-alive>` is designed for the case where it has one direct child component that is being toggled - it can't work if you have `v-for` inside it, nor does it work if you wrap it on the entire `<transition-group>` (unless you are toggling the transition group instead).

More importantly - I don't think it's a good idea using `<keep-alive>` for state preservation like this, especially with `v-for` and `<transition-group>` involved, both of which are inherently working with **lists** instead of a single toggled child. I recommend thinking from another angle - hoist the ratings state out into a shared state object or a vuex store so that it's unaffected by the components' lifecycles."
3265,Positive,"Will do!
"
3266,Neutral,"Does the gmaps provide an API to listen on the enter event on select suggestions? You might have to just do it manually there.
"
3267,Positive,"@fnlctrl , thanks for your response. That dynamic component pattern can meet the requirement if we have no ""dynamically loaded template"".  The templatestr string data works as the template for the FirstSub/lastSub component. 
The only gap here is: how we dynamic compile and make alive FirstSub component with its template and other data in live reactive manner. 
thanks to @yyx990803 , i found async component pattern can bridge some gap(can make dynamic loaded html into live). @fnlctrl , Unfortunately, i do not know how to give props to async component.
That is to say: if  yourComponentsFromAPI contains an async component, how can we access the some-prop property within that async component??

Again, I have raised one stackoverflow for that specific question:
http://stackoverflow.com/questions/38344091/vuejs-can-we-give-props-to-async-component-via-dynamic-component-pattern-compo

Thanks~!
"
3268,Positive,"Oh nvm, yeah we have validations in place. Honestly though, I don't think we will change the current behavior because the value it provides is somewhat subjective while introducing API churn."
3269,Negative,FYI ignoring composition events on desktop is necessary to ensure correct syncing behavior. Not sure if this is even possible to fix if the user does not finish composition.
3270,Negative,"Actually for some reason `this.currentTab` doesn't have `$set` defined in my example. I'm not really sure why: [jsfiddle](http://jsfiddle.net/cxy2z0m3/1/).

Anyway my vote is for a Vue warning in this situation. I think having plenty of warnings in the development version is a good idea.
"
3271,Neutral,"This is totally expected behavior - if you return before the line that accesses `this.now` is even evaluated, then `this.now` will not be registered as a dependency for the computed property. This is in fact the **desired behavior**: because in this case the return result has nothing to do with `this.now`, so re-calculating when `this.now` changes is unnecessary.

Only when `this.problematicProp` becomes truthy will it re-calculate, and then it will track `this.now` because now the returned value depends on it."
3272,Positive,"Thanks. I use `is` attribute for working around it. https://jsfiddle.net/0xgj83up/
"
3273,Neutral,"https://github.com/vuejs/vue/releases
"
3274,Positive,"Yup, I am aware of that :)"
3275,Neutral,"http://cn.vuejs.org/guide/components.html#异步组件
"
3276,Neutral,"Of course it does, that's why you use `v-show` to do that and you don't have a `v-else` along with it.
"
3277,Neutral,Can this be reopened since mentioned pull request was abandoned?
3278,Neutral,"比如如果你在 `data` 里面有一个 `a`，之后你设置 `vm.a = document`，这时候 Vue 就会去视图观察 document 对象，但是如果对象上有不允许用 `Object.defineProperty` 改写的属性，就会报错。简单来说，如果是不适合观察的对象，就不要放到 vm 的 data 选项里。
"
3279,Neutral,"@sun-slaven if you can, please provide a reproduction. All scoped slots related specs are passing so we can't really tell what is wrong without a repro."
3280,Negative,"Even if the instance has been destroyed, it is still a valid object. You can assign `me.qux` and whatever else other than the bound props. This is a side-effect of Object.defineProperty(). As Evan said ""99.9% of the time you don’t even need to think about it"", then this is the 0.01% that I must always take care of in EVERY ajax and other async callbacks.
"
3281,Positive,"Hello Astra-git,

thanks for your report and the provided reproduction fiddle.

Did you provide the correct version of your fiddle? it's missing the exernal vue.js file library and the template for the `test` component (which you nest in itself without a clear reason/relation to the issue) seems unfinished.

I can kind of see what you refer to, but it's not really conclusive.

Anyways, what I  think is happening is that your code kind of gets ahead of itself and runs in a circle:
- you set the prop `this.parentNumber` to `1`
- This will trigger the two-way sync and propagate the value to the item in the parent.
- But you also set `this.item.number` to 0 immediatly afterwards - and you do this on the _original object_, not the `parentNumber` prop.

So now we have some kind of a race condition: you change a two-way prop which triggers an event to update the parent element, and at the same time you update said parent element dírectly, which should trigger a downwards update of the prop `parentNumber` ...

The result now depends when which reactive update event fires, beause reactive updates are async:
- first, the direct update of `this.item.number` succeeds, because this happens synchroneously. the parent object' number property is now `0`
- only then, after the stack is done, the reactive update to the parent from the two-way prop comes along, changing it to 1,
- ...and the first change to 0 already triggered a rreactive event downwards, changing the prop `parentNumber` to 0.

This is a first guess/observation, but the bottom line is, ttwo-way bindings are a bitch to debug, especially when you tinker with both sides of the binding at the same time (if setting to 0 and to 1 is done on `this.parentNumber`, everything behaves normally).

So I don't think it's a bug, but simply a side-effect of an anti-pattern when working with two-way bindings.
"
3282,Neutral,"Have you tried `JSON.parse(JSON.stringify(field))`?
"
3283,Neutral,"Closing (inactivity)
"
3284,Neutral,"This bites me some times, too. I'd vote to at least generate a warning in case `v-model` encounters an `undefined`.

In my case I have to introduce the boilerplate if the form content is dynamic, e.g. multiple instances can be created by an `add` button. For example:

```html
<div v-for='item in items'>
  <input type=""text"" v-model=""item.first_name""></input>
  <input type=""text"" v-model=""item.last_name""></input>
  ... 10 more inputs ...
</div>
<button @click.prevent='add_new_item'>Add new item</button>
```

```js
...
props: {
  items: {
    handler: Array,
    default() { return [] }
  }
},
methods: {
  add_new_item() {
    // `this.items.push({})` does not work
    // instead each attribute must be provided for reactivity:
    this.items.push({
      first_name: '',
      last_name: '',
      ... 10 more keys ...
   })
  }
}
...
```

It often happened to me that I added a new input in the template but forgot to add the key in the `add_new_item()` method. So at least a warning would be nice if the property is `undefined`.

<sub>(Or is there a better practice for that particular use case?)</sub>"
3285,Positive,"Awesome, thank you!
"
3286,Neutral,"Please be more specific... likely your method is returning `null` or `undefined`, which will be rendered as empty.
"
3287,Neutral,"Update: It looks like the breaking change might be as early as  `0.11.5`
"
3288,Positive,"Hello, your issue has been closed because it does not conform to our issue requirements. Please use the [Issue Helper](https://new-issue.vuejs.org) to create an issue - thank you!
"
3289,Negative,"I'm using Chrome as well and this is what i get: http://gfycat.com/ForkedDeliriousCockatiel

Your solution does seem to help though as i kind of understand why it's doing it but i would have thought it would do it when the `activeIndex` increased as well as decreases instead of just when it decreases..
"
3290,Neutral,"The issue was closed because it does not follow the [guideline](https://github.com/vuejs/vue/blob/dev/CONTRIBUTING.md#issue-reporting-guidelines). We encourage you to ask usage questions on [forum](https://forum.vuejs.org/) or [gitter](https://gitter.im/vuejs/vue). 
"
3291,Neutral,"I tested your fiddle locally, and interestingly, this is a bug in iOS itself: `<select multiple>` is just messed up. The weird behavior exists even without Vue involved at all.
"
3292,Neutral,"Please, next time ask questions on the [forum](http://forum.vuejs.org/) or [StackOverflow](http://stackoverflow.com/tags/vue.js).

Simply pass it as a string by not binding it:

```html
<ActionButton :id=""1""
          user-name=""Awesome Me""
          :main=""1"" />
```"
3293,Negative,"@posva actually, I still think this is a bug. Here's why. When you remove dynamic value binding in your example, it stops working in IE11. Looks like the value needs to be added using domProps not attrs

Working example using custom component - http://jsfiddle.net/rgk59d4e/2/

And I guess the progress element check needs to be added here https://github.com/vuejs/vue/blob/a12d32a56df2519c9cdf8d2da9d9425876263f89/src/platforms/web/util/attrs.js#L10

Btw. Edge has the same problem ;)"
3294,Neutral,"Closing (inactivity)
"
3295,Neutral,"with this component I use different methods: pesca, scarta..
"
3296,Positive,"This is working as intended. You'll find a better explanation [here](http://vuejs.org/guide/list.html#Caveats) :smile:
"
3297,Neutral,"why is it trying to connect on port 5432, the https server should be running off port 3000"
3298,Neutral,"Completely agree on all of the drawbacks – just struggling to find a good way to deal with these dynamic binding issues.

I just tested this in my jsfiddle and it worked:

```
<input v-model=""$data[id]"">
```

https://jsfiddle.net/bgbcomb2/3/

Is that safe for top level attribute binding?
"
3299,Positive,"Glad to hear it will eventually be implemented in future versions. Thanks
"
3300,Positive,@thollar13 : thank you for the solution. How would that work in a component where `data` is a function?
3301,Neutral,".Net version supports RemotingObservable
http://dotnetinside.com/in/framework/Reactive+Extensions/System.Reactive.Runtime.Remoting/RemotingObservable

Provide a similar solution using Java RMI Library as a first implementation and then prototype other transport mechanism.

Thoughts?
"
3302,Negative,"Not sure if this is a bug or a misunderstanding of the way timeouts should work.

When specifiying a timeout on an observable in combination with a Scheduler to observeOn, the exception exception handling code does not occur on the scheduler but on an RxComputationThread. For an example see the test class below. This has 2 tests which both create an Observable and modify it to observe on a custom scheduler with a single named thread. One throws an exception explicitly and we can see the onError() method being called on the named thread. The second specifies a timeout of 100ms then delays by a second before sending emissions, so causing a TimeoutException - however this exception happens on a computation thread.

In my production code I'm using JavaFX and am specifying a scheduler that runs on the JavaFX thread so I can update controls and display error popups safely, but if a timeout occurs I'm having to wrap in a  Runnable and call Platform.runLater() which seems to defeat the point. I can't find any explicit documentation on this so not sure whether this is intentional or a bug, or whether I'm using it incorrectly.

**EDIT**: It seems that ordering the timeout() call **before** the observeOn() call has the desired result - is this the way it should be used?
# 

``` java
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.CountDownLatch;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.TimeoutException;
import java.util.function.Consumer;

import org.junit.Test;
import rx.Observable;
import rx.Scheduler;
import rx.Subscriber;
import rx.schedulers.Schedulers;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * Tests to ensure RxJava events are on the expected threads
 */
public class RxJavaThreadTest {

  @Test
  public void sendValuesAndException() throws InterruptedException {
    Observable<String> observable = createObservable(this::sendValuesAndThrowable);
    MySubscriber subscriber = new MySubscriber();
    observable
          .observeOn(createNamedScheduler(""My thread""))
          .subscribe(subscriber);
    subscriber.awaitCompletion();

    assertThat(subscriber.getThrowable()).hasMessage(""my exception"");
    assertThat(subscriber.onErrorThreadName()).isEqualTo(""My thread"");
  }

  @Test
  public void timeout() throws InterruptedException {
    Observable<String> observable = createObservable(this::sendValuesWithDelay);
    MySubscriber subscriber = new MySubscriber();
    observable
          .observeOn(createNamedScheduler(""My thread""))
          .timeout(100, TimeUnit.MILLISECONDS)
          .subscribe(subscriber);
    subscriber.awaitCompletion();

    assertThat(subscriber.getThrowable()).isExactlyInstanceOf(TimeoutException.class);
    assertThat(subscriber.onErrorThreadName()).isEqualTo(""My thread"");
  }

  private Scheduler createNamedScheduler(String name) {
    return Schedulers.from(Executors.newSingleThreadExecutor(runnable -> new Thread(runnable, name)));
  }

  private Observable<String> createObservable(Consumer<Subscriber<? super String>> consumer) {
    return Observable.create(new Observable.OnSubscribe<String>() {
      @Override
      public void call(Subscriber<? super String> sub) {
        consumer.accept(sub);
      }
    });
  }

  private void sendValuesAndThrowable(Subscriber<? super String> sub) {
    sub.onNext(""a"");
    sub.onNext(""b"");
    sub.onNext(""c"");
    sub.onError(new Exception(""my exception""));
  }

  private void sendValuesWithDelay(Subscriber<? super String> sub) {
    //Pause for a second before sending data
    try {
      Thread.sleep(1000);
    } catch (InterruptedException e) {
      //ignore
    }
    sub.onNext(""a"");
    sub.onNext(""b"");
    sub.onNext(""c"");
    sub.onCompleted();
  }

  private static class MySubscriber extends Subscriber<String> {

    private final CountDownLatch latch = new CountDownLatch(1);
    private final List<String> collectedValues = new ArrayList<>();
    private Throwable throwable = null;
    private String onErrorThreadName = null;


    @Override
    public void onCompleted() {
      latch.countDown();
    }

    @Override
    public void onError(Throwable throwable) {
      this.throwable = throwable;
      this.onErrorThreadName = Thread.currentThread().getName();
      latch.countDown();
    }

    @Override
    public void onNext(String value) {
      collectedValues.add(value);
    }

    public void awaitCompletion() throws InterruptedException {
      latch.await();
    }

    public Throwable getThrowable() {
      return throwable;
    }

    public List<String> getCollectedValues() {
      return Collections.unmodifiableList(collectedValues);
    }

    public String onErrorThreadName() {
      return onErrorThreadName;
    }
  }
}
```
"
3303,Neutral,"```
io.reactivex.internal.operators.observable.NbpOnSubscribeRefCountTest > testRepeat FAILED
    java.lang.AssertionError: Subscriber still running! Error(s) present: [java.lang.IllegalStateException: onSubscribe not called in proper order]
        at io.reactivex.observers.TestObserver.fail(TestObserver.java:302)
        at io.reactivex.observers.TestObserver.assertNoErrors(TestObserver.java:365)
        at io.reactivex.internal.operators.observable.NbpOnSubscribeRefCountTest.testRepeat(NbpOnSubscribeRefCountTest.java:197)
        Caused by:
        io.reactivex.exceptions.CompositeException
            at io.reactivex.observers.TestObserver.fail(TestObserver.java:303)
            ... 2 more
            Caused by:
            io.reactivex.exceptions.CompositeException$CompositeExceptionCausalChain: Chain of Causes for CompositeException In Order Received =>
                Caused by:
                java.lang.IllegalStateException: onSubscribe not called in proper order
```
"
3304,Neutral,"http://reactivex.io/rxscala/scaladoc/index.html#rx.lang.scala.Observable@subscribe():rx.lang.scala.Subscription

subscribe() takes no parameters, so the following documentation seems to be incorrect ""Call this method to subscribe an rx.lang.scala.Observer for receiving items and notifications from the Observable.""
"
3305,Neutral,"I wanted to use the replay operator but with a ""smart"" buffer. Basically it only stores the latest version of each entity I'm emitting. I noticed there was API to pass a buffer factory to replay, however the ReplayBuffer interface is package level restricted. And I wanted to extend the BoundedReplayBuffer implementation, but that was package level as well, plus had methods marked final. 

What I ended up having to do was copy the OperatorReplay class into my own code. This will make taking future updates more difficult. 

Would it be possible to expose the ReplayBuffer interface and the implementations?
"
3306,Neutral,"Here is an example of an operator that attaches a `Subscription` to the operator's subscriber:

```
public class AttachSubscriptionOperator<T> implements Observable.Operator<T, T> {

    private final Subscription subscription;

    public AttachSubscriptionOperator(Subscription subscription) {
        this.subscription = subscription;
    }

    @Override
    public Subscriber<? super T> call(Subscriber<? super T> child) {
        child.add(subscription);
        return child;
    }

}
```

Does it make sense to create a PR with an `Observable#attach()` method? I personally find it useful but is it really or indicates bad code design (because the subscriptions are getting attached to subscribers, thus creating confusion)?
"
3307,Neutral,"The following code showcases the problem:
```java
Completable.complete()
  .doOnEvent(t -> {})
```
`t` in this case is annotated with `@NonNull` but it will be `null` since the completable completes.

This is a real pain in Kotlin since the following code crashes in runtime:
```kotlin
Completable.complete()
  .doOnEvent {}
```"
3308,Neutral,"The problem can be reproduced using a variety of downstream operators such as zip, zipWith, mergeWith, concatEager, but only if the requested observable is delayed (simulating an async source).  Zip and mergeWith use cases require at least 90 items to be emitted (likely related to a buffer size and request-more threshold)

Below is the list of test case with delay on/off, and different item counts.

```java
 private Observable<Integer> createAsyncOnSubscribe(int count, boolean delay, Scheduler scheduler) {
    return Observable.create(AsyncOnSubscribe.<Integer,Integer>createStateful(()->0,(state, requested, emitter)->{
      if (state == 0) {
        Observable<Integer> items = Observable.range(0, count);
        emitter.onNext(delay? items.delay(1, TimeUnit.SECONDS, scheduler) : items);
      } else {
        emitter.onCompleted();
      }
      return state + 1;
    }))
    .timeout(1, TimeUnit.MINUTES, scheduler);
  }
  
  @Test
  public void testConcatEagerSingleNoDelay() {
    System.out.println(""\nconcatEager single no delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concatEager(Observable.just(createAsyncOnSubscribe(1, false, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testConcatEagerSingleDelay() {
    System.out.println(""\nconcatEager single with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concatEager(Observable.just(createAsyncOnSubscribe(1, true, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testConcatEager100Delay() {
    System.out.println(""\nconcatEager 100 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concatEager(Observable.just(createAsyncOnSubscribe(100, true, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testConcatEager50Delay() {
    System.out.println(""\nconcatEager 50 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concatEager(Observable.just(createAsyncOnSubscribe(50, true, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testConcatEagerEmptyDelay() {
    System.out.println(""\nconcatEager empty with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concatEager(Observable.just(createAsyncOnSubscribe(0, true, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testConcatSingleDelay() {
    System.out.println(""\nconcat single with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.concat(Observable.just(createAsyncOnSubscribe(1, true, sched))).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZip100NoDelay() {
    System.out.println(""\nzip 100 no delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.zip(Observable.just(createAsyncOnSubscribe(100, false, sched)), items->items[0]).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZip100Delay() {
    System.out.println(""\nzip 100 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.zip(Observable.just(createAsyncOnSubscribe(100, true, sched)), items->items[0]).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZip50Delay() {
    System.out.println(""\nzip 50 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    Observable.zip(Observable.just(createAsyncOnSubscribe(50, true, sched)), items->items[0]).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZipWith100Delay() {
    System.out.println(""\nzipWith 100 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(100, true, sched).zipWith(Observable.range(0,Integer.MAX_VALUE), (x,y)->x).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZipWith100NoDelay() {
    System.out.println(""\nzipWith 100 no delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(100, false, sched).zipWith(Observable.range(0,Integer.MAX_VALUE), (x,y)->x).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testZipWith50Delay() {
    System.out.println(""\nzipWith 50 no delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(50, true, sched).zipWith(Observable.just(0), (x,y)->x).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testMergeWith100Delay() {
    System.out.println(""\nmergeWith 100 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(100, true, sched).mergeWith(Observable.just(0)).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }


  @Test
  public void testMergeWith100NoDelay() {
    System.out.println(""\nmergeWith 100 no delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(100, false, sched).mergeWith(Observable.just(0)).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }

  @Test
  public void testMergeWithRange50Delay() {
    System.out.println(""\nmergeWith 50 with delay:"");
    TestScheduler sched = Schedulers.test();
    TestSubscriber<Object> ts = new TestSubscriber<>(); 
    createAsyncOnSubscribe(50, true, sched).mergeWith(Observable.just(0)).subscribe(ts);
    sched.advanceTimeBy(1, TimeUnit.HOURS);
    System.out.println(""errors:"" + ts.getOnErrorEvents());
    ts.assertCompleted();
  }


```

This is the test output:


zipWith 100 with delay:
errors:[java.util.concurrent.TimeoutException]

mergeWith 100 with delay:
errors:[java.util.concurrent.TimeoutException]

concatEager single no delay:
errors:[]

concatEager 50 with delay:
errors:[java.util.concurrent.TimeoutException]

zip 50 with delay:
errors:[]

concatEager single with delay:
errors:[java.util.concurrent.TimeoutException]

mergeWith 50 with delay:
errors:[]

concatEager empty with delay:
errors:[]

zip 100 with delay:
errors:[java.util.concurrent.TimeoutException]

zipWith 50 no delay:
errors:[]

zipWith 100 no delay:
errors:[]

concat single with delay:
errors:[]

concatEager 100 with delay:
errors:[java.util.concurrent.TimeoutException]

zip 100 no delay:
errors:[]

mergeWith 100 no delay:
errors:[]
"
3309,Neutral,"It has become somewhat of an inconvenience to update `CHANGES.md` before pasting in the release text into the GitHub's own release page, causing a full build before the release build just for that single file.

I don't remember exactly why `CHANGES.md` was introduced but my assumption is that searching inside it via CTRL+F is simpler than searching within the [Releases](https://github.com/ReactiveX/RxJava/releases) tab.

Options:

- Keep it.
- Drop it.
- Use a dedicated wiki page instead.
"
3310,Neutral,"Please add 

```
map(Func2<? super T, int index, ? extends R> func)
```

Where the second parameter of `Func2` is the index of the element.

A similar overload could be useful on operators like `scan`, `reduce`, `filter` etc.
"
3311,Neutral,"Hi

I'm not completely sure about, if this is a potential problem.
In rx.internal.operators.OperatorDebounceWithTime, there is DebounceState with a member boolean variable ""emitting"", which shall protect against a race condition.

Afaik this variable must be declared as volatile to ensure, the other thread reading this variable is really seeing it changed.

Frank
"
3312,Negative,"Should we add support for recursive scheduling in RxScala? The signature `def schedule(action: => Unit): Subscription` is very elegant for single shot work, but recursive scheduling (https://github.com/Netflix/RxJava/wiki/Scheduler) is less nice.
"
3313,Neutral,"Looks like a timeout issue.

```
io.reactivex.internal.operators.observable.NbpOperatorConcatTest > testIssue2890NoStackoverflow FAILED
    java.lang.AssertionError: expected:<5000> but was:<3797>
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:834)
        at org.junit.Assert.assertEquals(Assert.java:645)
        at org.junit.Assert.assertEquals(Assert.java:631)
        at io.reactivex.internal.operators.observable.NbpOperatorConcatTest.testIssue2890NoStackoverflow(NbpOperatorConcatTest.java:730)
```
"
3314,Neutral,"I have a library using v2 `Observable.just` like this:

``` java
return Observable.just(frame);
```

but the performance degrades compared with my creating a `Publisher` manually. I then tried this:

``` java
return (Subscriber<? super Frame> s) -> {
    s.onSubscribe(new ScalarSubscription<Frame>(s, frame));
};
```

The perf is then more-or-less equal. 

Here are perf numbers of my library with everything else the same except for the 3 variants of `just`.

Manual `Publisher`:

```
Iteration   1: 3602663.765 ops/s
Iteration   2: 3589466.569 ops/s
Iteration   3: 3540823.028 ops/s
Iteration   4: 3580512.428 ops/s
Iteration   5: 3599728.601 ops/s
```

Manual `Publisher` with `ScalarSubscription`:

```
Iteration   1: 3520232.687 ops/s
Iteration   2: 3487323.518 ops/s
Iteration   3: 3520324.490 ops/s
Iteration   4: 3502789.786 ops/s
Iteration   5: 3450273.680 ops/s
```

`Observable.just`:

```
Iteration   1: 3298463.662 ops/s
Iteration   2: 3343857.219 ops/s
Iteration   3: 3325536.413 ops/s
Iteration   4: 3192566.805 ops/s
Iteration   5: 3218123.155 ops/s
```

It seems that the cost may be because `Observable.just` requires allocating both a `Publisher` and an `Observable`. I'll dig further to see if we can eliminate this overhead.
"
3315,Neutral,"Describe their single-use nature. Explicitly mention `onStart`. Explicitly mention `dispose` or `cancel`. Maybe add code examples.

  - [x] `DisposableSubscriber`
  - [x] `DisposableCompletableObserver`
  - [x] `DisposableMaybeObserver`
  - [x] `DisposableSingleObserver`
  - [x] `DisposableObserver`
  - [x] `ResourceSubscriber` (also remove mention of `AsyncObserver`).
  - [x] `ResourceCompletableObserver`
  - [x] `ResourceMaybeObserver`
  - [x] `ResourceSingleObserver`
  - [x] `ResourceObserver`"
3316,Neutral,"Something about this doesn't let the JVM exit.

``` java
package learnrxjava.examples;

import java.util.concurrent.TimeUnit;

import rx.Observable;
import rx.Subscriber;
import rx.schedulers.Schedulers;

public class FlowControlWindowExample {

    public static void main(String args[]) {
        // buffer every 500ms (using 999999999 to mark start of output)
        hotStream().window(500, TimeUnit.MILLISECONDS).take(10).flatMap(w -> w.startWith(999999999)).toBlocking().forEach(System.out::println);

        // buffer 10 items at a time (using 999999999 to mark start of output)
        hotStream().window(10).take(2).flatMap(w -> w.startWith(999999999)).toBlocking().forEach(System.out::println);

        System.out.println(""Done"");
    }

    /**
     * This is an artificial source to demonstrate an infinite stream that bursts intermittently
     */
    public static Observable<Integer> hotStream() {
        return Observable.create((Subscriber<? super Integer> s) -> {
            while (!s.isUnsubscribed()) {
                // burst some number of items
                for (int i = 0; i < Math.random() * 20; i++) {
                    s.onNext(i);
                }
                try {
                    // sleep for a random amount of time
                    // NOTE: Only using Thread.sleep here as an artificial demo.
                    Thread.sleep((long) (Math.random() * 1000));
                } catch (Exception e) {
                    // do nothing
                }
            }
        }).subscribeOn(Schedulers.newThread()); // use newThread since we are using sleep to block
    }

}
```

Yet this one does so it's not about the use of `Scheduler`s:

``` java
package learnrxjava.examples;
import java.util.concurrent.TimeUnit;

import rx.Observable;
import rx.Subscriber;
import rx.schedulers.Schedulers;

public class FlowControlThrottleExample {

    public static void main(String args[]) {
        // first item emitted in each time window
        hotStream().throttleFirst(500, TimeUnit.MILLISECONDS).take(10).toBlocking().forEach(System.out::println);

        // last item emitted in each time window
        hotStream().throttleLast(500, TimeUnit.MILLISECONDS).take(10).toBlocking().forEach(System.out::println);
    }

    /**
     * This is an artificial source to demonstrate an infinite stream that emits randomly
     */
    public static Observable<Integer> hotStream() {
        return Observable.create((Subscriber<? super Integer> s) -> {
            int i = 0;
            while (!s.isUnsubscribed()) {
                s.onNext(i++);
                try {
                    // sleep for a random amount of time
                    // NOTE: Only using Thread.sleep here as an artificial demo.
                    Thread.sleep((long) (Math.random() * 100));
                } catch (Exception e) {
                    // do nothing
                }
            }
        }).subscribeOn(Schedulers.newThread());
    }

}
```
"
3317,Neutral,"[Uploading Help.txt…]()

import java.util.List;

public class aaa {
    List<Data> list;

```
private int getCount(){
    //for

//how can i do this whith Rxjava.....thanks
    int size=list.size();
    int count=0;
    for(int i=0;i<size;i++){

        count=count+list.get(i).count;

    }

  return count;
}





class Data{

    String name="""";
    int count;


}
```

}

I have a List<Data> and Data have an int count,i want use `Rxjava` to get All count of this List ,how can i do it?
"
3318,Neutral,"It looks like there are some flaky unit tests:

On my machine, this test failed today (but only once):

```
rx.operators.OperationNext$UnitTest.testOnErrorViaHasNext
```

On cloudbees, these tests seem to be flaky:

```
Build #278: rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions
Build #276: rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions
Build #237: rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions
Build #185: rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions
Build #251: rx.concurrency.TestSchedulers.testSchedulingWithDueTime
Build #277: rx.operators.OperationConcat$UnitTest.testConcatConcurrentWithInfinity
```

Edit: also

```
Build #290: rx.operators.OperationConcat$UnitTest.testConcatConcurrentWithInfinity 
```
"
3319,Neutral,"Now `rx.observables.BlockingObservable.last()` returns `null` when the Observable is empty. However, `null` is a valid value in an Observable. So when `last` returns `null`, we can not make a distinction between these two situations. I think throwing an `IndexOutOfBoundException` is more reasonable.
"
3320,Neutral,"When I use retry operator with ConnectableObservable, it doesn't call the call method of Observable.OnSubscribe again when it retries. Is it expected behavior? If it is, how can I call the connect() method again when it retries?
"
3321,Neutral,"I was building RxJava source code v1.1.6 and I got this test failed problem. The weird thing is that sometimes the test all passed, but sometimes it just fails like this:

testReplaySubjectConcurrentSubscriptions
java.lang.NullPointerException at rx.subjects.ReplaySubjectBoundedConcurrencyTest.testReplaySubjectConcurrentSubscriptions(ReplaySubjectBoundedConcurrencyTest.java:221)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:112)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:56)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:66)
    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
    at com.sun.proxy.$Proxy2.processTestClass(Unknown Source)
    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
    at sun.reflect.GeneratedMethodAccessor8.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:360)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:54)
    at org.gradle.internal.concurrent.StoppableExecutorImpl$1.run(StoppableExecutorImpl.java:40)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:745)
"
3322,Neutral,"``` java
Observable
.just(mToast)
.observeOn(AndroidSchedulers.mainThread())
.subscribe(new Action1<Toast>() {
    @Override
    public void call(Toast toast) {
       if (mToast == null) {
          mToast = Toast.makeText(MainActivity.this, ""test=================="", Toast.LENGTH_SHORT);
       } else {
           mToast.setText(""test===================="");
       }
       mToast.show();
   }
}).unsubscribe();
```

why the toast can‘t show？
"
3323,Neutral,"Currently the assertItem prints by the following statements, focus on ""_expected to be_""
```
private void assertItem(T expected, int i) {
        T actual = values.get(i);
        if (expected == null) {
            // check for null equality
            if (actual != null) {
                assertionError(""Value at index: "" + i + "" expected to be [null] but was: ["" + actual + ""]\n"");
            }
        } else if (!expected.equals(actual)) {
            assertionError(""Value at index: "" + i
                    + "" expected to be ["" + expected + ""] ("" + expected.getClass().getSimpleName()
                    + "") but was: ["" + actual + ""] ("" + (actual != null ? actual.getClass().getSimpleName() : ""null"") + "")\n"");

        }
    }
```

However, it does not match any of the IntelliJ assertion regex patterns, thus making it very difficult to visually compare expected and actual values. We forked `assertItem()` using one of the following patterns from [this](https://github.com/JetBrains/intellij-community/blob/3f7e93e20b7e79ba389adf593b3b59e46a3e01d1/plugins/testng/src/com/theoryinpractice/testng/model/TestProxy.java) and could immediately see the `<Click to see difference>` link in the IDE."
3324,Neutral,"```
rx.internal.operators.OperatorGroupByTest > testGroupsWithNestedSubscribeOn FAILED
    java.lang.AssertionError: expected:<4> but was:<3>
        at org.junit.Assert.fail(Assert.java:93)
        at org.junit.Assert.failNotEquals(Assert.java:647)
        at org.junit.Assert.assertEquals(Assert.java:128)
        at org.junit.Assert.assertEquals(Assert.java:472)
        at org.junit.Assert.assertEquals(Assert.java:456)
        at rx.internal.operators.OperatorGroupByTest.testGroupsWithNestedSubscribeOn(
             OperatorGroupByTest.java:915)
```
"
3325,Negative,"When a flowable works on the main thread, `request(long)` in `onSubscribe(Subscription)` always calls `onNext(T)` and then `onComplete()`.
Therefore, the code below `request(long)` in `onSubscribe(Subscription)` would be executed after `onNext(T)` and `onComplete()`.

```
Flowable.just(1, 2, 3).subscribe(new Subscriber<Integer>() {

  @Override
  public void onSubscribe(Subscription s) {
    s.request(Long.MAX_VALUE);
    System.out.println(""onSubscribe done"");
  }

  @Override
  public void onNext(Integer t) {
    System.out.println(t);
  }
  ...
}
```

The result is always like this.

```
1
2
3
onComplete called
onSubscribe done
```

I can avoid this by calling `request(long)` at the end of `onSubscribe()`.
However, this behavior is different from RxJava 1.x.

Also, there is a problem to override ResourceSubscriber's onStrat().
Since `request(long)` acts this way, if I want to do something in `onStart()`, I have to put `super.onStart()` on the bottom of `onStart()`.

```
@Override
protected void onStart() {
  initialize();
  super.onStart();
}
```

If I write below, `intitalize()` would be called after `onComplete()`.

```
@Override
protected void onStart() {
  super.onStart();
  initialize();
}
```

I think that this is a problem since developers always have to care about where they writie a request method.
"
3326,Neutral,"I'm quite new to this RX stuff so forgive me if there something simple I'm missing here.

I was trying to use scan and found that it did not behave as I expected. This code illustrates how:

``` java
public class ScanIssue
{
    public static void main(String[] args) throws InterruptedException
    {
        PublishSubject<Integer> source  = PublishSubject.create();

        Func2<Integer, Integer, Integer> accumulator = new Func2<Integer, Integer, Integer>()
        {
            @Override
            public Integer call(Integer a, Integer b)
            {
                return a + b;
            }
        };

        Observable<Integer> scan = Observable.scan(source, accumulator);
//        Observable<Integer> scan = Observable.scan(source, 0, accumulator);


        print(""A"", scan);
        print(""B"", scan);
        print(""C"", scan);
//        print(""D"", scan);
//        print(""E"", scan);

        Thread.sleep(1000);
        source.onNext(1);
        Thread.sleep(1000);
        source.onNext(1);
    }

    private static <T> void print(final String prefix, Observable<T> source)
    {
        source.subscribe(new Action1<T>()
        {
            @Override
            public void call(T s)
            {
                System.out.println(prefix + "": "" + s);
            }
        });
    }
}
```

I would expect it to output nothing on the first `onNext` and this on the second:

```
A: 2
B: 2
C: 2
```

Where I don't care about the order of A,B & C.

But instead it outputs this on the first one:

```
B: 1
B: 2
B: 3
```

and this on the second:

```
B: 4
B: 5
B: 6
```

_B_ can be any of A, B and C but always the same all 6 times.
- If I switch to the one with initial value it works as I expect
- The more subscriptions I add the worse it gets
- The type of source does not seem to matter (tried with a hand rolled one)
"
3327,Neutral,"Was looking at the source of [OperatorMulticast](https://github.com/Netflix/RxJava/blob/master/rxjava-core/src/main/java/rx/operators/OperatorMulticast.java) and  [OperatorMulticastSelector](https://github.com/Netflix/RxJava/blob/master/rxjava-core/src/main/java/rx/operators/OperatorMulticastSelector.java) and neither implements `Operator`. Is a rename in order here or are they going to be made into `Operator`s soonish?
"
3328,Negative,"The marble diagram source file at https://raw.github.com/wiki/Netflix/RxJava/images/rx-operators.graffle is corrupted due to a merge conflict during the latest commit. 

```
$ git log -1 images/rx-operators.graffle
commit a7d73bcadf719bce2266f9fff17beebc2240c75a
Merge: c8c10b3 798c14c
Date:   Tue May 6 10:01:58 2014 -0700

    Merge branch 'master' of https://github.com/Netflix/RxJava.wiki

    Conflicts:
        images/rx-operators.graffle
        images/rx-operators/window6.png
        images/rx-operators/window8.png
```

It contains loads of conflict markers and thus fails to open in OmniGraffle.
"
3329,Neutral,"Anyone have experience with Gitter.im? It looks like it may be a reasonable tool for collaboration.

https://gitter.im/ReactiveX/RxJava
"
3330,Negative,"Observable.create is deprecated and instead comment advises to use Observable.apply:
https://github.com/Netflix/RxJava/blob/master/language-adaptors/rxjava-scala/src/main/scala/rx/lang/scala/Observable.scala#L2589

The problem is, there is no way to supply unsubscribe action via ""apply"" function. 
For example: 

``` scala
val sub = Observable.apply[Int](observer => {
      println(""created"")
      Subscription({println(""Unsubscribed"")})
    }).subscribe(println(_), e => println(""error""), () => println(""complete1""))

    readLine()
    sub.unsubscribe()
    println(""complete"")
    readLine()
```

will never produce ""Unsubscribed"" string. To make it worse, replacing ""create"" with ""apply"" will compile and initialize subscription properly, it is only unsubscribe will stop work. 
If I have some resource created when subscribing (thread or socket), I'd like to be able to shutdown it. I do not see how it can be done if ""create"" is deprecated.

Also I could not find any unit test which would cover this use case. Subscription ""unsubscribe' actions are tested without integration with observable, so possible error when ""unsubscribe"" is not called is missing.
"
3331,Neutral,"Instead of multiple `compositeSubscription.add(subscription)` calls, it would be nice to be able to do something like `compositeSubscription.add(Subscription... subscriptions)`.

Currently you can only do something like this in the constructor for `CompositeSubscription`.
"
3332,Neutral,"I often have the use case that I want to map the `Throwable` emitted by an `onError` notification of an `Observable` to something else, for example wrapping or unwrapping it.

Maybe I missed something, but apparently there is no stock solution in RxJava to achieve this. Currently, I use a custom `Operator`. Would it make sense to add such an `Operator` along with its corresponding `Observable.mapError` / `Single.mapError` methods to RxJava directly?
"
3333,Neutral,"Noticed this behavior using rx-netty as internally it does a take(1) internally:

```
    AtomicLong inc = new AtomicLong(0);
    Observable.OnSubscribe<Long> onSubscribe = subscriber -> {
        final long emit = inc.getAndIncrement();
        LOGGER.info(""Emitting: {}"", emit);
        subscriber.onNext(emit);
        subscriber.onCompleted();
    };

    LOGGER.info(""DONE: {}"", Observable.create(onSubscribe)
                    .retryWhen(attempt -> attempt.zipWith(Observable.range(1, 4), (n, i) -> i))
                    .toBlocking()
                    .first()
    );
```

The test output is:
    Emitting: 0
    Emitting: 1
    DONE: 0

As you can see the observable is subscribed to twice. This is because take, in combination with single, causes the retryWhen producer to request another item.
"
3334,Neutral,"```
! java.util.ConcurrentModificationException: null
! at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:394) ~[na:1.7.0_60]
! at java.util.LinkedHashMap$KeyIterator.next(LinkedHashMap.java:405) ~[na:1.7.0_60]
! at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Subscriber.setProducer(Subscriber.java:177) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable.unsafeSubscribe(Observable.java:7495) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OperatorConcat$ConcatSubscriber.subscribeNext(OperatorConcat.java:176) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OperatorConcat$ConcatSubscriber.onNext(OperatorConcat.java:141) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OperatorConcat$ConcatSubscriber.onNext(OperatorConcat.java:78) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OnSubscribeFromIterable$IterableProducer.request(OnSubscribeFromIterable.java:96) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Subscriber.setProducer(Subscriber.java:177) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:47) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OnSubscribeFromIterable.call(OnSubscribeFromIterable.java:33) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:144) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable$1.call(Observable.java:136) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.Observable.unsafeSubscribe(Observable.java:7495) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.operators.OperatorSubscribeOn$1$1.call(OperatorSubscribeOn.java:62) ~[rxjava-1.0.8.jar:1.0.8]
! at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55) ~[rxjava-1.0.8.jar:1.0.8]
! at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) ~[na:1.7.0_60]
! at java.util.concurrent.FutureTask.run(FutureTask.java:262) ~[na:1.7.0_60]
! at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:178) ~[na:1.7.0_60]
! at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:292) ~[na:1.7.0_60]
! at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) ~[na:1.7.0_60]
! at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) ~[na:1.7.0_60]
! at java.lang.Thread.run(Thread.java:745) ~[na:1.7.0_60]
```
"
3335,Negative,"It looks like `throwIfFatal()` has some special cases for fatal errors, but `AssertionError` isn't included for some reason.  It seems to me that _all_ descendants of `Error` should be thrown as fatal (I've read the discussion about RxJava switching to using `Throwable` instead of `Exception`).

The issue I'm having is that my unit tests are failing without any reasonable error message.  This is because a mock object is throwing an `AssertionError` which is being swallowed by some observable and passed through `onError()`.  However, if I add `AssertionError` as another case in `throwIfFatal()`, then the errors bubble up correctly.
"
3336,Negative,"bindings for mergeMap are missing in RxScala. In fact, I would rather not expose mergeXXX in scala and just overload flatXXX. The default way to flatten Rx streams is merging.

Bindings for concatMap are missing as well, these should be added as themselves.
"
3337,Neutral,"`fromAsync()` sounds like it's ok to emit from multiple threads in parallel while in fact it doesn't serialize emission.

Can we rename it? For example to `Observable.fromCallback()` which also seems more obvious to use when you convert callback-styled code to `Observable`.
"
3338,Neutral,"```
io.reactivex.completable.CompletableTest > timerTestScheduler FAILED
    org.junit.runners.model.TestTimedOutException: test timed out after 1000 milliseconds
        at java.lang.Class.getDeclaredFields0(Native Method)
        at java.lang.Class.privateGetDeclaredFields(Class.java:2499)
        at java.lang.Class.getDeclaredField(Class.java:1951)
        at java.util.concurrent.PriorityBlockingQueue.<clinit>(PriorityBlockingQueue.java:945)
        at io.reactivex.schedulers.TestScheduler.<init>(TestScheduler.java:31)
        at io.reactivex.completable.CompletableTest.timerTestScheduler(CompletableTest.java:1141)
```
"
3339,Neutral,"Consider the following observable:

``` java
Observable.just(1)
  .delay(10, TimeUnit.Seconds)
  .scan(2, (accum, x) -> accum + x)
```

I would expect this to emit `2` immediately, and then 10 seconds later emit `3`. Instead it waits 10 seconds, and then emits `2` and `3` immediately.

Am I interpreting this incorrectly?
"
3340,Neutral,"Was working with a library that returns `ListenableFuture`s and was thinking of making the code a contrib module.  Is this worth it?

```
public class ListenableFutureObservable {

    /**
     * 
     * @param future
     * @param executor
     * @return
     */
    public static <T> Observable<T> from(final ListenableFuture<T> future, final Executor executor) {
        return Observable.create(new OnSubscribe<T>() {
            @Override
            public void call(final Subscriber<? super T> subscriber) {
                future.addListener(new Runnable() {
                    @Override
                    public void run() {
                        try {
                            subscriber.onNext(future.get());
                            subscriber.onCompleted();
                        } catch (Exception e) {
                            subscriber.onError(e);
                        }
                    }
                }, executor);
            }
        });
    }

    /**
     * 
     * @param observable
     * @return
     */
    public static <T> ListenableFuture<T> from(final Observable<T> observable) {
        ListenFutureSubscriberAdaptor<T> future = new ListenFutureSubscriberAdaptor<T>();

        // Futures are hot so subscribe immediately
        observable.single().subscribe(future.subscriber);

        return future;
    }

    private static final class ListenFutureSubscriberAdaptor<T> extends AbstractFuture<T> {
        final Subscriber<? super T> subscriber;

        private ListenFutureSubscriberAdaptor() {
            subscriber = new Subscriber<T>() {
                private T value;

                @Override
                public void onCompleted() {
                    set(value);
                }

                @Override
                public void onError(Throwable e) {
                    setException(e);
                }

                @Override
                public void onNext(T t) {
                    // wait for the onCompleted to make sure the observable only emits one value.
                    value = t;
                }
            };
        }

        @Override
        protected void interruptTask() {
            subscriber.unsubscribe();
        }
    }
}
```
"
3341,Neutral,"I am using RxJava 1.1.1 on Android and getting the following error:

``` java
Caused by java.util.ConcurrentModificationException
       at java.util.Hashtable$HashIterator.nextEntry(Hashtable.java:727)
       at java.util.Hashtable$EntryIterator.next(Hashtable.java:778)
       at java.util.Hashtable$EntryIterator.next(Hashtable.java:776)
       at rx.plugins.RxJavaPlugins.getPluginImplementationViaProperty(RxJavaPlugins.java:177)
       at rx.plugins.RxJavaPlugins.getSchedulersHook(RxJavaPlugins.java:232)
       at rx.schedulers.Schedulers.(Schedulers.java)
       at rx.schedulers.Schedulers.(Schedulers.java)
```

My code is 

``` java
unreadConversationsServer = unreadConversations;
      final Scheduler.Worker worker = Schedulers.io().createWorker();
      worker.schedule(() -> {
        try {
          computeUnreadUnSyncedConversationCount();
        } catch (Exception e) {
          Timber.e(e, ""Error while computing Unread Unsynced Conversation Count"");
        }
        worker.unsubscribe();
      });
```

Full detail here: http://crashes.to/s/4ecb8083b7f
"
3342,Negative,"# The Problem:

Creating Back-Pressure Enabled Observables that produce data from a non-blocking source is hard and our current APIs for creating arbitrary observables do not lend towards creating observables that respect the back pressure rules. Users have a choice between calling one of the Observable static method to generate standard case observables using well known patterns or they can attempt to implement a responsible observable out of an `OnSubscribe<T>`. I will define a ""responsible Observable"" to be an observable that does the following:
- calls `subscriber.onNext(t)` only when the `subscriberCapacity > 0` where `subscriberCapacity` is the sum of the integer arguments for all invocations of `producer.request(n)` minus the number of calls made to `subscriber.onNext(t)`.
- calls `subscriber.onCompleted()` or `subscriber.onError(e)` only once.
- does not call `subscriber.onNext(t)` concurrently.

The onSubscribe lifecycle of a responsible observable should fit within the following lifecycle.
1. The `onSubscribe.call(Subscriber<T>)` method is invoked by the `Observable.subscribe(Subscriber<T>)` method.
2. The OnSubscribe func creates a `Producer` via the `subscriber.setProducer(Producer<T>)` method. At some point in the (potentially distant) future the subscriber may call `producer.request(n)`. This signals to the observable that capacity is allocated  in the subscriber.
   3a. Values are produced via a call to `subscriber.onNext(t)`.
   3b. At some point a terminal event is emitted via `onCompleted` or `onError`.

This allows for many different variations of control flow given that onNexts could possibly be scheduled, data could be pre-fetched, excess data could be batched or dropped, etc...
# Proposal

With this ground work in mind I would like to start a discussion about a general framework that correctly models the various use cases, particularly with respects to the following requirements:
- capable of paginating data across multiple requests
- batching requests
- hot and cold data sources
- async and blocking onNexts
## Naive Implementation

User provides callbacks that the framework will call between each of the steps above. That is
1. Observable calls `onSubscribe.call(s)`
2. The framework's onSubscribe calls: `S dataState = onSubscribeGenerator.call()`
3. Next the onSubscribe calls: `subscriber.setProducer(p)` setting a framework Producer
4. At some point the request is received by our producer `p.request(n)`
5. Then the framework will call the user provided request callback and store the new resultant `dataState` for future requests. `dataState = onRequestCallback.call(dataState, n, s)`

Obvious short comings of this approach: Order may not be preserved across multiple requests if the `onRequestCallback` schedules the onNext. Also onNexts may be concurrent so the subscriber must be wrapped with a serializing subscriber. Also, a case could be made that many observables created should specify the backpressure strategy. Any thoughts are welcome. 
"
3343,Neutral,"The `Subscriptions.create` method is extremely useful but poorly named. Is there a reason that it does not have a more semantic name which emphasizes the nature of the action being for unsubscribe rather than on subscribe?

When you read code like this:

``` java
subscription.add(Subscriptions.create(() -> runnable.run()));
```

it is not at all apparent that this code is for unsubscription.

Something along the lines of `unsubscribeAction`, `withUnsubscribeAction`, or `doOnUnsubscribe` would add a ton of clarity to the readability of this code.

``` java
subscription.add(Subscriptions.unsubscribeAction(() -> runnable.run()));
subscription.add(Subscriptions.withUnsubscribeAction(() -> runnable.run()));
subscription.add(Subscriptions.doOnUnsubscribe(() -> runnable.run()));
```

Now I realize we can't just rename this method, so I am proposing it as an addition along with deprecation of the original.
"
3344,Neutral,"This is more a request for discussion.

I'm not sure .NET's Rx has something like this, but one thing I miss in RxJava is an operator to flatten an `Observable<List<T>>` to `Observable<T>`. As far as I can tell, this currently requires one to write somewhat clunky code using flatMap:

```
Observable.from(...).toList().flatMap(new Func1<List<...>, Observable<...>>() {
        @Override
        public Observable<...> call(List<...> list) {
            return Observable.from(list);
        }
    });
```

i.e. there seems to be no standard reverse operation for toList. Is this something you would deem worth having in the library itself? It would simplify the above call to:

```
Observable.from(...).toList().flatten()
```
"
3345,Negative,"Hi, I noticed some behavior I don't fully understand.

When I run this:

``` java
Observable<String> interval =
        Observable.interval(1,TimeUnit.SECONDS)
                .doOnSubscribe(() -> System.out.println(""subscribe interval""))
                .doOnUnsubscribe(() -> System.out.println(""unsubscribe interval""))
                .flatMap(onClickEvent -> Observable.defer(() -> Observable.<String>error(new Exception(""Some exception""))))
                .onErrorResumeNext(Observable::error)
                .publish()
                .refCount()
                .doOnSubscribe(() -> System.out.println(""subscribe refCount""))
                .doOnUnsubscribe(() -> System.out.println(""unsubscribe refCount""));

interval
        .doOnError(throwable -> System.out.println(""subscriber 1 error: "" + throwable.getMessage()))
        .retry()
        .subscribe(s -> System.out.println(""subscriber 1: "" + s));
```

I get:

```
subscribe refCount
subscribe interval
unsubscribe interval
subscriber 1 error: Some exception
unsubscribe refCount
subscribe refCount
subscribe interval
unsubscribe interval
subscriber 1 error: Some exception
unsubscribe refCount
...
```

The three dots indicate that it continues infinitely.
Now when I add a second subscriber:

``` java
interval
        .doOnError(throwable -> System.out.println(""subscriber 2 error: "" + throwable.getMessage()))
        .retry()
        .subscribe(s -> System.out.println(""subscriber 2: "" + s));
```

I get:

```
subscribe refCount
subscribe interval
subscribe refCount
unsubscribe interval
subscriber 1 error: Some exception
unsubscribe refCount
subscribe refCount
subscriber 2 error: Some exception
unsubscribe refCount
subscribe refCount
```

and that's it, it doesn't retry. More specifically, it unsubscribes from interval and does not resubscribe. When I remove the `onErrorResumeNext` it's working fine like this:

```
subscribe refCount
subscribe interval
subscribe refCount
subscriber 1 error: Some exception
unsubscribe refCount
subscribe refCount
subscriber 2 error: Some exception
unsubscribe refCount
subscribe refCount
subscriber 1 error: Some exception
unsubscribe refCount
subscribe refCount
subscriber 2 error: Some exception
unsubscribe refCount
subscribe refCount
...
```

Where the three dots indicate it goes on infinitely. As you notice it doesn't unsubscribe from interval. I'm using `onErrorResumeNext` to ""map"" the error (in this example it's a trivial mapping), maybe I shouldn't use it like this. Still, I don't understand what's going on..
"
3346,Neutral,"using 'io.reactivex:rxjava:1.1.5'

The below JUnit test currently fails, it only processes up to the maxConcurrentWorkers calls before blocking indefinitely. This appears to be a combination of the SyncOnSubscribe.next call blocking (or returning without calling onNext), the flatMap being called before the subscribeOn, and the second flapMap taking a ""MaxConcurrent"" parameter.

If I move the commented subscribeOn statement to before the flatMap, then the test passes as expected.

If I remove the maxConcurrent parameter, the test passes as expected (though doesn't throttle the number of concurrent workers).

If I call onComplete instead of blocking from in the SyncOnSubscribe implementation then the test passes as expected.

Is this a bug relating to flapMap / SyncOnSubscribe, or, am I implementing SyncOnSubscribe incorrectly? I tried this with an AsyncOnSubscribe implementation and had the same problem.

``` Java
public class Tests {

  class TestSyncSubscription extends SyncOnSubscribe<Integer, Integer> {

      private int startValue;

      public TestSyncSubscription(int startValue) {
          this.startValue = startValue;
      }

      @Override
      protected Integer generateState() {
          return this.startValue;
      }

      @Override
      protected Integer next(Integer state, Observer<? super Integer> observer) {
          try {
              if (state > 0) {
                  observer.onNext(state);
                  return --state;
              } else {
                  // Mimic a blocking operation.
                  Thread.currentThread().suspend();
                  return state;
              }
          } catch (Exception e) {
              observer.onError(e);
              return state;
          }

      }
  }

  @Test
  public void flapMapBreaksFutureConcurrentFlapMap() throws InterruptedException { 

      final int numberOfItems = 20;
      final int maxConcurrentWorkers = 5;
      final int maxMsPerItem = 1000;
      final int minMsPerItem = 0;

      final int secondsToWaitForCompletion = 1 + (((numberOfItems / maxConcurrentWorkers) * maxMsPerItem) / 1000);
      final Scheduler concurrentOperationsScheduler = Schedulers.io();
      final Scheduler sourceScheduler = Schedulers.newThread();

      Random rand = new Random();
      CountDownLatch latch = new CountDownLatch(numberOfItems);

      Observable<Integer> source = Observable
              .create(new TestSyncSubscription(numberOfItems))
              // putting subscribeOn here (before the flapMap), the test passes.
              .flatMap(i -> Observable.just(i))
              .subscribeOn(sourceScheduler); // because this subcribeOn is after flatMap the test fails.;

      Subscription subscription =
              source.flatMap(
                      (path) -> Observable
                      .just(path)
                      .subscribeOn(concurrentOperationsScheduler)
                      .map(
                              i ->
                              {
                                  try {
                                      Thread.sleep(minMsPerItem + rand.nextInt(maxMsPerItem - minMsPerItem));
                                      latch.countDown();
                                  } catch (Exception e) {
                                      throw new RuntimeException(e);
                                  }

                                  return i;
                              }),
                      maxConcurrentWorkers)
              .subscribe();

      try {
          latch.await(secondsToWaitForCompletion, TimeUnit.SECONDS);
          long numberOfItemsProcessed = numberOfItems - latch.getCount();
          assertEquals(String.format(""All emitted items were not processed (%s of %s processed)"", numberOfItemsProcessed, numberOfItems), 20L, numberOfItemsProcessed);
      } finally {
          subscription.unsubscribe();
      }
  }
}
```
"
3347,Negative,"I don't see how you have any expectation about this setup or how you'd define ""doesn't work"" in this context."
3348,Negative,"> What are the criteria that we should use for submitting to rxjava vs. rxjava-extras?

1. Is it an instance operator? 
    - If not, it may live outside RxJava.
2. Does it add overloads to an existing operator? 
    - If yes then it can go into RxJava as `@Experimental`
3. Does it add an operator whose cousins are already there in some other base type? 
    - If yes then it can go into RxJava as `@Experimental`
4. Is the operator's behavior properly thought out (concurrency, corner cases)?
    - If not, it should be incubated externally first.
5. Is the operator properly covered with unit tests?
    - If not, it should be incubated externally first.
6. How large or special is the expected target audience?
    - If unknown, small or special, it should be hosted in an external library.
7. Does the operator require new dependencies?
    - If yes, it should be hosted in an external library.
8. Is the committer likely to stay and work out problems with the operator?
    - If not, well, it might not worth the trouble.

> You've said in the past that retrolambda is very good at extracting the relevant parts RxJava and that additional operators are ok.

I don't understand this sentence. Do you mean ProGuard? I can't remember I said that but according to Jake, it is 2.x that doesn't need any ProGuard rules unlike 1.x."
3349,Positive,"Yes, it's a good candidate for 2.0. We usually call it `doAfterNext`. PR welcome.
"
3350,Neutral,"@zsxwing and @headinthebox Want to discuss and finish this one?
"
3351,Neutral,"So the upshot is. The implementation is wrong, but it is a temporary hack (probably) and the scala classes should really be wrappers so semantics reside in the java implementation with delegation from scala classes. Wrt to semantics, and question from zsxwing, the call to unsubscribe can return before u completes, which seems reasonable and seems to be the behaviour in the java classes.
"
3352,Neutral,"For a start: here is the baseline perf: #3754. I'm going to merge it so subsequent PRs can be benchmarked with it.
"
3353,Negative,"I don't see why the distinction is needed or useful.

Also why are all of the v2 PRs being merged without any review?

On Thu, Sep 3, 2015, 6:13 PM Artem Zinnatullin notifications@github.com
wrote:

> LGTM
> 
> [image: :+1:] for RxJava team and LGTM for others looks good to me. More
> eyes and feedback — better result :)
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/ReactiveX/RxJava/issues/3157#issuecomment-137588470.
"
3354,Negative,"I don't see how that's possible. `Single.OnSubscribe` doesn't prevent me from calling methods on the `SingleSubscriber` multiple times.
"
3355,Neutral,"I tested rxjava-scala 0.19.6 with both scala 2.10.4 and 2.11.1 and could not reproduce your problem. Could you elaborate your environment?
"
3356,Neutral,"```java
    fun getNews(after: String, limit: String): Observable<RedditNewsResponse> {
        Log.d(""mainModel"", ""get news called"") //<--- this gets called
        return redditApi.getTop(after, limit) //<--- but data stops propagating here
    }
```"
3357,Neutral,"Regarding the Future, no, i'm not using a custom scheduler.   Subscriptions.create(final Future<?> f) calls cancel on the future when it is unsubscribed. 
"
3358,Neutral,Could you share the full stacktrace?
3359,Neutral,"What's the status on this operator? - There is some code, but the tests look a bit different from what I would expect this operator to do.

Shouldn't

``` java
            w1.Observer.onNext(""1a"");
            w1.Observer.onCompleted();

            w2.Observer.onNext(""2a"");
            w2.Observer.onNext(""2b"");
            w2.Observer.onCompleted();

            w3.Observer.onNext(""3a"");
            w3.Observer.onNext(""3b"");
            w3.Observer.onNext(""3c"");
            w3.Observer.onNext(""3d"");
            w3.Observer.onCompleted();
```

generate ""1a2b3a"", then ""1a2b3b"", then ""1a2b3c"", then ""1a2b3d""? Because it starts with the latest values of `w1` and `w2` as soon as `w3` fires its first string? - To me, this currently looks a bit like a mixture between `zip` and `combineLatest`. But maybe I'm understanding the semantics of `combineLatest` wrong.

The current code seems to still ""wait"" for an `onNext` from each combined observable before firing its own `onNext`? I'd love to try and fix that, if you can confirm that I understand `combineLatest` correctly.
"
3360,Neutral,"Closing due to age.
"
3361,Positive,"oh , my wrong thank you so much~"
3362,Neutral,"I'm not ready to provide a PR - probably just a simple null verification on the switchIfEmpty creation.
I think its worth a deeper investigation by someone from the core team.
"
3363,Neutral,"Emit each item 5 seconds after the previous item:

``` java
List<Integer> list = new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6));

Observable
  .interval(5, TimeUnit.SECONDS)
  .map(i -> list.get(i.intValue()))
  .take(list.size())
  .toBlocking()
  .subscribe(System.out::println)
;
```

Emit everything after 5 seconds passed:

``` java
Observable
  .from(list)
  .delay(5, TimeUnit.SECONDS)
  .toBlocking()
  .subscribe(System.out::println);
```
"
3364,Neutral,"Nope, this is rather discussion about it. I was thinking about something similar to Completable with proper methods. Currently in this case most of operator like filter, distinct, groupBy etc. are useless."
3365,Neutral,"Java 8 type annotations might be enough here. Of course, it requires an infrastructure around to perform the validation (a la checker framework).
"
3366,Neutral,"You need to roll your own operator, just take the source of OnSubscribeCache and change the default ReplaySubject:

``` java
public final class OnSubscribeBoundedCache<T> implements OnSubscribe<T> {
    protected final Observable<? extends T> source;
    protected final Subject<? super T, ? extends T> cache;
    volatile int sourceSubscribed;
    @SuppressWarnings(""rawtypes"")
    static final AtomicIntegerFieldUpdater<OnSubscribeBoundedCache> SRC_SUBSCRIBED_UPDATER
            = AtomicIntegerFieldUpdater.newUpdater(OnSubscribeBoundedCache.class, ""sourceSubscribed"");

    public OnSubscribeBoundedCache(Observable<? extends T> source, int bufferSize) {
        this.source = source;
        this.cache = ReplaySubject.<T> createWithSize(bufferSize);
    }
    @Override
    public void call(Subscriber<? super T> s) {
        if (SRC_SUBSCRIBED_UPDATER.compareAndSet(this, 0, 1)) {
            source.subscribe(cache);
        }
        cache.unsafeSubscribe(s);
    }
}
Observable cached = Observable.create(new OnSubscribeBoundedCache(source, 256))
cached.subscribe(...);
cached.subscribe(...);
```
"
3367,Neutral,"I think I might have something to add to this discussion. I frequently use the following combination. Does anyone else see this issue as a common pattern?

``` java
Observable<T> inputs;
inputs.publish(is -> 
   potentiallyFailingWork(is)
      .doOnError(this::logRetryableFailure)
      .retryWhen(this::tryRetry)
      .doOnError(this::logFailure)
      .cache()
      .ignoreElements()
      .map(x -> (T) null)
      .concatEager(is)
)
.doOnNext(this::someOtherWork)
.retryWhen(this::tryRetry)
.cache();
```

The take away here is the sporadic use of `cache()`. This is to prevent later `retry` or resubscribes from saved observable references. I see this as preventing 2 things from happening in an observable chain. Firstly, if there is an error encountered downstream the original producer will not receive an `unsubscribe()` so it can continue to stream. Secondly the resubscribes are prevented because the data is simply cached and served to all subsequent subscribers. Is there a better pattern I could be using here?
"
3368,Neutral,"Maybe subscribeOn has to be smarter about its source (and not everyone else).
I.e., if subscribeOn detects that the source is PublishSubject, It enters a buffering mode and once the time of the actual subscription has come, replay the buffered values and resume as a regular Observer would. This is is different from my previous hack where only the first observer would get the values. Here, everyone who is on a delayed subscription would eventually get the values from the time gap.
"
3369,Neutral,"Looks like the referenced PRs were closed in favor of `Completable`, which has `andThen` methods. Since this issue is a bit old, I'm closing this for now. Let us know if you have further input or proposition in this matter.
"
3370,Neutral,"Sure.
"
3371,Positive,"Thanks @JakeWharton. Given the feedback, it looks like `expand` could become part of RxJava (rxjava-extras may not be Android friendly). @abersnaze I suggest you work out the details in your local RxJava fork and only post a PR when it has all the docs, unit tests (including all sorts of async expansions) and at least 90% code coverage of the new classes."
3372,Neutral,"Why not have a `.toSerialized()` method on the `Subject` instance? Alternatively, if `Observable.serialize()` wouldn't be final, `Subject` could override it and return a `Subject`.
"
3373,Neutral,"Fixed in master.
"
3374,Neutral,"It is a rather rare use case, but i do pass a result which might include an exception between activities in android, which requires the object to be serializable
"
3375,Neutral,"I've created draft pages for several operators (Buffer, Catch, Concat, Count, Merge, Retry, StartWith, and Window) that include filled-in sections for RxCpp, RxGroovy, RxJava, RxJS, RxKotlin, Rx.NET, RxPY, Rx.rb, and RxScala, but from here out I'm going to be concentrating on RxJava (and its RxGroovy cousin) and RxJS. For the rest of the language-specific implementations, I'll leave placeholder sections in the operator pages but will leave these to be filled in by folks with expertise in those implementations.

We're still working on a strategy for integrating single-source, tested code samples into the documentation.

We're also considering getting the RxMarbles interactive diagrams integrated somehow.
"
3376,Neutral,"Looking at these implementations it seems that by using zip it will emit a sequence of true/false values rather than a single boolean specifying if the entire sequence is true/false.

I think it is supposed to emit only a single value based on reading the MSDN docs.

@mairbek If you re-read the docs, is it supposed to be a single value, or sequence of values emitted? If single, can you submit a fix? Probably a reduce type function that keeps going until it finds a false otherwise if it hits onComplete/onError the same on both sides it returns true. 
"
3377,Neutral,"Same android samsung 5.0.X appeared for us with the latest 1.1.2

> Caused by java.lang.NoSuchFieldException: producerIndex
>        at java.lang.Class.getDeclaredField(Class.java:929)
>        at rx.internal.util.unsafe.UnsafeAccess.addressOf(UnsafeAccess.java:100)
>        at rx.internal.util.unsafe.SpmcArrayQueueProducerField.<clinit>(SpmcArrayQueue.java:31)
>        at rx.internal.util.RxRingBuffer$2.createObject(RxRingBuffer.java:294)
>        at rx.internal.util.RxRingBuffer$2.createObject(RxRingBuffer.java:290)
>        at rx.internal.util.ObjectPool.borrowObject(ObjectPool.java:74)
>        at rx.internal.util.RxRingBuffer.<init>(RxRingBuffer.java:307)
>        at rx.internal.util.RxRingBuffer.getSpmcInstance(RxRingBuffer.java:45)
>        at rx.internal.operators.OperatorZip$Zip$InnerSubscriber.<init>(OperatorZip.java:305)
>        at rx.internal.operators.OperatorZip$Zip.start(OperatorZip.java:205)
>        at rx.internal.operators.OperatorZip$ZipSubscriber.onNext(OperatorZip.java:156)
>        at rx.internal.operators.OperatorZip$ZipSubscriber.onNext(OperatorZip.java:122)
>        ...
"
3378,Neutral,"Sure.
"
3379,Positive,"Ah good, thanks. And the `timer` field doesn't need to be `AtomicReference`?

BTW prod problem was external API not defined properly so all good."
3380,Neutral,"I just had a look at Scala's `par` and it looks like it returns a special Parallel instance of the collection in question. So the analogy would be 

```
ParallelObservable<T> parallel(Scheduler scheduler) {
    return new ParallelObservable<T>(this, scheduler);
}
```

where `ParallelObservable<T>` is really `Observable<Observable<T>>` under the covers but you can interact with it as though it is `Observable<T>`. I imagine that `ParallelObservable.subscribe` would perform the flatten before normal subscription.

Blimey I've got reading problems, Ben suggested exactly this. Ta Ben.
"
3381,Neutral,"See #4819.
"
3382,Neutral,"Maybe, submit a PR and let's see the opinions.
"
3383,Neutral,Closing via #5133.
3384,Positive,"I'm closing this due to inactivity. If you have further questions, don't hesitate to reopen this issue or post a new one.
"
3385,Negative,"What exactly do you mean with unsubscription, `doOnUnsubscribe`? That's called even after `doOnError` and that's already too late, because the observable is already in the state that no items are being delivered, but the subscription is still active. 
"
3386,Neutral,"Doesn't that make it a source of races for constructions like `.observeOn(AndroidSchedulers.mainThread())` or basically any other situation where you'd want to use the operator to feed a single (or fixed) threaded environment? 
"
3387,Positive,Perfect. Thanks! 
3388,Positive,"Same thing happening with me! :) The subscription continues to run, but receiving empty buffers, after using unsubscribe.
"
3389,Neutral,"Hi @franciscojunior 

Can you try specifying the scheduler for which a second `Single` is operating on? e.g.

```
single1
    .observeOn(mainThreadScheduler)
    .zipWith(single2.subscribeOn(mainThreadScheduler))
```

or if you use static method version

```
Single.zip(
    single1.subscribeOn(mainThreadScheduler),
    single2.subscribeOn(mainThreadScheduler),
    (car, engine) -> {
        // do something in main thread
    })
```

From my observation, I think `zip` operator's combine function is being called in a scheduler that the source singles are operating on. If the sources are operating on different scheduler, it is quite uncertain as to which scheduler will be used to run the combine function. I guess it will be a scheduler of a single that emit the latter item for each combination of a zipped items. By specifying `mainThreadScheduler` to both singles, it will ensure that the combine function will only be run from the main thread.

"
3390,Positive,"Well, then you'll have a crash :)

Basically, it's same thing as `try-catch`. If error is expected it should be handled and somehow processed by the app, you can at least log it or show kind of error message to the user if it is appropriate.
"
3391,Neutral,"Closing via #4026.
"
3392,Neutral,"The once place I get the spurious error is in merge:

```
@Override
            public void onNext(Observable<? extends T> innerObservable) {
                runningCount.incrementAndGet();
                Subscriber<T> i = new InnerObserver();
                childrenSubscriptions.add(i);
                innerObservable.subscribe(i); // <===
            }
```
"
3393,Neutral,"Instead of implementing all that functionality - can I not instead use RxJava 2.0 Flowable.create() which appears to support back pressure out the box with Buffers.

If I can do this, is there a way by carefully controlling the numbers of requests a subscribers sends to a publisher, that RxJava 2.0 will ensure that it never DROPs or ERRORs on any message. (when I say ERROR I mean error due to lack of Buffer Space)
"
3394,Neutral,"Here is my full exception stack
```
12-16 16:33:58.374 8857-8857/com.chensiwen.edugame D/RxJavaExampleActivity: onClickTest2: 
12-16 16:33:58.879 8857-2647/com.chensiwen.edugame W/System.err: java.util.concurrent.ExecutionException: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-16 16:33:58.879 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.FutureTask.report(FutureTask.java:93)
12-16 16:33:58.879 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.FutureTask.get(FutureTask.java:163)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.operators.observable.ObservableFromFuture.subscribeActual(ObservableFromFuture.java:41)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.Observable.subscribe(Observable.java:10179)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.operators.observable.ObservableSubscribeOn$1.run(ObservableSubscribeOn.java:39)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.Scheduler$1.run(Scheduler.java:134)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.run(ScheduledRunnable.java:59)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.call(ScheduledRunnable.java:51)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:152)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:265)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err:     at java.lang.Thread.run(Thread.java:818)
12-16 16:33:58.880 8857-2647/com.chensiwen.edugame W/System.err: Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:6735)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:1088)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4693)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidateInternal(View.java:11828)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidate(View.java:11792)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidate(View.java:11776)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.updateAfterEdit(TextView.java:7829)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.handleTextChanged(TextView.java:7852)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:9799)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.sendTextChanged(SpannableStringBuilder.java:964)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:515)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:272)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:33)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.append(TextView.java:3698)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.append(TextView.java:3685)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at com.chensiwen.edugame.RxJavaExampleActivity$2.call(RxJavaExampleActivity.java:91)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at com.chensiwen.edugame.RxJavaExampleActivity$2.call(RxJavaExampleActivity.java:82)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
12-16 16:33:58.881 8857-2647/com.chensiwen.edugame W/System.err: 	... 3 more
12-16 16:33:58.882 8857-2647/com.chensiwen.edugame W/System.err: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:6735)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:1088)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.ViewGroup.invalidateChild(ViewGroup.java:4693)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidateInternal(View.java:11828)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidate(View.java:11792)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.view.View.invalidate(View.java:11776)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.updateAfterEdit(TextView.java:7829)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.handleTextChanged(TextView.java:7852)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:9799)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.sendTextChanged(SpannableStringBuilder.java:964)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:515)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:272)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.text.SpannableStringBuilder.append(SpannableStringBuilder.java:33)
12-16 16:33:58.883 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.append(TextView.java:3698)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at android.widget.TextView.append(TextView.java:3685)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at com.chensiwen.edugame.RxJavaExampleActivity$3.onError(RxJavaExampleActivity.java:133)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.operators.observable.ObservableSubscribeOn$SubscribeOnObserver.onError(ObservableSubscribeOn.java:68)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.operators.observable.ObservableFromFuture.subscribeActual(ObservableFromFuture.java:45)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.Observable.subscribe(Observable.java:10179)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.operators.observable.ObservableSubscribeOn$1.run(ObservableSubscribeOn.java:39)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.Scheduler$1.run(Scheduler.java:134)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.run(ScheduledRunnable.java:59)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.call(ScheduledRunnable.java:51)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:152)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:265)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
12-16 16:33:58.884 8857-2647/com.chensiwen.edugame W/System.err:     at java.lang.Thread.run(Thread.java:818)
```"
3395,Neutral,"I will add an example for the Subscriber API and update the comment.
"
3396,Positive,"@joluet try version 0.19.4. I believe it has been fixed there :)
"
3397,Neutral,"More on this topic can be found here: http://www.takipiblog.com/double-agent-java-vs-native-agents/

It goes beyond my skill set so can only conceptually discuss it. Apparently the concept is:
- at each call site capture a pointer to memory in C with the callstack information
- store this pointer in the Java object (Observable operator instance?)
- if debug occurs (manually or via onError) read through the pointers and capture the callstacks for each operator
- build a ""callstack graph"" for the Observable chain (expensive, memory allocation, getting code lines etc)
- if more than x seconds passes free up the memory of those callstacks in C that are being referenced by pointers

Apparently this can be done very efficiently in C++ deep in the JVM with a native agent. In Java however it is quite expensive to call `Thread.getStackTrace()` as it done many native calls and allocates a large array of strings, so we definitely don't want to be doing that on every operator invocation in the happy path.
"
3398,Neutral,"> Yes, wrapping ""normal"" errors in OnErrorNotImplementedException would also work I think.

I'll prepare a PR for this then.

> I notice that it isn't just me struggling with this in our code base so I worry that as more people migrate to RxJava 2.x they will run into the same problems.

These errors where there in 1.x as well but were practically ignored as the default handler was a no-op handler."
3399,Negative,"@akarnokd  Aren't the `Completable` `runwith` Function argument and return types incompatible?

    public final Completable retryWhen(Function<? super Flowable<Throwable>, ? extends Publisher<Object>> handler) 

So the following `retryWith` lambda:

        Completable.error(new RuntimeException())
                .retryWhen(throwableFlowable -> throwableFlowable.delay(5, TimeUnit.SECONDS); 

produces the error:

    Bad return type in lambda expression: Flowable<Throwable> cannot be converted to Publisher<Object>

"
3400,Positive,"@guidomedina please reflect your intended usecase in a JMH benchmark, let the numbers speak ;-)
"
3401,Neutral,"Maybe `toast.showToast(NetUtils.checkApiException(e));` crashes.
"
3402,Neutral,"Hi. This is a known bug with javac: overload resolution doesn't account for the lambda return type being void. Update 8u20 should resolve this soon.
"
3403,Negative,"I run into OOMs because of the way Flowable agressively prefetches stuff. I solved it by turning `rx2.buffer-size` down, but there is a hardcoded limit of 16 ([Flowable.java#L63](https://github.com/ReactiveX/RxJava/blob/2.x/src/main/java/io/reactivex/Flowable.java#L63)). 

I would have wanted to turn prefetching to max 1 (preferrably even 0) because I'm working with large objects and definitely can't fit 128 of them into the memory at once.

I think it is a design mistake to have prefetching on that is not requested and for sure I cannot understand the lower limit of 16. What purpose does it serve?"
3404,Neutral,"Got another one for you: in Observable, it's stated that isEmpty() returns an Observable when it's actually a Single. 

On Sep 14, 2017, at 07:24 AM, David Karnok <notifications@github.com> wrote:

Closed #5595.
—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub, or mute the thread.

"
3405,Positive,"> Why do you consider the following to be a bug, and how does this have anything to do with the groupBy issue?

When one subscribes to the pubsub from a different thread it is indeed totally reasonable that he may or may not receive the item that is currently being handled. What I am talking about is the case where one subscribes to the pubsub from the _same_ thread as where the pubsub onNext is being handled. This happens when, in the image, B.onNext(8) will subscribe a new observer D to the pubsub. The question is then whether this D will or will not receive the value 8. As this is all happening in a single thread, there is no need for this action to be unpredictable. The subscription of D is undoubtably happening _after_  pubsub.onNext was called, because it was _caused_ by it. That makes it weird that D only _might_ receive 8 because there is no race condition. It either should or it should not include D in the set of obervers that receive 8, depending on which behaviour you want pubsub to have (as discussed in my last post).
To extend the image:
![publishsubjectissue](https://f.cloud.github.com/assets/4191409/593119/5f4498ea-ca2f-11e2-8639-5dda6c06e8c8.png)

The relation to groupBy:
What groupBy does is emitting observables that are descendents of its own source. When using groupBy on a pubsub, when one subscribes to these emitted observables (using nested subscribes or mapMany or whatever), the situation described above occurs (perhaps with some operators between B.onNext and pubsub.subscribe(D)). This results in not knowing whether or not the first item of the group will be received.

I hope my explanation is clear enough, just let me know if it is not or if you find some flaw in my thoughts.
"
3406,Positive,"Thank you, that explains the operation. And also shows that the connect is a must, so it is not possible to chain the calls as I did. Then what is the point of having replay() return anything that resembles an Observable? Or is there some autoconnect method too?
"
3407,Neutral,"Let's assume `take` didn't request unbounded, the following setup would still result in an excessive network usage if the source doesn't adjusts request amounts:

```java
networkSource().take(1_000_000)
.subscribe(v -> { }, e -> { }, () -> { }, s -> s.request(1_000_000));
```

In RxJava, whenever there is a boundary, the operator adjusts its input request amounts to remain reasonable, such as `observeOn` and `flatMap`. `take` is not an async boundary, nor `reduce`, `map`, `first`, etc."
3408,Neutral,Closing via #4911
3409,Negative,"I found it also quite curious that it doesn't happen when using a single `Observable` instead of the merged one.
"
3410,Negative,"My concern is that with key function there is a tiny but non-zero chance to miss an item. Why not support better tool for the job (`equals`) vs `hashCode` or identity. The change would be not huge and not breaking.
"
3411,Neutral,"A more specific example of why I was trying this: attempting to flatMap a Single or Observable to a Completable.

```
    return getItemSingle
        .flatMap(item -> store.removeItem(item.id).toSingle(() -> null)) // removeItem(id) returns a Completable
        .toCompletable();
```
"
3412,Neutral,"It seems like this operator has been already implemented 

https://github.com/Netflix/RxJava/blob/master/rxjava-core/src/main/java/rx/operators/OperationConcat.java
"
3413,Neutral,"I'd definitely support such protection, but the article mentions force pushes instead of any pushes outside the github gui.
"
3414,Positive,"Great, thank you!
"
3415,Positive,"Interesting discussion. I don't have any unique input.
"
3416,Neutral,"This isn't used at runtime so an exclude is fine.
"
3417,Positive,"> Because timestamp is a single word, like java.sql.Timestamp?

I guess you're right. Never mind :-)
"
3418,Neutral,"Ratio using Java8u92 i5-4670k after `Unsafe` has warmed up is 0.4 indicating for a single thread it is twice faster, but is that the same for Android?
"
3419,Neutral,"That only works if you have tight control at every processing step of the request amount, which you usually don't have with standard operators (as RxJava uses prefetch N and N x 0.75 subsequent fetch amounts in the replenishing logics all around). 

In your case, when an unbounded end-consumer comes along, your buffers could grow endlessly. So unless you have a single step `Publisher` - `Subscriber` interaction, it is unlikely you get a solution generally usable beyond a small scope. "
3420,Negative,"@rzsombor, we encountered a very similar issue with a different library (greenDAO), maybe it could shed some light on the issue you encountered here.

We get:
System.err: Caused by: java.lang.NoSuchFieldException: TABLENAME
System.err:     at java.lang.Class.getField(Class.java:1104)
System.err:     at de.greenrobot.dao.internal.DaoConfig.<init>(SourceFile:56)

Only happens on Samsung 5.0/5.0.1/5.0.2 devices in the wild, we can't reproduce this issue in-house.

We have the recommended greenDAO proguard [configuration](http://greenrobot.org/greendao/documentation/technical-faq/).

Decompiling our APK shows that the ""problematic"" class does indeed have a public TABLENAME field:
.field public static final TABLENAME:Ljava/lang/String; = ""GLIDE_USER""

So we can only join your conclusion that it's a weird Samsung bug. Unfortunately, we don't even have a work-around... Kinda hoping the guys in this project can come up with something...

Btw, other people encountered the same issue with greenDAO (note that the suggested solutions such as adding proguard rules or upgrading to the latest version do not solve the issue):
http://stackoverflow.com/questions/34216163/daoconfig-init-failure-with-greendao-on-samsung-devices-with-android-5-0
https://github.com/greenrobot/greenDAO/issues/188
"
3421,Positive,The JUnit pattern is fine with me.
3422,Negative,"That's not possible in the real use case, because there the buffer is bigger and the source never completes. I still like the idea of the custom operator. For now I'll keep my ""cheat"", that writes the filtered events from the original sample into a list, which are then emitted with a `startWith`. But it doesn't feel right.

Feel free to close the issue, if you think such an operator isn't needed. "
3423,Positive,"I forgot the RxJavaString has been released with version 1.0.1 where the issue has been fixed and your original code works for me. Thanks for the report!
"
3424,Neutral,"It was a suggestion based on a need I had at one point and implemented for myself, not one I was waiting on. So... ""solved"".
"
3425,Neutral,"the implementation of mDownloadUploadRepository.download()
```java
@Override
public Observable<Progress> download(@NonNull String url, @NonNull String filePath, final long fileSize,
    boolean overwriteFile) {
    //任务唯一标识
    final String key = url + filePath;
    if (executingTasks.containsKey(key)) {
        return executingTasks.get(key);
    }
    final DownloadTaskWrapper downloadTaskWrapper = new DownloadTaskWrapper(url, filePath, fileSize, overwriteFile);
    Observable<Progress> observable = Observable.create(new Observable.OnSubscribe<Progress>() {
        @Override
        public void call(Subscriber<? super Progress> subscriber) {
            Response response;
            File file = null;
            try {
                if (TextUtils.isEmpty(downloadTaskWrapper.getFilePath())) {
                    throw new IllegalArgumentException(""filePath cant be null"");
                }
                //文件写入初始化
                file = new File(downloadTaskWrapper.getFilePath());
                //已下载完成 且 不需要强制重新下载,则直接结束本次下载
                if (file.exists()
                    && file.length() != 0
                    && downloadTaskWrapper.getFileSize() == file.length()
                    && !downloadTaskWrapper.isOverwriteFile()) {
                    Progress loadProgress =
                        new Progress(downloadTaskWrapper.getFileSize(), downloadTaskWrapper.getFileSize(), true, false);
                    subscriber.onNext(loadProgress);
                    subscriber.onCompleted();
                    return;
                }
                if (file.exists() && downloadTaskWrapper.isOverwriteFile() && !file.delete()) {
                    //TODO 自定义错误(文件删除失败)
                    subscriber.onError(new Exception(""文件删除失败""));
                    executingTasks.remove(key);
                    return;
                }
                //创建路径上文件夹
                if (file.getParentFile() != null && file.getParentFile().isDirectory() && !file.getParentFile().exists()) {
                    //noinspection ResultOfMethodCallIgnored
                    file.getParentFile().mkdirs();
                }
                try {
                    if (!file.exists() && !file.createNewFile()) {
                        //TODO 自定义错误(文件创建失败)
                        subscriber.onError(new Exception(""文件创建失败""));
                        executingTasks.remove(key);
                        return;
                    }
                } catch (IOException e) {
                    subscriber.onError(new Exception(""文件创建失败""));
                    executingTasks.remove(key);
                    return;
                }
                //发送请求
                Request request = new Request.Builder().url(downloadTaskWrapper.getUrl())
                    .header(""Range"", ""bytes="" + file.length() + ""-"") //断点续传
                    .header(""Accept-Encoding"", ""identity"") //禁止gzip压缩,避免content-length获取不正确
                    .build();
                response = mOkHttpClient.newCall(request).execute();
                //文件已下载完成
                switch (response.code()) {
                    case 416:
                        throw new RuntimeException(ERROR_MSG_416);
                    case 206:
                    case 200:
                        break;
                    default://TODO 自定义错误(HTTP 返回码错误)
                        if (file.length() == 0) {
                            file.deleteOnExit();
                        }
                        subscriber.onError(new Exception(""HTTP 返回码错误: "" + response.code()));
                        executingTasks.remove(key);
                        return;
                }
            } catch (IOException e) {
                //TODO 自定义错误(网络请求错误)
                if (file.length() == 0) {
                    file.deleteOnExit();
                }
                subscriber.onError(new Exception(""网络请求错误"", e));
                executingTasks.remove(key);
                return;
            }
            //总大小 = 已下载大小 + 剩余大小
            long totalLength = file.length() + response.body().contentLength();
            if (response.code() == 200 && totalLength == file.length()) {
                Progress loadProgress = new Progress(totalLength, totalLength, true, false);
                subscriber.onNext(loadProgress);
                subscriber.onCompleted();
                executingTasks.remove(key);
                return;
            } else if (!downloadTaskWrapper.isOverwriteFile()
                && totalLength != downloadTaskWrapper.getFileSize()) {//断点续传,需要对比已下载文件大小是否正确
                //TODO 自定义错误(文件大小错误)
                throw new RuntimeException(ERROR_MSG_WRONG_SIZE);
            }
            //response读取
            BufferedInputStream is = new BufferedInputStream(response.body().byteStream());
            RandomAccessFile outputStream;
            try {
                outputStream = new RandomAccessFile(file, ""rw"");
            } catch (FileNotFoundException e) {
                subscriber.onError(e);
                executingTasks.remove(key);
                return;
            }
            try {
                executeDownload(subscriber, is, outputStream, totalLength, key);
            } catch (IOException e) {
                if (file.length() == 0) {
                    file.deleteOnExit();
                }
                subscriber.onError(e);
                executingTasks.remove(key);
            }
        }
    }).doOnUnsubscribe(new Action0() {
        @Override
        public void call() {
            executingTasks.remove(key);
        }
    }).retryWhen(new Func1<Observable<? extends Throwable>, Observable<?>>() {
        @Override
        public Observable<?> call(Observable<? extends Throwable> observable) {
            return observable.flatMap(new Func1<Throwable, Observable<?>>() {
                @Override
                public Observable<?> call(Throwable throwable) {
                    //TODO 自定义错误(文件大小错误)
                    switch (throwable.getMessage()) {
                        case ERROR_MSG_WRONG_SIZE: {
                            File file = new File(downloadTaskWrapper.getFilePath());
                            if (!file.exists() || file.delete()) {
                                downloadTaskWrapper.setOverwriteFile(true);
                                return Observable.just(true);
                            }
                        }
                        break;
                        case ERROR_MSG_416: {
                            File file = new File(downloadTaskWrapper.getFilePath());
                            if (!file.exists() || file.delete()) {
                                downloadTaskWrapper.setOverwriteFile(true);
                                return Observable.just(true);
                            }
                        }
                        break;
                    }
                    executingTasks.remove(key);
                    return Observable.error(throwable);
                }
            });
        }
    });
    executingTasks.put(key, observable);
    return observable;
}
/**
 * 下载数据传输
 *
 * @param subscriber   下载结果订阅者
 * @param is           输入流
 * @param outputStream 输出流
 * @param totalLength  总长度
 * @param key          下载任务唯一标志
 * @throws IOException 读写错误
 */
private void executeDownload(Subscriber<? super Progress> subscriber, InputStream is, RandomAccessFile outputStream,
    long totalLength, @NonNull String key) throws IOException {
    byte[] buffer = new byte[1024];
    long progress = outputStream.length();
    try {
        //下载开始
        Progress loadProgress = new Progress(progress, totalLength, false, false);
        subscriber.onNext(loadProgress);
        outputStream.seek(outputStream.length());
        //读取下载内容
        while (true) {
            //任务取消检测
            if (!executingTasks.containsKey(key)) {
                loadProgress = new Progress(progress, totalLength, false, true);
                subscriber.onNext(loadProgress);
                subscriber.onCompleted();
                return;
            }
            //读取
            int length = is.read(buffer);
            if (length == -1) {
                break;
            }
            //文件写入
            outputStream.write(buffer, 0, length);
            progress += length;
            if ((progress - loadProgress.getProgress()) * 1.0f / totalLength > 0.01) {
                loadProgress = new Progress(progress, totalLength, false, false);
                subscriber.onNext(loadProgress);
            }
        }
        //下载任务完成通知
        progress = totalLength;
        loadProgress = new Progress(progress, totalLength, true, false);
        subscriber.onNext(loadProgress);
        //下载任务结束
        subscriber.onCompleted();
        executingTasks.remove(key);
    } catch (IOException e) {
        //TODO 自定义错误(下载错误,文件写入错误)
        throw new IOException(""下载错误/文件写入错误"", e);
    } finally {
        try {
            outputStream.close();
            if (is != null) {
                is.close();
            }
        } catch (IOException e) {
            //TODO 自定义错误,IO 流关闭错误
            throw new IOException(""IO 流关闭错误"", e);
        }
    }
}
```

the operation after map:
```java
mDownloadUploadInteractor.download(downloadTaskModel)
    .compose(RxUtil.<DownloadTaskModel>applyAsySchedulers())
    .subscribe(new SimpleSubscriber<DownloadTaskModel>() {
        @Override
        public void onError(Throwable e) {
            if (activityWeakReference.get() != null) {
                mToastor.showToast(R.string.file_download_fail);
            }
            dialog.dismiss();
        }
        @Override
        public void onNext(DownloadTaskModel downloadTaskModel) {
            float percent = downloadTaskModel.getTaskStatus().progress * 1.0f / downloadTaskModel.getTaskStatus().length;
            dialog.setProgress((int) (percent * dialog.getMaxProgress()));
            if (downloadTaskModel.getTaskStatus().status == TaskStatus.Status.COMPLETE) {
                dialog.setContent(R.string.download_finished);
                dialog.setProgress(dialog.getMaxProgress());
                dialog.getActionButton(DialogAction.POSITIVE).setEnabled(true);
            }
        }
    });
```"
3426,Negative,"my bad: implementing it is not too difficult, I am just surprised that an official ""RxCollections""  library for RxJava does not exist. would be sweet!

> Emit the key and value as a pair, filter at the consumer site on the key
> you care about

While this is a quickest solution and would work with a `ReplayRelay`, this would have some performance issues as the buffer grows.

> expose the value as itself an observable when you look it up by key.

This is the better solution, provided we use a hot observable containing the value in the map (don't use `Observable.just(value)` because that will emit once and complete. I've implemented something like this and its working well so far.

edit: here's my RxMap as a [gist](https://gist.github.com/ZakTaccardi/8d5a42c029ae2580e711de05625f1d4a). Could certainly be improved by not using two maps
"
3427,Neutral,"> My first comment still applies

For the record, your ""no foreign annotations"" reasoning is incorrect. Take a look at the JavaDoc of the ""GwtIncompatible"" annotation: http://www.gwtproject.org/javadoc/latest/com/google/gwt/core/shared/GwtIncompatible.html

The GWT transpiler only cares about the _name_ of the annotation being ""GwtIncompatible"". The package where it is defined does not matter.

Thus, other ""no external dependencies"" libraries like Guava just define their own annotation named ""GwtIncompatible"": https://github.com/google/guava/blob/master/guava/src/com/google/common/annotations/GwtIncompatible.java
"
3428,Neutral,"maybe callback run in wrong thread.
i just meet the problem, and solve it.
"
3429,Neutral,"> The wiki is full of explanation about how the observable works and can be
> filtered, transformed but there is not so many thing about basic things...

What basic things are you referring to that you would like to see on the wiki?
"
3430,Negative,"I don't think this is a necessary change judging by the argument's current form, and I don't really agree with the blanket statements used to justify ""global state is bad"".

> A lot of libraries use RxJava nowadays, when you want to change some behavior of RxJava for your code or some library in particular you also affect all other code that uses RxJava in your program.

To me, a library that defers to this rather than their own scheduler is simply saying that they defer to what the consumer wants. They're aware of this. If they need a specific scheduler, they should use their own or accept it as a parameter. You could just as easily flip this around to say that library developers then lose the ability to easily defer to the execution environment and now have to add these annoying parameters everywhere to force the user to pass in their instance. This opens up other cans of worms too: per-library? per-class? per-usage? What's the convention? Why can't there be a default?

> Any change of global state in multithreaded runtime is dangerous.

This statement is far too general and not really valid justification IMO. You should really be specific as to what states you're referring to and why they're dangerous. It seems to me your main issue is with the plugins/hooks API, which I argue farther down is equally as prone to bad developers doing stupid things as non-static APIs are.

> Because of thread-safety required for this global state RxJava has to apply atomic/synchronized operations to access it in many parts of Rx chains lifecycle which degrades performance a little bit.

Can you quantify this? If it's negligible (which I believe it is), then I don't really think it matters. Even if it did, schedulers are already cached and plugins are only set once, so the perf impact largely only affects the first user. The only time this would happen frequently is in tests, where perf is much less of an issue.

> Some parts of hooks done through system properties, some via explicit API, not very consistent.

I think we all agree the current 1.x hook system is not ideal. There is already a new hooks API in 2.x, so I think this is a false comparison.

> RxJava makes multithreading easy and immutability of the data that goes through Rx chains is a must have, but library itself is not immutable, that's awkward because RxJava brings a lot of functional aspects and immutability is fundamental to the concept.

Again, it's just the hooks and plugins. I would argue these are a small-but-necessary evil to that give RxJava much of its flexibility. 

> What I think of is to make RxJava instantiable and remove all shared state between RxJava instances. Just like any other normal library such as Retrofit, Moshi, OkHttp (mostly) and others.

These are not valid comparisons. Different libraries with different usage and purposes. You instantiate Retrofit objects because it's one object per service, not one global object that's passed around. Moshi has a lot of stateful internals that make an instance unique, whereas RxJava only has a handful of these. They are also not used as ubiquitously as RxJava is. A more valid example would be something like `Timber`. Can you imagine if you had to inject that everywhere you wanted to use it? Simple classes, utility methods, etc all suddenly require DI or an extra parameter.

I don't agree with those that would argue that anything and everything should be injected with DI and mockable, which this seems to be partially motivated by. Like everything else, the answer is ""it depends"". In RxJava's case, I think the flexibility to use it via static APIs is part of what makes it so appealing and powerful. The plugins and hooks are invisible to most users currently, and forcing this to a system where everything is an instance that must be passed around seems like major overkill.

This seems like an issue that largely revolves around the sticky 1.x plugins API, but you didn't talk at all about the improved rewrite of it that already exists in 2.x. I'd like to know what's wrong with that, rather than generalized ""plugins are stateful, therefor rx is stateful, therefore everything is dangerous"" vibe that the current argument seems to revolve around.

---

As brief counter-examples:

**If the goal is better testing support:** I wrote a nice test rule that lets you set schedulers on the fly for testing, and is quite clean. Simply add your rule, and call appropriate setters on it as needed in your tests. State is always cleared before and after to ensure clean and isolated states. Not all doom and gloom.

**If the goal is to make state immutable and not dangerous:** It seems to me the crux of this argument is around preventing programmers from writing dangerous code. Someone could still accidentally set Schedulers.io() to use a main thread scheduler. There's only so much you can do to protect against people doing bad things. To restructure an entire framework just to make something that largely invisible to most users, has sensible default configurations, and obvious when misconfigured seems like a massive overreaction.

---

To be clear, I'm not coming out 100% against this. I _do_ think there needs to be much better reasons to do this than what have been presented so far.
"
3431,Neutral,"Please ask this question on StackOverflow as it is related to GRPC:

`rx.exceptions.OnErrorNotImplementedException: grpc failed`

Also add an `onError` handler to your `subscribe()` call."
3432,Positive,"Ha, good catch, just fixed.

I wrote the code in an IDE to make sure it compiled, but didn't test that part!
"
3433,Neutral,"It is behind a major version bump along with many other changes that have
the opportunity to break client code without proper care. Besides, RxJava
doesn't have a choice in the matter because of the reactive streams spec.

On Mon, Sep 5, 2016 at 11:11 AM Víctor Albertos notifications@github.com
wrote:

> Thanks :)
> 
> Btw, I think this is going to break a lot of client code. Not allowing to
> play with null values is a huge change.
> 
> With 1.x this test will pass:
> 
> ```
>     rx.observers.TestSubscriber<String> testSubscriber = new rx.observers.TestSubscriber<>();
>     rx.Observable.just("""")
>         .map(new Func1<String, String>() {
>             @Override public String call(String s) {
>                 return null;
>             }
>         })
>         .subscribe(testSubscriber);
>     testSubscriber.awaitTerminalEvent();
>     testSubscriber.assertNoErrors();
>     testSubscriber.assertValueCount(1);
> ```
> 
> But with 2.x this test won't pass:
> 
> ```
>     TestObserver<String> testObserver = new TestObserver<>();
>     Observable.just("""")
>         .map(new Function<String, String>() {
>             @Override public String apply(String s) throws Exception {
>                 return null;
>             }
>         })
>         .subscribe(testObserver);
>     testObserver.awaitTerminalEvent();
>     testObserver.assertNoErrors();
>     testObserver.assertValueCount(1);
> ```
> 
> Because you are collecting now feedback about 2.x version, I just wanted
> to point out that this change -in my opinion- can potentially break a lot
> of client code.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/ReactiveX/RxJava/issues/4475#issuecomment-244768638,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAEEEWnQAdp39-onIMhomdiqD9vpSTvXks5qnDEzgaJpZM4J1Ela
> .
"
3434,Neutral,"Can't work that way. 

As I said, you need a custom scheduler that doesn't interrupt when its tasks get disposed."
3435,Positive,"Hi

Thanks for reply.

I'm afraid that my key point is not told exactly.

``` scala
val subscriber = TestSubscriber[Int]
val subjectA = BehaviorSuject[Int](1)
subjectA.filter(_ > 1).subscribe(subscriber)
subscriber.assertNoValues()
subjectA.onNext(1)
subscriber.assertNoValues()
subjectA.onNext(2)
subscriber.assertValue(2)
subjectA.onNext(1)
subscriber.assertNoValues()
```

As above, if there are some input that greater than `1`, then there is some output.
if not, then there is no output.
What I want to do is that test whether there is no output for `subjectA.onNext(1)` or not.

Currently, `TestSubscriber` remembers last output. So, if there is no output, last output is preserved but not cleared.
So, in above code, some output(in this case `2`) is remaining in `TestSubscriber` even though last input(in this case `subjectA.onNext(1)`) does not make any output.

Of course, I understand that initialy design intention for `assertValue`/`assertValueCount` is not for this case.

So, my suggestion is that if there are `whateverThatClearInnerValues()` that clear inner state, it would be something helpful.

If so, usage will be like below

``` scala
val subscriber = TestSubscriber[Int]
val subjectA = BehaviorSuject[Int](1)
subjectA.filter(_ > 1).subscribe(subscriber)
subscriber.assertNoValues()
subjectA.onNext(1)
subscriber.assertNoValues()
subjectA.onNext(2)
subscriber.assertValue(2)
subscriber.whateverThatClearInnerValues() // here!!!
subjectA.onNext(1)
subscriber.assertNoValues()
```

Thanks for reading.
"
3436,Negative,"Here at square, the android team take a lot of care to keep distributions small. This issue does come up as more devs are experimenting with rxjava, and it came up again today.

It is too bad there's a problem with some languages that requires distributing inner test classes in jars.  If it weren't for this, one could consider proguarding rxjava here, in the root project, and remove work for those consuming in android projects.

I'm hoping someone can be creative and determine a way to address the language issues mentioned so that we can use rxjava without increasing the complexity of proguard config in each project that uses rxjava.
"
3437,Neutral,Okay Ill do what you said.
3438,Neutral,"Something I've been wanting for a while is the ability to use the `RxJavaPlugins` mechanism to assign the default `Scheduler` factories for `Schedulers.computation()`, `Schedulers.io()` and `Schedulers.newThread()` so that a system wanting to change this behavior can do so in one place without needing to use the overloads everywhere. 

This could be useful to use lightweight threads for example (https://github.com/puniverse/pulsar) instead of normal threads everywhere in the system. It could allow specific customization of thread behavior when an app knows a better way to do things.

Here is some code I wrote (but have not yet tested) that would allow this behavior: https://github.com/Netflix/RxJava/pull/905

Obviously if someone is using a specific implementation directly it would not help, but generally the `Schedulers` factory methods should be used, and if they are then this plugin can help.

Perhaps we can deprecate the actual Scheduler implementation constructors so only `Schedulers` factory methods can be used for built-in schedulers?
"
3439,Neutral,"Other than the final things being worked on, does anyone else have things you feel are needed in 0.17, or that have happened in 0.17 that you disagree with (for objective reasons)?
"
3440,Neutral,"`(Throwable, Option[Any])`
"
3441,Neutral,Closing via #5106.
3442,Positive,Thanks for that. Will update RxJava so we can get that fix in
3443,Neutral,"@artem-zinnatullin in which case why have back pressure at all?
@davidmoten in the scenario you cannot statically predict the required buffer size. RxJava is now essentially pull-based; Nothing wrong with that, just different from pure push, and makes it harder to do pure event stream processing.
"
3444,Positive,"I'd like to encourage feature-requesters to go ahead and implement their proposals as PRs. It's not about our lack of technical knowledge or time to do it ourselves, but the opportunity to get others engaged in RxJava. So in that sense, many community content would be flagged as either of these, which I already do with the feature-request tag.
"
3445,Neutral,"You could wrap the `newThread()` with a scheduler that logs the current stacktrace when the Worker.unsubscribe is called to see who is shutting it down.

``` java
public final TrackNewThreadScheduler extends Scheduler {
    public Worker createWorker() {
        return new TrackedWorker();
    }

    static final class TrackedWorker extends Worker {
        final Worker actual = Schedulers.newThread().createWorker();

        public Subscription schedule(Action0 task, long time, TimeUnit unit) {
             return actual.schedule(task, time, unit);
        }

        public void unsubscribe() {
             new Exception().printStackTrace();
             actual.unsubscribe();
        }
    }
}
```
"
3446,Neutral,"I would very much recommend using JMH, and not Caliper. The latter has lots and lots of issues, which are addressed in the former. Here's a great [presentation](http://shipilev.net/talks/devoxx-Nov2013-benchmarking.pdf) about it.
"
3447,Neutral,"Sample code from our project (kotlin):

```kotlin
import android.os.Process
import java.util.concurrent.ThreadFactory
import java.util.concurrent.atomic.AtomicInteger

/**
 * See [rx.internal.util.RxThreadFactory].
 */
class JunoRxThreadFactory(private val prefix: String, private val androidThreadPriority: Int) : ThreadFactory {

    private val counter = AtomicInteger()

    override fun newThread(runnable: Runnable?) = Thread(
            {
                Process.setThreadPriority(androidThreadPriority)
                runnable?.run()
            },
            ""$prefix ${counter.incrementAndGet()}"")
            .apply { isDaemon = true }
}
```

We use it for all schedulers and apply [`THREAD_PRIORITY_BACKGROUND`](https://developer.android.com/reference/android/os/Process.html#THREAD_PRIORITY_BACKGROUND). It reduces number of ""descheduled frame"" warnings noticed by systrace, especially during application startup."
3448,Positive,"10x, looking the marble diagrams, `withLatestFrom` has exactly the behavior I was searching for!"
3449,Neutral,"You can always roll your own operator so you can hide the boilerplate in a reusable fashion. Here is an example:

``` java
public final class MyUsing<T, Resource> implements OnSubscribe<T> {
    private final Func0<Resource> resourceFactory;
    private final Func1<? super Resource, ? extends Observable<? extends T>> observableFactory;
    private final Action2<? super Resource, Observer<T>> dispose;
    public MyUsing(Func0<Resource> resourceFactory,
            Func1<? super Resource, ? extends Observable<? extends T>> observableFactory,
            Action2<? super Resource, Observer<T>> dispose) {
        this.resourceFactory = resourceFactory;
        this.observableFactory = observableFactory;
        this.dispose = dispose;
    }
    @Override
    public void call(Subscriber<? super T> subscriber) {
        try {
            final Resource resource = resourceFactory.call();
            final AsyncSubject<T> disposeOutcome = AsyncSubject.create();
            subscriber.add(Subscriptions.create(new Action0() {
                @Override
                public void call() {
                    dispose.call(resource, disposeOutcome);
                }
            }));
            @SuppressWarnings(""unchecked"")
            Observable<T> observable = (Observable<T>)observableFactory.call(resource);
            observable.mergeWith(disposeOutcome).subscribe(subscriber);
        } catch (Throwable e) {
            // eagerly call unsubscribe since this operator is specifically about resource management
            subscriber.unsubscribe();
            // then propagate error
            subscriber.onError(e);
        }
    }
    public Observable<T> toObservable() {
        return Observable.create(this);
    }
}
```
"
3450,Neutral,"[Just use this](https://github.com/artem-zinnatullin/RxJavaProGuardRules)
"
3451,Positive,"I've looked into this for 2 days now. I think there's no way to do it.

I'm still convinced it should be possible :)

The nearest thing is to probably using the materialize operator on the observable, pass it to a BehaviorRelay or some kind of relay (Jake Warthon RxRelay library) and use the scan operator on the relay to get objects containing both the error the values and, eventually, the state (loading etc...).
"
3452,Neutral,I've implemented the remaining reactive types in [RxJava 2 Extensions](https://github.com/akarnokd/RxJava2Extensions#special-publisher-implementations).
3453,Neutral,"Or `toBlocking().lastOrDefault(null)`.
"
3454,Positive,"Yes, that was exactly my point. Using `Irrelevant` does not actually provide actionable information for anything downstream, since anyone consuming an irrelevant type means the type itself is irrelevant.

The only advantage I see to having an `Irrelevant` type is having a way to indicate (to developers) that the actual instance being passed means nothing. Thinking on it further, I think that is probably achieved well enough with `Observable<Object>`, since an `Object` doesn't really have a purpose either.
"
3455,Positive,"Oh that was quick. Impressive )
Just out of curiosity - is it kind of implied that thing like 

``` java
 subscriber.add(disposeOnceOnly);
```

always succeed and cannot throw? As well as doOnTerminate / doAfterTerminate.
Isn't it safer to always do dispose in a big finally block _unless_ unsafeSubscribe was successful? That would probably also simplify exception handling as now you have two identical copy&paste blocks...

Sorry if I am asking nonsense - really unfamiliar with the framework right now.

PS: you also have a semicolon following .doAfterTerminate(disposeOnceOnly) on a separate line - probably a typo.
"
3456,Negative,"@radzio Sorry to see it now, I used the following code to solve this problem.
```java
static {
        RxJavaPlugins.setErrorHandler(new Consumer<Throwable>() {
            @Override
            public void accept(Throwable throwable) throws Exception {
                if (throwable instanceof InterruptedException) {
                    log(""Thread interrupted"");
                } else if (throwable instanceof InterruptedIOException) {
                    log(""Io interrupted"");
                } else if (throwable instanceof SocketException) {
                    log(""Socket error"");
                }
            }
        });
    }
```
"
3457,Positive,"Good idea.  At first glance, I think this could be accomplished by the introduction of an implicit class (`ScalaObservable`?) wrapping `Observable` that implements `flatMap`, `map`, and `withFilter` by delegating to `mapMany`, `map`, and `filter`, respectively.  As long as all the methods still return an `Observable`, then we should be OK.
"
3458,Neutral,"I understand - this is more to reduce the fact that all the classes are spread across the codebase without any sharing of implementation. I'm pretty sure we can consolidate code somewhat.
"
3459,Neutral,"To backup what @akarnokd said, I have consciously not been strict about styles. I generally dislike most of the artificial and subjective decisions style guides make and wanted to make RxJava as easy to contribute to as possible. 

It is all covered in this line from https://github.com/ReactiveX/RxJava/blob/1.x/CONTRIBUTING.md:

> When submitting code, please make every effort to follow existing conventions and style in order to keep the code as readable as possible.

Beyond that it is left to good judgement and intelligent individuals trying to cooperate together.

A related topic is whether all pull requests must be single-commit or not. This is another where I have chosen to not be strict. If a pull request is a mess of many incremental developer commits I sometimes ask for it to be rebased, but if there are a handful of logical commits with decent commit messages I'm fine with there being more than one. 

Almost all developers self-police on having clean code and clean commits and matching the style of the project. Occasionally we need to provide guidance on improving something, but that's rare compared with how most developers do the right thing without being explicitly told what to do.

All of this aligns with the ""freedom and responsibility"" culture at Netflix where this project originated: http://www.slideshare.net/reed2001/culture-1798664
"
3460,Neutral,"We have those kind of transformers but they are not wired up to `compose` for some reason  (forgotten?). PR welcome.
"
3461,Neutral,"Fixed via #3285
"
3462,Neutral,"This may be the exception to the server, but this should not cause the app to run, this exception RxJava can not be caught? Should not call the onError method?
"
3463,Neutral,"@akarnokd If we have a composite subscription , out of which we want only few subscriptions to be unsubscribed (all were added/removed according to lifecycle) , should we individually unsubscribe each of them or can we still use composite subscription?   
"
3464,Neutral,"The parent queue interface was designed after the Single-Producer-Single-Consumer queues like those in JCTools. 

There, the requirement is that `poll` is called from a single thread at a time and the fused ""queues"" must honor this requirement. Since `index` in fused mode is only updated from within `poll` and poll is serialized by a pair of full barrier atomic add operations, any change to index will be written back into memory before an atomic decrement and read from it after the atomic increment of the drain loop. 

It works just the same as the non-fused `request` execution where the atomic transition from 0 to N is guaranteed to happen only to one thread and the atomic transition attempt from N back to 0 will enable a subsequent thread to do the 0 to N transition again. When doing the 0 to N transition, the next operation is to read the index and when doing N to 0, the prior operation is to write back the index. The full barriers of the atomics will make sure the change to index is visible to the next thread.

On rare cases, such as the `TestSubscriber`, `poll` is called from within `onNext` and `onNext` is required by the Reactive-Streams spec to be serialized the very same manner as `poll` requires it."
3465,Neutral,"That's great that workarounds exist so we can move forward, I look forward to hearing how the autocomplete example works.

If you can get that functioning is that strong enough evidence to move forward with it or are there still pieces of functionality lacking?

How do you envision ongoing maintenance of this class? Do all new operators added to `rx.Observable.java` required wrapping methods, or does it pass thru if a wrapper isn't there?
"
3466,Positive,"The from code is a good starting place though, thanks!
"
3467,Negative,"the code execution on eclipse（Only one time）：
get error, it will try after 1000 millisecond, retry count 1

the code execution Android Studio：
get error, it will try after 1000 millisecond, retry count 1
get error, it will try after 1000 millisecond, retry count 2
get error, it will try after 1000 millisecond, retry count 3
onError error = java.lang.RuntimeException: always fails

I don't know what reason is this，waiting for your reply，thank you！"
3468,Neutral,"Unsubscription has been always best effor in 1.x, that means even though issued an `unsubscribe`, it may free the relevant resources after a non-deterministic time, highly depending on what the flow looks like.

Generally, the `if (isUnsubscribed())` is only probabilistically executed because most chains already do such `isUnsubscribed()` checks and call the downstream if false, therefore, there is only a small window for an asynchronous `unsubscribe` to cancel the sequence right before your `if` executes.

I can't speak for Jersey since I don't know it or how they implemented their RxJava support. Sounds like they disregard `isUnsubscribed` after a long running and blocking request and send out the response no matter what and/or they don't react to downstream `unsubscribe` requests by interrupting their network wait.

To rule out RxJava, I suggest you replace the Jersey part with plain RxJava sources that sleep for example to rule out RxJava and/or your flow setup."
3469,Neutral,"I guess it depends. Sometimes you takeUntil() something that may or may not actually emit, like many lifecycle handling patterns do"
3470,Neutral,"You can create a custom `Scheduler` that takes a single `Worker` from `Schedulers.computation()` if you want to pin them all to a single event loop for some reason.

I'd suggest though that the way you should do this is to merge the streams and then observeOn, that's the compositional way of doing this.

``` java
Observable.merge(stream1, stream2).observeOn(Schedulers.computation())
```

All events will now end up on a single thread. 
"
3471,Neutral,"Done in pull request #257 
"
3472,Neutral,"It seems your source doesn't emit enough values thus the default buffer of 128 elements in `observeOn` can hold all of it without backpressure. The `onBackpressureBuffer(int)` behavior is expected and is there to give room to bursty sources but fail on sustained backpressure to prompt the developer to reevaluate the flow.

There is a [PR](https://github.com/ReactiveX/RxJava/pull/3487) in limbo that tries to address this buffer behavior by allowing dropping, but if you want to queue on disk, you have to write a custom operator.
"
3473,Neutral,"We do not have formal performance benchmarks on our jobs. We autoscale our cluster based on resource utilization and we saw our cluster size go up by about 30% - 100% depending on the workload. 
To give you a bit more context we have built a reactive stream processing system that basically reads data items as they flow in and processes them on a computation threadpool using observeOn. In terms of scale the jobs seeing the most impact process  <= 10k messages/sec  of size a few kBs each
"
3474,Neutral,This defeats the purpose then every caller needs to know about the absent value plus even I can also just use a single in the first place. 
3475,Neutral,"Yeah, even 1.x codebase is quite hard to maintain, 2.x with different Flowable/Observable makes it even harder to work with…

@akarnokd you can add basic support of `Single` and `Consumable` in 2.x (basically just make library architecture aware of them from the beginning instead of adding them post-factum as it was in 1.x), non-basic operators can be added by community according to its needs as it happens/happened in 1.x.
"
3476,Neutral,"Have you looked at the retry operator?
"
3477,Neutral,"> But it won't work with Subject as Java doesn't support multiple inheritance and 
> Subject needs to extend both Observable and Observer.

One way around that would be to make it have a toObservable method.
"
3478,Positive,"Thanks for the details. CompositeSubscription becomes very slow when it grows over the size of the cache line in the CPU and constant add/remove is happening (see #1145).

Subscriptions$2 is perhaps the wrapper for Future, which keeps a final reference to the Future object, which generally shouldn't be a problem if its parent container is removing/clearing it.

What is worrying is that there is an unsubscribed `CompositeSubscription` with a non-empty array. When unsubscribed, `CompositeSubscription` should drop the entire array and don't accept any new additions. Could you tell where that `CompositeSubscription` is embedded?
"
3479,Neutral,"The hang happens because the flatMap never receives an onCompleted from the emitter and thus unable to release the latch in the blocking forEach.
"
3480,Positive,"I'm okay with that restriction because if someone wanted to use the `continueWith` (I like `switchEmpty` more) but wanted to ensure the error doesn't happen then they can compose it with `ignoreElements`.
"
3481,Neutral,"I realize that there are ways to work around it, but it would be much more convenient to just have an overload with an extra parameter to specify whether to delay the first value after subscription
"
3482,Negative,"Yes , 
I realized it might be rxandroid operators issue , posted to rxandroid .   sorry about that.

"
3483,Positive,"That sounds good to me, and I suppose a copy of it needs to go in the more generic ReactiveX doco. By _it_ you mean the details of the contract extracted from the pdf?
"
3484,Positive,"`=>Unit` would be even better. 
"
3485,Positive,"Benjchristensen, I'm not from Netflix and would like to contribute to RxJava. 
Can you pls direct me  how to contribute to RxJava?

Tks
Sudar
"
3486,Neutral,"I think that `reduce` needs a type parameter `U` with `U super T` in the Java Observable. And similar changes will be needed for other methods as well, in order to make sure that the `T` of `Observable<T>` never occurs in a contravariant position. I'll post corresponding code soon.
"
3487,Positive,"Thanks for clarification!
"
3488,Neutral,"Can someone who has worked with Android and the `AndroidScheduler` take a look at this please?
"
3489,Neutral,"See #3688
"
3490,Neutral,"I don't have experience with Android so can't help on this. Perhaps the RxJava Google Group would be a better place to ask?

https://groups.google.com/forum/#!forum/rxjava
"
3491,Positive,"> Maybe we should sliding and tumbling as shorthands for tumblingWindow and slidingWindow and then use the appropriate long names for buffer, since that more ""dangerous"" because it buffers.

Sounds great to me.
"
3492,Neutral,"Your are mixing a few concepts, there is nothing to call `onError` on when you block for the results of a source. Since `Completable` doesn't have any value, it allows for the opportunity to get the `Throwable` without the need to try-catch it. For the other types, getting the item is more important and since Java doesn't support record types or multi-value returns, the alternate delivery method for these remain rethrowing the exception.

Also it is marked with `@CheckReturnValue` so a static analysis tool/IDE should warn you if you forget to check the returned value."
3493,Positive,"Hello!  In the past couple of months I've put some time into developing a library for reactive/responsive programming based on a pull model called _choice streams_.  I believe that you might find it interesting.

Here is a little bit of prose on the idea:

  https://github.com/Hopac/Hopac/blob/master/Docs/Inverting.md

I must apologise that the above document is somewhat out of date with respect to my improved understanding of Rx and contains a couple of incorrect assertions.

And here is the current reference documentation on choice streams:

  http://hopac.github.io/Hopac/Hopac.html#def:type%20Hopac.Stream.Stream

Summary: It turns out that it is quite possible to do responsive and reactive programming with a pull model.  All you need is lightweight threads, lazy futures/promises and non-deterministic choice.  Even operators like `groupBy` and operations like `delay` (I call it `shift`) can be implemented for choice streams.  Many operations appear to be significantly simpler to implement on pull -based streams than on push -based streams.  The main feature lacking from choice streams is the subscription protocol, which means that operations like `Using` cannot be implemented with comparable semantics.

Please note that choice streams are still work-in-progress and, compared to Rx, there are a few combinators missing that I haven't yet had the time to implement, although I'm confident there will be no problems.  I'm already using choice streams in an actual application for reactive/responsive programming and they have worked without problems.
"
3494,Neutral,"@HotIceCream your sources never complete and keep the subscriber active.
"
3495,Positive,"> The problem with pooling is that it can now become the congestion point: multiple threads might want to grab an element from the pool at the same time.

Sure, but if it's a concurrent queue, which it is, then that contention should not be severe. It's using an `MpmcArrayQueue` optimized for performance. 

I agree it is a point of contention, but if that contention is cheaper than the object allocation/collection then it's a net win. 

> reference counting

This could work but is effectively synchronizing unsubscribe and queue usage (cheaper than mutex, but still a form of synchronizing) which definitely has a cost, both performance and cognitive every time this queue is used. Hence us pursuing either a solution that doesn't need to be pooled, or my pursuit of weak references so the release to the pool is automated. 
"
3496,Neutral,"I'd vote for gradle, just for consistency with the ""mother"" project. My knowledge of build systems is next to zero.
"
3497,Neutral,"I can't replicate this and no one has reported this in prod/dev usage, only Cloudbees, so I'm moving this to 1.0 and not blocking 0.20 on this.
"
3498,Neutral,"@benjchristensen you've probably already investigated but does any of the quasar work help or the backported `ForkJoin` for JRE6?
"
3499,Neutral,"I don't mind whitespaces or if you removed them in PRs anyomore but I won't bother removing them in my PRs.

How about everybody posts with what whitespace settings he/she sees adequate?
"
3500,Neutral,"I'd add `doOnUnsubscribe` so you can execute the cleanup action or simply use `using` that will execute the cleanup if the source completes normally or is cancelled.
"
3501,Neutral,"Yup. It has drawbacks. You've been given a handful of answers. What do you suggest if the answers provided are insufficient? 
"
3502,Neutral,"But the difference is long running operation as an anonymous class vs a short running one. I think that is a clear enough distinction. Also it's clear that your anonymous class is keeping a reference to what it is inside, but less clear that it's also keeping a reference to the Observable.
"
3503,Positive,"I'm trying your suggestion to move the retryWhen() - but I don't fully understand why that would work and the current version doesn't. Thank you for your feedback, and if you are able to set me straight on my understanding above, that would be a great help.
"
3504,Negative,"I'm busy with other work and may not go back to work on this one soon. If someone is interested in the issue, please go head.
"
3505,Neutral,"It is much faster that way because after the first call, all subsequent calls would fail the CAS and it costs 15-45 cycles whereas `get()` is likely to  cost 3-10 cycles only. Since `request` is called quite frequently, the optimization helps greatly in reducing the overhead. See the `AtomicPerf` benchmark that measures this effect. 

However, if said check is likely to get executed once, the extra get actually makes it slightly slower (something to do with how CPUs behave when they read-then-write the same memory location). Therefore, we don't call `get()` in, for example, Subscription implementations.
"
3506,Negative,"There was a PR for shutting down schedulers (and allow them to start again) but it died.
"
3507,Neutral,"The suggested name is too close to `fromCallable`. Besides, the Javadoc of `AsyncEmitter` warns about sequential use:

``` java
/**
 * Abstraction over a RxJava Subscriber that allows associating
 * a resource with it and exposes the current number of downstream
 * requested amount.
 * <p>
 * The onNext, onError and onCompleted methods should be called 
 * in a sequential manner, just like the Observer's methods. The
 * other methods are threadsafe.
 *
 * @param <T> the value type to emit
 */
```
"
3508,Positive,"Closing out ... review has decided that what we have is what we want.

Thanks @akarnokd and @headinthebox 
"
3509,Neutral,"The approach I've been intending to take for 2.x is to start a completely clean branch, make it depend on a shaded version of RxJava 1.x so we can bridge to most operators until we finish the migration, and focus on getting the public APIs right first, and key functionality of map/flatMap/observeOn/Schedulers/subscribe working.

Let's pick up that conversation on the 2.x issues though ... this one is very focused on merge/flatMap.
"
3510,Neutral,"Could you run with `--stacktrace` to find out what exactly is causing the problem. It is very likely this is a bug with Nebula and can't do much about it from RxJava.
"
3511,Negative,"Well, it's hard to divide `subscribe()` and setting of initial value (which is `~onNext`) for me.

What I see at the moment:
1. Current implementation of `BehaviorSubject.create(defaultValue)` sets default value to `volatile Object latest` field of `SubjectSubscriptionManager`.
2. When you call `onNext()` it also sets new value to that `volatile` field without any synchronization. 
3. When you `subscribe()` it won't start with `defaultValue` that you've passed as initial but it will emit that `volatile latest` state instead -> that leads to the effect that @sregg sees.

And now I'm not sure that `toSerialized()` will help with initial value because even though it synchronizes `onNext`, emission of the default value goes trough different lock object and still may happen concurrently with `onNext`…

@sregg as temporary solution you can try to create `BehaviorSubject` **without** default value, convert it `toSerialized()` and set default value via `onNext` before giving reference to the subject to other threads, this should give you threading consistency you want to achieve.

Probably we need to define this behavior better either in javadoc or even change current impementation to emit `default` initial value first and only then emit `volatile latest`.

@akarnokd will be great to get your comment here!
"
3512,Neutral,"That's why: http://stackoverflow.com/questions/35343474/why-does-it-need-onbackpressure-here-for-click-events. The code seems OK and I spent some time in debugger to see that `requested` is 16 when it should be NOT_SET.
"
3513,Neutral,"@niqo01 this should be fixed since 0.19.2. Do you still have the issue? @benjchristensen keep an eye on this issue since we might want to close once we confirm the issue is fixed.
"
3514,Neutral,"Discussion from https://github.com/Netflix/RxJava/issues/1001#issuecomment-44448887:

> However, backpressure is a huge undertaking; most of us need to learn a new paradigm and way of coding, and it will certainly affect all operators. Even if I had the time, I couldn't make it under a month, not to mention, in a battle-ready fashion.

In what way is this considered a new way of coding? I also don't see it affecting all operators, only the ones that are async (like `zip`, `merge`, `observeOn`). 
"
3515,Negative,"Hey @dpsm sorry for not staying on top of this, a bit swamped at the moment. We're still setting up RxAndroid and I'd like to get the build and project setup hurdles out of our feet first.

Meanwhile I'd like to start by moving all RxAndroid related issues over to that project. Could you repost your proposal here? https://github.com/ReactiveX/RxAndroid/issues/3

Then we can close this out and move the discussion over. Thanks!
"
3516,Positive,"Thanks alot!
"
3517,Neutral,"Any more on this or can it be closed?
"
3518,Positive,Looks good to me.
3519,Negative,"Maybe there's something wrong with my code. I've put the code above in onResume of a totally empty Activity to nail down where's the issue. If somebody can test this on other devices it would be very helpful. I don't have any non-Samsung devices at the moment.
"
3520,Neutral,RxJava 1 by default didn't call `uncaughtException` and thus never crashed due to undeliverable erros but swallowed it.
3521,Positive,"This is completed with the merge of https://github.com/Netflix/RxJava/pull/1276. Thanks @jbripley 
"
3522,Neutral,"Closing out as this is quite old. Please reopen if needed.
"
3523,Neutral,"If you don't mind losing a tick with a periodic timer then `onBackpressureDrop` should work. Otherwise, if you thing it is just a transitional effect, you can use `onBackpressureBuffer`.

If you encounter this exception, you should verify all the operators do support backpressure. If not, you need to apply one of the `onBackpressureXXX` methods. If all the operators support backpressure yet you encounter this exception, it is possible that there is a bug in one of the operators and you should report it here.
"
3524,Positive,"That is correct, until you disconnect. 

@vadims, do you do the caching in Rx, or outside?
"
3525,Negative,"@benjchristensen I hava the same problem.I want the zip operate work on a particual Scheduler.
Because one of the var can only work on a particual Scheduler.

other Scheduler will crash.
"
3526,Positive,"> From what I can tell groupBy is finally working correctly.

Nice! I'll try some edge cases ...
"
3527,Neutral,@akarnokd what the purpose of `retry()` in your code?
3528,Positive,"@roman-mazur Thanks for that information, it is useful information. If I understand correctly you are saying there are normal cases when Android can and will interrupt a thread and thus application code must account for this. Is this what you're saying?

As far as RxJava is concerned, I'm suggesting we eliminate the two places where RxJava is the culprit for interrupting the thread (despite #1832 working around the particular issue of using `single` that triggers the issue).
"
3529,Neutral,"Subjects have been enhanced in 1.0.5 with methods that get you their current state.
"
3530,Positive,"Yeah, that seems to have fixed it.  Thanks!"
3531,Neutral,"If you defer to flattening it, don't you lose the ability to check the result and complete in the emitter? Or would that be a good candidate for something like takeUntil()?"
3532,Negative,"I don't understand what ""buck"" is. I assume it is this => http://facebook.github.io/buck/ ?

Have you found a code path that actually tries to use `sun.misc.Unsafe` (a problem that needs to be fixed if so), or this is another tool that does reflection and incorrectly assumes `sun.misc.Unsafe` is being used (even when it is not being used at runtime)?
"
3533,Positive,"What about `skipAfter`, or `terminateAfter`? This (Scala syntax) does not look too strange to me:

``` scala
    observable.terminateAfter(_ > 3).subscribe(…)
```

does not look that strange to me. `terminateAfter` carries the notion that the observable will be terminated right after the matching value, while `skipAfter` would rather mean that we skip the `onNext` events and propagate the `onTerminated` and `onError`.
"
3534,Positive,"Thanks for this answer. Using the `maxConcurrency` parameter has solved my problem.
"
3535,Positive,"Wow! Be careful:
1. emit ""as"": `throw` -> `flatMap` is skiped
2. emit ""asd"": go to `flatMap`, output `""flatMap""`, but where is output in `subscribe`?
"
3536,Positive,"`Subject.java` something like ""Represents an object that is both an observable sequence as well as an observer"". Good catch, surprised this has been without a doc comment for so long.
"
3537,Positive,"Good intro here: http://northhorizon.net/2011/sharing-in-rx/
"
3538,Neutral,"That would still require the changing of `Subscription` thus my comment still stands.
"
3539,Neutral,"Call `.map(ResponseBody::string)` before your `doOn` operators to consume the body into an immutable string. Or, better yet, change your Retrofit interface to return a `String` directly instead of `ResponseBody` (by adding the 'scalars' converter).

This isn't a problem or at all related to RxJava though. You'd have the same problem calling `.string()` twice on a `ResponseBody` always."
3540,Neutral,"See #3979.
"
3541,Neutral,I've posted the issue on [RxBinding](https://github.com/JakeWharton/RxBinding/issues/391). I'll also think about adding some additional debug support in RxJava2Extensions to help detecting such cases.
3542,Neutral,"What about OperatorMap?
"
3543,Positive,thanks all
3544,Positive,"I can't currently think of anything that if done in core for release 0.12 would improve Scala support. But probably I'll find such things just after 0.12 is released ;-)
"
3545,Neutral,"Is this fully implemented or do we need more work beyond what was merged?
"
3546,Neutral,"Branch with unit test at https://github.com/benjchristensen/RxJava/commit/6921f729c76c9b6bc940e239d99181e93eba8406
"
3547,Negative,"Which scheduler? Computation? It was intentional. You can now configure the priority of each scheduler so there was little benefit from a customizing the factory. Use the [ParallelScheduler](https://github.com/akarnokd/RxJava2Extensions#parallelscheduler) from extensions which allows more [customization](https://github.com/akarnokd/RxJava2Extensions/blob/master/src/main/java/hu/akarnokd/rxjava2/schedulers/ParallelScheduler.java#L87).

"
3548,Neutral,"@stealthcode and I did some tinkering on an idea to build a gradle plugin for merging dependencies. The idea being that you could add methods to any class prior to the building of your code. I had envisioned the syntax being something like

```
dependencies {
    colliderCompile 'org.reactivestreams:reactive-streams:1.0.1' {
         merge 'reactivex.io.rxjava3:rxjava3:1.0'
         merge 'reactivex.io.rxjava3:rxmath:1.0'
    }
}
```

The `rxjava3` jar would contain a duplicate the interface of `org.reactivestreams.Publisher<T>` but with default methods for core things like `scan` and `flatMap`. The collider plugin would repackage the reactive-streams-1.0.1.jar on disk with the injected methods so IDEs and JVM would be none the wiser that they weren't there all along. Then the `rxmath` could add thing related to `count`, `average`, `mean` and `standardDeviation`.

Of course that plugin would be an entirely independent project and NOT discussed here in rx java. If you have more questions ping me directly.
"
3549,Neutral,"Yes, 3.x API cleanup can include this type of change. I otherwise always have separate converters for the base reactive classes.

/cc @JakeWharton, @vanniktech, @artem-zinnatullin "
3550,Negative,"That producer looks shady and unconventional to my eyes. If the source completes the same time there is a request that transitions from 0 to n, both would end up in the emit() method. Let me write a test that breaks it...
"
3551,Positive,"Looks like `OnSubscribeToObservableFuture` was not refitted with backpressure support and it fires the future's value unconditionally. I'll post a fix for this. Thanks for reporting!
"
3552,Positive,"I confirm that the new version works.

The combo works well. I'll check again why I wasn't able to upgrade the last time. I think I only upgraded RX and this is why it failed.
"
3553,Positive,"That's very smart
"
3554,Neutral,"I encounter `NoSuchMethodError` sometimes. ""Rebuild project"" can solve it for me. Could you try it?
"
3555,Neutral,"> testFirstGroupsCompleteAndParentSlowToThenEmitFinalGroupsAndThenComplete

I can't replicate this one. 

> OnSubscribeCacheTest

I believe these got fixed in recent changes as I can not reproduce them.
"
3556,Neutral,"How would an operator know how many messages it is going to have? Only the origin Observable could know that - a given operator along the chain won't know so how does this get accomplished?
"
3557,Positive,"Great. I though #1898 was shipped with 1.0.1.
"
3558,Negative,"Right, but users will have to put `@Rule` in each test class, not everybody use JUnit (we also use two versions of Spek in our projects and mix JUnit4 with JUnit5), I haven't found a way to set global custom JUnit4 test runner [in Gradle](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.Test.html) and by default IntelliJ runs tests on its own using build system only to generate test class files so it'll also require some customization.

""In production"" you typically have an entrypoint (Application classes exist in most of both in front- and backend frameworks) which is a convenient place to hook into RxJavaPlugins and set desired behavior. 

While tests are usually isolated from each other and each class if not method will require customization for um, detecting errors… which is basically what each test should do by default… It just seems wrong to not inverse current behavior.

@akarnokd what are your concerns about throwing `OnErrorNotImplementedException` for RxJava v2 specific subscribers and not doing so for Reactive Streams subscribers? 

Mine is that it can create sort of unexpected behavior if you'll try to mix RxJava v2 with some other RS implementations in compare to how RxJava v2 will work in isolation, but I'm not sure that mixing is common use case. I'm much more afraid that current behavior is ***very*** unexpected for v1 users who are migrating to v2."
3559,Neutral,"If someone is interested in, I now completely moved the `timeout().toBlocking().single()` calls to a custom implementation in the Couchbase SDK -> https://github.com/couchbase/couchbase-java-client/commit/4317ebe46c0c1b369f24f88efcf7d48f241736dd

But this only works for scalar responses and not if you need an iterator, but still. (in this case, I even save on a BlockingObservable since the latch directly works on the regular subscriber).
"
3560,Negative,"Here the error occurs even without `observeOn`:

``` java
System.out.println(Observable.from(1, 2, 3).take(1).map(f).toBlockingObservable().single());
```

This snippet also makes the app never terminate.

This prevents me from implementing the [head](https://github.com/samuelgruetter/RxJava/blob/2654f60e05a24fc910f73284e32290403d5bffcf/language-adaptors/rxjava-scala/src/main/scala/rx/lang/scala/Observable.scala#L1565) operation in the Scala adaptor, and the original one with `observeOn` prevents me from implementing a [nice constructor](https://github.com/samuelgruetter/RxJava/blob/2654f60e05a24fc910f73284e32290403d5bffcf/language-adaptors/rxjava-scala/src/main/scala/rx/lang/scala/package.scala#L141).
"
3561,Neutral,"Yes, they should be signalling NPE. Since traversing the Iterable happens way before the subscription, you could just end the traversal via `EmptySubscription.error(npe, s)` right there and not even subscribe to any non-null source.
"
3562,Positive,"I was thinking about and had the idea of only the capturing of the originating stack track one per worker when the first action is scheduled rather than every schedule call.  This would amortize the cost over many actions. I would think most operators schedule on their worker instance in a fairly consistent way. It wouldn't be 100% but better than nothing.
"
3563,Neutral,"`rx.concurrency.CurrentThreadScheduler$UnitTest` failed several times in my machine today:

<pre>
org.mockito.exceptions.verification.VerificationInOrderFailure: 
Verification in order failure
Wanted but not invoked:
action0.call();
-> at rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions(CurrentThreadScheduler.java:191)
Wanted anywhere AFTER following interaction:
action0.call();
-> at rx.Scheduler$4.call(Scheduler.java:184)
    at rx.concurrency.CurrentThreadScheduler$UnitTest.testSequenceOfDelayedActions(CurrentThreadScheduler.java:191)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.runTestClass(JUnitTestClassExecuter.java:80)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecuter.execute(JUnitTestClassExecuter.java:47)
    at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassProcessor.processTestClass(JUnitTestClassProcessor.java:69)
    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:49)
    at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
    at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
    at $Proxy2.processTestClass(Unknown Source)
    at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:103)
    at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
    at org.gradle.messaging.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
    at org.gradle.messaging.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:355)
    at org.gradle.internal.concurrent.DefaultExecutorFactory$StoppableExecutorImpl$1.run(DefaultExecutorFactory.java:66)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
</pre>
"
3564,Negative,"Exactly what i meant. Isn't it suppoused to run flatMap Observable code within another thread?
so that PRE-1-CALL and possibly (POST-1-CALL) are on another thread?

Did i misunderstand something?
"
3565,Positive,"Thanks @artem-zinnatullin , that reduces `RxRingBuffer` initialization time a reasonable range. Is there any downside if `unsafe` is disabled?
"
3566,Neutral,"See #4570
"
3567,Negative,"yes, that's exactly the problem actually. Also when replacing the merged `Observable` with a single one emitting items over time the test passes, which is quite confusing and inconsistent from a consumer point of view.
"
3568,Negative,"IMHO both @benjchristensen @zsxwing changes are valid and address the original issue with the static inner class scenario. The case where the Action is a non static anonymous inner class and there is a long running operation such as in the example is nothing we can do within the library.
"
3569,Negative,"Observable.create & Observable.just are all creating observables,why they have such a difference? And the distinction may be difficult to find. The official has a similar document can reference?"
3570,Negative,"I would not expect that observeOn keeps emitting null values. That seems wrong because the source never produced a null value `while (true) {  subscriber.onNext(i);  i+=1 }`
"
3571,Positive,"I'm not sure I follow. Exactly at which point has `1` already been emitted? It has not been emitted after the `toBlockingObservable` call, because the second example still yields an item. So, somehow, the `.next.iterator.next()` must have ""swallowed"" one item, while the call to `single` manages not to swallow it and emit it as I'd expect. Could you please elaborate in more detail on what is the conceptual (not implementation) difference between the two? I'm still not convinced that the `next` call should skip the item provided by the `BehaviorSubject`.

Thank you very much.
"
3572,Neutral,"Why is that an issue to call it in either of them? You can pass the same function to both the `onError` and `onNext` args for `doOnEach`. One or the other will be called and `ProgressDialogFragment.dismiss()` will be invoked either way.
"
3573,Neutral,"Ok after some thoughts and practical trials with applications of those Processors it seems that allowing > 1 onSubscription could complicate things significantly also create much confusion around behavioral expectations. 

One other thing to clarify, having we have canceled the Processor what is the behavior you'd expect 'current subscribers stay as is and new ones can be added as usual' ? In this case the Processor can still send onNext and eventually OnComplete which would terminate the subscribers.
"
3574,Neutral,"There is no try/catch in the code example you gave: https://github.com/ReactiveX/RxJava/blob/1.x/src/test/java/rx/observers/TestSubscriberTest.java

Operators will have try/catch, but it is incredibly rare to have try/catch in user code. 

The only time things are an issue is when calling methods that throw Checked exceptions (which almost everyone I know despises). In those cases it is a pain as one must try/catch around those. You can probably use `@SneakyThrows` yourself without RxJava doing anything to solve that issue. 

> If doing some IO operations like File, JDBC and Networks; this sort of callback will turn into a noisy code pattern really fast. Even with a JDK8 Lamdas, the pattern will be the same.

Here is IO being done without any ""noisy code"":

``` java
    return RxNetty.createHttpServer(port, (request, response) -> {
        return response.writeStringAndFlush(""Hello World!"");
    });
```

Please show what the issue is using code examples and your proposed solution that would involve changes to RxJava.
"
3575,Negative,No need. I overlooked `Single` as the base type in your example. A failing lambda can't call `onError` on `Single` but only the global error handler. 
3576,Neutral,"What about a ""Low Hanging"" label for newbies like me, that want to help. But know next to nothing about RxJava?
"
3577,Negative,"I certainly didn't. I saw Rx.NET use code generators on this. I'm not sure if we have anything similar available with Gradle and/or annotation processing.
"
3578,Neutral,"Do you think this is related to https://github.com/Netflix/RxJava/issues/1241? In which case we're just waiting on @akarnokd's fixes to `observeOn`.
"
3579,Negative,"I don't have a strong preference to using `Func1` or `Transformer` but I do want code that is usable by people without fighting for several minutes to figure out which incantation of super and extend they need to sprinkle in their signatures.

The type of code we should be able to easily write is shown above in https://github.com/ReactiveX/RxJava/issues/1663#issuecomment-59309638
"
3580,Negative,"One issue is with `concat`:

``` java
public static <T> Observable<T> concat(Observable<Observable<? extends T>> observables)
```

That works with this:

``` java
    public void testConcatCovariance() {
        Observable<Media> o1 = Observable.from(new HorrorMovie(), new Movie());
        Observable<Media> o2 = Observable.from(new Media(), new HorrorMovie());

        Observable<Observable<Media>> os = Observable.from(o1, o2);

        List<Media> values = Observable.concat(os).toList().toBlockingObservable().single();
    }
```

but it doesn't work with this:

``` java
    public void testConcatCovariance2() {
        Observable<Media> o1 = Observable.from(new HorrorMovie(), new Movie(), new Media());
        Observable<Media> o2 = Observable.from(new Media(), new HorrorMovie());

        Observable<Observable<Media>> os = Observable.from(o1, o2);

        List<Media> values = Observable.concat(os).toList().toBlockingObservable().single();
    }
```

When both types are `Media` the `Observable` ends up being `Observable<Observable<Media>>` instead of `Observable<Observable<? super Media>>` and then `concat` fails. This is not at all ideal, especially since it's more common to be concatenating multiple Observables of the same type.

If I change concat to this and remove the `? extends`:

``` java
public static <T> Observable<T> concat(Observable<Observable<T>> observables)
```

... the `testConcatCovariance2` example works and `testConcatCovariance1` fails unless I change this line:

``` java
Observable<Media> o1 = Observable.<Media>from(new HorrorMovie(), new Movie());
```

Personally I prefer doing that when dealing with super types than making `concat` be forced to deal with it all the time.

If you skip to `Observable.from(o1, o2)` step which confuses the generics and go directly to `concat` then it's even cleaner. 

This uses:

``` java
public static <T> Observable<T> concat(Observable<? extends T> t1, Observable<? extends T> t2)
```

Both of these work:

``` java
    @Test
    public void testConcatCovariance3() {
        Observable<Movie> o1 = Observable.from(new HorrorMovie(), new Movie());
        Observable<Media> o2 = Observable.from(new Media(), new HorrorMovie());

        List<Media> values = Observable.concat(o1, o2).toList().toBlockingObservable().single();
    }

    @Test
    public void testConcatCovariance4() {

        Observable<Movie> o1 = Observable.create(new OnSubscribeFunc<Movie>() {

            @Override
            public Subscription onSubscribe(Observer<? super Movie> o) {
                o.onNext(new HorrorMovie());
                o.onNext(new Movie());
                //                o.onNext(new Media()); // correctly doesn't compile
                o.onCompleted();
                return Subscriptions.empty();
            }
        });

        Observable<Media> o2 = Observable.from(new Media(), new HorrorMovie());

        List<Media> values = Observable.concat(o1, o2).toList().toBlockingObservable().single();
    }
```

In short, it seems the `Observable<Observable<? extends T>>` does not work well.
"
3581,Negative,"Also, the source files which generate the images appear to be missing from that repository.
"
3582,Neutral,"I'll add this to my todo list for this week.
"
3583,Neutral,"pollQueue in `observeOn` has a null check and based on https://github.com/Netflix/RxJava/pull/1361 and then work in 0.20 I think this is fixed. Please open a new ticket if the issue returned in 0.20 somehow.
"
3584,Positive,"@headinthebox thanks, I suspected so. Luckily, the issue I mentioned above was fixed and RxJava should behave as Rx.NET now.
"
3585,Negative,"We also plan to move RxJava over. The work on 0.20 has always been planned (#1000) and hopefully will not delay us (previous work on prototypes is what gives me this view). The APIs and core functionality should be able to be locked down on the time frame. I won't be surprised if there are edge cases that keep us iterating on release candidates for a few things once we get there. 
"
3586,Negative,"Excellent! Sorry... I am in the process of trying to upgrade and hadn't checked the latest API. 
"
3587,Positive,"If that is the case then mergeDelayError has the wrong description on what it does.
For any other composition I agree.
But for mergeDelayError I do not.
Because its purpose is to handle any error from its sources without breaking the sequence.

From the MergeWith perspective there is an UndeliverableError.
(BTW mergeWith docs also show only one error will be propagated to the final sequence)
But maybe this should not be the case.
MergeWith should deliver the error to mergeDelayError.

mergeDelayError should not care what type of error it is.
It should not care what the behaviour of the observable is.
It is described as my catch all and it does not behave like that.

So since mergeDelayError is not doing what I expect it to do, 
is there a way to have a catch all 
without handling each nested level of composition 
and without breaking the sequence 
and getting an aggregate exception in the end?

!Thanks for the link will definitely watch it!"
3588,Negative,"I'm having exactly the same issue. When online everything is good but crashes in airplane mode. Getting 'unknownHost' warnings etc. and then `FATAL EXCEPTION: RxCachedThreadScheduler-1`

Could we get an explanation why this exception crashes instead of going down to `onError()`? 

Regards
"
3589,Neutral,"Merge has been fixed in 1.0.5 so I'm closing this.
"
3590,Positive,"Thanks, this is a bug with `generate` not having the necessary safeguards. I'll post a fix shortly."
3591,Negative,"Right, but given I have hundreds of places that I could add that onError handler to, and decoupled stacktrace, I have no obvious place to start.
"
3592,Neutral,"I am using Android Studio. JRE and JDK are correctly setup for the project. There is no error message actually. It just does not seem to have an available method called .getInstance(). 
"
3593,Positive,Thanks David will fix on our end.  Our issue was that we are instantiating our object graph through DI which eagerly loaded the schedulers. Lazy should fix it.  
3594,Neutral,"Hi Akarnokd - How would you go about writing such an instance version ? 
Also, is there any other operator that can achieve the same purpose ?
"
3595,Neutral,"There are other complicated cases:
- `BehaviorSubject`, `PublishSubject`, `ReplaySubject` (plain, size, time, size+time)
- `GroupBy`
- any operator with timing, i.e., `Buffer`, `Window`, `Sample`, `Take`, `Skip`, etc.
"
3596,Neutral,"You can place a breakpoint on ScheduledAction L122 and see if it is triggered. Second option is to place a breakpoint on Thread.interrupt() to see who is calling; but without seeing what's going on in your system, the interrupt may come from somewhere else entirely. I'm not familiar with Flightrecorder but the mere observation of your system may trigger interrupts, wouldn't be surprised.

I measured ~10% throughput increase on simple tasks because self-interrupting triggers bookkeeping in the threadpool after the task's completion which takes up time from the next task.
"
3597,Neutral,"I think this issue has been resolved and can be closed.
"
3598,Negative,"my fault.will close.
"
3599,Neutral,"@benjchristensen so right now Im using doOnEach with my custom observer. There is no doOnNextOrError that I need. Do you thinks its reasonable to have this overload in framework? I can implement it and make a pull request.
"
3600,Neutral,This is why RxJava's own test often utilize `TestHelper.trackPluginErrors()` and after the run we check for any errors in the `List<Throwable>` returned by that method.
3601,Neutral,"I am getting highlighted colors (name of file, line number) on iTerm2. However, it's only a slight grayish difference when I search on my ubuntu laptop. I use solarized theme in both.
"
3602,Neutral,"As in #275, this might be filesystem-specific, although this seems like a simpler case.

```
$ mkdir test test/foo test/foo/bar
$ cd test
$ echo bar/haystack > foo/.gitignore
$ echo needle > foo/bar/haystack
$ ag needle # finds foo/bar/haystack: NOT OK
$ (cd foo && ag needle) # finds nothing: OK
$ (cd foo/bar && ag needle) # finds foo/bar/haystack: this is Issue #144
```

For what it's worth, pull request #284 does not fix this.
"
3603,Positive,"In short, git treats paths with escaped spaces in the same way as paths with spaces. The Silver Searcher doesn't.

## Steps to reproduce:

1. `mkdir test_ignore`
2. `cd test_ignore`
3. `git init`
4. `echo ""hi there"" > ""ignore me""`
5. `echo ""ignore\\ me"" >> .gitignore`
6. `git status` Note that the ""ignore me"" file is not listed.
7. `ag hi`

Observed results:

    ignore me
    1:hi there

Expected results:

There should be no output, because the Silver Searcher should be ignoring the ""ignore me"" file.

I've just fixed my repo not to include the unnecessary escaping, so as far as I'm concerned this is pretty low priority ;)."
3604,Neutral,"Teams sharing dotfiles currently can't share ignore preferences but retain their own personal global overrides. An example of this would be the team having their `.agignore` configuration, and then individual team members adding their own personal preferences in `.agignore.local`.

Adding this issue to discuss if adding the ability to source further ignore files from `.agignore` to support shared and personal preferences is feasible.
"
3605,Neutral,"On OSX Mavericks, I'm getting segfaults when asking `ag` to ignore vcs ignore files.

```
myockey@Michaels-MacBook-Air ~
  % ag --version
ag version 0.21.0
```

An example:

```
myockey@Michaels-MacBook-Air ~
  % ag -gU Docume
ERR: Error stat()ing: Docume
[1]    97441 segmentation fault  ag -gU Docume

myockey@Michaels-MacBook-Air ~
  %
```

It seems to only happen when you pass a pattern that doesn't match a directory or filename completely. A search similar to the one above, also from the home directory, but with the full name of the documents dir, does not segfault (though it does return with no matches).

```
myockey@Michaels-MacBook-Air ~
  % ag -gU Documents

myockey@Michaels-MacBook-Air ~
  %
```
"
3606,Neutral,"I have a file called `/tmp/valid.txt` with the following content:

```
valid: 1
some_string
valid: 654
some_other_string
valid: 0
valid: 23
valid: 0
```

I want to find only lines that begin with `valid:`, but without `0` as the valid count. For this, I do `ag ""valid: "" /tmp/valid.txt | ag -v ""valid: 0""`, but it doesn't do what I expect. I am not sure if I am doing something wrong, or it is a bug.

Doing `grep ""valid: "" /tmp/valid.txt | grep -v ""valid: 0""` does exactly what I need.
"
3607,Neutral,"Please release installers for Linux, Mac, and Windows.

I'd love to see a no-fuss `ag.msi` that adds `ag.exe` to `PATH`.
"
3608,Negative,"Hi @ggreer 
I am sorry to open this issue,but when I use `ag -g .apk`,I can not get the files path of apk file,but for vim file or anyother text file,it works well.
"
3609,Neutral,"In my environment, there are symlinks to directories that are actually mounted via NFS. It would be nice to have an option to not search such directories, as these just cannot be searched as fast as locally mounted ones. This would correspond to the `-xdev` option of `find` (and it only makes sense in combination with `-f`)."
3610,Positive,"There are some dot-dirs that I would like to search, but ag doesn't seem to support specifying them - it's all or nothing.
For example, I'd like to always search my .ipython directory.

-u ignores .gitignore and .agignore, which isn't what I want either since it's all or nothing.

What would be really useful is for ag to search all dotfiles and dotdirs by default, except the ones in .gitignore and .agignore.

Thanks, awesome tool so far.  Love the speed improvements over ack.
OSX Lion, ag version 0.1.1
"
3611,Neutral,"I just found out that `apt-get install the_silver_searcher` works not.

Who is the best person to start fixing this?
"
3612,Neutral,"Example in Windows, but the problem will be the same in Unix when int is 32-bits:
```
F:\DDA\Samples\Archived>ag --stats ""]]>""
0 matches
0 files contained matches
1429 files searched
-1970704972 bytes searched
6.796805 seconds

F:\DDA\Samples\Archived>dirsize
2,324,262,324
```"
3613,Negative,"Default ignore config.\* may be too aggressive. I'm seeing ""config.go"" in a few golang packages lately including golang.org/x/crypto/openpgp/packet/config.go 
"
3614,Neutral,"-Q seems useless if -g is specified. See:
```
$ ls
foo.bar  foodbar
$ ag -g foo.bar
foo.bar
foodbar
$ ag -g foo.bar -Q
foo.bar
foodbar
```
Works with ack:
```
$ ack -g foo.bar
foo.bar
foodbar
$ ack -g foo.bar -Q
foo.bar
```

Version:
```
$ ag --version
ag version 0.31.0

Features:
  +jit +lzma +zlib
```"
3615,Neutral,"Does ag has any rc files similar to ackrc  to configure custom file types, search patterns, etc ?
"
3616,Neutral,"While investigating https://github.com/thoughtbot/dotfiles/pull/338, I confirmed a difference in behavior between 0.28.0 and 0.29.0.

We have this line in our `.gitignore`:

``` shell
*.DS_Store
```

In 0.29.0, this results in any folder that contains a `.DS_Store` file being completely excluded from search results. If I fall back to v0.28.0, I get these results back.

As @danielnolan mentions in the above issue, removing the `*` from the `.DS_Store` reference fixes the behavior, but I'm not sure if that has other impact on Git or Ag that I'm missing. It also seems like it's a mismatch between that Git is ignoring and what Ag ignores.
"
3617,Neutral,"it looks ag doesn't have such an option like `find -type d`, maybe an option `--dir` can be added for ag to do this?
"
3618,Neutral,"```
hello-world  tree .
.
├── bar.py
├── foo.py
├── inside
│   ├── idiotic.php
│   └── me.py
└── stupid.php

1 directory, 5 files

hello-world  cat ~/.agignore
*.py

hello-world  ag -l --nocolor --hidden -g """"
inside/idiotic.php
inside/me.py
stupid.php

hello-world  cat ~/.agignore               
**/*.py

hello-world  ag -l --nocolor --hidden -g """"
foo.py
inside/idiotic.php
bar.py
stupid.php

hello-world  cat ~/.agignore               
**/*.py
*.py

hello-world  ag -l --nocolor --hidden -g """"
inside/idiotic.php
stupid.php
```

Version: `0.21.1`. Installed on Arch Linux.
"
3619,Negative,"It would be really great to be able to enforce a max number of results.  This is largely to prevent a never-ending search executed in some directory.  For my use of ag, I'm never going to be interested in more than 1000 results.  As a matter of fact, I doubt I'd ever even look at anything with ~100 results.  Sometimes searches will take a very long time and return hundreds of thousands of results, whereas I would have been happy with just seeing the first 100 results which would be enough to tell me that this is not the search I wanted to do.
"
3620,Neutral,"what's the format of the --ignore pattern? If I do

```
ag --ignore '*.min.js' time website/public/vendor/ | less
```

ag still looks into _website/public/vendor/jquery-ui.min.js_

I've tried also '.*\.min\.js', '.min.js$' etc with no results.
I'm on OSX 10.9 with ag compiled through homebrew.
"
3621,Neutral,"It seems that the help for this tool is limited to `--help` and `man`, which is decent for most purposes, but I feel like there could be more substantial documentation out there.

That being said, I'm not particularly one to say ""You need X"" unless I'd be willing to do it myself. If there's interest in getting the wiki more fleshed out to detail functionality in the man page I can get something done on that in early November.

Is that of interest?
"
3622,Neutral,"in my `.gitignore` I have:

```
a/b/*.yml
```

I have a file `a/b/c/d.yml` which should not be ignored since `d.yml` is not directly under `a/b`. However, `ag` interprets `a/b/*.yml` to mean `a/b/**/*.yml` and ignores `d.yml`.
"
3623,Neutral,"It's nice to have output that's grouped by files, also sorted by the path to that file. Having just searched in a big project, all the results for stuff in `app/` was grouped and all results for `db/`, `config/` and `spec/` were grouped, but the ordering of groups was: `spec/`, `config/`, `app/`, and `db/`. Seems weird.
"
3624,Negative,"Would it possible to set an envvar with preferred standard options? Or a config file?

I dislike grouping, so have to type `ag --nogroup` every time. I'm getting pretty good at it, but it destroys the careful optimization from strlen(""grep"") to strlen(""ag"") that I would otherwise experience.
"
3625,Positive,"The loop detection should be definitely implemented. I've studied the problem a little and looked through `grep` source to learn how they do it. 
Their solution is the following: create a hash table and while entering each directory save the pair [device number and inode of the dir] as a value in the hash table (actually, it's a set as there are no explicit keys). After the directory is 'grepped', the entry is deleted from the hash table.
And if we enter the directory and there's already a corresponding entry in the hash table, then probably there are symlinks that form a loop (or directory hierarchy may be corrupted). 

Therefore, it would be awesome to add the similar feature to `ag`. 

I'm ready to dive into the problem and propose a working solution. But I have no desire to write a hash table from scratch. It would be great to use some small and fast implementation. I haven't chosen any yet, also I'm not good at licensing stuff. 

Your suggestions are welcome.
"
3626,Neutral,"Using `--before` and `--after` works if ag is reading a file but not if it is reading from STDIN. Observe:

```
[0 mbunkus@chai-latte ~/tmp] ag --after=1 just samba.txt
3:just
4-a
[0 mbunkus@chai-latte ~/tmp] ag --before=1 just samba.txt
2-is
3:just
[0 mbunkus@chai-latte ~/tmp] cat samba.txt | ag --after=1 just
just
:
[0 mbunkus@chai-latte ~/tmp] cat samba.txt | ag --before=1 just
just
```

ag 0.24.1
"
3627,Negative,"When using Silver Searcher with the invert match flag (-v) you get back all of the lines that contain text not matching the pattern searched for.  In both grep and ack, using invert match gives you back all of the lines that do not contain the pattern searched for. For example, if you start with a file containing the lines:

```
thing one
thing two
```

If you search this file using `ag -v one` you get back:

```
thing one
thing two
```

If you do either `grep -v one` or `ack -v one` you get back:

```
thing two
```

The behavior of ack and grep seems much more useful.  I'm not sure why you would want the current Silver Searcher behavior (although maybe this is just due to lack of imagination).  I think Silver Searcher should match ack and grep.  

Thoughts? I might try to right a patch for this if there is agreement that this is what Silver Searcher should be doing.
"
3628,Neutral,"viz (OS X, FWIW), ag 0.31.0:

$ cat test.c

AVInputFormat ff_dshow_demuxer = {
};
URLProtocol ff_dshow_protocol = {
$ ag AVInputFormat.*URLProtocol
$ 
"
3629,Positive,"First of all ag is really good. Thank you!

I would pretty much appreciate if there is a possibility to have some custom settings (like .ackrc). 
Is it possible to do something like this for ag?
"
3630,Negative,".gitignore allows patterns such as

```
**/foo-bar
```

to mean any file/directory under any subdirectory with this name.

However, `ag` (0.28.0) is not able to recognise these exclusions. As a workaround, do it without `**/`
"
3631,Negative,"--hi,

i have made a test reading a big text file (220Mbytes) :

time grep -c CTRPNNNTRKGIHIGPGRAFYATGEIIGDIRQAHC file.txt
real    0m1.336s
user    0m0.046s
sys     0m0.112s

time ag --silent --no-numbers --nocolor CTRPNNNTRKGIHIGPGRAFYATGEIIGDIRQAHC file.txt | wc -l
real    0m1.359s
user    0m1.294s
sys     0m0.065s

oh oh, ag is not able to count motif directly like grep with '-c' parameter,  why ????

conclusion: it is not faster than grep !
"
3632,Neutral,"https://github.com/vim-scripts/ag.vim

It's alive, kickin', and has had 3 Pull Reqs so far.

Ack.vim's author :-1:'d the original patch I did to make it work with `ag`, so we mutually decided it was better to split out this into its own thing. It's pretty nice to be able to `:Ag`, IMO.
"
3633,Neutral,"It doesn't work with following .gitignore (for ignoring files without extension)
```
*
!*/
!*.*
```
Environment:
Version: 0.31.0
OS: Ubuntu 16.04.2 LTS"
3634,Neutral,"searching on long paths on windows gets:

```
ERR: Error opening file ./whatever/long/path: No such file or directory Skipping...
```

I guess it is related to:

https://msdn.microsoft.com/en-us/library/windows/desktop/aa364963(v=vs.85).aspx

I'm talking with kkowalczyk@gmail.com, the creator of (ag windows port)

https://blog.kowalczyk.info/software/the-silver-searcher-for-windows.html

as this seems an easy fix.

Maybe more clues can be found on similar project

https://github.com/monochromegane/the_platinum_searcher

which work well with long paths but has less features than ag.
"
3635,Neutral,"I'm getting different results between ack and ag in a particular directory because ag ignores the subfolder called lib. I'm using ag 0.27.0 on OS X.

```
tdhopper@~/temp $ echo ""hello"" > file1.txt
tdhopper@~/temp $ mkdir lib
tdhopper@~/temp $ cp file1.txt lib/file2.txt
tdhopper@~/temp $ mkdir dir2
tdhopper@~/temp $ cp file1.txt dir2/file3.txt
tdhopper@~/temp $ ag hello
dir2/file3.txt
1:hello

file1.txt
1:hello
tdhopper@~/temp $ ack hello
dir2/file3.txt
1:hello

file1.txt
1:hello

lib/file2.txt
1:hello
```

(Perhaps this is documented, but I can't find that anywhere.)
"
3636,Neutral,"I see there is already a note about pthreads as a future feature. Until then I decided to give GNU parallel ( https://savannah.gnu.org/projects/parallel/ ) a try.

This is the command I used: `cat spellings.dict | parallel ""ag -ai {} *""` which does not appear to do anything. I adapted this idea from the grep version I use `cat spellings.dict | parallel ""grep -ri {} *""`

Steps to reproduce this bug:
1. run `cat spellings.dict | parallel ""ag -ai {} *""`
2. no output returned and $? = 0
3. run `cat spellings.dict | parallel ""grep -ri {} *""` see what the output should have been.
"
3637,Negative,"Hey guys,

it isn't really an issue but I don't know where I should ask this.
What is the difference between `ag -a` and `ag` ? And why is there a difference? 
I think it's a bit strange when you want to search inside an directory with hundreds of php files and 
`ag print` doesn't return anything but `ag -a print` does.
"
3638,Neutral,"like -m but for global.

I use ag in emacs. Sometimes the output can be 10000 lines, and makes emacs unusable until the end of the searching.
"
3639,Neutral,"I noticed one inconsistent line in `ag --help`. This should be a _very_ minor change to the text.
```
  -G --file-search-regex  PATTERN Limit search to filenames matching PATTERN
```
Typically after arguments, a single space separates a parameter. Then the description is pushed to the next line if it cannot start at column 27. The description remains on the same line if it can as in the rest of these examples:

```
  -g --filename-pattern PATTERN
                          Print filenames matching PATTERN
     --depth NUM          Search up to NUM directories deep (Default: 25)
     --ignore PATTERN     Ignore files/directories matching PATTERN
                          (literal file/directory names also allowed)
     --ignore-dir NAME    Alias for --ignore for compatibility with ack.
  -m --max-count NUM      Skip the rest of a file after NUM matches (Default: 10,000)
  -p --path-to-ignore STRING
                          Use .ignore file at STRING
  -W --width NUM          Truncate match lines after NUM characters
```

I propose that this be changed to:
```
  -G --file-search-regex PATTERN
                          Limit search to filenames matching PATTERN
```
"
3640,Neutral,"[EDIT] I found out that using `:lcd` instead of `:cd` leaves the quickfix paths intact (because it doesn't touch its cwd). So this isn't really needed for this scenario anymore.

`ag` can be used as `grepprg` in Vim, but the quickfix doesn't work well once the path is changed (using Vim's `cd`). Some plugins do this automatically (like vim-rooter), and after that the relative paths in the quickfix window aren't valid anymore.

This also happens when using the Ack.vim or Ag.vim plugins.

Would it be possible to add a command-line option so that `ag` outputs absolute file paths? Maybe either ""~/path/to/my/file.txt"" or ""/something/outside/the/user/directory.txt"", depending on where the file is?
"
3641,Neutral,"Sometimes, you don't want to exclude based on a _.*ignore_ file. You may just want to exclude certain patterns based on a one-time only search. For example:

`ag var --exclude-files={*.js, *.markdown}`

would exclude files based on those extensions.

On a directory level:

`ag var --exclude-dirs={lib, src}`

would not enter directories that match _lib_ or _src_.

For extra ice cream bonus points, wildcard matching would be awesome: `s*rc*` excludes _src_ and _source_.

I know you like image macros:

![](http://netanimations.net/dog32.gif)
"
3642,Positive,"I have a file named `foo`, which contains two only-one-character lines: `a` and `b`.

```
~: cat foo
a
b
```

If I search this file with `ag`, I get a result which shows three lines in `foo` file, and there is a phantom blank line at the last of file.

```
~: ag -C 3 b
foo
1-a
2:b
3-  <-- This is the phantom line
```

After some attempts of guess and verification, I figured out that this issue may be related to LF at last line. The phantom line disappeared if I stripped the LF.

I'm not sure this behavior is a feature or a bug of `ag`, but vim treats LF at last line as an end of line but not a start of new line, therefore it appends LF by default. This causes troubles when searching these files with `ag`.

In contrast, `ack` does not append phantom line with same file.

```
~: ack -C 3 b
foo
1-a
2:b
```

Thanks in advance.

footnote:

os: OS X v10.10.3
ag: v0.30.0
ack: 2.14
"
3643,Negative,"What I mean is, with lines like these:
data1 data2 data4
data1 data3 data5
data1 data6 data4
data2 data5 data 6

I can get all data1 lines, but how would I exclude lines with data4 in them so I would have all lines with data1 that don't contain data4. I thought invert match would work, but I don't think it was made for what I am trying to do.

Chaining ag commands together doesn't seem to work the same way as grep.
In grep I would do `grep ""data1"" myfile.txt | grep -v ""data4""`.
Doing this in ag still gives me data4 lines, only the highlighting is reversed.

What am I doing wrong?
"
3644,Neutral,"If I define a global gitignore file with the `core.excludesfile` option (see also https://help.github.com/articles/ignoring-files), ag doesn't take that into account. It only uses the git repo's .gitignore. It would be nice if it accounted for the global gitignore as well.
"
3645,Negative,"Hi there - I'm using ag 0.23.0 with unite.vim.  I have a gitignore file at `/my/directory/.gitignore`, which contains a line `public/assets*`.  When I run

``` bash
  ag -g ""application*"" /my/directory
```

, it includes files in `/my/directory/public/assets-production` - which it shouldn't, given the .gitignore line.

Strangely, if I use a relative path for the last argument - 

``` bash
  ag -g ""application*"" .
```

,  .gitignore gets parsed correctly, and files in public/assets-production are filtered out.  Similarly, if I explicitly list `public/assets-production` in my .gitignore, that will also filter those results out, even when using the absolute path.

Bug, or am I missing something?
"
3646,Neutral,"the order of arguments to _fullpath() is reversed, it should be:

```
    return _fullpath(resolved_path, tmp, MAX_PATH);
```

See http://msdn.microsoft.com/en-us/library/506720ff(v=vs.80).aspx
"
3647,Neutral,"On ReiserFS d_type is always set to DT_UNKNOWN.  You need an additional call to lstat if DT_UNKNOWN is returned to find out whether the inode points to a directory or a link
"
3648,Positive,"I do not have root permissions at work. Building it myself without root permissions is also painful due to missing dependencies etc. 

Would it be possible to provide a standalone file similar to what ack-grep or [the_platinum_searcher](https://github.com/monochromegane/the_platinum_searcher) provides?

Thanks for the great tool. Love the speed. :+1: 
"
3649,Negative,"It's no fun having to play Battleship (E4... miss. B8... miss... etc) with the Travis-CI tests. 
"
3650,Neutral,"This would make `ag` great for scripting. 
"
3651,Negative,"Problem description:

I have ag 0.30 something. I doesn't support --search-zip, which is exactly what I wanted to use.

So, I download/attempt to build your project. Running Fedora x64 here.

I have a problem aclocal - I don't know why, but my aclocal installation is a bit grumpy, has to do with different versions of m4 files in different places with different versions (and a system and an Activestate perl being installed).

So, I run your build script, automake crashes and burns (aclocal specifically), and yes, I do have stuff in my /usr/local/share/aclocal/ folder, although it looks like its picking up stuff from just /usr/share.

I think ""hey, hum maybe my aclocal is wrong"", so I go to see what version I have. 1.13.4, according to yum.

Now, there are 3 more recent versions of aclocal, however I have no good idea what aclocal you used, its version, etc.

So, either be more specific as to wth you are building with, or don't use aclocal. Thanks.
"
3652,Neutral,"What about adding option (like '--no-numbers' ) to disable line numbers output?

For example, you want to search for something in the form of ""double ag"":
`$ ag <smth> | ag <smth2>`

But if 'smth2' is a number, it may collide with line numbers from first 'ag' output.
"
3653,Neutral,"Related to #400.

For use in scripting it would be helpful to be able to strip all output except the actual match. I know I can use `--nogroup -o` and then pipe the output through `cut` in order to extract the matches (first example has matches highlighted with brackets to show the structure):

```
~$ ag 'f\w+'
foo.txt
1:[foo] [foobar]
4:[foobar]

~$ ag --nogroup -o 'f\w+' | cut -d: -f4
foo
foobar
foobar
```

Still, I think it would be much prettier and less fragile if we could configure all parts of the output. Some parts are already there, for example the `--no-numbers` option, so only the file name remains:

```
~$ ag --nogroup --no-numbers -o 'f\w+' 
foo.txt:foo
foo.txt:foobar
foo.txt:foobar
```

I could imagine a `--nofilename` option that implies the ommission of file name, line and column numbers, i.e. only printing the match itself, nothing else.

```
~$ ag --nogroup --nofilename -o 'f\w+' 
foo
foobar
foobar
```

it should also work without `--nogroup`

```
~$ ag --nofilename -o 'f\w+' 
foo
foobar
foobar
```

and without `-o`

```
~$ ag --nofilename 'f\w+' 
foo foobar
foobar
```
"
3654,Neutral,"My `.gitignore_global` ignores files named `core` but does not ignore directories named `core`:
```
core
!core/
```
Ag seems to be misunderstanding the second line and omitting `tensorflow/core/platform/*` from search results.

**Version**
```
$ ag --version
ag version 0.31.0

Features:
  +jit +lzma +zlib
```"
3655,Neutral,"Running ./build.sh fails with the following error message:

```
./configure: line 3937: syntax error near unexpected token `PCRE,'
./configure: line 3937: `PKG_CHECK_MODULES(PCRE, libpcre)'
```

I have all of the libraries (on Ubuntu Precise) and should meet all the requirements.
"
3656,Negative,"I currently just used `--stats`, and good the following output:

```
702 matches
2668 files searched
38278054 bytes searched
1.211867 seconds
```

That’s pretty good.

But I think it could be better if it were like this:

```
702 matches
<NUMBER> files contained matches
2668 files searched
38278054 bytes searched
1.211867 seconds
```

For now, I can just use `--files-with-matches` and pipe the output to `wc -l` to get the number of files containing matches, but that’s a pretty clunky workaround.  

And besides—this is **the silver searcher**!  Badass statistics are what it’s all about. :-) 
"
3657,Positive,"This bug was reported to Debian.
Please see Debian Bug report: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=873076

here is an example of ag crashing when reading a file:

```
# dd of=zob count=0 seek=16G; (sleep 0.1; truncate -s1 zob)&; ag -a lol zob
[2]    26016 bus error (core dumped)  ag -a lol zob
```

Reporter said ""Maybe it is worth documenting that fact, or not making --mmap the default.""
I think that it is better to write in the document.

Thanks."
3658,Neutral,"*ag* is said to prefer `.ignore` files (#974), while in reality `~/.ignore` is, well, ignored:
```
 % ls
file.txt  image.png  log.log

 % ag -l ./
file.txt
log.log

 % echo '*.log' > ~/.ignore
 % ag -l ./
file.txt
log.log

 % ln -s ~/.ignore ~/.agignore
 % ag -l ./
file.txt
```
```
 % uname -mo
x86_64 GNU/Linux
 % ag --version
ag version 1.0.3

Features:
  +jit +lzma +zlib
```"
3659,Positive,"Use of `-g` combined with `--files-with-matches` (`-l`) makes no logical sense -- with `-g` the _contents_ of files are not being searched. There are probably other mutually exclusive cases that I've not thought of, I just noticed this one because this nonsense [is proliferating in the wild](http://robots.thoughtbot.com/faster-grepping-in-vim):

``` vim
let g:ctrlp_user_command = 'ag %s -l --nocolor -g """"'
```

It's config for a Vim fuzzy finder where Ag is being used as a speedy means of populating a list of files to match on (the plugin interpolates a base directory at `%s`). I scratched my head for a minute wondering why that command even works.

Ack informatively bails:

``` sh
$ ack -l -g '' ./
Options '-l' and '-g' are mutually exclusive
```

Ag goes ahead anyway, seemingly just ignoring the `-l`, but as a user I can't really be sure, it may as well be undefined behavior:

``` sh
$ ag -l -g '' ./
app/admin/admin_users.rb
# -- SNIP --
```

Since it's not invalid to pass an option that implies content search, I wonder what happens if I try to pass a pattern for content matching?

``` sh
$ ag --column --nogroup -g '' ruby test.rb
ERR: Error stat()ing: ruby
ERR: Error opening directory ruby: No such file or directory
test.rb:1:1:#!/usr/bin/env ruby
test.rb:2:-19:
test.rb:3:-20:puts ""I'm a test script.""
```

This is a nonsense incantation since I'm trying to pass a pattern where a path is being expected, but the failure mode is poor. And look! It almost leads me to believe I can get the file name output when searching a single file that I requested in #361 :smile: 

By the way, it would be awesome if filetype support worked when using `-g` -- this does the right thing in ack:

``` sh
$ ack --ruby -g '' ./
```

With Ag the `--ruby` file scoping is seemingly ignored. This probably warrants a separate feature req for tracking, let me know if you'd entertain it if I filed one.

My C-fu is weak, but I'll try to pitch in some option validation if time allows. Just wanted to log this stuff when I encountered it.
"
3660,Negative,"This took quite a while to debug, and it only results in incorrect behavior in a tiny number of cases, and it's nondeterministic, depending on the contents of garbage memory, which for some reason, happen to be something which makes the program work correctly. I can only get it to misbehave if I have a gitignore pattern that's very long (even something like ""# this line is ignored because it starts with # but it is very long"").

This assumption turns out not to hold in all cases: https://github.com/ggreer/the_silver_searcher/blob/07f83361197593302d7af1e2bb1fa0a6ec8c646e/src/ignore.c#L379

I'm on OS X Yosemite, running the latest version of ag (I tried a bunch of older versions of ag as well, and the issue goes _way_ back).
Here is how to reproduce the bug on my machine (**you might need to run it a bunch of times since it's a memory issue, or it may not show up at all on your machine**):
1. `mkdir ~/testdir && touch ~/testdir/randomfile`
2. `git config --global core.excludesfile ~/.gitignore_global`
3. `echo ""#########################"" > ~/.gitignore_global`
4. `ag ~/testdir -l --nocolor --hidden -g . --debug`

Depending on the run, I get output like:

(looks correct):

```
DEBUG: Found user's home dir: /Users/anish
DEBUG: Loading ignore file /Users/anish/.agignore.
DEBUG: added ignore pattern .ignoreme/ to root ignores
DEBUG: Found user's global Git excludesfile: /Users/anish/.gitignore_global
DEBUG: Loading ignore file /Users/anish/.gitignore_global.
DEBUG: Query is .
DEBUG: PCRE Version: 8.37 2015-04-28
DEBUG: Using 4 workers
DEBUG: No CPU affinity support.
DEBUG: No CPU affinity support.
DEBUG: No CPU affinity support.
DEBUG: No CPU affinity support.
DEBUG: searching path /Users/anish/testdir for .
DEBUG: Skipping ignore file /Users/anish/testdir/.agignore: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.gitignore: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.git/info/exclude: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.hgignore: not readable
DEBUG: Skipping svn ignore file /Users/anish/testdir/.svn/dir-prop-base
DEBUG: Worker 0 started
DEBUG: Worker 1 started
DEBUG: Worker 2 started
DEBUG: Worker 3 started
DEBUG: path_start  filename randomfile
DEBUG: randomfile not ignored
DEBUG: match_files: file_search_regex matched for /Users/anish/testdir/randomfile.
/Users/anish/testdir/randomfile
DEBUG: Worker 0 finished.
DEBUG: DEBUG: DEBUG: Worker 1 finished.Worker 2 finished.Worker 3 finished.
```

or incorrect output like:

```
DEBUG: Found user's home dir: /Users/anish
DEBUG: Loading ignore file /Users/anish/.agignore.
DEBUG: added ignore pattern .ignoreme/ to root ignores
DEBUG: Found user's global Git excludesfile: /Users/anish/.gitignore_global
DEBUG: Loading ignore file /Users/anish/.gitignore_global.
DEBUG: Query is .
DEBUG: PCRE Version: 8.37 2015-04-28
DEBUG: Using 4 workers
DEBUG: No CPU affinity support.
DEBUG: Worker 0 started
DEBUG: No CPU affinity support.
DEBUG: Worker 1 started
DEBUG: No CPU affinity support.
DEBUG: Worker 2 started
DEBUG: No CPU affinity support.
DEBUG: searching path /Users/anish/testdir for .
DEBUG: Worker 3 started
DEBUG: Skipping ignore file /Users/anish/testdir/.agignore: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.gitignore: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.git/info/exclude: not readable
DEBUG: Skipping ignore file /Users/anish/testdir/.hgignore: not readable
DEBUG: Skipping svn ignore file /Users/anish/testdir/.svn/dir-prop-base
DEBUG: path_start #
 filename randomfile
DEBUG: randomfile not ignored
DEBUG: match_files: file_search_regex matched for /Users/anish/testdir/randomfile.
/Users/anish/testdir/randomfile
DEBUG: Worker 0 finished.DEBUG: Worker 1 finished.
DEBUG:
DEBUG: Worker 2 finished.Worker 3 finished.
```

specifically, `path_start` is pointing to garbage, it just happens to be a ""#\n\0"" left over from reading the gitignore into memory (notice that there are 25 ""#""s; if you increase it to 26, you see two ""##""s here, and so on, until you cross an 8 byte boundary or something (on my machine)).

Looking at the operation of `filename_filter`, in one instance, `base_path` is `/Users/anish/testdir` and `path` is `/Users/anish/testdir` (both null terminated). This violates the assumptions made in `ignore.c:379`: `base_path` does not always end in `/\0`. Then `base_path = path + 25`, and it points past the null character into some garbage.

This shouldn't be too hard to fix. If someone familiar with the code does it, it'll probably be faster. If nobody gets to it soon, I might take a look.
"
3661,Negative,"these command will work as expected:
`ag -s '(raise|Error)\b(?!(`|/))._`' ./`
`ag -s '(raise|Error)\b(?!(`|/))._`' ../../eksperimental/elixir`

but this command will ignore the entries in `.gitignore`
`ag -s '(raise|Error)\b(?!(`|/)).*`' /home/eksperimental/elixir/`

It's really bad because I was writing a bash script that would convert all provided paths to absolute.
any workaround?
"
3662,Negative,"It appears ag does things to the terminal (probably for output coloring?) but fails to cleanup after itself when being interrupted unnaturally (i.e. ctrl-C) leaving the terminal in a unuseable state. 

I am seeing this on OSX ( in Terminal.app with ag from macports, v0.24.1 but this has been consistent forna long time. 

$ uname -a
Darwin mecbucpro.local 13.3.0 Darwin Kernel Version 13.3.0: Tue Jun  3 21:27:35 PDT 2014; root:xnu-2422.110.17~1/RELEASE_X86_64 x86_64
$ ag --version
ag version 0.24.1
$ echo $TERM
xterm-256color

I tried looking among the issues but could not find similar ones
"
3663,Neutral,"When searching within Emacs grep -H is handy because it outputs a format that allows next-error to move to the location of the match.

I would love to see such an option for ag. ack seems to have --with-filename.
"
3664,Positive,"I just met Ag a few days ago and it is awesome.

Problem is, the binaries on https://launchpad.net/~ggreer/+archive/ag is outdated and I _really_ wanna introduce Ag to my collegues and we're adopting Ubuntu 12.04 as dev sandbox.

I guess I could just build .deb myself but it's really nice to have up-do-date official binaries for this popular distro.

Thanks again for the great work.
"
3665,Neutral,"```
alex@bender > /tmp/the_silver_searcher-0.31.0 $ ag rest ./doc
doc/ag.1
131:Skip the rest of a file after NUM matches\. Default is 0, which never skips\.
186:\fB\-u \-\-unrestricted\fR
229:It is possible to restrict the types of files searched\. For example, passing \fB\-\-html\fR as the \fBfile\-types\fR parameter will search only files with the extensions \fBhtm\fR, \fBhtml\fR, \fBshtml\fR or \fBxhtml\fR\. For a list of supported \fBfile\-types\fR run \fBag \-\-list\-file\-types\fR\.
```

```
alex@bender > /tmp/the_silver_searcher-0.31.0 > ag --after 4 rest ./doc
ERR: Error stat()ing: rest
ERR: Error opening directory rest: No such file or directory
doc/ag.1
51:Color codes for result match numbers\. Defaults to 30;43\.
52-.
53-.TP
```

```
alex@bender > /tmp/the_silver_searcher-0.31.0 $ ag -A4 rest ./doc
doc/ag.1
131:Skip the rest of a file after NUM matches\. Default is 0, which never skips\.
132-.
133-.TP
134-\fB\-\-[no]numbers\fR
135-Print line numbers\. Default is to omit line numbers when searching streams\.
186:\fB\-u \-\-unrestricted\fR
187-Search \fIall\fR files\. This ignores \.agignore, \.gitignore, etc\. It searches binary and hidden files as well\.
188-.
189-.TP
190-\fB\-U \-\-skip\-vcs\-ignores\fR
229:It is possible to restrict the types of files searched\. For example, passing \fB\-\-html\fR as the \fBfile\-types\fR parameter will search only files with the extensions \fBhtm\fR, \fBhtml\fR, \fBshtml\fR or \fBxhtml\fR\. For a list of supported \fBfile\-types\fR run \fBag \-\-list\-file\-types\fR\.
230-.
231-.SH ""IGNORING FILES""
232-By default, ag will ignore files whose names match patterns in \.gitignore, \.hgignore, or \.agignore\. These files can be anywhere in the directories being searched\. Ag also ignores files matched by the svn:ignore property if \fBsvn \-\-version\fR is 1\.6 or older\. Finally, ag looks in $HOME/\.agignore for ignore patterns\. Binary files are ignored by default as well\.
233-.
```

```
$ ag -V
ag version 0.31.0

Features:
  +jit +lzma +zlib
$ uname -a
Linux bender 3.19.0-15-generic #15-Ubuntu SMP Thu Apr 16 23:32:37 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
```

Tarball have downloaded from http://geoff.greer.fm/ag/
"
3666,Neutral,"As an example, is there a way to search all .js files in and below the current directory, but ignore all .min.js files?

I thought this might work, but it does not:

ag some-term --ignore *.min.js -G js -l // getting just the file paths
"
3667,Neutral,"I have a dotfiles repository at my home directory and its [`.gitignore`](https://github.com/Kutsan/dotfiles/blob/master/.gitignore) contains only an `*`. Don't want to ignore all `.gitignore`s with `--skip-vcs-ignores` but just that one.

I'm having trouble with those commands:

`ag --skip-vcs-ignores --ignore node_modules --ignore .git --ignore -g """"`
Skips all .gitignores and have to add all unwanted directories/files on my own.

`ag -g """"` 
Obeys .gitignores patterns but ~/.gitignore has `*`. So can't search at all.

It would be nice, if we have `--skip-only-that-vcs-ignore <path>` something.

"
3668,Neutral,"Specifically my Rust projects, which have a `.gitignore` like:
```
/*
*.bk
!.gitignore
!rustfmt.toml
!scripts/
!src/
!shaders/
!Cargo.toml
```

`ag n` or with any other letter or word doesn't write back anything."
3669,Neutral,"It would be great if `ag` can have options something like `--production` or `--test` to restrict search only in production or test code.

For example, in most of Java projects production code/resources are located under `src/main/` and test code/resources are under `src/test/`, and `--production` option would search files only under `src/main` and `--test` option only under `src/test`."
3670,Neutral,"In my gitignore, I have

<pre>
*.js
</pre>


When I run `ag` in debug mode from my project root, I see:

<pre>
...
DEBUG: added regex ignore pattern *.js
...
DEBUG: file /Application.js ignored because name matches regex pattern */*.js
...
DEBUG: pattern */*.js doesn't match file /binding/Error.js
...
</pre>


Files in the project root match, but not files in subdirectories. However, a simple file glob rule should apply in subdirectories (by git semantics, at least). Am I missing something?
"
3671,Positive,"I have a global gitignore that ignores files generated by ctags, and added it to git with `git config --global core.excludesfile ~/.gitignore`.  It works in git, but the files are still searched when running `ag`.  More info on that option is here: http://git-scm.com/docs/gitignore .  Awesome tool! Keep up the good work :)
"
3672,Neutral,"Multilines are useful sometimes; but it is not for me this time.

When I want to use silver searcher to search my code when some value is assigned, i use the following:

ag -G ""[cxx|hxx|h]$"" ""abc[^=]+?=""

but the result turns out to include some patterns that cross multi-lines.

like this:

int a = abc;
int b = 123;

the above two lines will come out, which is not what i expected.

is there some way to configure the silver searcher to parse one line at a time?
"
3673,Neutral,"I just wanted to make sure you were aware of a possible bug and/or discrepancy with Ack:

```
> ack --nocolor '^[^\$]*toHaveLength'
Apps.js
37:        expect(collection).toHaveLength(3);

Campaigns.js
36:        expect(collection).toHaveLength(25);
215:        expect(visibleRows()).toHaveLength(3);
225:        expect(visibleRows()).toHaveLength(1);
229:        expect(visibleRows()).toHaveLength(3);
236:        expect(visibleRows()).toHaveLength(2);
…
```

```
> ag --nocolor '^[^\$]*toHaveLength'
Apps.js
32:
33:        collectionSetData(collection, mockData);
34:
35:        collection.fetch();
36:
37:        expect(collection).toHaveLength(3);

Campaigns.js
31:
32:        collectionSetData(collection, mockData);
33:
34:        collection.fetch();
35:
36:        expect(collection).toHaveLength(25);
212:    });
213:
…
```
"
3674,Neutral,"If a socket is in Ag's search path, it outputs an error ""ERR: Error opening file ./socket/unicorn.sock: Operation not supported on socket Skipping..."". I think this message should be suppressed.
"
3675,Neutral,"For example, running it in my git repo:

```
$ ag --hidden -l mount_opts
.git/COMMIT_EDITMSG
.slashrc
```

I'm using:

```
$ ag --version
ag version 0.32.0

Features:
  +jit +lzma +zlib
```

On arch linux.
"
3676,Neutral,"`.gitattributes` is used to mark files as binary for git, e.g.:

```
**/*.min.js binary
```

means all matching files won't be diffed/searched as a text file (and generally ignored in output/searches as a binary).

`ag` respects `.gitignore` and should respect `.gitattributes` as well, ignoring them by default when searching unless expressly included.
"
3677,Neutral,"Even including the --depth option doesn't return results in subdirectories.

**Setup**
In a new terminal session
mkdir meals
cd meals
echo -e ""coffee\neggs"" > breakfast.log
echo -e ""juice\nsalad"" > lunch.log
echo -e ""beer\nburger"" > supper.log
echo -e ""coffee\njuice\nburger"">drinks.txt
cd ../

**Reproduce**
_expected behavior_
$ag coffee
./meals/breakfast.log
1:coffee

./meals/drinks.txt
1:coffee

_unexpected behavior_
$ag -G txt coffee _\- no results_

$cd ./meals
$ag -G txt coffee

./drinks.txt
1:coffee
"
3678,Negative,"I seem to be unable to change the default color of Ag. I have tried the following commands:
`ag --color-match=30,42`
`ag --color-match=""30,42""`
`ag --color-match=""30;42""`
`ag --color-match='30,42'`
`ag --color-match=""\e[30,42m""`
`ag --color-match=""\e[30,42m""`
`ag --color-match=[30,42]`
`ag --color-match='30,42'`
which should give black text on green background. Instead, I always get nothing: the black/yellow highlighting is gone and defaults back to the regular terminal color. Sometimes, gibberish will appear ahead of the matched term.

What is the proper way of calling the colors? I couldn't find anything in the man pages...

"
3679,Negative,"I don't know. I don't use windows.
"
3680,Neutral,"Hi @chipironcin 
Can you verify what attributes does the /dev/hpet have?
It should be a character device.
The test of st_mode of the stat structure in the_silver_searcher/src/search.c is a suspect.
It should discriminate against block devices and character devices."
3681,Neutral,"The `-w` option simply wraps your search pattern in `\b` (so `\.deliver` becomes `\b\.deliver\b')`. `\b` matches a word boundary, which is the 'space' between a word character (letters, numbers, and unders-cores) and a non-word character (anything that's not letters, numbers, and under-scores).

So `ag -w '\.deliver'` will never match something like `(self).deliver`, because the character to the left of the `.` is another non-word character (and therefore there is no word boundary).

This matches the behaviour of (e.g.) `pcregrep`, but it does not work like more traditional `grep`s like git or GNU, both of which use some custom boundary-matching code rather than rely on the equivalent boundary character class.

Ack also uses `\b`, but you might say it's 'smarter' about it than ag — it only adds the surrounding `\b` if the first/last character in the search pattern is a word character (so if it's `deliver` it will add `\b` to both sides, but if it's `\.deliver` it will only add it to the end). That seems like a neat way to do it to me, although how convenient it is in C (vs Ack's two lines of Perl), i don't know.
"
3682,Negative,"Any news on this issue? I'd love to see it resolved. This issue makes ag hard to work with in large repositories.
"
3683,Positive,"Also I'm happy to write this and send a pull request if you want -- just let me know so I don't do it if you're not going to include it.
"
3684,Neutral,It was in the man page.
3685,Neutral,"Fixed in 0.22.0 (just checked it):

<pre>
ERR: Error stat()ing: :universities,
ERR: Error opening directory :universities,: No such file or directory
ERR: Error stat()ing: :show_question_id
ERR: Error opening directory :show_question_id: No such file or directory
</pre>
"
3686,Positive,"Thanks netei!
"
3687,Negative,"Ahh, thought I'd searched well enough for that... guess not, thanks.
"
3688,Neutral,"try this: `ag -Q -- '->poll'`
The `--` tells a command that everything following is not an option
"
3689,Neutral,"Third case is because `opts.search_stream` is global.

Printing/searching code (starting at  `search_file`->`search_stream`) sees it unset, and thinks it searches ordinary file (while in reality it searches a named pipe `/dev/fd/N`).

05be1eddca2bce1cb923afda2b6ab5e67faa248c fixes the first two, and changes the last to:
```
$ ./ag --nocolor --numbers '.' <( printf '\nfoo\n\nbar\n' )
1:
2:
4:o
5:
7:8:
10:r
```

```
DEBUG: Query is .
DEBUG: PCRE Version: 8.38 2015-11-23
DEBUG: Using 4 workers
DEBUG: Thread 0 set to CPU 0
DEBUG: Thread 1 set to CPU 1
search_file_worker
DEBUG: Thread 2 set to CPU 2
DEBUG: Worker 1 started
search_file_worker
DEBUG: Thread 3 set to CPU 3
DEBUG: searching path /dev/fd/63 for .
search_dir
DEBUG: Skipping ignore file /dev/fd/63/.agignore: not readable
DEBUG: Skipping ignore file /dev/fd/63/.ignore: not readable
DEBUG: Skipping ignore file /dev/fd/63/.gitignore: not readable
DEBUG: Skipping ignore file /dev/fd/63/.git/info/exclude: not readable
DEBUG: Skipping ignore file /dev/fd/63/.hgignore: not readable
DEBUG: Skipping svn ignore file /dev/fd/63/.svn/dir-prop-base
search_file '/dev/fd/63'
DEBUG: /dev/fd/63 is a named pipe. stream searching
search_stream 3 '/dev/fd/63'
getline{{
}}search_buf
1:
2:getline{{foo
}}search_buf

4:o
5:getline{{
}}search_buf

7:8:getline{{bar
}}search_buf

10:r
11:check_symloop_leave
DEBUG: Worker 1 finished.
DEBUG: Worker 0 started
DEBUG: Worker 0 finished.
search_file_worker
DEBUG: Worker 3 started
DEBUG: Worker 3 finished.
search_file_worker
DEBUG: Worker 2 started
DEBUG: Worker 2 finished.
```"
3690,Positive,"My bad, I forgot ag was aliased to `alias | grep`. working a charm now. really blazing fast
Thanks for the wonderful work.
"
3691,Neutral,"Having the same problem on CentOS release 5.10 (Final)
"
3692,Neutral,"How are you running ag? What operating system are you on? What does the directory structure look like?

Also, what version of ag are you using?
"
3693,Negative,"Thank you, but it does not work for me.
"
3694,Negative,"Sorry I was a bit confused, the comparison to ack and grep does not make much sense here as the default behaviour is different:
- ag outputs line numbers by default
- ack & grep does not

So let me put this as a suggestion to a possible improvement:
- print line numbers by default when outputting to the console (as it is now)
- do NOT print line numbers when outputting to a pipe (?)
"
3695,Positive,":+1:
"
3696,Neutral,"Any ideas for temporary workarounds?
"
3697,Negative,"@joliss if so, it would be very hard to fix. sad.
"
3698,Neutral,"Feel free to delete them.
"
3699,Neutral,"the script works with grep, perhaps the script doesn't know the command is
still running and doesn't wait?

On 10 October 2016 at 22:49, dana notifications@github.com wrote:

> The most common reason i can think of for you to get _End of script
> output before headers_ is that you're not emitting the HTTP headers that
> Apache expects. Try adding this before you try to print anything:
> 
> print 'Content-Type: text/plain; charset=utf-8', ""\r\n\r\n"";
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/ggreer/the_silver_searcher/issues/986#issuecomment-252755389,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAa7gR_jS0AGYG5arQsEYlVj86zRMCHcks5qyrLTgaJpZM4KS-Uz
> .

## 

Peter Mahnke
Head of Web development

Canonical
0796 108 4362
peter.mahnke@canonical.com
"
3700,Neutral,"I ran into this today as well - `ag_scandir` calls `readdir`, and the `readdir(3)` man page states

>The order in which filenames are read by successive calls to readdir() depends on the filesystem implementation; **it is unlikely that  the  names will be sorted in any fashion.**

empty_match.t passes on an Ubuntu 16.04 system on an ext4 filesystem, but often fails on Ubuntu 16.10 and xfs.  Clearly we can't rely on the ordering of the file list.

I think to fix this we want to collect the output of `ag` into a temporary file, allowing so generate the expected output in 2 steps."
3701,Positive,"Thanks for the quick response @okdana... the last few log lines, of a very long list of them, are:

`DEBUG: No match in /home/cavendish-allotments/src/cavendish-allotments/_posts/2015-09-27-work_party_4_and_11_october_2015.textile: /home/cavendish-allotments/cgi-bin/search.cgi
 DEBUG: Worker 0 finished.: /home/cavendish-allotments/cgi-bin/search.cgi
 Can't open DEBUG: Worker 0 finished.: /home/cavendish-allotments/cgi-bin/search.cgi
End of script output before headers: search.cgi`

So it does run, it just dies ?  
"
3702,Neutral,"I believe this was fixed in 900b7a9a312972fd2249fe61ae81175d9e09708c - reopen if not.
"
3703,Neutral,"I have noticed this as well. You can pass '.' as the query for a temporary workaround. I will see if I can take a look at this today.
"
3704,Neutral,"Ah, looks like the problem is expected behaviour of `echo`: when the test is working, `echo` is expanding `\n` to be a newline, but in my test environments, `echo` only does that if it's passed the `-e` argument. 
"
3705,Positive,"Just to be nice, I'll start throwing tarballs up here: http://geoff.greer.fm/ag/

Hope that helps.
"
3706,Neutral,"Can you try master? I just fixed some issues with large files. I also made a test case with an 8GB file. It works for me on OS X and Ubuntu 14.04.
"
3707,Positive,"Awesome, I'll have a look!  Is it ok if I e-mail you if I have any questions about these tests?
"
3708,Negative,"I found this weird too, and decided to just make the required changes. The current behavior is especially puzzling if ag is run with `--nocolor`. In this case, it will just ignore the pattern and output every line it sees.

I created a pull request with my changes: https://github.com/ggreer/the_silver_searcher/pull/431.
"
3709,Positive,"Stats is the best way to get this that I've found. Piping ag into `ag match | tr -d "" matches` is the simplest way I've come up with to get just the raw number if you need it in a script.

What would be nice is if including the `--nofilenames` option alongside `-cl` would produce this output, like how `ack -clh` or `ack -cl --no-filename` works. 
"
3710,Negative,"Ugh, that's my bad on that one. The issue that was fixed was that you couldn't ignore `*.min.js` files, because it would just get the `.js`, which doesn't match any ignored extension. Now, it's getting `.b.htm`, which again doesn't match any extension. It seems like the fix is going to have to be more nuanced than my change :(
"
3711,Positive,"That's perfect!  I just had to hack Emacs's grep.el to change a constant:

``` lisp
;;;###autoload
(defconst grep-regexp-alist
  '(
    ;; Rule to match column numbers is commented out since no known grep
    ;; produces them
    ;; (""^\\(.+?\\)\\(:[ \t]*\\)\\([1-9][0-9]*\\)\\2\\(?:\\([1-9][0-9]*\\)\\(?:-\\([1-9][0-9]*\\)\\)?\\2\\)?""
    ;;  1 3 (4 . 5))
    ;; Note that we want to use as tight a regexp as we can to try and
    ;; handle weird file names (with colons in them) as well as possible.
    ;; E.g. we use [1-9][0-9]* rather than [0-9]+ so as to accept "":034:""
    ;; in file names.
    (""^\\(.+?\\)\\(:[ \t]*\\)\\([1-9][0-9]*\\)\\2\\(?:\\([1-9][0-9]*\\)\\(?:-\\([1-9][0-9]*\\)\\)?\\2\\)?""
     1 3 (4 . 5))
    (""^Binary file \\(.+\\) matches$"" 1 nil nil 0 1))
  ""Regexp used to match grep hits.  See `compilation-error-regexp-alist'."")
```

And then enable use of Ag for finding in file trees with:

``` lisp
(setq-default grep-first-column 1)
(grep-apply-setting 'grep-find-command '(""ag --noheading --column "" . 25))
```

Now I get super-fast search results, with columnar precision.  A definite improvement, in several ways!
"
3712,Neutral,"The same thing happens when there is a directory structure deeper than the default value of 25:

ERR: Skipping ./pccsstorefront/web/grunt/node_modules/grunt-contrib-imagemin/node_modules/imagemin/node_modules/imagemin-jpegtran/node_modules/jpegtran-bin/node_modules/bin-wrapper/node_modules/download/node_modules/gulp-decompress/node_
modules/decompress/node_modules/decompress-tarbz2/node_modules/tar-stream/node_modules/readable-stream/node_modules. Use the --depth option to search deeper.

ag did not obey to .gitignore, but the workaround of putting an .agignore in the folder from where I was performing the search solved the issue.
"
3713,Positive,"`ag` doesn't rely on any existing binaries on the system, such as `hg` or `git`. Using something like `hg config ui.ignore` would require that to be installed.

Assuming `hg` is installed, we could run `hg locate` in mercurial directories to get 100% accurate ignores. We wouldn't need special logic for parsing `.hgignore` files or applying their ignores.

But, there are a handful of downsides to relying on `hg`:
- If `hg` is not installed, how do we get our ignores? Do we forget about them and search every file?
- If `hg` is installed but the repo is in some broken / strange state, `ag` will crash
- If `hg locate` is slow, `ag` will be slow
- Is `hg` now a dependency of `ag` in apt / brew / macports / yum / packman?

tl;dr - `hg config ui.ignore` is not going to happen

But an OK solution would be to blindly assume the global ignore would be located at `~/.hgignore`. I bet this guess will be correct for 95% of global ignores, which is a lot better than the 0% we're getting right now.
"
3714,Negative,"Unfortunately, ag is popular enough that if even 1% of users use PCRE-only regexes, I'll end up with 100+ angry people emailing me.

I knew about other regex libraries when I created ag, and I went with PCRE because it offered the best compromise of features, usability, performance. Like ICgrep, RE2 is not as nearly as powerful as PCRE. Just look at the swaths of NOT SUPPORTED on https://github.com/google/re2/wiki/Syntax. Simple functionality is missing (such as repeat character counts). Also, ag wasn't architected to have easily-swappable regex libraries. It is tightly coupled to PCRE, and looking at the codebase would make this pretty clear. 

I'm sorry if I'm coming across as callous, but your suggestion is comparable to going on the LKML and saying, ""Why don't you support FreeBSD jails instead of cgroups?""
"
3715,Positive,"That works, thanks!
"
3716,Negative,"No, I haven't addressed the speed issue.  In the long run I would like to build an index over the code that can be kept in-memory and use Facebook's watchman to keep it up-to-date, to avoid any traversals over the filesystem, but that is a much bigger task that I haven't had time for yet.
"
3717,Negative,"I can replicate this on NTFS.

I've run a git bisect and the error is introduced in commit cd149d2730988dec43fa0f5238b263b7d98af38b. Don't have time to look at this any further this evening, I'm afraid.
"
3718,Neutral,"I think @bentomas is asking about installing deps on OS X without brew. You could grab tarballs for the dependencies and install them, but I'm not sure why you'd want to. Homebrew makes life much easier.
"
3719,Neutral,"Try it out with master. `ag --pager ""less -R"" blah` should work.
"
3720,Neutral,"What operating system are you on? I've followed your instructions, but I can't get anything to hang on Ubuntu 14.10 or OS X 10.10. I've tried ag 0.27 and master. Both print out a ton of results, but nothing bad happens.
"
3721,Neutral,"```
$ ls
dad.min.js  mom.js  mom.min.js  sludge.js
$ egrep -n stuff *.js
dad.min.js:1:stuff
mom.js:1:stuff
mom.min.js:1:stuff
sludge.js:1:stuff
$ ag --ignore '.min.js' -l stuff
dad.min.js
mom.js
mom.min.js
sludge.js
$ ag --ignore '*.min.js' -l stuff
mom.js
sludge.js
$
```

The `*` char is needed to give fnmatch() a chance to match file wildcard patterns.
"
3722,Negative,"@wadarochi Please upload an example file that this breaks on, otherwise I can't fix the issue.
"
3723,Neutral,"This is also fixed for me now that I'm on 0.33.0
"
3724,Neutral,well there must be a default ignore configuration because ag does not search in node_modules for instance. this can be closed
3725,Neutral,"To search multiple jars in a folder you could use this command. I recommend creating an alias for it because it is quiet long.

``` bash
# To recursively search the current directory for files containing the regex
find . -name ""*.jar"" | while read filename; do unzip -cq ""$filename"" | ag regex; done;

# To recursively search the current directory for files named like the regex
find . -name ""*.jar"" | while read filename; do unzip -lq ""$filename"" | ag regex; done;
```
"
3726,Neutral,"I needed to add `--no-color` as `ag` writes colours through pipes otherwise, and this was preventing the subsequent `ag` matching properly.

```
ag -l --no-color one | xargs ag -l --no-color four | xargs ag --filename 'one|four'
```

Bug #1164 prevents printing the filename if only one filename is passed to the final `ag`."
3727,Neutral,"It seems that the procfs does not support the mmap operation. The only operations supported are the ones defines in the structure [proc_mem_operations](http://lxr.free-electrons.com/source/fs/proc/base.c#L794).
A possible fix would be to check the errno set by mmap after it fails (which is ENODEV for devices that do not support mmap) and fallback to reading into a buffer.
"
3728,Neutral,"If those fail, ag should just crash or something.
"
3729,Neutral,"Well. if I want to skip `pdf` `doc` `jpg` `png` `out` `exe` etc, does it means I need to append more and more `--ignore` options? I hope `--ignore` can support regex, then I can do that gracefully, i.e. `--ignore ""(pdf|doc|jpg|png|out|exe|)$""`. 
"
3730,Neutral,"I have added note about this issue in the [wiki](https://github.com/ggreer/the_silver_searcher/wiki/Advanced-Usage). 
"
3731,Neutral,"Sounds like an old version of autotools.
"
3732,Neutral,"I think I fixed this, but I don't have a Windows machine so I can't test it.
"
3733,Positive,That's great!  Thank you!
3734,Neutral,"https://github.com/ggreer/the_silver_searcher/issues/513

If issues weren't closed if they were just unlikely to be implemented, it would have been easier to find.
"
3735,Neutral,"@danthegoodman
It seems

    ag -l one | xargs ag -l four | xargs ag 'one|four'

only prints the matching lines number but not the file name if one file matches the pattern."
3736,Negative,"I was trying to search in a directory with some large files present, and ag crashed as soon as it encountered one. Large files should either be searched using streaming or ignored with a warning."
3737,Neutral,"As commented on a [couple](https://github.com/ggreer/the_silver_searcher/issues/594#issuecomment-85543490) of [related](https://github.com/ggreer/the_silver_searcher/issues/530#issuecomment-85544199) issues, this could be solved if ag got it's git ignore list from `git status --ignored` 

Same change would fix: https://github.com/ggreer/the_silver_searcher/issues/144
"
3738,Neutral,"Is there a way to print the list of filetypes? I know that we can view the [source](https://github.com/ggreer/the_silver_searcher/blob/master/src/lang.c#L7) to see the list in the `lang.c` file; however, it would be nice to have the equivalent of `ack --help=types`.
"
3739,Neutral,"What's ""default ignore""?  I don't think there is one *at all*.

Also, personally I've never heard of *yarn*, but you can always add its files (just like any other) to `~/.agignore`."
3740,Neutral,"Just came here to report this, but I see it's already a known issue.
"
3741,Neutral,"`git bisect` pinpoints this as introduced in c6a4f20a34d44feaa95eb1aa582155573944d106.
"
3742,Neutral,"Homebrew pull request submitted: https://github.com/mxcl/homebrew/pull/15263
"
3743,Negative,"any work on this, I find this really annoying...
"
3744,Neutral,"Have you tried the latest version of ag? (0.28.0)
"
3745,Neutral,"See #121 
"
3746,Neutral,"Docs here: https://github.com/ggreer/the_silver_searcher/pull/327

## 

Kevin Burke | Twilio
phone: 925.271.7005 | kev.inburke.com

On Tue, Jan 21, 2014 at 5:26 PM, Beau notifications@github.com wrote:

> Good shout @brondsem https://github.com/brondsem!
> 
> @stevenharman https://github.com/stevenharman I've just upgraded my
> version of ag, and it now emulates the way ack works. So you can do—
> 
> ag --python tweets
> 
> To search for tweets in Python files only.
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/ggreer/the_silver_searcher/issues/128#issuecomment-32985043
> .
"
3747,Neutral,"Confirmed. Looks like the method filename_ignore_search() only takes the filename portion as a param and not the full (relative?) path as well. Updated my test repo. 
"
3748,Neutral,"One reason why this behavior would be useful is that often, one is using the silver searcher to look through a project that contains minified js alongside readable code. The user would prefer to omit the terminal-filling block of unreadable js from the results so they can focus on the readable code alongside it.
"
3749,Neutral,"I can work on some tests for this, although I'm a bit new to TDD in C.
"
3750,Neutral,"I'll work on this after #159 
"
3751,Neutral,"Also need handlebars, since Ember relies heavily on it."
3752,Negative,"While using Ack, I thought I was using the file type switch simply to speed things up, now that I'm using ag I find I need it to narrow results. Even if those results are returned much faster.
"
3753,Neutral,"The version in the debian repository runs even if git is not installed, but it prints ""sh: 1: git: not found"" to stderr.

To reproduce:
- Create an ubuntu 14.04 VM, or find a machine without git.
- Run `apt-get install silversearcher-ag`
- run `echo ""aaasssdddfff"" > ./here`
- run `ag aaasssdddfff`

You'll see ""sh: 1: git: not found"".
"
3754,Positive,"Cool. I'll close this issue then.
"
3755,Neutral,"There's a commit: https://github.com/ggreer/the_silver_searcher/commit/9fa406cb607ec659a21ed321227cd71660705ea2 that looks relevant here. I'll give it a try.
"
3756,Positive,"Very good idea, everyone is moving away from the root of the home directory, `.config` being the desired location.

BTW, did you forget to include the `.` on the  agignore file? my impression was the only the location is changed, and the filename being the same (with dot)"
3757,Positive,"Thanks, this works for me now, feel free to close!
"
3758,Positive,"Time to reward myself with chocolate fudge brownie ice cream.
![](http://i.imgur.com/XJrIf.gif)
"
3759,Negative,"Yeah i don't know why i mentioned that anyway, it's irrelevant

I don't think it would be surprising but it is kind of treading on re-implementing `file`, isn't it?
"
3760,Positive,"Got it all right after building a new deb.
And the build itself went rather smooth, thank you!"
3761,Negative,"The `.agignore` in each person's home directory is shared?! I'm sure there must be a misunderstanding.
"
3762,Neutral,"There isn't, and doing so would require extensive changes and ruin ag's performance. It would have to wait until the entire search was finished before it could print out any results. You should probably use `find` for these sorts of searches.
"
3763,Neutral,"Resurrecting this thread.

This is a fundamental issue with modifying mmapped files while they're being read. If you can think of any solutions, I'd love to hear them. I wrote a few of my own, but I don't want to influence yours. Please take a couple minutes to think of solutions before reading any farther.

...

...

...

My ideas:
1. Locking every file. This seems inefficient. _Every_ file has to be locked while it's searched, and every file with a match has to be locked until the matches are printed out. This also might require write permissions on the files being searched, or cause searching to hang while waiting for a file lock. I'm pretty sure most filesystems and OSes require write permissions to exclusively lock a file.
2. Adding a --no-mmap option. I'm not sure how useful this would be. I think most people who see a segfault would say, ""This program sucks."" and stop using it.
3. Default to reading files into buffers and add a --mmap option. This increases memory usage and hurts performance.

That's what I've thought of after a couple minutes. I'm split between option 2 and doing nothing. I welcome other ideas.
"
3764,Negative,"Do _any_ regex patterns work for you guys? It's as if you've built against a different version of libpcre than the one that's getting loaded at runtime.

Also, @Mandar12: Please mention what operating system you're using, your version of ag, pcre, etc. If I can't reproduce the problem, I can't fix it.
"
3765,Neutral,"It works fine for me : 

```
$ git init
Initialized empty Git repository in /tmp/tst-git
$ echo '*.map' > .gitignore
$ echo ""foobar"" > myfile.map
$ ag foobar # returns nothing
$ rm .gitignore
$ ag foobar
myfile.map
1:foobar
```

It also works with deeply nested paths, eg by doing after the echo '*.map' > .gitignore : 

```
mkdir -p deep/nested/path/for/testing
echo ""foobar"" > deep/nested/path/for/testing/foo.map
```

Are you using the latest ag version 0.30 ?
"
3766,Positive,Fixed in #957. Thanks!
3767,Positive,"Thanks for your work, looks great!
"
3768,Neutral,"It's working a while ago, BTW.
You can just do this:

 sudo chown $(whoami):admin /usr/local
- you might also use the ""-R"" flag.

because before most of the file there used to owned by the: ""wheel"" group. or some by the root user as I remeber...

You can do the same with some other files or directories in the home dir. like rubies...

That's all, I  think.
"
3769,Neutral,"I see there was an update the the freeBSD ports on 15 November, 2014 but its not because of this change. Can you ensure you update it in ports:
http://www.freshports.org/textproc/the_silver_searcher/

Once updated in ports, about 10-14days later, it will be in packages.
"
3770,Negative,"I'd just like to say this would be very useful for me. Its a shame that the only way to do this is with aliases. 
"
3771,Neutral,"Have this same garbage issue with a couple of PDFs I can share here:

https://www.dropbox.com/s/5l8iqjctdy1hpr2/pro_git.pdf?dl=0
https://www.dropbox.com/s/5urby04s7y8mnow/3145_Chap02.pdf?dl=0

A few others I think might be causing the same issue. I only know for sure that these do.

Using Ubuntu 14.04.2LTS with AG v0.29.1 in Terminator v0.97. Also tested in GNOME Terminal v3.6.2.
"
3772,Neutral,"I've `ag version 0.21.0` installed via Homebrew and I experience this issue.
"
3773,Positive,"@tungel No problem, it's fun to fix things. And yes, it's quite apparent what the bug was... _after_ fixing it.
"
3774,Neutral,"What version of ag is this? This example works for me on 0.22.0.
"
3775,Positive,"I ended up with alias ag='\ag --pager=""less -XFR""' . Thanks for the motivation, @CaptSaltyJack !
"
3776,Neutral,"I rebuilt ag with -pg option and here are results for our usual test:

kooper@kooper-nb linux-3.8-rc3]$ time /tmp/the_silver_searcher/ag intel1
...
real    0m19.885s
user    0m9.178s
sys 0m18.171s

and here is gprof report: http://pastebin.com/CwW9mPMU
"
3777,Positive,"Thanks!
You might to close this issue then.. :)
"
3778,Neutral,"Please try patch in pull request #211 and let me know your thoughts.
"
3779,Neutral,"I think this is important because the documentation states that the .agignore uses the same syntax as .gitignore, yet it doesn't support the negation syntax from .gitignore.
"
3780,Neutral,"The have command was used in older bashcomp versions. Try deleting that line. I have a long dead pull request that dealt with this but it may not apply cleanly to the current upstream.
"
3781,Positive,"great, thanks!
"
3782,Neutral,":+1: 

Seems like a lot of .gitignore issues, and this would be a good easy fix IMO. If git is installed and in git repo, use git ls-files, otherwise don't worry about .gitignore
"
3783,Positive,"I don't use bash or bash autocomplete so I just trust people who submit pull requests that aren't obviously broken. In other words... patches welcome :)
"
3784,Negative,"I can't for the life of me reproduce this anymore. I wonder if it was human error, but I also can't imagine what I could have done wrong.

I'm going to close this now, and reopen if I see this again (after having run `ag -l`).

Maybe it was me who was suffering from the lack of coffee :\
Sorry for the noise.
"
3785,Neutral,"Adding onto what @ggreer said, you can install the .deb file using **dpkg**. First download a .deb file from http://swiftsignal.com/packages/ubuntu/ and then install it:

``` bash
dpkg -i the-silver-searcher_0.14-1_amd64.deb
```

replacing **the-silver-searcher_0.14-1_amd64.deb** with whatever version you're actually using/downloaded..
"
3786,Neutral,"Could you please tell us how to reproduce?
"
3787,Neutral,"PPA updated. It should work now.
"
3788,Neutral,"Duplicate of #662. Please search issues before creating a new one.
"
3789,Positive,"Thanks for the bug report. I'm pretty sure this is related to my new file extension detection stuff. I'll look into it soon.
"
3790,Negative,"Fair enough…  I know that there are options to change the color. 
My remark, however, was about the default color scheme.

I still do not understand how yellow text could be a “natural” 
solution for a console program.  There is a reason why most (all?) 
prominent console tools with a color option avoid yellow (consider 
git, ls, grep, etc.)
"
3791,Neutral,"Ok, try master now.
"
3792,Neutral,"Bonjour,  
Having the same problem, I've just done another port of ag for Windows that can find non-ASCII characters... But so far only in text files encoded as UTF-8.  
Also, it will find files that have non-ASCII characters in their pathname.  
The sources are there: https://github.com/JFLarvoire/the_silver_searcher  
If you don't have Visual C++ for rebuilding it, I've uploaded pre-built versions in: https://github.com/JFLarvoire/the_silver_searcher/releases/download/1.0.2-Windows/ag.zip
Eventually, I plan to add a dynamic detection of the encoding (ANSI/UTF-8/Unicode), to allow finding non-ASCII characters in any kind of text file.  
Jean-François"
3793,Neutral,"Ahh, I see.  So we really need something that prepends a `.` for leading `/`s
"
3794,Neutral,"What about a folder with jars? I usually have some server delpoyed and I want to search for some class inside all of the jars inside it
"
3795,Positive,"I am 5long's colleague, and Ag is cool. And it's nice to have up-do-date binaries on  https://launchpad.net/~ggreer/+archive/ag ~
"
3796,Positive,"Thanks for linking to the original issue. Closing this one because it is a duplicate.
"
3797,Positive,"@jschpp Thanks a lot for the immediate response, this does indeed fix any warnings previously reported by goto-cc.

Best,
Michael
"
3798,Neutral,"I used `-a` because I want some files extensions unknown to the silver searcher to be searched. That's why.

It's `-a --all-types`, not `-a --all-paths`, could you please clarify that in the documentation then?
"
3799,Negative,"@mdentremont That is also my opinion. I wasn't entirely sure on what was the purpose of the feature though, so I only reported that the documentation did not describe the actual behaviour.
"
3800,Neutral,"This issue, I think, can be closed now that a Wiki has been added for [Windows](https://github.com/ggreer/the_silver_searcher/wiki/Windows).

I used the instructions in the Wiki to build ag.exe in a cygwin environment.  No problems.  The Wiki even mentions a native DevStudio port, though I have not tried it.
"
3801,Neutral,"The actual format isn't really important to me.  Instead of a separate file it could be something like using `!` in front of a line in .agignore.  For example:

```
$ cat .agignore
libs
!local_settings.py
```

The general idea is the same though -- instead of only having a way to modify the ignore set for ag by adding to it, ideally there'd be a way to modify it by removing as well.
"
3802,Negative,"I think 3 months is enough time to wait for a response. Bye-bye, open issue.

![](http://i.imgur.com/VK1OF.gif)
"
3803,Negative,"@mcphail Upon initial inspection, looks like it, yeah. Same as #285 (and #309). Closing as duplicate, although I hope the unit test patch is still useful for testing any fix.
"
3804,Neutral,"Reading the source this problem only appears to show up whenever `--no-mmap` is set, which is the default on OSX. Running with --mmap 'fixes' the issue. 

Also the [error](https://github.com/ggreer/the_silver_searcher/blob/d10085cbccd602f15b6eca25880b17f5d20ab818/src/search.c#L352)  is a bit misleading - the code looks like: 

```
off_t f_len = 0;
size_t bytes_read = read(fd, buf, f_len);
if ((off_t)bytes_read != f_len) {
    die(""expected to read %u bytes but read %u"", f_len, bytes_read);
}
```

`%u` implies an int which maxes out at 4 bytes wide, but off_t and size_t (and ssize_t) are all 8 bytes wide on modern OSXen."
3805,Positive,"@okdana , yes, it works perfectly from the command line 

`````` #!/usr/local/bin/perl

$agcommand = qq ~/usr/bin/ag -il0 --debug --nocolor ""AGM"" /home/cavendish-allotments/src/cavendish-allotments/_posts/~;

print STDERR $agcommand;
print STDERR `$agcommand`;```

and I get all the output and it finishes
``````
"
3806,Neutral,"Now all of the following patterns correctly ignore `ignored/a`:

```
/ignored/*
/ignored/
ignored/
ignored/*
/ignored
ignored
a
/a
```
"
3807,Negative,I could swear I didn't need quotes on grep. Blah. Sorry.
3808,Neutral,"@towolf Seems like the regular expression in the file_line plugin is too strict, requiring the : to be at the end of the line. If you remove the $ from the regexp it works fine, the name:line:[column:] can be followed by other chars and it'll find what it needs. This patch to file_line.vim:

```
@@ -16,7 +16,7 @@
        endif

        "" Accept file:line:column: or file:line:column and file:line also
-       let names =  matchlist( file, '\(.\{-1,}\):\%(\(\d\+\)\%(:\(\d*\):\?\)\?\)\?$')
+       let names =  matchlist( file, '\(.\{-1,}\):\%(\(\d\+\)\%(:\(\d*\):\?\)\?\)\?')

        if empty(names)
                return
```
"
3809,Neutral,"@krigstask can you give me some files that fail?
"
3810,Neutral,"```
✔ wsdjeg:Yaaic [ master | ✔  ] ➭ ag -g .gradle
settings.gradle
app/build.gradle
gradlew
gradlew.bat
build.gradle
gradle/wrapper/gradle-wrapper.properties
gradle/wrapper/gradle-wrapper.jar
pircbot/build.gradle
gradle.properties
✔ wsdjeg:Yaaic [ master | ✔  ] ➭ ag -g .apk
✘ wsdjeg:Yaaic [ master | ✔  ] ➭ 
```
"
3811,Positive,"Now that #68 is merged, I guess this is as done as it's going to be for the foreseeable future. Thanks for giving me some ideas and contributing code.
"
3812,Neutral,I can confirm that it does not work with `dir/*.map.js`
3813,Positive,"Can you be more specific about what `ag` is missing? The total output is nice but the parts that are different are more interesting
"
3814,Neutral,"Yeah, I guess to implement it 100% correctly, you'd need to use a tokenizer/parser to pull out the character classes, captures, etc, and examine the case of what is remaining. I imagine that just handling \W, \S, and \D is an 80% solution, though I could be wrong.
"
3815,Neutral,"@nobozo Ping. Is this still an issue?
"
3816,Neutral,"**Actual behavior (example):**

$ `grep -Hn ""file"" .matching_file not_matching_file`
.matching_file:1:This file has a file name that starts with '.'
not_matching_file:1:The file name of this file doesn't match!

So the following **ag** invocation should then return only **.matching_file**
$ `ag -u -G '^\..*$' file`
.matching_file
1:This file has a file name that starts with '.'

not_matching_file
1:The file name of this file doesn't match!

---------------------

**Expected behavior:**

$ `ag -u -G '^\..*$' file`
.matching_file
1:This file has a file name that starts with '.'

---------------------"
3817,Neutral,"Another (presumably faster) way to ""resolve"" this could be to document exactly what subset of `.gitignore` syntax is supported and which not. And (optionally?) issue warnings about unsupported `.gitignore` syntax.
"
3818,Neutral,"FreeBSD ports now has a newer version of Ag.
"
3819,Neutral,I fixed this by moving to less version 418. I was previously on 381
3820,Neutral,"That can be done quite simply, but keeping track of matches might slow things down a bit.

For a quick-and-dirty hack, try changing the `return` statement at the end of `main()` to `return (!stats.total_matches);` and run your searches with the --stats option.
"
3821,Negative,"Yeah... I'm not a fan of having options that solely exist to undo previous options. There are some options that necessarily countermand each other, but if you're running ag with --literal, it should find literal matches.
"
3822,Neutral,"Pull request: #814
"
3823,Neutral,"Try out the latest version of ag. It should work now.
"
3824,Negative,"They should be respected.
"
3825,Neutral,"@alexandnpu You can exclude `\n` for now

```
$ ag --cc ""search_stream[^=\n]+?=""
src/options.c
257:            opts.search_stream = 1;
534:        opts.search_stream = 0;
538:        opts.search_stream = 0;
600:        opts.search_stream = 0;
```
"
3826,Positive,"Nice catch, though I'm almost certain that the compiler is smart enough to move the `strlen()` down.
"
3827,Positive,"I think you're right. There is an internal consistency that a valid line should end in a newline and that a line without a newline is an odd construct: `echo foo | wc -l` returns `1` whereas `echo -n foo | wc -l` returns `0` as a line is defined as the presence of a newline.

I will need to test this change to see if it breaks anything. Can you test it too? If all is well I'll raise it as a pull request.
"
3828,Negative,"I'm on Debian and having similar issues. I have to search case-sensitively if the string contains non-ASCII characters.

```
$ echo ""Datatilbehør"" > test.txt 
$ ag -i 'datatilbehør'
$ ag -i 'Datatilbehør'
$ ag 'datatilbehør'
$ ag 'Datatilbehør'
test.txt
1:Datatilbehør
```

Related issue: https://github.com/ggreer/the_silver_searcher/issues/553
"
3829,Positive,"@ggreer 

> I never used this feature in Ack, which is why I didn't write it in Ag.

That's certainly fair. I wish I could be of more help with implementing a feature like this, but it's been a _long_ time since I last flexed by `C` muscles.

Have a great holiday!
"
3830,Neutral,"Feel free to correct me if any of this information is false.

1) The -g flag just limits the search to file names. What is the contents of your .agignore? It seems to have the behavior I expect when trying to replicate.

2) Where is your .agignore file located at? When running:

`ag pattern dir`

It looks like it is searching for an .agignore file in the user's directory and one in the defined directory within the command. Are you expecting it to search within the current directory you are in? Is this the expected behavior @ggreer ? Maybe it should also look within the current operating directory.

3) When using the --ignore flag, you are explicitly telling it where your file is. Without, it will look for the ones mentioned above.
"
3831,Positive,"A sample is fine. Thanks.
"
3832,Positive,"I can reproduce the issue. Thank you for posting that file.
"
3833,Neutral,"Is this the same issue as #285?
"
3834,Neutral,"And `--search-files` also fixes the problem.
"
3835,Neutral,"For literal searches, big files should work now. For regex searches, there's not much I can do. PCRE only supports up to 2GB.
"
3836,Neutral,"+1.  Please add.
"
3837,Neutral,"My friend is reporting that this works correctly for him on his ag-0.24.0 compiled from the arch repo works on the same exact repository.
"
3838,Neutral,"`--include ...` doesn't work in my version, when did it appear?

I'd like to add support for restructuredText (.rst) but so far only ""*.rst"" on the command-line works.
"
3839,Neutral,"Have you tried `-G --file-search-regex  PATTERN Limit search to filenames matching PATTERN`
"
3840,Neutral,"Right, with 0.31.0, the issue can be reproduced. 

This issue seems to be a duplicate of https://github.com/ggreer/the_silver_searcher/issues/755
"
3841,Negative,"Can you give me a tarball of a directory that this breaks on? I started to try to reproduce this issue, but it meant going down a rabbit hole of dependencies installing drush, composer, drupal, and php.
"
3842,Neutral,"On 11/16/2014 5:53 PM, Geoff Greer wrote:

> I don't know if you've noticed this, but I've asked for a copy of this
> file in every comment I've made on this issue. I could have fixed this
> months ago if you'd just give me the file.

I know but I can't, at least not without cleansing it.
But, I'll have to make sure the problem still exists.
I'll try to get to this tomorrow.

Jon
"
3843,Neutral,"@danielbayerlein Launchpad is available for me. You find the debs [here](http://ppa.launchpad.net/pgolm/the-silver-searcher/ubuntu/pool/main/t/the-silver-searcher/). But I don't build packages at the moment. If you are on Ubuntu 13.10 you should use the package from [universe](http://packages.ubuntu.com/saucy/silversearcher-ag).
"
3844,Negative,"Your benchmark has several issues.
1. Did you build the Android source or is this a clean checkout? A decent chunk of ag's speed often comes from ignoring giant binary files that people accidentally search with `grep`.
2. Your search is returning tens of thousands of results, which is unrealistic for normal usage. Typically, people are looking for dozens of results at most. This is why ag's printing code isn't optimized at all. If there are a ton of results, printing is likely to be the bottleneck.
3. Grep isn't printing out line numbers. Ag prints line numbers by default, which is an expensive operation. Still, line numbers are very useful when searching code.
4. Grep's results can be interspersed, while ag's are segregated by file.
5. It looks like you're only searching `.java` files. This obviates the need for most of ag's ignore features (and most of your `-prune` options to `find`). Ag is meant to be fast by default, even when you don't know what files you want to search. `ag android` takes zero mental effort and runs pretty quickly, considering the size of the directory.

I realize it would take a long time fully address every one of these issues, so don't feel obliged to reply to every one. I'm just pointing out ways in which your benchmark is unrealistic. Ag is fast, but it is not optimized solely for speed.

One last thing: How did the relative difference in performance change on a machine with fewer CPUs?
"
3845,Positive,"Thanks for the solution, ZyX-I.
"
3846,Negative,"Same problem here. I've switched to [ripgrep](https://github.com/BurntSushi/ripgrep). It's inspired by the Silver Searcher. It handles parent & nested ignore files correctly. This is great for searching across multiple projects in the same folder. Also for descending (or not) into node_modules, like in @justinaray's case."
3847,Neutral,"Maybe it's better to replace getopt with [argp](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Argp.html) which provides

> automatically producing output in response to the ‘--help’ and ‘--version’ options
"
3848,Positive,"@ggreer I'm using a forked version but it would be nice if you can apply this fix. Thanks.
"
3849,Negative,I'm hit by this limitation today to grep my 7GB mailbox. It would be really great to handle large files.
3850,Negative,"Sorry, but that's pretty hard to build. Correctly doing this would require language detection and actual parsing of each language. It sounds like exuberant ctags is the tool you want.
"
3851,Negative,"The inability the define new file types in file search tooling, and therefore requiring a parallel but different set of aliases is definitely sub-optimal.
As an example with ack, one of the almost 100 patterns I have is this:
`--type-add=deb-maint:is:preinst,postinst,prerm,postrm
`
and sure, I could add an alias for that, but now I have to remember an alias for util 'a' and a file type name for tool 'b'. This doubles the amount of extraneous crap I need to keep in my ever shrinking head.
If ag could be configured to use the same mappings, even if non-DRY on the config, the ability to use either utility and not have to remember 2 completely different set of file selection mnemonics would be big help.
"
3852,Neutral,"Just wanted to confirm.  After running `make menuconfig` and `make`, grep appears to be slightly slower than ag with literals (again, ran multiple times, following are the median results)

```
$ make menuconfig
$ make
$ time grep -r intel1 . | wc -l
21
real    0m1.009s
user    0m0.543s
sys     0m0.453s
$ time ag intel1 | wc -l
21
real    0m0.904s
user    0m0.917s
sys     0m0.640s
```

And if you add regex into the mix, ag is noticeably faster:

```
$ time grep -r ""intel[0-9]"" . | wc -l
493
real    0m2.603s
user    0m2.093s
sys     0m0.493s
$ time ag ""intel[0-9]"" | wc -l
493
real    0m1.005s
user    0m1.250s
sys     0m0.527s
```
"
3853,Negative,"Couple of things. First, your avatar picture is creepy.

> I am forbidden from contributing to open source projects and don't want to poison your code.

Second, that makes no sense.

Third, automake 1.9 is 7 years old.
"
3854,Positive,"@ggreer , no problem, glad I can help at least with testing.
I'm not yet familiar with the code base to do some development on my own.

Just I noticed there is a another call to `lstat` in main.c:164:

``` C
            if (opts.one_dev && lstat(paths[i], &s) == -1) {
                log_err(""Failed to get device information for path %s. Skipping..."", paths[i]);
            }
```

In order to compile the project I added `#ifndef _WIN32   #endif` around that `if`
"
3855,Negative,"Actualy my problem is little bit complicated..
I usualy write my code in Geany IDE on remote folder mounted localy via ssh. Search (grep) is very slow on such mounted folders and big projects, so I think that would be nice to call command on remote system and get its results.
And I'm trying to add ag as a default search engine for Geany IDE. Its possible to change default ""grep"" to something else in Geany. So I changed grep to my perl script which execute ""ssh v3 'ag params'"" . I parse geany ""grep"" params and translate it for ag usage.
Ok, that works with ""--vimgrep"". But I wanted more. For example I want to use ""reverse result or --invert-match"" - standart search function. But it works wrong with --vimgrep. I decided not to use --vimgrep. But I need filename in result. **ssh -t** can give me that. But I cant use **ssh -t** with geany couse its fails with **""Pseudo-terminal will not be allocated because stdin is not a terminal""** now ))
"
3856,Positive,"@ggreer again, thanks for your quick reaction, really appreciated!
"
3857,Negative,"I know the issue is already closed, but the main problem with PCRE is that it displays exponential behavior even in regexes without backreferences (the only feature that absolutely requires an exponential algorithm, and makes [regex matching NP-complete](http://perl.plover.com/NPC/NPC-3SAT.html)). The Russ Cox's material linked by @maxnordlund has a clear example that creates an odd behavior in ag.

``` bash
$ printf 'a%.0s' {1..100} > somefile
$ ag '(a?a){100}' somefile
```

The example above does respond quickly, but it seems to do so via some sort of timeout, yielding no results (even having one obvious match). Changing all `100` in the example to `10` yields normal results.
"
3858,Neutral,"you could do 

```
ag ""foo""
```

Get results

```
ag ""foo"" -l  | rvim 
```

by putting this in your bashrc : 

```
rvim () {
  cat > /tmp/filelist && vim </dev/tty $(cat /tmp/filelist | tr ""\n"" "" "")
}
```
"
3859,Neutral,"There has been some discussion (including code) at:
[How do I force ag (the sliver searcher) to list empty files](http://unix.stackexchange.com/questions/303326/how-do-i-force-ag-the-sliver-searcher-to-list-empty-files) 
"
3860,Negative,"Seems even explicitly passing `--ignore` does not work. For example:

```
$ ag --ignore='*~' stuff
```

Will still match files ending tildes in subdirectories. (I've tried various ways of representing the pattern there as I'm not sure what kind of syntax is expected, but nothing seems to work.)
"
3861,Neutral,"[perf](https://perf.wiki.kernel.org/index.php/Main_Page) might work for this use case. Just `perf record -g /tmp/the_silver_searcher/ag intel1`, then post the output of `perf report -g` somewhere (the '-g' gets us call graph info).
"
3862,Negative,"Sorry, but I don't think ag will ever support this encoding."
3863,Neutral,"yes, I think I fat fingered that paste; however, it still doesn't work for
me...

On 11 October 2016 at 00:12, dana notifications@github.com wrote:

> Oh.
> 
> proserpina:/tmp % CONTENT_LENGTH=x QUERY_STRING=x /var/cgi-bin/search.cgi
> [ Reading query from standard input. Press ^D to stop! ]
> Undefined subroutine &main::printOuput called at /var/cgi-bin/search.cgi line 32.
> 
> Should be printOutput with a t
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/ggreer/the_silver_searcher/issues/986#issuecomment-252770369,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAa7gbOogIu-0nKGfB2cb3Q78Um-FTIdks5qysZVgaJpZM4KS-Uz
> .

## 

Peter Mahnke
Head of Web development

Canonical
0796 108 4362
peter.mahnke@canonical.com
"
3864,Positive,"looks good!
"
3865,Neutral,"$ ag --version
**ag version 0.33.0**

Features:
  +jit +lzma +zlib
"
3866,Neutral,"+1.  Was this ever merged in?
"
3867,Neutral,"While `mmap()`ing the file has performance benefits, it does cause this unexpected behavior and also leads to inconsistent behavior between searching files and searching streams.  I wonder how much of a performance difference there is in using a line-based search (either by simply using `search_stream` from `search_file` or possibly by scanning the mmaped contents to determine buffer length).

I would think the consistency in search behavior would be worthwhile.
"
3868,Positive,"This just bit me too, trying to run `ag` from a `system()` call in Vim.  Magical behavior that depends on context instead of arguments is fun.
"
3869,Positive,"Yeah but it's nice to have an official gpg-signed release somewhere. Thanks for reminding me, @n0la.

0.18.1 is at http://geoff.greer.fm/ag/
"
3870,Negative,"I can't fix this until someone hands over a file that causes the issue.
"
3871,Positive,"Thanks for giving me a failure case.

`echo ""/logs/*.log"" > .gitignore`

I'm just running fnmatch on the lines, so specifying a path doesn't work. I knew git allowed paths but totally spaced on adding support for it.

Fixing this will probably take me a little while. Be patient.
"
3872,Neutral,"In ack, to ignore multiple dirs i can type like below:

```
ack 2014 --ignore-dir={node_modules, views} 
```
"
3873,Positive,"Happy to help.

I've ended up with some code like this in search.c when looping through the results of scandir:

```
    if(dir->d_type == DT_UNKNOWN) {
            if(-1!=lstat(dir_full_path, &stDirInfo))
            {
                    if(S_ISDIR(stDirInfo.st_mode)) {
                            dir->d_type=DT_DIR;
                    }
                    else if (S_ISLNK(stDirInfo.st_mode)) {
                            dir->d_type=DT_LNK;
                    }
            }

            if (!opts.follow_symlinks && dir->d_type == DT_LNK) {
                    log_debug(""File %s ignored becaused it's a symlink"", dir->d_name);
                    goto cleanup;
            }
    }
```

I looked at having a variation of this code in filename_filter but as I understand it we don't have the full path there so calling lstat will be problematic.  NOTE: Haven't tested the symlink check is working as expected.
"
3874,Neutral,"Wow. How'd you find all these errors? Did you use a static analysis tool or did you painstakingly read the code yourself?
"
3875,Negative,"@ggreer  any progress on this? I really miss the non-matching lines

As you correctly observed, it's a lot more useful that way. 
"
3876,Negative,"I'm not sure I understand you. There's no way I can reproduce this issue. My guess is that Source Insight creates a search index or only searches certain files in a project. Ag is a more general tool.
"
3877,Negative,"The two programs simply use different flavours of regular expressions. See [here](http://perldoc.perl.org/perlre.html) and [here](https://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions) for documentation of PCRE regexes. I don't think creating ag specific modifications to the syntax is a good idea.
"
3878,Neutral,"Why not use this instead
alias ag='ag -cc'
"
3879,Neutral,"Ag 2.0.0 seems to be working fine, so this was probably fixed at some point."
3880,Negative,"Oh, i'm sorry. I'm used to needing a ticket to document every change, i don't have much experience with GitHub etiquette. Sorry again for the spam!
"
3881,Neutral,"Whether or not you need quotes depends on your shell, not the program you're running with it.

In addition to being regex syntax. square brackets are shell glob patterns so if a file named `tmux` existed in your PWD, the shell would ""expand"" the glob to match the file. If there's no match, the brackets will probably get passed on to the args of the command you're running.

When in doubt, it's better to quote things which your shell might mangle so you know what's getting passed to the program."
3882,Negative,"this issue still exists in 0.28.0
"
3883,Neutral,"This can also be used to retrofit proper exit codes on commands that don't set them.
"
3884,Neutral,"I guess I could do something with [this feature](https://github.com/ggreer/the_silver_searcher/pull/68) though, or simply do this : `export FZF_DEFAULT_COMMAND='(ag -l -g """" ; ag -l -g """" vendor)'`
"
3885,Positive,"Oh yeah, this should be fixed now.
"
3886,Neutral,"Well... that's one way to solve that problem. A little googling shows others running into bad file descriptor errors when accessing `~/Library/Mobile\ Documents/.../MailData`, but no fixes. Just, ""It happens sometimes.""

I guess this isn't really a bug with ag. Maybe I could try being a little more careful about reading files, but that would probably hurt performance and this seems like a very rare occurrence.
"
3887,Neutral,"See https://github.com/ggreer/the_silver_searcher/pull/257 for a PR.
"
3888,Neutral,"From the linux man pages of unzip:

> -c
> 
> <b>extract files to stdout/screen (''CRT'')</b>. This option is similar to the -p option except that the name of each file is printed as it is extracted, the -a option is allowed, and ASCII-EBCDIC conversion is automatically performed if appropriate. This option is not listed in the unzip usage screen.

and

> -l
> 
> <b>list archive files (short format)</b>. The names, uncompressed file sizes and modification dates and times of the specified files are printed, along with totals for all files specified. If UnZip was compiled with OS2_EAS defined, the -l option also lists columns for the sizes of stored OS/2 extended attributes (EAs) and OS/2 access control lists (ACLs). In addition, the zipfile comment and individual file comments (if any) are displayed. If a file was archived from a single-case file system (for example, the old MS-DOS FAT file system) and the -L option was given, the filename is converted to lowercase and is prefixed with a caret (^).

So the zip files should not be unzipped to the file system when using both options (At least on linux).
"
3889,Neutral,"Try `--ignore=*.pb.h`
"
3890,Neutral,"It really looks like you have some sort of bash alias. What happens if you specify the path to ag in your commands? Such as `/usr/local/bin/ag foo`

Also, does `alias ag` output anything?
"
3891,Neutral,"The submodule thing doesn't matter here.  It was just an example.  Another is the config file example I gave.  Another might be wanting to search library folders with nested _non-git repos_ (which git's submodule system can't handle (but Mercurial's subrepos can)).

We can debate whether git submodules suck elsewhere.  This feature request is about being able to augment the `ag` ignore patterns by adding and removing instead of just adding.
"
3892,Neutral,"A man page update is available in [this commit](https://github.com/decaff/the_silver_searcher/commit/f45828812cfe82c3e2dce9fd8c0297fab54de3a6) .
"
3893,Negative,"Also, I'm not sure you had the parameters correct in your gist. Did you want to search for ""."" in files?
"
3894,Neutral,"Can you try #284 again and see if it is working now? It won't fix #144.
"
3895,Neutral,"FYI, the workaround for this is to add `*.a.htm` or `*.*.htm` to your `.agignore`.
"
3896,Neutral,"@chetan, please reopen this issue, as it's still relevant
"
3897,Positive,"@knjmooney Hey thanks, you were right, it was version control related. When I went into the subfolder, ag stopped reading my .gitignore file, and thus didnt ignore my .env files. Using a -U flag fixed it.

Thanks a lot!"
3898,Neutral,"I'm still seeing something similar. When an absolute path is used instead of a relative one, then the local `.gitignore` will be ignored. The global gitignore is still considered in both cases."
3899,Neutral,"Definitely @forgottenswitch. One great use case would be to allow ag to replace the default ALT-C command for FZF (which uses `find`) to quickly search and switch directories with `cd`.

See https://github.com/junegunn/fzf for more info - replacing the main command CTRL-T is already doable with `export FZF_DEFAULT_COMMAND='ag -g """"'`"
3900,Positive,"I took a look at this this morning. The input file is very
large, e.g. 2.2GB. When the old version of ag fails, it
exits right away - too fast to have actually done any
scanning. So, I separated the file into 2 equal size
pieces and the problem no longer occurs.

So, this problem is dependent on file size, and maybe
also the amount of available RAM and swap. I'm using
a 2GB RAM + 2GB swap virtualbox VM to run this test.

I'm guessing that you'd see this problem if you
created a 2232997829 byte file with random contents
and then tried to search for something in it.

I hope this helps.

Jon
"
3901,Neutral,"Goal: let user [segment](http://piwik.org/docs/segmentation/) Ecommerce Orders by specifying a segment `ecommerceOrderId` or `orderId`.

Requested in https://forum.piwik.org/t/using-the-reporting-api-to-query-an-ecommerce-order-by-orderid/18376

Similar to https://github.com/piwik/piwik/issues/4519 and https://github.com/piwik/piwik/issues/9175
"
3902,Positive,"Hi there,

I'd like to request customizable fields visibility for ""All Websites dashboard"", e.g. I have a site where people only direct download files, thus interested in unique downloads overview. It would be nice to be able define which columns one can see and then save them as default in the overview.

cheers
"
3903,Negative,"It is quite risky to use Piwik via HTTP as a SuperUser. We should show a warning in the admin if this is the case:
- Explain via it is not secure / risky  (man-in-the-middle, ...)
- Recommend to setup HTTPS
- Explain it is good practice to create a user having view access and to use this user when viewing reports etc. (eg one would also not work as `root` under linux all the time)
"
3904,Neutral,"Any solution to support custom plugin related data inject to email report system?
Keywords: email report
"
3905,Positive,"Hello,

To make this short, here is what I am talking about, while :
http://piwik.org/demo/?module=API&idSite=1&period=month&date=2010-04-22&format=JSON&filter_limit=25&method=Referers.getKeywordsFromSearchEngineId&idSubtable=34&token_auth=anonymous

Works as expected, the same one with a date range : 
-piwik.org/demo/?module=API&idSite=1&period=month&date=**2010-04-22,2010-05-22**&format=JSON&filter_limit=25&method=Referers.getKeywordsFromSearchEngineId&idSubtable=34&token_auth=anonymous

does not, it results in this error :
Fatal error: Call to undefined method Piwik_DataTable_Array::getRowFromIdSubDataTable() in /***/plugins/Referers/API.php  on line 102

If you use period=day, you get:
{""result"":""error"", ""message"":""You are requesting a precise subTable but there is not such data in the Archive.""}

which is better, but.

So I assume that this is a bug in the current version, since date range should as well be available when using idSubtable.

Best regards,

dcz
"
3906,Neutral,"it may be an issue related to #4853

How to reproduce:
Go to All Websites and sort by page views. All sparklines will flatten.

Sample sparkline URL:
http://demo.piwik.org/?module=MultiSites&action=getEvolutionGraph&period=day&date=2014-04-09,2014-05-08&evolutionBy=pageviews_evolution&columns=pageviews_evolution&idSite=7&idsite=7&viewDataTable=sparkline&colors=%7B%22backgroundColor%22%3A%22%23ffffff%22%2C%22lineColor%22%3A%22%23162c4a%22%2C%22minPointColor%22%3A%22%23ff7f7f%22%2C%22maxPointColor%22%3A%22%2375bf7c%22%2C%22lastPointColor%22%3A%22%2355aaff%22%7D
"
3907,Neutral,"The goal of this issue is to officially drop support for PHP 5.3 and require PHP 5.4.

We announced this in a blog post few months ago: https://piwik.org/blog/2014/10/announcing-piwik-will-end-php-5-3-support-six-months-may-2015/

Notes
- Update [requirements](http://piwik.org/docs/requirements/)
- Update api.piwik.org/1.0/getLatestVersion/ to return 3.0.0 only when PHP >= 5.4.0
- Change CI build and remove PHP 5.3 builds
- maybe some part of codebase can be simplified in case we were doing custom logic for PHP 5.3
"
3908,Negative,"After upgrade to 1.9.1 version I've noticed that Pageviews dropped, while Searches increased! Pageviews is now other then Visits, how this can be true?
Keywords: pageviews visits
"
3909,Neutral,"Now that most of piwiks icons are improved there is just one large collection from #11155 left: The brand icons

I am missing an idea how to automatically collect them, but in my opinion even if we just replace some of them (the most common ones) it's still an improvement. (See https://github.com/piwik/piwik/issues/10587#issuecomment-269909494)

So if anyone has an idea or wants to help me, I am open to suggestions."
3910,Neutral,"Same problem as in ticket #8014 when I run ""Administration > Diagnostic > System Check"". I don´t know when this problem started as I clicked on that menu entry for the first time.

Output of ""./console diagnostics:run""

```
  [DI\Definition\Exception\DefinitionException]
  Entry Piwik\Plugins\Diagnostics\DiagnosticService cannot be resolved: The parameter 'mandatoryDiagnostics' of Piwik\Plugins\Diagnostics\DiagnosticService::__construct has no value defin
  ed or guessable
  Full definition:
  Object (
      class = Piwik\Plugins\Diagnostics\DiagnosticService
      scope = singleton
      lazy = false
      __construct(
          $mandatoryDiagnostics = #UNDEFINED#
          $optionalDiagnostics = #UNDEFINED#
          $disabledDiagnostics = #UNDEFINED#
      )
  )
```

The console command `./console plugin:activate Diagnostics` tells me:

> The plugin is already activated.

 In `config/config.ini.php` there is `PluginsInstalled[] = ""Diagnostics""`.
"
3911,Neutral,"There is a bug in piwik 2.1.0: If I go to Actions -> Pages and filter some pages out (with the searchbox below) sometimes there are no results. 

I found out that there are results if the founded pages are on the top level of the domain (not in a subfolder). The export of this pages works perfect.

But when the founded pages are in a subfolder, the export makes some problems: It displays ""No data available"" (but there are some data).
A workaround is to set the parameter **flat=1**. Then the export works. 
"
3912,Neutral,"Remember 'Rows to display' setting in detailed visitor log, or at least move the selector to the top of the page.
"
3913,Neutral,"Hi team,

The first dashboard screen loads very quickly but when it comes to any other screen it takes around 2-3 mins to load the screen. I am currently using Piwik 2.16.0 and this was not a problem 2.14.x.

Could you please let me know why this happening?
"
3914,Neutral,"Hi,
I have been using piwik for so long. Lately, piwik got automatically updated from 2.16.0 to 2.16.2. Earlier, I could easly access custom dashboard by sending token_auth=xyx with idDashboard=xyz with url without login. But now after piwik updation it got stopped. It is only opning the defaul dashboard. But, when I hit url after login it is opening correct dashboard.
  Do anyone has any idia about this problem. Please help. 
"
3915,Negative,"As reported in https://twitter.com/innerlambada/status/452858535198867457 the installer fails when php5-json isnt installed. The JSON library uses a non-free license (should be used for good, not evil) and is therefore not installed by default on debian-esque systems - we should make sure that JSON is available and properly error out if it is not. 

This is a bit tricky since we cant load translations when JSON isnt available..
"
3916,Neutral,"Scenario:
1. I am conducting a Site Search (Wordpress page to be exact) and search page gives me few results.
2. I click each one of them to be opened in new browser tab.
3. Only the first one will be displayed in ""Pages following a Site Search"" report.

I believe this is due to the synchronous tracking of the pages following each other which is vividly visible in visitors log - for sure the only 1st opened site is ""following a Site Search"" but still, the other actions tracked should also be tracked as sites which were opened from a Site Search.

Is there some opportunity to improve this situation? Both on the field of displaying data in Visitor Log and ""Pages following a Site Search"" report.

Please see attached screenshot for better visualization of the issue:

![screen shot 2015-06-09 at 18 04 03 copy](https://cloud.githubusercontent.com/assets/11424829/8063188/a8023052-0ed3-11e5-9cb3-c4b3fc5eab18.png)
"
3917,Neutral,"Hi!
I can't find anything about it in Plugin class. Maybe we could add an update() method which will be called when plugin just updated from remote or local?
Or maybe another solution exists?
"
3918,Neutral,"Please make the phrase below translatable, this is written into template.

""of visits"" in ""piwik/plugins/Referrers/templates/index.twig"" (line 12, 21, 32, 41);
"
3919,Neutral,"We would like to increase the visibility of the Piwik translations effort, as many users don't realize that they can help with improving the current translations. 

How should we do this?

I added a ""About Piwik translations"" in the language selector, see attached screenshot. Thoughts?
"
3920,Positive,"**ALPHA version currently**

Current Piwik contains a disabled-by-default plugin called Live! that, when enabled, add a new widget in the widget list, that will show your latest visitors in real time. However this plugin is not very useful as such, and was built as a proof of concept. Improving the plugin has been one of the most requested user feature for months! If you would like to help, please post a comment, or submit a patch. Enjoy

**Concept**

The page should be entertaining to watch, fed with real time data, and open the webmaster to dig more into the other reports that Piwik offer. 

**Background**
This feature is heavily requested by the community (http://feedback.phpmyvisites.net/feedbacks/2630-last-n-visitor-details-config-info-path-etc) and would be really providing a plus to Piwik feature set.

**Data provided**
- at top of screen, clear summary:
  - Today you had: N visits, M pages today
  - In the last 30 minutes you had: X visits, Y pages
- list of the last N visitors with their information 
  - settings (os, browser, resolution, plugins) - icons only, details on icon hover 
  - referer (keyword, name, icon, clickable url - useful for SEO)
  - country icon
  - IP for piwik users with admin permission or super user
  - count of pages seen during this visit
  - time spent during this visit
  - number of goals converted, click on goals would show the list of pages with goals highlighted (see below)
- for each visit, it is possible to view pages: 
  - page title, 
  - page url that links to it, 
  - outlinks are shown different colors (icon ?)
  - downloads are shown different colors (icon ?)
  - when the page view was a Goal trigger, different color (icon ?) along with goal name and revenue.

**UI features**
- this page should make it possible to view all past visits for a current returning visitor. The idea would be to have an icon when the visitor is a returning visitor. Clicking on this icon would show the past visits for this visit. This is a UI challenge to make it look good and make it usable. for examples, previous visits rows could be shown below the visit row with a left margin and below a title ""This visitor previously visited the website:"". 
- by default, the spy mode would be enabled, therefore the page would reload regularly (every 2 seconds?) and show the new visits. We need a way to pause/resume the spy mode, if traffic is too big or if user wants to take more time to analyze existing traffic snapshot
- all the data would be shown in a one page interface, to simplify browsing and discovery; this poses UI challenges to make the page usable and looking clean.
- all data would be provided through the Live! plugin API. 
- there is an open question on how to refresh visits for which visitors view a new page. For example, we could highlight the visit row in yellow background and add the new page row below the visit. Or we could automatically move the visit with the new page view at the top of the page and highlight (eg. yellow background) the new page view.

**in V2**
- on the right of the spy, or on a different ""spy page"", we could show a auto-refreshing google map with the new visits in real time. see #5466

Any feedback? Anybody would like to help implementing this  interesting new plugin and UI challenge? 
"
3921,Neutral,"Among the countries and cultures, some consider the week begins on sunday, some on monday.

I think the preferences should give the administrator the option to decide whether to have a week as sunday-saturday or monday-sunday
"
3922,Negative,"Local testing using http://[::1]/ tracking works, but when I set up an IPv6-on-IPv4 tunnel for testing between my laptop and server, nothing is logged and there's unusual data in the payload (that doesn't appear anywhere in piwik.js or the test script), e.g.,

```
_ref=example.com%2Fpage%2Fsub%3Fquery%3Dtest%26test2%3Dtest3%22%5D

_refts=[%22YEAH%22,%22RIGHT!%22,1302879075,%22http://referrer
```

WTF?
"
3923,Negative,"Currently ""perdiod=range"" seems to be broken.

The URI-parameters &period=range&date=previous7 (even last7, ...) doesn't work fr pagetitle- and pageurl-output, you just get an ""There is no data for this report.""

API-output is broken to!
"
3924,Neutral,"It fails to copy some files see attached screenshot although permissions are recursively set (writable)

Windows 2008 R2
Mysql 5.1.57
PHP 5.3.6

![piwikupdatebroken](https://cloud.githubusercontent.com/assets/273120/3951791/48603a9e-26db-11e4-9e30-731d392e0d9d.png)
"
3925,Neutral,"A very important documentation that we have to setup quickly:

http://dev.piwik.org/trac/wiki/DevelopmentOpenProcess

http://codex.wordpress.org/Contributing_to_WordPress

http://dev.joomla.org/content/view/14/55/

http://drupal.org/contribute how to join the dev team 

http://gallery.menalto.com/wiki/G2_How_to_Join_the_Dev_Team

http://producingoss.com/en/getting-started.html#documentation

all roles that could be handled by individuals: http://producingoss.com/en/share-management.html 

all non tech roles: http://producingoss.com/en/funding-non-programming.html

build a ""marketing"", ""usability"", ""developer"", ""testers"", ""translators"", ""[faq](http://producingoss.com/en/getting-started.html#starting-a-faq)"", ""documentation"" todo list clear and that helps recruit new members.

Also see duplicate ticket #117 for list of things that people could help with
"
3926,Neutral,"I need to track users even if the tab is not focused.
I already set a heartbeattimer, but If a user change the Tab, piwik lose the real-time-state for this user.. 

Any Idea to make this possible?
"
3927,Neutral,"Follows up #7913

The goal of this issue is to add, in the archiving SQL queries, a new comment that contains the ID segment, when a segment is actually used.

For example `/* segment id = 544 */`

This will make much easier to find which segment is causing a given performance problem. 
"
3928,Neutral,"new installation causes warning:  Anything I can do to get it fixed?

Warning: shell_exec() [function.shell-exec]: Unable to execute 'stat -f -c ""%T"" /proc 2>/dev/null' in /home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php on line 216 

Backtrace -->
#0 Piwik\Error::errorHandler(...) called at [:]
#1 shell_exec(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php:216]
#2 Piwik\CliMulti\Process::isProcFSMounted(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php:157]
#3 Piwik\CliMulti\Process::isSupported(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti.php:163]
#4 Piwik\CliMulti->supportsAsync(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti.php:46]
#5 Piwik\CliMulti->__construct(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/SystemCheck.php:187]
#6 Piwik\Plugins\Installation\SystemCheck::getSystemInformation(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:406]
#7 Piwik\Plugins\Installation\Controller::getSystemInformation(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:604]
#8 Piwik\Plugins\Installation\Controller->setupSystemCheckView(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:119]
#9 Piwik\Plugins\Installation\Controller->systemCheck(...) called at [:]
#10 call_user_func_array(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:577]
#11 Piwik\FrontController->doDispatch(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:86]
#12 Piwik\FrontController->dispatch(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Installation.php:95]
#13 Piwik\Plugins\Installation\Installation->dispatch(...) called at [:]
#14 call_user_func_array(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/EventDispatcher.php:116]
#15 Piwik\EventDispatcher->postEvent(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/EventDispatcher.php:179]
#16 Piwik\EventDispatcher->postPendingEventsTo(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:847]
#17 Piwik\Plugin\Manager->reloadPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:636]
#18 Piwik\Plugin\Manager->loadPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:102]
#19 Piwik\Plugin\Manager->loadActivatedPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:324]
#20 Piwik\FrontController->init(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/dispatch.php:33]
#21 require_once(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/index.php:46]

There is an error. Please report the message (Piwik 2.7.0) and full backtrace in the Piwik forums (please do a Search first as it might have been reported already!).

Warning: shell_exec() [function.shell-exec]: Unable to execute 'stat -f -c ""%T"" /proc 2>/dev/null' in /home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php on line 216 

Backtrace -->
#0 Piwik\Error::errorHandler(...) called at [:]
#1 shell_exec(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php:216]
#2 Piwik\CliMulti\Process::isProcFSMounted(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti/Process.php:157]
#3 Piwik\CliMulti\Process::isSupported(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/CliMulti.php:163]
#4 Piwik\CliMulti->supportsAsync(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/SystemCheck.php:188]
#5 Piwik\Plugins\Installation\SystemCheck::getSystemInformation(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:406]
#6 Piwik\Plugins\Installation\Controller::getSystemInformation(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:604]
#7 Piwik\Plugins\Installation\Controller->setupSystemCheckView(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Controller.php:119]
#8 Piwik\Plugins\Installation\Controller->systemCheck(...) called at [:]
#9 call_user_func_array(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:577]
#10 Piwik\FrontController->doDispatch(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:86]
#11 Piwik\FrontController->dispatch(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/plugins/Installation/Installation.php:95]
#12 Piwik\Plugins\Installation\Installation->dispatch(...) called at [:]
#13 call_user_func_array(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/EventDispatcher.php:116]
#14 Piwik\EventDispatcher->postEvent(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/EventDispatcher.php:179]
#15 Piwik\EventDispatcher->postPendingEventsTo(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:847]
#16 Piwik\Plugin\Manager->reloadPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:636]
#17 Piwik\Plugin\Manager->loadPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/Plugin/Manager.php:102]
#18 Piwik\Plugin\Manager->loadActivatedPlugins(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/FrontController.php:324]
#19 Piwik\FrontController->init(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/core/dispatch.php:33]
#20 require_once(...) called at [/home/luzhajka/luzhajka.com/docs/stats-info/index.php:46]
"
3929,Neutral,"I've copied and pasted the Flash widget from piwik.org and changed the 

```
<param value=""always"" name=""allowScriptAccess"">
```

to prevent cross site scripting blocking in flash.

```
<object style=""visibility: visible;"" id=""UserCountrygetContinentChart_swf"" data=""http://piwik.org/demo/libs/open-flash-chart/open-flash-chart.swf?v2i"" bgcolor=""#FFFFFF"" type=""application/x-shockwave-flash"" width=""100%"" height=""250"">
  <param value=""always"" name=""allowScriptAccess"">
  <param value=""opaque"" name=""wmode"">
  <param value=""data-file=http%3A%2F%2Fpiwik.org%2Fdemo%2Findex.php%3Fmodule%3DUserCountry%26action%3DgetContinent%26idSite%3D1%26period%3Dday%26date%3D2009-06-12%26filter_sort_column%3Dnb_uniq_visitors%26filter_sort_order%3Ddesc%26viewDataTable%3DgenerateDataChartVerticalBar&loading=Laden..."" name=""flashvars"">
</object>
<div id=""dataTableFeatures"">
  <div> 
    <span id=""dataTableFooterIcons""> 
      <span id=""exportToFormat"" style=""display: none; padding-left: 4px;""> 
        <span id=""dataTableFooterExportAsImageIcon""> <a href=""javascript:OFC.jquery.popup('UserCountrygetContinentChart_swf');""><img title=""Als Bild exportieren"" src=""http://piwik.org/demo/themes/default/images/image.png""></a></span> 
        <img src=""http://piwik.org/demo/themes/default/images/export.png"" title=""Export"" width=""16"" height=""16""> 
        <span id=""linksExportToFormat"" style=""display: none;"">  
          <a href=""http://piwik.org/demo/?module=API&method=UserCountry.getContinent&format=CSV&idSite=1&period=day&date=2009-06-12&token_auth=anonymous&filter_limit=100"" target=""_blank"" class=""exportToFormat"" methodtocall=""UserCountry.getContinent"" format=""CSV"" filter_limit=""100"">CSV</a> |  
          <a href=""http://piwik.org/demo/?module=API&method=UserCountry.getContinent&format=XML&idSite=1&period=day&date=2009-06-12&token_auth=anonymous&filter_limit=100"" target=""_blank"" class=""exportToFormat"" methodtocall=""UserCountry.getContinent"" format=""XML"" filter_limit=""100"">XML</a> | 
          <a href=""http://piwik.org/demo/?module=API&method=UserCountry.getContinent&format=JSON&idSite=1&period=day&date=2009-06-12&token_auth=anonymous&filter_limit=100"" target=""_blank"" class=""exportToFormat"" methodtocall=""UserCountry.getContinent"" format=""JSON"" filter_limit=""100"">Json</a> | 
          <a href=""http://piwik.org/demo/?module=API&method=UserCountry.getContinent&format=PHP&idSite=1&period=day&date=2009-06-12&token_auth=anonymous&filter_limit=100"" target=""_blank"" class=""exportToFormat"" methodtocall=""UserCountry.getContinent"" format=""PHP"" filter_limit=""100"">Php</a> |  
          <a href=""http://piwik.org/demo/?module=API&method=UserCountry.getContinent&format=RSS&idSite=1&period=day&date=last10&token_auth=anonymous&filter_limit=100"" target=""_blank"" class=""exportToFormat"" methodtocall=""UserCountry.getContinent"" format=""RSS"" filter_limit=""100"" date=""last10""><img src=""http://piwik.org/demo/themes/default/images/feed.png"" border=""0""></a> 
        </span>
        <a class=""viewDataTable"" format=""cloud""><img src=""http://piwik.org/demo/themes/default/images/tagcloud.png"" title=""Schlagwortwolke"" width=""16"" height=""16""></a> 
        <a class=""viewDataTable"" format=""graphVerticalBar""><img src=""http://piwik.org/demo/themes/default/images/chart_bar.png"" title=""Sulendiagramm"" width=""16"" height=""16""></a> 
        <a class=""viewDataTable"" format=""graphPie""><img src=""http://piwik.org/demo/themes/default/images/chart_pie.png"" title=""Kreisdiagramm"" width=""16"" height=""16""></a> 
      </span> 
      <span id=""dataTableFooterIconsShow"" style=""padding-left: 4px;""> <img src=""http://piwik.org/demo/plugins/CoreHome/templates/images/more.png""> </span> 
      <span id=""tableAllColumnsSwitch"" style=""border-right: 1px solid rgb(130, 161, 210); float: right; padding-right: 4px;""> <img title=""Normale Tabelle anzeigen"" src=""http://piwik.org/demo/themes/default/images/table.png""> </span> 
      <span id=""tableGoals"" style=""float: right; padding-right: 4px;""> <img title=""View Goals"" src=""http://piwik.org/demo/themes/default/images/goal.png""> </span> 
    </span> 
  </div> 
  <span id=""loadingDataTable""><img src=""http://piwik.org/demo/themes/default/images/loading-blue.gif""> Lade Daten...</span> 
</div>
<div class=""dataTableSpacer""></div>
```

But I get the below error in the Firebug console. It's German...

```
Die Erlaubnis fr den Aufruf der Methode Location.toString wurde verweigert
Line 0
```

English should be something like:

```
Access denied calling method Location.toString
Line 0
```
"
3930,Neutral,"As stated, outlink and download events are not tracked at all with IE 11. Same visit occurring in Chrome for example, generates proper actions and visitor log.
"
3931,Neutral,"it would be fantastic to include the delivery time of products in addEcommerceItem(), setEcommerceView() and even in setEcommerceView(). One could analyse if products how many products are viewed with a certain delivery time and how they convert in comparison to products with another delivery time.

See ticket:2448#comment:13
"
3932,Neutral,"I am having trouble setting the ""Keep Page URL fragments when tracking Page URLs"" option for a website. The site is tracking fine. The select box for the ""Keep Page URL fragments when tracking Page URLs"" option has no value selected. When I select ""Yes"", then click ""Save"", it appears to save OK. But when I go back to the config menu for that website, the option is once again unselected.

Any ideas anyone?
"
3933,Positive,"Runnning piwik 2.1 RC9

I run the auto-archive script via the command :
/usr/bin/php /var/www/html/piwik/misc/cron/archive.php --url=http://w3stat.unil.ch/piwik/ > /home/cmoullet/log/archive.out 2>&1

via the crontab every 2 hours

At the end of the output I have the following error message for the scheduled task :

GeoIPAutoUpdater.update,ERROR: GeoIPAutoUpdater: failed to download ' http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz' to '/var/www/html/piwik/misc/GeoIPCity.dat.dat.gz': curl_exec: Protocol http not supported or disabled in libcurl

I do not understand since I checked via phpinfo ( see forum http://forum.piwik.org/read.php?2,111922,112320#msg-112320) that the http protocol is enabled in my php libcurl

Furthermore, why does it try to save the geoIP data as ""/var/www/html/piwik/misc/GeoIPCity.dat.dat.gz"" with doubled dat and not simply GeoIPCity.dat.gz?? 

For information, the command line : 

curl  http://geolite.maxmind.com/download/geoip/database/GeoLiteCity.dat.gz > /tmp/geoip.dat.gz

works perfectly ..

So I think there is no problem with my curl or php installation but rather in the archive.php script or subscript responsible for the automatic upload of geoIP (GeoIPAutoUpdater).

Thanks to help me 
"
3934,Neutral,"Hi all,
Is it possible to add an option in the e-mail report wizard in order to add flat=1 in the reporting API ?
I'm aware that it is a secondary feature but It could help final users.

Ciao
Diego
"
3935,Neutral,"I just noticed that piwik doesn't track downloads of OVA files. It would be good to add custom download files to a configuration file.
"
3936,Neutral,"This RFC is about discussing changes in the configuration system.

Current status is a mix of:
- INI files
- Configuration values in code
- Objects created in the code

Currently too many things are configured at runtime instead of in a configuration file. For example some things are configured through events. By separating configuration and execution, we end up with a more explicit config and simpler code (ridden of configuration). And we offer more extension points since plugins can override everything in the config (not that they always should ;) ).

Changes proposed:
- move config options from INI files to DI config
- move configuration logic (that is in the code) to DI config
- move objects creation to DI config (or factory objects called by DI config)
- plugins can provide an optional config file (e.g. named `config/config.php`?)

List of DI configuration files and their order of inclusion:
- `config/main.php`
- `plugins/.../config/config.php` (Plugins configs)
- `config/environment.dev.php`
- `config/environment.test.php`
- `config/config.php` (User config)

Environment config allows to override default config and to avoid doing so dynamically it in the code.
#### Example

When configured to log to file, the logger reads the file name from the `Config` object.

Then it gets the `tmp` path and append the filename to it.

Then it gets the Piwik Instance ID and appends it to the path (if not null), which is a special case for the `CloudAdmin` plugin.

This could be replaced by a config looking like this (this is an abstract config syntax for simplicity):
- default config:
  - `tmpPath = PIWIK_ROOT . '/tmp'`
  - `logFile = tmpPath . '/logs/piwik.log'`

This covers the most common cases. Then if a plugin (e.g. CloudAdmin) wants to customize the path:
- `CloudAdmin` config:
  - `tmpPath = tmpPath . '/' . instanceId` (replace the default config value)
- User config:
  - `instanceId = 123`

In the end, we end up with the same result except configuration is separated from execution (the file is not configured in code). The config is more explicit, and also more extensible. No need to add custom ""instance ID"" code in Piwik Core just for a feature of the CloudAdmin plugin.
#### Do we keep INI files?

2 things:
- global/internal Piwik config
- user config

Global config should be moved to DI config because it's much more powerful so I don't see the point to maintain 2 separated configs.

However user config can be changed by users (obviously) so it might be best if it's as simple as possible (PHP syntax might be too much).

I think DI config files is not incompatible with being simple. If we stick to INI, we'll seriously limit what users can do and override. With DI config they have much more power, yet we can still provide simple configuration options on a use case basis (i.e. no complex PHP syntax).

Quick and **dirty** example with the logger:

``` php
// User config
return [
    'logger' => 'file' // or ""stdout"" or ""database""
];

// Global config
return [
    'Psr\Logger\LoggerInterface' => DI\factory(function ($container) {
        $choice = $container->get('logger');

        if ($choice === 'file') {
            // ...
        } else // ...
    }),
];
```

Then it still leaves the possibility to advanced users (e.g. Piwik Pro Cloud) to override `Psr\Logger\LoggerInterface` in their user config to something completely different.

By the way this is how Symfony works with Bundle: you can set up objects manually (e.g. set up your logger and all) or use a bundle that will abstract and simplify the config for you so that you just have to set 1 or 2 options.
"
3937,Neutral,"The Socials widget fails to display social icons when report is flattened. 

http://demo.piwik.org/index.php?filter_column=label&filter_column_recursive=label&idGoal=-1&filter_sort_order=desc&keep_summary_row=0&filter_limit=10&viewDataTable=table&module=Referers&action=getSocials&idSite=7&period=year&date=2013-03-09&controllerActionCalledWhenRequestSubTable=getUrlsForSocial&enable_sort=1&totalRows=7&include_aggregate_rows=1&filter_sort_column=nb_visits&flat=1

Instead of the correct icon, the URL points to xx.png which isn't available. This does not happen for all URLs.
"
3938,Neutral,"I delete a site from the sites list (as admin).
But the database logs where still there, so i had plenty of entries in _piwik_log_visit_ and _piwik_archive__\* for the _idsite_ i deleted.

As a side note, the idsite disappeared in _piwik_site_
Keywords: db, delete
"
3939,Negative,"Its struck at the following steps, unable to move forward.

Please help me ASAP

707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
707521 lines parsed, 700371 lines recorded, 1 records/sec (avg), 0 records/sec (current)
"
3940,Negative,"As title. I find the PHP code (controller & otherwise) that uses QuickForm to be confusing & bloated. Would be good to switch to angularjs code for it.
"
3941,Neutral,"By default, the documentation recommends to set an hourly crontab.

If users disable browser archiving and then set to 'process reports every eg. 100 seconds'  this will fail as the crontab only runs every hour. In this case, when X &lt; 3600, we should display a warning message explaining the possible clash, and inviting users to update the crontab.
"
3942,Neutral,"Making page-titles looking a bit cleaner by 
removing ""brandings""

What is a branding?
Lots of websites have titles always ending with something like
""| MYSITE - your friendly website""

Probably a config setting ""what to cut"" maybe necessary for each website...

Doing this the full title should be make visible in the on hover information next to the already shown url

Should be applied in
- Visitor-Log
- Vistor-Profile
- and everywhere else where the title is visible..

This ticket was extracted from #5296
"
3943,Negative,"Hi, 

I just unzipped piwik on my site, then I access http://mysite.com/piwik/, and I have this error:

Fatal error: Class 'Piwik_Common' not found in /&lt;censored>/public_html/piwik/core/Piwik.php on line 0

Things starts out pretty bad I guess.
"
3944,Neutral,"this was reported by Microsoft team, and some Piwik users running under IIS.

http://forum.piwik.org/read.php?2,115950,page=1#msg-115995
"
3945,Neutral,"We are currently using `%s` as placeholder in many translations strings.
For all translations that contain more than one placeholder we should use numbered placeholders (`%1$s`, `%2$`, ...) instead.
That gives the possibility to change the usage order of the placeholders, which is important for some languages to translate proper. 

TODOs to improve usage:
- [x] Replace usage of `%s` in translation files, where more than one `%s` is used in one translation string
- [x] Manually update the translations on transifex and replace the placeholders (so no translation is lost)
- [x] Update the docs about translations and mention that numbered placeholders should be used where there is more than one `%s` in a translations (piwik/developer-documentation#119)
- [x] Add a Integration test, that checks all translations for not containing more than one `%s` (#9728)
"
3946,Neutral,"Although one weeks under ""Visitors - Visitors log"" is selected (date range 2011-01-31 to 2011-02-06), the results ONLY for the month of February will be presented.

I have updates my Piwik from 1.0 to 1.1.1 and this bug is now present.
"
3947,Neutral,"Hello!
 When I click on ""check system"" I see next messages:

Entry Piwik\Plugins\Diagnostics\DiagnosticService cannot be resolved: The parameter 'mandatoryDiagnostics' of Piwik\Plugins\Diagnostics\DiagnosticService::__construct has no value defined or guessableFull definition:Object ( class = Piwik\Plugins\Diagnostics\DiagnosticService scope = singleton lazy = false __construct( $mandatoryDiagnostics = #UNDEFINED# $optionalDiagnostics = #UNDEFINED# $disabledDiagnostics = #UNDEFINED# ))

Please,help me. How can I fix it?
P.S. I use piwik version 2.13.1
"
3948,Neutral,"Hi 

my install of piwik is detecting all visitors from india as visitors from US i tried reinstalling piwik but same problem persists 
is this a bug or am i doing something wrong ? as it shows all my traffic coming from only US and UK when most of it is from India , US and Uk 

Keywords: india,country detection
"
3949,Neutral,"The page Actions => Events page does not use the full width like Pages, Entry Pages and so o n in the Actions section.

To get the expected result we are force to create a new Dashboard, single column layout. Default display should use the maximum screen real estate.

Use case: We track Events with URL as the fourth argument : 
`_paq.push(['trackEvent', 'Sharing', 'Facebook', '/some/url/are/quite/long/sometimes/and/we/need/larger/display/']);`

The thing with 10 000 pages websites is that lots of URLs start the same and only the end of URL is different. Mouseover is NOT a solution.
"
3950,Neutral,"While saving any email report, the checkbox ""send to me"" gets always selected, even if the selection was changed or not there before.

# Versions

* Piwik 3.0.3
* PHP 5.6

# Steps to reproduce

* Open Personal > Email Reporst
* Create and Schedule a report, or edit an existing one
* Uncheck the ""Send to me"" checkbox and add another email address in the ""Also send the report to these emails (one email per line):"" field
* Create report
* Send to me is not active and recipient is the other email address (expected behaviour)
* Edit report
* ""Send to me"" checkbox is still not checked
* Change other values, or don't change anything at all
* select ""Update report""
* **Report is sent to the other email address and my own as well (even te ""Send to me"" checkbox was not touched)**
* Edit report
* ""Send to me"" checkbox is checked
* Uncheck ""Send to me""
* Update report
* Send to me is not active and recipient is the other email address (expected behaviour)"
3951,Neutral,"A lot of links are still on http. Many of them get 301-redirected to https. Which is good: The 301-redirect should remain, to not break existing links somewhere in the wild.

But on web pages hosted by piwik, piwik should migrate the links to https, so that users get to the https version without being 301-redirected.

Reason:

- **Security:** 301-redirects are requests which are requested and responded via http. Which is unencrypted, and more important, not safe against manipulation and  not authenticating the server. E.g. MITM can manipulate the target URL to something phishy.

- **Performance:** Reducing the number of 301-redirects which are actually _executed_ every day improves the performance of a web page (saves a round trip for each and every 301 redirect). Performance is not the main point for me, just nice to have.

Now that piwik already 301-redirects most of its http links to https, a link checker can be taken to analyze all these 301-redirects and fix them to https where possible. That should work for all links to https-only web sites (including external links like e.g. links to twitter).

First impression: https://validator.w3.org/checklink?uri=https%3A%2F%2Fpiwik.org&hide_type=all&recursive=on&depth=5&check=Check

This issue is a follow-up to #8236"
3952,Negative,"When trying to add widgets, it seems you are forced to ""wait"" for the widget ""preview"" to load before clicking the widget to add... otherwise your clicks simply get ignored.

This is terrible, especially when your server is slow to process the data.
"
3953,Positive,"Hello,

I develop my own plugin and I created custom columns for my plugin as VisitDimension and ActionDimention. Now I want to include my variables in the Live API report. I don't want to touch the Live Plugin code in order to have the updates of Piwik.
Is it possible to request for events in functions like Live/Model (queryActionsForVisit) so I can add my columns to the query? 
I know I can get all the data as Datatable and add my columns but it requires running new query. By having a few more postEvent, It's more efficient and easy to implement it.

Thank you"
3954,Neutral,"Is there a way to use own translations overruling piwiks translations or is there a way to extend the translate function like

```
class OverrideTranslations extends \Piwik\Translation {
    public function translate($translationId, $args = array(), $language = null) {
        return $myTranslation;
    }
}
```
"
3955,Neutral,"when you open the URL https://devsrv.suncoast.com/webanalytics/index.php?module=API&method=API.getDefaultMetricTranslations&format=original&serialize=1&trigger=archivephp

what do you see as response?

do you also see maybe an error in your server error log file?
"
3956,Neutral,"was it the only failing test?
"
3957,Neutral,"I would like to roll all the privacy recommemdations (#2094 and #2095) and existing features (AnonymizeIP, OptOut, and DoNotTrack) into a single Privacy plugin, consolidating all the related settings into a single Admin screen.
"
3958,Neutral,"Created an issue for the device-detector library: https://github.com/piwik/device-detector/issues/5363

I presume we should keep this one open?
"
3959,Neutral,"Export as image works for me in dashboard and Visitors>Overview on FF and IE8 - should this bug be closed?
"
3960,Negative,"I've been running Piwik 2.12.0-rc2 for a couple of days and I have to run  ./console core:purge-old-archive-data for the tables to be purged. It doesn't seem to automatically do it so far.
"
3961,Positive,"yep, that's what i'm currently building from outside piwik ;) using some of the piwik functions.

There should be one addtional option to install plugins remotly during the installprocess. (e.g. for SingleSignOn Plugins etc.).

Additionally it should be possible to run a function directly after the configuration is read (before database initialization) so that the database setting can be directly obtained from other projects settings, without writing it into the piwik configuration file.
All this will make it very easy to integrate piwik into other projects.
I think this will make piwik more popular. ;))

Regards Kay
"
3962,Negative,"OK thanks for confirming. It is not fixing other issues than custom variable tracking
"
3963,Neutral,"please ask in the forums with the bug description and steps to reproduce. 

Note: make sure you wait 1-2 seconds before each goal conversion (max 1 per second)
"
3964,Neutral,"marked as duplicate of #44 as this plugin could be extended to provide this data
"
3965,Neutral,"As you say, this is not a Piwik bug. closing
"
3966,Neutral,"👍 would be nice to have on demo.piwik.org. Not sure if we can do this with the forum

btw: done here as well https://demo-anonymous.piwik.org/index.php?module=CoreHome&action=index&idSite=1&period=year&date=today#?module=Contents&action=index&idSite=1&period=year&date=today
"
3967,Neutral,"Please discard all the tahoma examples. I used the Microsoft file.

I'm close to fixing this ticket and the two related ones (#2788 #2706).

What's stalling the progress is that we may need to modify pChart 2 source code to fix the following issue : http://sourceforge.net/tracker/?func=detail&aid=3443890&group_id=227755&atid=1071632

Also, I have yet to find a way to display icons and percentages as specified in http://issues.piwik.org/attachments/2704/Wishlist%20graphs%20horizontal%20bars.jpg
"
3968,Neutral,"see live on http://piwik.org/changelog/
"
3969,Neutral,"In 3e002e63d974df1f7949e9ae5aaf402cdeb46a7b: refs #3813 fixed adding new websites/users. note: jQuery('htmlString') doesn't work anymore if htmlString doesn't start with '&lt;' - use jQuery(jQuery.parseHTML('htmlString')) instead
"
3970,Neutral,"Check out the code coverage report here: https://coveralls.io/r/piwik/piwik
"
3971,Positive,"Thanks for the quick bug report :)
"
3972,Positive,"It makes sense. `150s` sounds OK too! 
"
3973,Negative,"@mattab: we were able to reproduce this issues several times (mostly on bigger instances - about 200k visits daily).
"
3974,Neutral,"Ah, you mean running `php composer.phar install`? That was not documented anywhere, so I would suggest adding a notice about that in http://piwik.org/docs/installation/ and  http://piwik.org/docs/update/#the-manual-three-step-update

However, I've encountered a subproblem now:

```
$ php composer.phar install
    Warning: This development build of composer is over 30 days old.
    It is recommended to update it by running ""composer.phar self-update"" to get the latest version.

$ php composer.phar self-update
    Updating to version 4590012a57d829f18bfb819ce7041671ba2b0a67.
        Downloading: 100%         
    Use composer self-update --rollback to return to version 76833335152d17632e1afe277a9edbbb232d3a1f

$ php composer.phar install
    > Piwik\Composer\ScriptHandler::cleanXhprof
    Loading composer repositories with package information
    Installing dependencies (including require-dev) from lock file
    Nothing to install or update
    Generating autoload files
    > Piwik\Composer\ScriptHandler::buildXhprof
    Building xhprof...
    Fatal error: configure script failed! View tmp/xhprof-logs/configure.log for more info.
```

Contents of that log file:

```
    checking for grep that handles long lines and -e... /bin/grep
    checking for egrep... /bin/grep -E
    checking for a sed that does not truncate output... /bin/sed
    checking for cc... no
    checking for gcc... no
    configure: error: in `vendor/facebook/xhprof/extension':
    configure: error: no acceptable C compiler found in $PATH
    See `config.log' for more details.
```

Shared hosts (or most locked-down web servers) will not have C compilers lying around, for security reasons. Can we do something about that?
"
3975,Neutral,"Things to think about:
- logme mechanism http://piwik.org/faq/how-to/faq_30/ - should not use md5 anymore but the more ecure hashing (via API?)
  - how do we keep BC for `logme`
- how do keep backward compatibility in general
- update tests 
- Log analytics http://piwik.org/log-analytics/ import_logs.py https://github.com/piwik/piwik/blob/master/misc/log-analytics/import_logs.py#L574
- Other modules, see: https://github.com/piwik/piwik/search?l=php&q=md5*password&utf8=%E2%9C%93
"
3976,Positive," Zen Mode was just removed completely from Piwik.

Also the new awesome search bar was added: it can be opened by pressing `f`

New simple shortcuts could be added for an even better user experience:
- `s` to open segment selector
- `w` to open website selector
- `d` to open calendar (`d` stands for date)
- `?` to display the list of shortcuts
"
3977,Positive,"Got it, thank you!
"
3978,Neutral,"(in [2377]) margins are now the same, but the inputboxes/buttons still look diffrent
"
3979,Neutral,"(In [1338]) fixes #878 - update German translation (forwarded a copy of the patch to translations (at) piwik.org
"
3980,Positive,"Hello Markus,

i am also very intersted in this plugin.
Could you provide a download (link or file) as vipsoft mentioned?

Thanks in advance!

@vipsoft: yes, it sounds like the #692 but here - as far as i understand - this plugn does NOT store the ip, rather than masking it.
"
3981,Neutral,"from email

```
a[]=
/index.php?a[]=0&b=0&format=xml&method=ExampleAPI.getSum&module=API&token_auth=anonymous
Fatal error: Unsupported operand types in
/home/piwik-demo/www/demo.piwik.org/plugins/ExampleAPI/API.php on line
100
---------------------
b[]=
/index.php/index.php?a=0&b[]=0&format=xml&method=ExampleAPI.getSum&module=API&token_auth=anonymous
Fatal error: Unsupported operand types in
/home/piwik-demo/www/demo.piwik.org/plugins/ExampleAPI/API.php on line
100
----------------------
date[]=
/index.php?action=getEvolutionGraph&columns=revenue&date[]=1&evolutionBy=revenue&idSite=2&idsite=2&module=MultiSites&period=day&viewDataTable=sparkline
Fatal error: Call to a member function toString() on a non-object in
/www2/htdocs/piguik/core/Archive.php on
line 262
----------------------
fontSize[]=
/index.php?aliasedGraph=1&apiAction=getCountry&apiModule=UserCountry&date=last10&fontSize[]=9&format=rss&idSite=2&legendAppendMetric=1&method=ImageGraph.get&module=API&outputType=0&period=day&showLegend=1&token_auth=anonymous&translateColumnNames=
Fatal error: Unsupported operand types in
/www2/htdocs/piguik/plugins/ImageGraph/API.php
on line 163

```
"
3982,Neutral,"- close icon
- check if email was sent
- defined styles
"
3983,Neutral,"Hi @Bryze 
Please ask questions in the forums: http://forum.piwik.org/
as here is only for bug reports and feature requests.

The answer is that, if you use a Custom Dimension of Visit scope, the last value will be kept.
If you use ""Action"" scope, then all values will be recorded as they are recorded in each action/pageview."
3984,Neutral,"Attachment: piwik.php proxy file to put on each tracked website
[piwik.php](http://issues.piwik.org/attachments/2019/piwik.php)
"
3985,Positive,"Works again in 2.14.2

Thx
"
3986,Neutral,"Yes, but asynchronous method did not work for error tracking in my case. Maybe this case will be a good guide for other users"
3987,Neutral,As an idea how about we change the key bind to C as this way it would also imply C for calendar although this may have conflict with ctrl+c
3988,Neutral,"(In [6540]) refs #1320 - revert for empty request
"
3989,Positive,"Thanks for the suggestion!

What was the other ticket you found?

See also slightly related #1568
"
3990,Neutral,"(In [6279]) Fixes #3125, made formerly hardcoded timeout value configurable in PiwikTracker. Can be set via a setter.
"
3991,Neutral,"When you say you are unable to install, do you mean there's no option to activate it in the plugins page? Or is there some error?

BTW, we are currently rewriting LoginLdap, the next version will be 3.0. It will only be compatible w/ Piwik  2.8 and above, but we recommend using it instead of 2.2.7.
"
3992,Neutral,"In d152c932d6c24e9705e3380a25ecc6a256d44343: Fixes #2830 Implementing Tracker Cache TTL (in config file, [Tracker]
"
3993,Neutral,"themes/default/ie6.tpl is a new file in the 1.2.1 release.  Your themes/default directory doesn't appear to be writeable.  You can either extract the file from the .zip file, or grab it from here:

https://github.com/piwik/piwik/blob/master/4133/trunk/themes/default/ie6.tpl
"
3994,Neutral,"Replying to [JulienM](comment:4):

> Adding ""imageGraphShowEvolution"" would make sense if two modules need it. We can introduce this field when that happens.

OK

> Do you mean a UI element in the report creation form? Would this be a SELECT or a checkbox input?

below the SELECT in (optional) Display options, we could have a radio button

```
Graphs style: (X) (default) Show Horizontal Bar Graphs
              ( ) Show Historical Graphs for the top 5 values 
```

what do you think?
"
3995,Neutral,"I'll move this to Piwik 1.10. Feel free to move it back to Feature Requests if this is not ok.
"
3996,Neutral,"> df -T -t nfs /volume1/web/piwik/tmp/sessions 2>&1
>Filesystem Type 1K-blocks Used Available Use% Mounted on
>\- \- 3732213600 857454592 2874759008 23% /volume1/web

That's odd. Can you try if any parameter causes df to not show that filesystem when filtering for nfs.

Which df are you using? The GNU one or something else?

What does `df --version` return"
3997,Neutral,"Attachment: plugins/CoreHome/templates/piwik_tag.tpl
[piwik_tag.tpl](http://issues.piwik.org/attachments/877/piwik_tag.tpl)
"
3998,Neutral,"In e2cb9183adf854300a28bf311df14101dca0dffa: refs #2174 fix some tests, looks like we still need to get past data to calculate the volution
"
3999,Neutral,"- the code should not send data to piwik more than once every 500ms 
- object oriented structure
- do not use document.write (already fixed - patch going to be commited)
"
4000,Negative,"I was just working on an additional update file to remove no longer needed files to remove those files:

```
'misc/others/test_cookies_GenerateHundredsWebsitesAndVisits.php',
'misc/others/test_generateLotsVisitsWebsites.php',
'core/Tracker/ActionEvent.php',
'plugins/Actions/Widgets.php',
'plugins/CustomVariables/Menu.php',
'plugins/CustomVariables/Widgets.php',
'plugins/DevicesDetection/Widgets.php',
'plugins/Events/Widgets.php',
'plugins/ExampleRssWidget/Controller.php',
'plugins/Live/Menu.php',
'plugins/Provider/Widgets.php',
'plugins/SEO/Controller.php',
'plugins/SegmentEditor/Controller.php',
'plugins/UserCountry/Widgets.php',
'plugins/UserSettings/Widgets.php',
'plugins/VisitTime/Widgets.php',
'plugins/VisitorInterest/Widgets.php'
```

Problem is the following: Those files might be added in a future version of Piwik again. Imagine we add a `plugins/VisitorInterest/Widgets.php` file to Piwik in 2.6.0 and a user updates from 2.4.0 to 2.6.0.

What will happen is that `plugins/VisitorInterest/Widgets.php` will be copied to the users Piwik installation but afterwards removed by an update in 2.5.0 although the file should not be removed. So this solution does not really work either. Maybe we could check the age of the file that is supposed to be deleted and then decide whether to delete or not but even this might not work in all cases (eg if Update executed later etc)

The only solution that seems to work for me is by comparing the new Piwik version with the current Piwik version of the user and remove no longer needed files as explained and implemented above. But users will have to update at least twice until it works (see above). 

I just tested an update from 2.4.0 to 2.5.0-b2 and those Widget files above still exist but it is not that much of a problem as same widgets that are added multiple times are only shown once. They are defined in Reports and Widgets now because Widgets are not removed. This can be a problem in the future once the widgets are defined differently in Reports and Widgets class. Same for Menu. 

Any further ideas? Or is solution maybe ok for now?
"
4001,Neutral,"See #6960 
"
4002,Neutral,"In c2bf725aab3e4580d09bc49875d72cd10a473a99: language update refs #3430
"
4003,Negative,"I think that line is the problem. Why haven't I seen this before?

```
ps > /dev/null 2>&1 & echo $?
```

the single **&** brings ps to the background which is successfull and returns always 0. But the return value of ps itself is 1 in my case. But that is not checked with this command. This line should do the trick:

```
ps > /dev/null 2>&1; echo $?
```
"
4004,Positive,"ok, thanks for clarification. committed in [926](in view->render rather than in index.php)
"
4005,Neutral,"> by how much using Piwk affects the performance of a website

There is no such single answer. It depends on many things. Like how you embed Piwik, how fast your server is, where your audience is located, whether you server the piwik.js eg via CDN, whether you have proper caching in place for piwik.js and gzip, whether you load it from same domain or different one, how ""big"" your website is in terms of files that need to be loaded and size etc. Also it depends on how you define ""performance"". Do you mean page load time? page ready time? Do you mean fps when scrolling or doing something on the website etc.

In general there should be once a request to piwik.js and then it should be cached. It is only a few kb and should be fast yet still user needs to load it. If performance is super important, I'd recommend to have a look and embed it eg like this after page load (with the risk of missing some visitors to be tracked): https://github.com/piwik/piwik/issues/9077 

Then there is usually one request eg. per pageview which is like only a few bytes and depending on your server can take anything between 4ms and like 500ms. This is in the background though and user shouldn't notice it. Also doesn't use much on the network as said only few bytes.

If you use premium features like Media Analytics or Form Analytics there might be more requests while a user watches a video or uses a form but they all have small footprints.

Another thing that may affect performance is when clicking on an outlink (to different website) and Piwik tracks it, then we may delay the opening on the other website by like 300ms or 500ms to make sure the tracking request to measure the outlink is sent.

"
4006,Neutral,"Duplicate of #7105 ?
"
4007,Negative,"Maybe it is only missing in the german translation which I'm using?
"
4008,Neutral,"Closing issue as ""Works for me"" as per @sgiehl feedback piwik will always use the specified IPs. If there are requests that don't send proper IPs maybe there's a server misconfiguration? 

See also http://piwik.org/faq/how-to-install/faq_98/
"
4009,Negative,"Hi we received blank reports again for the weekly reports,although PIWIK UI shows data for the past week 13th-19th June for these sites.Please help.Why PIWIK is so inconsistent please help.Only for one site out of 5 the correct report was generated.Please help
"
4010,Neutral,"see pull request https://github.com/piwik/piwik/pull/28
"
4011,Positive,"Thanks Stefan it looks good to me
"
4012,Positive,"Thanks for the suggestion. 
"
4013,Neutral,"(In [6612]) Fixes #3200
"
4014,Neutral,I think it should be line 485 according to the code (I'm on 3.0.1). I put in the fix and will report back after tonight.
4015,Negative,"I don't believe I am using any custom plugins.  I am not able to log in right now so I can't verify.  All of a sudden, it booted me out.  I originally noticed this problem when I created a new user for someone else.  I am an admin and the new user I created it for was getting those same error messages.  I tried to replicate that by logging out, and logging back in and that's when I saw the error message. 
"
4016,Positive,"FYI: I tried to set custom properties/metadata in the generated PDF report for quite a while but didn't get it working. There is this method `setExtraMP()` to set custom metadata but I couldn't find a single example on what to set there: https://github.com/tcpdf-clone/tcpdf/blob/master/tcpdf.php#L9492 . It probably should be some kind of `</df:RDF>` elements... if it is important I can invest more time
"
4017,Neutral,"> Even the best developers make mistakes. A single missing comma may break the entire application.

Exactly, there is no guarantee that having code reviewed will make it bug-less (if one developer can miss a bug, then 2 or 3 could too). Code review should not be relied upon to detect bugs, that's the role of automated tests (which are far less expensive in that regard).

IMO code reviews are mostly useful to discuss anything that has a significant impact on other developers and the project:
- big features, new plugins
- architectural changes
- changes to core components/important parts of Piwik
- large codestyle changes (to give an example of something that has a very ""soft"" impact)
- ask question/feedback on something in particular

For e.g. typo fixes or small bugfixes the cost of changing that later is minimal so I don't think it's worth blocking for days and take time off other people for reviewing.
"
4018,Neutral,"Gonna do some final tests re speed and whether it actually works. Otherwise it is done. Not sure whether we should directly include it in Piwik 2.10.0 as caching was often not tested when a class used caching.
"
4019,Positive,"Thanks for report, but we will stop support of Zeitgeist see #5222
Thank you for your understanding!
"
4020,Positive,"See [What version of Piwik do I use?](http://piwik.org/faq/how-to-update/#faq_8)

THanks for the suggestion!
"
4021,Positive,"Thanks for the report! 

@Fabian maybe you have an idea?
"
4022,Neutral,"In d57f4a83aa7295c1e23277b2c22e9be4cafb1112: Refs #4087, add UI screenshot tests to new repository, enable tests on travis and make sure new repo is built every time integration tests pass on piwik build.
"
4023,Neutral,"To fix the ""Black graphs"" in dashboard, simply delete the widget, and add it again to your dashboard. It's 
"
4024,Positive,"Good point. However, I presume it is there for valid HTML structure. Eg `body` element is allowed to have `p` element but not `img`. 

If the `p` element causes any troubles re spacing and you do not need valid HTML I recommend to remove it manually. 

Are there any opinions if without `p` should be maybe default and having an option for ""valid HTML""?
"
4025,Negative,"> DevicesDetection/images/brand
> * I am still thinking about a way to update them that doesn't involve me googling hundreds of companies.
> * Maybe just update the top X (maybe from demo.piwik.org?) as most people will newer see the other.
> * Is there a reason that they are .ico?

I guess there is no good reason for using ico, nur sure why that was done in the first place.
Only using the top of demo.piwik.org might not be that good. Device brands are more or less a matter of the country your visitors are from. In China or Japan there will be very different ""top brands"" than in a European country or America.
I don't have a good solution for grabbing those icons automatically. Especially as some brands are ambiguous.
But nevertheless feel free to change them if you find a good solution :)"
4026,Neutral,"We need some UI in Piwik to:
1. Manage the list of URLs.
2. Update list via `one click`.

It's more tech step. But Piwik must support regex in these URLs.

At least, Piwik on `update list` event should check for `userlist` and merge it if `userlist` has different data.
"
4027,Neutral,"- Opera 7.54 - (JSON cx) regexp compile error
- Opera 8.54 - basic tracking works
"
4028,Neutral,"I am seeing here > 600 usages of API directly in the codebase. I think this is a project that is not quite feasible / worth it right now. I suggest to instead do it over time when we refactor parts of the platform anyway. When we refactor parts of it, it is important to refactor calls to the same method across the code base. Eg If some `SitesManager.addSite` calls are replaced to use `Request::processRequest`, we need to refactor it in all places where we call `SitesManager.addSite`. Otherwise parts of it behaves differently. I will close this issue for now but feel free to reopen.
"
4029,Positive,"many thanks for documenting this!
Is there a setting how often website send this alive information?
not every body needs it every second, but every 60seconds maybe to long for others...
and of course you may need to find an individual balance between accuracy and  server-load
"
4030,Neutral,"In 65a62b8abdebaf4eba88975701e897b19bf51721: refs #4053 use similar code for themes and plugins / install and update
"
4031,Negative,"so the problem probably only happens on Vista. I don't have vista so I can't fix/replicate unfortunately.
"
4032,Positive,"Should be possible - still on my list.
"
4033,Positive,"That would be helpful indeed 👍
"
4034,Positive,":+1: and we can keep BC, like for other refactorings, by keeping the old static methods as proxies to the new class. Using an simple object injectable using DI would make totally sense.
"
4035,Neutral,"My server logs still show the missing favicon in the root of the piwik installation. I suppose that this comes from the login screen where no favicon is linked.

Putting the favicon in the root of piwik or changing the code of the login screen to serve a favicon should fix this.
"
4036,Neutral,"was moved from: #5246
"
4037,Neutral,"(In [4287]) refs #2243, refs #2253
"
4038,Neutral,"@mattab Yes, in `CronArchive::hadWebsiteTrafficSinceMidnightInTimezone` it is checked whether there were new visits since midnight or since last successful archiving (https://github.com/piwik/piwik/blob/3.x-dev/core/CronArchive.php#L1176).

Let's assume that we run `core:archive` **few times a day** (I should've mention about that). In such case seconds since last successful archiving will be taken into account (because such period is smaller than since midnight (https://github.com/piwik/piwik/blob/3.x-dev/core/CronArchive.php#L1177). So for if a website has 1-2 visits a day and they happen dufing archiving process, they won't trigger archiving for this website.
"
4039,Negative,Is it listed in your hosts file? Don't have any other idea why it shouldn't be reachable otherwise right now...
4040,Neutral,"Does it still not work? I will reopen the issue. 

What's your PHP version and operating system?

I'd recommend to execute the update again, but this time manually see http://piwik.org/docs/update/#the-manual-three-step-update . Important: backup your `config/config.ini.php` before doing so
"
4041,Neutral,"Duplicate: https://github.com/piwik/piwik/issues/9704#issuecomment-180347799
"
4042,Positive,"Thanks @quba for suggestion!

Ideally we would have exact data to backup our feeling it would speed things up, ie. what is % time spent in sub-query VS the whole archiver query. If we cache the result of subquery, we know we'd save this % in each subsequent archiver query. Waiting for more data to know whether it's worth it before we schedule the issue
"
4043,Neutral,"If anyone also experiences this issue of some Page Titles exotic characters not recorded properly, for some pages only, please leave a comment here, we shall investigate when more users report the issue.
"
4044,Positive,"It would also be nice to have a ""quarterly"" option for scheduled reports.
"
4045,Neutral,"Since it seems that the solution is to not use a --recorders value greater than 1, and to add --replay-tracking and --recorder-max-payload-size, shouldn't [this page](http://piwik.org/docs/log-analytics-tool-how-to/) be updated? It is still recommending that --recorder be set to the number of cores on the system.  
"
4046,Neutral,"(In [1354]) refs #894 - fix broken Updater.test.php
"
4047,Neutral,"I reckon dimension id would be consistent, and if not available for some reason, fall back to `label1` and `label2` (we could still show eg `dimesionid_foo,label2` when we have eg the dimension id for one dimension? I reckon...)

Apart from this the output of those reports is not very good for computer processing anyway and cannot really be used, even when requesting JSON format etc. If someone wants to process data automatically, `API.getProcessedReport` is the way to go. So it should be totally fine to use dimension id"
4048,Neutral,"In [1548], refs #5663 - remove obsolete jquery.dimensions.js; now part of jquery.js 1.2.6
"
4049,Neutral,"That might be a general problem with devices having a device pixel ratio > 1. Just had a look with my Nexus 5. Piwik reports 360x640, aswell. The Nexus 5 has a device pixel ratio of 3. We already have a special handling for macs, guess that should be enhanced to be valid for mobile devices, aswell. See https://github.com/piwik/piwik/blob/master/js/piwik.js#L4025-L4059
"
4050,Negative,"@mattab i hope so :smile: 

Since i only have 2 months of tracking until yet...do you think it would be better to start with a fresh database? I'm afraid that the already inserted >100k actions will make troubles in the future?

Doing now something like this at AJAX request tracking:

```
//use only everything before the ""?""
var useUrl = completeUrlFromSomewhere;
useUrl = useUrl.split('?');
useUrl = useUrl[0];

//only use the first 3 parts
var parts = useUrl.split('/');
parts = parts.slice(1,4);
useUrl = '/' + parts.join('/');

_paq.push([ 'setCustomUrl', useUrl ]);
_paq.push([ 'setDocumentTitle', 'static title' ]);
```
"
4051,Neutral,"(In [6687]) Refs #3290, allow visualphpunit to hide hidden folders (ie, .svn) in browser-based file explorer & allow users to specify tests to run via hash in URL (eg, /tests/lib/visualphpunit/#/Core/DataTableTest.php .
"
4052,Negative,"ryanvarley: I'm a little confused by your timeline of events, but let's start with what:
- what version of Piwik were you running before you replaced all the files?
- when you replaced the files in the directory, do you mean ""all"" of Piwik, or just the files in the ""core"" directory?
- what version of Piwik are you running now?

This will help us to isolate the cause of the notice in Common.php.  The rest might be a symptom of replacing the files.  At minimum:
- manually delete the files in tmp/sessions/_, tmp/templates_c/_ and tmp/assets/*, and clear your browser cache;
- check that misc/cron/archive.sh is chmod'd with the 'x' (execute) permission set
"
4053,Neutral,Do you still experience this issue? Any error in your server log?
4054,Neutral,"(In [4208]) refs #1564
"
4055,Positive,"Please use the forum for further support. Thanks.
"
4056,Neutral,"(In [4905]) refs #2479 support country code anywhere within subdomain
urls like images.de.ask.com are now mapped to images.{}.ask.com
"
4057,Neutral,"Changed it to 150. Should we create an update script for this? Or leave it like this only for new installations?
"
4058,Neutral,"There was a patch submitted [to keep track of imported files](http://forum.piwik.org/read.php?2,111610,page=1#msg-112105)
"
4059,Neutral,"(In [4394]) Fixes #2281
- Now display Clicks, Downloads and Multiple Goal conversions in both Visitor Log and Live! widget
- Added goals/all actions in Live! API output, simplifying output. Hopefully now output is final for Piwik Mobile & other apps to re-use (any feedback on this?)
- cleaning up colored logos ensuring background is pure white rather than slightly colored
"
4060,Neutral,"Time calculation is fixed. 

I think it is intended to show previous tasks as it basically means they were not executed since then (but maybe should) and it helps you to discover this. Maybe I am wrong @matt? Please reopen if we should not show tasks from past
"
4061,Positive,"Thanks for fixing the plugin!
"
4062,Neutral,"Attachment: Version 0.3
[OpenIDLogin.tar](http://issues.piwik.org/attachments/2510/OpenIDLogin.tar)
"
4063,Neutral,"re: comment:18 -- that's the same as comment:8
"
4064,Neutral,"piwik.js doesn't currently strip off the anchor.  For backward compatibility, default behavior would be setAllowAnchor(true).
"
4065,Negative,"confused about this issue, does repo owner want to pretend deaf and ignore other people's opinion? That's funny because it remind me the kids behavior. :)
Open software should be away from politics and be purely tech, especially map software should respect country boundary.
If you are not sure about country boundary, you can follow google maps. :) "
4066,Neutral,"fdd2div 1.0 plugin didn't support jQuery 1.2.6; we've sent our patch upstream but may have to forward port our local mods
"
4067,Positive,"Hi @kevinoid 

This sounds interesting, especially if you propose the working pull request :+1:  

Regarding speed: I guess listening to all clicks is costly, in case user clicks a lot like in some games, or when the DOM tree is huge and it's costly to know where we've clicked. we could put ""safe nets"" to skip some clicks if clickrate is high... 

Maybe others will have some feedback as well!
"
4068,Neutral,"(In [7284]) Fixes #3471, make sure broadcast won't show AJAX result if result is whole HTML document.
"
4069,Neutral,"Not handling minimum font size feature, but this is a also a kind of duplicate of: #2110
"
4070,Neutral,"Attachment: Icon
[naver.com.png](http://issues.piwik.org/attachments/859/naver.com.png)
"
4071,Positive,"Thanks for the suggestion @hpvd!
"
4072,Neutral,"In f86af8bb7d44ab73bb36d9c318232dd65afbf13d: refs #4610 do not start the actual process in case it was marked as finished meanwhile
"
4073,Neutral,"Scratch my comment. I was thinking request instead of response.
"
4074,Neutral,"Please use the forum for installation support.  PM me (""vipsoft"") your phpinfo and a backtrace from your web server's error_log.
"
4075,Positive,"Thanks for the report @fvdm 

It's a good idea and feel free to issue a pull request :+1: 

> All throughout Piwik the user alias is displayed except with Annotations.

Where did you notice we display the alias instead of username?

I'm wondering whether we should display both username and alias (one of them maybe as tooltip or so)...
"
4076,Neutral,"In 0fafe1baa548335cc99e174704d6c86bc594f9c5: fixes #4299 - set site name in past data label column so CalculateEvolutionFilter can lookup divisor
"
4077,Neutral,in future if you notice these issue feel free to make a pull request on them via the bottom left corner of the doc page there is a edit on GitHub button
4078,Positive,"I must admit, that I took code from the website, changed the text, displayed it in the browser and then took a screen-shot from it. :-)
"
4079,Neutral,"In 6aa7ab6538cdd84af0b89b6e2d2d9524600ac5f2: refs #4194 the api ignore tag is not needed, we simply ignore all symfony commands in the api generator
"
4080,Neutral,"Do you maybe have any special characters in your MySQL password?

There was a bug in 2.4.0 not reading/saving the MySQL password entry correct if it contained special characters such as ""&"" or ""$"". This would explain this behavior and would also explain why it didn't work after downgrading to 2.3.0 since the config probably still contained wrong characters. It is fixed in 2.4.1
"
4081,Positive,"Thank you Matt. We fix things in our HiddenTracking plugin. And now it:
- saves the archives to the 'piwik/tmp/HiddenTracking' folder;
- uses the Piwik functions and classes everywhere where it's possbile;
- has the folder links that leads to directories with defined Piwik constants;
- tracks link clicks and downloads (was missed before).
"
4082,Neutral,"Attachment: new version of i18n patch with javascript translation functions
[i18n_withJs.2.patch](http://issues.piwik.org/attachments/5482/i18n_withJs.2.patch)
"
4083,Neutral,".htaccess added in the archive.

For the endless reload, this was discussed in a mail, following [#comment:36]. Matt let us know when the issue is fixed, so just wait a little bit (may be we'll end up on 1.0 directly).
"
4084,Neutral,"The initial ping request contains ""ping=1"".  Use this to improve bounce rates and visit time.

Subsequent heartbeat requests (if recurringDelay != 0) contain ""hb=1"".

I'm going to defer adding event handlers as there are issues with propagating some events like keyclicks.

Mental notes to self:
- if you only send a beat when there's activity within the last n seconds, then on average, you'll expect the total time to be overstated by n/2 secs
- to offset/compensate, you can instead send a beat if there's been activity in the last n/2 seconds
- if there's no activity for n secs, do you stop checking for activity or stop sending beats?
- what if activity resumes again?  how long is too long ago to to resume beats?
"
4085,Neutral,"I just tried on a fresh piwik install, and saw message ""Piwik is unable to overwrite your current installation. You can either fix the directory/file permissions, or download the package and install version 1.5.1 manually""

without explanations on permission, MUSTFIX + easy
"
4086,Neutral,"Can confirm that @Riimu's suggestion works.
"
4087,Neutral,"Same problem here when using eg this segment: 
![image](https://cloud.githubusercontent.com/assets/273120/22809659/c0c2a55c-ef98-11e6-9895-ba03df50156e.png)

It seems to first work but when then selecting the segment from the list of segments it does no longer work and fails like this:

![image](https://cloud.githubusercontent.com/assets/273120/22809674/d4640d62-ef98-11e6-800f-eab74286b8b7.png)
"
4088,Neutral,"@dustindauncey sure we will log them in Piwik application log
"
4089,Neutral,"(In [5409]) refs #1454 report meta data update
"
4090,Neutral,"(In [1081]) fixed #686 spam live bot when IP coming from microsoft now excluded..
"
4091,Neutral,`SMTP server address` in `General settings` is not it?
4092,Negative,Well It's installed but isn't working well yet. How lond does it take for the first run to finish
4093,Positive,"> Also it means if a developer supports all Piwik versions from a certain version (eg >=2.14.0) one does no longer always have to adjust the .travis.yml when a new Piwik version is released as the maximium supported version is automatically fetched.

This sounds really useful and would save time and effort :+1: We'll be testing over next few days/weeks that this work as expected.
"
4094,Neutral,"(In [1020]) - refs #5730 adding updates so that all existing tables and all fields are converted to utf8 for consistent piwik tables
"
4095,Neutral,"In cb994c98a5b1f4847fa80c64b4eef3df7ad18ec1: refs #4610 prevent some notices like ""failed to read from stream"" which happens if a subprocess tries to write to a file and the archiver just tries to file_get_content at the same time. So file_exists returned true just a few ms before but while trying to read it fails
"
4096,Positive,"Thanks for that @garvinhicking 

In https://github.com/piwik/piwik/blob/2.16.1/plugins/SegmentEditor/templates/_segmentSelector.twig#L2 can you try to replace `{{ 'SegmentEditor_CurrentlySelectedSegment'|translate(segmentDescription)|e('html_attr') }}` with `{{ 'SegmentEditor_CurrentlySelectedSegment'|translate(segmentDescription|raw)|e('html_attr') }}`. Basically it adds the `|raw` before the escaping. 
"
4097,Neutral,"Attachment: 
[test.log.zip](http://issues.piwik.org/attachments/4946/test.log.zip)
"
4098,Neutral,"The commit mentioned in the stackoverflow question is this one: https://github.com/php/php-src/commit/15da8367c4494a7c240d135d08f50a369c304a6d

It turns out it's included in PHP 5.3.0 and above.

Maybe the forum user that reported this is using PHP 5.2 on the server where he put the proxy script?
"
4099,Negative,"(In [3188]) refs #1735 - oops; my mistake
"
4100,Neutral,"fyi we must keep INI format because we don't want to update all FAQs and guides explaining how to change settings etc.
"
4101,Negative,"Note to self: would  it be maybe possible to ""Retry on failure"" for those random UI test failures? Maybe there's a feature in moccha to retry failed tests...
"
4102,Neutral,"In 7ea067760f53e0069830469a688fdde32ec67a00: Refs #3089, show location of visit when visit clicked in visitor profile.
"
4103,Negative,"I am also seeing this same error on my newly update Piwik 3.0.0 instance and can confirm I can see the System Check again with UserCountry (and UserCountryMap) plugins disabled. 

As I'm not really a power user of Piwik, all I can really add is: I miss the map. :)"
4104,Neutral,Tokens now hidden for all super users in Piwik 3
4105,Neutral,"+1 for this important feature to be added. e.g. http://www.searchenginepeople.com/blog/16063-page-scroll-depth-analytics.html
"
4106,Neutral,"Attachment: 
[CASLogin-0.4.tar.gz](http://issues.piwik.org/attachments/598/CASLogin-0.4.tar.gz)
"
4107,Neutral,"For the purpose of discussion, I'm going to refer to this static data as System Tables.

We could add an API method for each system table in the closest/corresponding plugin, e.g., PluginName.getSystemTableName($parameters_if_any) for:
- SitesManager: Currencies
- UserCountry: Countries, Continents
- LanguagesManager: Languages, LanguageToCountry
- Referers: SearchEngines
- UserSettings: Browsers, OperatingSystems, Plugins, Screens

Example:  SitesManager.getCurrenciesSystemTable()

We could also have API.getSystemTableMetaData().
"
4108,Neutral,"we haven't done the GIT mirror yet but it will happen later
"
4109,Neutral,"(In [3786]) Refs #2042
- Adding functionnality in API
"
4110,Neutral,"@joewulf please respect the [github terms of service](https://help.github.com/articles/github-terms-of-service/#3-conduct-restrictions)
If you would like to have any change in Piwik feel free to create a Pull Request."
4111,Neutral,"In f1193c901eadee1e910af3e28e9a28e9397b2aae: Refs #4041, #4077, document SeriesPicker JS class.
"
4112,Neutral,@hpvd in the screenshot it doesn't look like you are using a segment. What happens when you select something other then All Visits in the segment dropdown?
4113,Neutral,"fixed in [888]
"
4114,Neutral,"(In [7541]) Refs #3290, use test suite filtering option (ie, show only successes) when showing/hiding individual tests.
"
4115,Neutral,"One more UX suggestion:
- when we start recording the full status of each view (exclude low pop, flatten, etc.) to restore the table as they were, I think it will be very important to highlight the fact that the table is currently flattened / or that low populations are excluded (or both).
  - when any option was clicked or initialized in the new menu (btw we need a name for it...), Could you please put the icon in yellow? I think this would at least help users understand a bit why the view is the way it is.
  - it would be also very nice if we could somehow display somewhere ""Report is flattened - un-flatten report"" or ""Rows with few visits are hidden - Show all rows"" so it is clear, just by reading the menu, what is the status of the report.

Thoughts?
"
4116,Neutral,"Maybe we could only add the index for new users, and do not run the ALTER for existing users?
"
4117,Neutral,"Hmm I managed to reproduce the same (impression) graph from the Piwik panel using the following:

```
index.php?module=Widgetize&
action=iframe&
columns[]=nb_impressions&
columns[]=nb_interactions&
widget=1&
moduleToWidgetize=CoreHome&
actionToWidgetize=getRowEvolutionGraph&
apiMethod=Contents.getContentNames&
label=Banner_319&
idSite=8&
period=day&
date=today&
disableLink=1&
widget=1&
filter_offset=0&
viewDataTable=graphEvolution&
token_auth=XXXXX
```

I came to these params by inspecting the JSON code params within Piwik. 

Is this feature request is still useful? 
"
4118,Positive,"I only open Piwik demo and that's it. I probably use an outdated version of IE10 (see about in screenshot) as I'm missing some updates on that VM. It looks good on Saucelabs with IE10+Win8 as well.

![windows_10](https://cloud.githubusercontent.com/assets/273120/8316942/3406943c-1a4e-11e5-9d85-a7510f8feb37.png)

Thx!
"
4119,Neutral,"
pw/Piwik/core/Updater/Migration/Db/Factory.php
The file has been modified woensdag 31 mei 2017

Possible PHP Injection - function name contains only numbers.

_1(10)View file contents

 	


pw/Piwik/vendor/doctrine/cache/lib/Doctrine/Common/Cache/FileCache.php
The file has been modified woensdag 31 mei 2017

Unsafe directory creation - 0777 permissions.

mkdir($path, 0777View file contents


pw/Piwik/vendor/doctrine/annotations/lib/Doctrine/Common/Annotations/FileCacheReader.php
The file has been modified dinsdag 15 november 2016

Unsafe directory creation - 0777 permissions.

mkdir($cacheDir, 0777View file contents


pw/Piwik/vendor/pear/archive_tar/Archive/Tar.php
The file has been modified woensdag 31 mei 2017

Unsafe directory creation - 0777 permissions.

mkdir($v_header['filename'], 0777View file contents


pw/Piwik/vendor/monolog/monolog/src/Monolog/Handler/StreamHandler.php
The file has been modified woensdag 31 mei 2017

Unsafe directory creation - 0777 permissions.

mkdir($dir, 0777View file contents


pw/Piwik/vendor/twig/twig/lib/Twig/Cache/Filesystem.php
The file has been modified woensdag 31 mei 2017

Unsafe directory creation - 0777 permissions.

mkdir($dir, 0777View file contents


pw/Piwik/vendor/twig/twig/.php_cs.dist
The file has been modified woensdag 31 mei 2017

Suspicious filename found. Files with a dot in front of them are usually hidden by the operating system.

.php_cs.distView file contents


pw/Piwik/vendor/piwik/decompress/libs/PclZip/pclzip.lib.php
The file has been modified woensdag 31 mei 2017

Unsafe directory creation - 0777 permissions.

mkdir($p_dir, 0777View file contents


pw/Piwik/vendor/szymach/c-pchart/.scrutinizer.yml
The file has been modified woensdag 31 mei 2017

Suspicious filename found. Files with a dot in front of them are usually hidden by the operating system.

.scrutinizer.ymlView file contents


pw/Piwik/plugins/LanguagesManager/Commands/CreatePull.php
The file has been modified woensdag 31 mei 2017

Possible PHP injection (file download)

shell_exec('curlView file contents


pw/Piwik/libs/bower_components/materialize/.npmignore
The file has been modified woensdag 31 mei 2017

Suspicious filename found. Files with a dot in front of them are usually hidden by the operating system.

	

 

 

Van: Lukas Winkler [mailto:notifications@github.com] 
Verzonden: woensdag 5 juli 2017 10:47
Aan: piwik/piwik <piwik@noreply.github.com>
CC: GerardBol <gerardbolhuis@gmail.com>; Author <author@noreply.github.com>
Onderwerp: Re: [piwik/piwik] mkdir ($dir,""777"") (#11843)

 

I found two places where piwik does a chmod 777. All other chmod are using 755 or 600
https://github.com/piwik/piwik/blob/3.x-dev/core/Profiler.php#L324
https://github.com/piwik/piwik/blob/3.x-dev/core/Db/BatchInsert.php#L268

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub <https://github.com/piwik/piwik/issues/11843#issuecomment-313041571> , or mute the thread <https://github.com/notifications/unsubscribe-auth/AXHyASh-2N0AypofzZaZLBOWgWyFR0JQks5sK01ygaJpZM4ON_zO> .  <https://github.com/notifications/beacon/AXHyAaTaYlJ5XAOArcALRfRsYteL-pAQks5sK01ygaJpZM4ON_zO.gif> 

"
4120,Neutral,"I've made the screenshot on a production system, therefore I hav to remove the numbers. The currency unit is taken from the settings of piwik.
"
4121,Neutral,"I have found a workaround:

```
--- core/Tracker/Visit.php.orig 2013-10-14 10:42:00.000000000 +0200
+++ core/Tracker/Visit.php  2013-10-15 14:46:16.411174133 +0200
@@ -1703,6 +1703,12 @@
             }
         }

+        if (empty($campaignName) &&
+            strpos($this->refererHost, 'doubleclick') !== false
+        ) {
+            $campaignName = ""AdWords"";
+        }
+
         if (!empty($campaignName)) {
             $this->typeRefererAnalyzed = Piwik_Common::REFERER_TYPE_CAMPAIGN;
             $this->nameRefererAnalyzed = $campaignName;
```

The original code did not work because the pk_campaign parameter was not set for our AdWords campaigns. This way, every visit from doubleclick host is considered as the AdWords campaign and the referring sites are encoded as campaign keywords.
"
4122,Positive,"Interesting.

Should this feature be only available if the segment is also ""cron generated"" ?

If not, on installation with 50k pageviews a day, Piwik will have to work a lot before showing any data.

I'm just wondering.

Dali
"
4123,Negative,"Mine was installed using my hosting provider.
I was able to add the anonymous user my manually editing the database.

But, Piwik should have an automatic way to add anonymous if it does not exist.
"
4124,Neutral,"What did you open the branch for?
Aren't you going to merge the branch back to trunk before releasing 1.0?
"
4125,Negative,"My bad!  Educated myself a little and figured out where it stands.

Replying to [nnnnathann](comment:20):

> Anybody working on this? I am new to piwik but would be happy to contribute if someone could point me in the right direction.  We need this functionality ourselves.  Is the best place to start the example plugin?
"
4126,Neutral,"Minor changes from Eli-D's spec:
- 'run' called when the Tracker is instantiated
- added 'click' hook; called by the click handler (and piwik_track() / trackLink())
"
4127,Neutral,"Use the latest file in master, ie, https://raw.githubusercontent.com/piwik/piwik/master/misc/log-analytics/import_logs.py
"
4128,Neutral,see duplicate issue: https://github.com/piwik/piwik/issues/11596
4129,Neutral,"this was supposed to be covered in #41 but I forgot about this feature
"
4130,Neutral,"@dev-101 no it won't be fixed in 2.x

"
4131,Positive,"Good idea. Looking forward.
"
4132,Neutral,"In 4d5d101f8243a10e669885d224dc1b4dcf317c6d: Refs #4041, remove DatatableManager class and replace with UIControl code.
"
4133,Neutral,"_scratch my example_

What about this?

```
if(is_numeric($value) && ($value == (string)(int)$value))  $ok = true;
```
"
4134,Neutral,"> If anything at all I would maybe provide an ""opt-in method"" for this. If feedback is good one can maybe change it after a few months to ""opt-out"". 

 I still think we could opt-in and provide a opt-out in case it really poses problem for some users. That's because in this issue the scope is only for right clicks on Downloads and Outlinks which will be a very small part of all right clicks. eg. Users who right click to ""translate"" most of the time will right click anywhere in the window and likely not on a download link or outlink... Can you think of an actual use case where users would right click on outlinks/downloads and not want to open them in most cases?
"
4135,Neutral,"We have the same problem: Upgrade from 2.13.0 with ""The Manual Three-Step Update"", MySQLDB
"
4136,Positive,"thanks for all the technical debt fixes.

Regarding this change, 
- can you please confirm that you tested to load https://server/piwik and all files were loading fine over https without triggering browser warning?
- how much effort (hours) would it take to have a webtest testing to load the https version of piwik and verify that all links / ressources are https ?

thx
"
4137,Positive,"This matter can also be solved by editing the regex as per https://github.com/perusio/piwik-nginx/pull/19/files

```
## Disallow access to several helper files.
        location ~* \.(?:bat|git|ini|sh|svn[^.]*|txt|tpl|xml)$ {
        return 404;
}
```

I can confirm that this solves the problem and have posted a comment here https://github.com/perusio/piwik-nginx/pull/19

Thanks again for helping solve this so fast!
"
4138,Neutral,this was fixed earlier in https://github.com/piwik/piwik/pull/11672
4139,Neutral,"(In [5760]) refs #534 label filter integration tests for range (=> DataTable_Array)
"
4140,Neutral,"In 0d6c2489810e90c5067c2f683bca85de1f30d321: refs #4898 rate help and not about piwik page
"
4141,Negative,"> Loading data... could be instead ""Loading Evolution data for {here icon and label name}"" this could be done by copying the HTML of Label row, including the icons/logos? 

The problem is that we only have the label in the URL parameter. Since RE launched by changing the hash part of the URL, we don't have the data table row DOM el. What we have is the label - we could show that but it looks weird for subtables. E.g. when row evolution is openend on an outlink, it might look like ""www.example.com > /"".
We don't have the icon at all so there's no way to show it expept add it to the URL too which introduces XSS possibilities. We could only show it when RE has been launched from a table and pass the row dom el around but this would add complexity to the already complex code.

So I'm not sure what to do about this request. It would be nice, yes. But I don't see a decent way to implement it.
"
4142,Neutral,"See follow up ticket: #3962
"
4143,Neutral,"What is happening AFAIK is that the request to your web server times out. It is not a Piwik issue but unless this is Piwik crashing in some ways. If you don't have anything in your error log, then likely it is server configuration issue. 

what exact command do you use? 
"
4144,Negative,"There are three different timers. Total timer, Website timer and I'd name it ""period timer"". It took 2.8 seconds to archive that period and it should be correct, there were possibly 1-2 seconds spent on general website related archiving stuff but one cannot really assign it to a special period. I know it's weird that it says `- pre-processing all visits` at `03:06` and it looks like the timer is initiated too late there. I will issue a PR that might fix it but I'm not sure. In the meantime I prepared and threw away 3 replies to this... the code is a mess and it's not really possible to understand all this. 
"
4145,Positive,"Thanks for the report!

Did you configure something in your config file as explained in the [Proxy FAQ](http://piwik.org/faq/how-to-install/faq_98/)?
"
4146,Positive,"In b6f26e58fd9152223221febf407fee5529244ffe: Refs #4127 Implementing possibility for Themes to overwrite any icon or resource by putting the new file in plugins/$ThemeName/XX - Morpheus theme now displays its icons! :)
"
4147,Neutral,"I'd like to add my voice to this. I am using piwik and I'd like to be able to follow the project here (or bitbucket, really) and particularly use the features here to subscribe to issue notifications.
"
4148,Neutral,"In 07297be7398c06829cd3e3a487aa47233c3d5e03: refs #4338 display update version information in changelog
"
4149,Negative,"_Im Gegensatz zu hass bin ich seit vielen Jahren bei Joomla und dort als bersetzer Mitglied des Teams._

I think I do not read correctly. It seems like I need to introduce myself.

I have 3 years Drupal Core and Module translation experience. I'm ty guy who made Drupal 5 100% complete and translated the most of Drupal 6. I'm one of the if not the most active German translator for Drupal over all. I'm working on many many modules as developer and provide many translation fixes for Drupal core and modules. Before you write such stupid sentences you should make sure what you are writing about!
"
4150,Neutral,"Attachment: 
[en.php.diff](http://issues.piwik.org/attachments/1342/en.php.diff)
"
4151,Neutral,"@tsteur as per your suggestion, moving this issue to Piwik 4 where we'll try to improve the implementation of Ecommerce view tracking."
4152,Negative,"Found another issue regarding strtotime
I use it to get the data for the past 12 months.

Steps to reproduce:
To get the data for the same month last year, I use this:
`module=API&method=API.get&format=CSV&idSite=37&period=month&date=last%20year`
To get the data for last month I use this:
`module=API&method=API.get&format=CSV&idSite=37&period=month&date=last%20month`
To get the data for all months from last year to last month I tried to use this:
`module=API&method=API.get&format=CSV&idSite=37&period=month&date=last%20year,last%20month`
But it fails.
When I use 
`module=API&method=API.get&format=CSV&idSite=37&period=month&date=2015-07-01,2016-06-01`
the data is available.

Another example is the following:
`module=API&method=API.get&format=CSV&idSite=37&period=day&date=previous6`
gets me the data of the previous 6 days splitted per day (excluding today)

One would think the API following call:  `module=API&method=API.get&format=CSV&idSite=37&period=week&date=previous6`
would return the data of the previous 6 weeks, splitted per week
and
`module=API&method=API.get&format=CSV&idSite=37&period=month&date=previous6`
would return the data of the previous 6 months, splitted by month.
However it does not.
"
4153,Neutral,"Unit tests for the UserAgentEnhanced were added in: https://github.com/piwik/piwik/pull/115
"
4154,Neutral,"Actually, it does seem to require it. Look here: https://github.com/piwik/piwik/blob/master/libs/Archive_Tar/Tar.php

Right at the top of the page, PEAR.php
"
4155,Neutral,"In 0f3d97694d69df6f06ca1e5194e14e58d6da9b28: Refs #2135 Few JS fixes for a cleaner UI/UX
"
4156,Neutral,"There is now a plugin for GoogleAuthenticator. See http://plugins.piwik.org/GoogleAuthenticator
"
4157,Neutral,"Were you able to reproduce it @mattab ?
"
4158,Positive,"Thanks for the report @blueelvis - this should be now fixed!
"
4159,Neutral,"r4377 passes on every browser I have access to.
"
4160,Neutral,"(In [4087]) refs #2185 - revert r4080
- for performance, move html_entity_decode out of sanitizeInputValue() since it's only used when we getRequestVar('action_name')
- add unit tests
"
4161,Neutral,"Matt: is that php 5.2.6?  (just making sure because pre-5.3 uses the compat functions).
"
4162,Neutral,"Well I have had recent visits from google.com.hk and google.com.ph which both used /imglanding after the domain. But they both had ""q="" and ""prev"" containing the search phrase. So ommitting a check for imglanding puts the keywords in a non google images count which is suspect.
When trying to reproduce it I get imgres but I'm using a UK IP so results may be different.

But importantly, anyone thinking they can change google searchengine name, without understanding how the code in common.php works, will find it just doesn't work because of the way its coded currently. Most users, I suspect, will just think they can change the search engines to whatever they like but the enforced default to ""Google Images"" is likely to be a mystery to them. I see no need to enforce that. If users then choose to change searchengine names they can.

I have now changed my code and it seems to be working. It works on the principle that if the domain contains google, then it checks for /imgres and if found it does its stuff. But also within the original google check, checks for ""images"" in search engine name and if not found adds it to end of search engine name. 
So this works for both the current standard setup but also works for anyone changing their search engine names for google (I think).

original code in common.php:

```

        if($searchEngineName == 'Google Images'
            || ($searchEngineName == 'Google' && strpos($refererUrl, '/imgres') !== false) )
        {
            $query = urldecode(trim(strtolower(self::getParameterFromQueryString($query, 'prev'))));
            $query = str_replace('&', '&amp;', strstr($query, '?'));
            $searchEngineName = 'Google Images';
        }
```

my new code:

```
  if ( strpos(strtolower($searchEngineName), 'google') !== false && strpos($refererUrl, '/imgres') !== false ) 
        {
            $query = urldecode(trim(strtolower(self::getParameterFromQueryString($query, 'prev'))));
            $query = str_replace('&', '&amp;', strstr($query, '?'));
            if ( strpos(strtolower($searchEngineName), 'images') === false )
   {
             $searchEngineName = $searchEngineName . ' Images';
            }   
        }
```

I have also changed my search engine names but that is another matter.

p.s. you now have my email address.

I just thought it would provide flexibility for those wanting to change their google searchengine names to split by country. The default names can remain as now but users don't have to worry about code not working if they do decide to change them. 
"
4163,Negative,"Odd.  It works for me using FF3.0.x on the demo site.
"
4164,Positive,"Thanks for the report. Fixes in master.
"
4165,Neutral,"What's the next step here @tsteur ? maybe it would be better in `Short term` if it is low effort and useful?
"
4166,Neutral,"Attachment: Patch for this issue (no triggers, uses another table).
[2805.diff.tar.2.gz](http://issues.piwik.org/attachments/2805/2805.diff.tar.2.gz)
"
4167,Positive,"Thanks for the details!

Is your SSO plugin reusable for others? 

Maybe you would be able to release the code on github under GPL? 

Cheers
"
4168,Positive,"Thank you for these infomations.

I realised that when using Piwik behind AWS ELB load balancer, it was in fact behind a proxy.

I added your settings and also the following setting : 

```
proxy_client_headers[] = HTTP_X_FORWARDED_FOR
```

Now Piwik is logging the correct remote ip address instead of the gateway.

I'll see in a few days if my visits are back to a normal count.
"
4169,Negative,"Sorry, repackaged.
"
4170,Neutral,"In f3865117b0069b836567b862147b071b50ea43b9: refs #4564 avoid possible failure during update because of missing permissions -> Get the option value of delegated management directly
"
4171,Neutral,"> The segment in the journey attached is created with pageURL and doesn't work as expected.

It seems to work as expected from your screenshots?

 when you segment on ""Entry page Url"" then it selects all visits who started their visit on this entry page url. it's expected you get all other kinds of URLs that were visited by the users during their visit. 
"
4172,Neutral,"I've added several domains to piwik/config/config.ini.php as described above. A week has passed and every day I see new entries from these same domains. Am I missing something basic, or is this worth opening a new issue?

This is at the end of my config.ini.php, and I've restarted Apache (and later the server) but modifying this configuration file has had no effect at all:

```
[Tracker]
referrer_urls_spam = ""100dollars-seo.com,semaltmedia.com""
```
"
4173,Neutral,"Closing as this issue is caused by third party plugins.

Note: In the next Piwik version when such errors will occur, the safe mode will be displayed which will make it easier for you to deactivate plugins: https://github.com/piwik/piwik/pull/11083
"
4174,Positive,"Looks good.
"
4175,Neutral,"In 60e3b96370defabb1231af84aa732ca1139d40a3: \* removing most mentions to ""tpl""
Refs #4019
"
4176,Neutral,"Has there been any movement on this issue? Thanks.
"
4177,Neutral,"(In [6478]) fixes #2708

refs #5491
- PDFReports major refactoring. Any plugin can now add new kinds of reports. Required for #2708 and #3118.
- test report functionality ($idReport == 0) dropped in Piwik_PDFReports_API->generateReport()
- All Websites report shows 3 more metrics: Goal Conversions, eCommerce Conversions and eCommerce Revenue. Can be removed if asked to.
- Piwik_PDFReports_API->sendEmailReport renamed to sendReport
- All Piwik_PDFReports_API method signatures updated to support generic report parameters
  refs #389
- new API method to retrieve only one Piwik site : Piwik_MultiSites_API->getOne()
- per #2708 description, Piwik_MultiSites_API methods now support a new parameter named enhanced. When activated, Goal Conversions, eCommerce Conversions and eCommerce Revenue along with their evolution will be included in the API output.
- API metrics refactored in (@ignored)Piwik_MultiSites_API->getApiMetrics()
- Metadata now returns 12 metrics : nb_visits, visits_evolution, nb_actions, actions_evolution, revenu, revenue_evolution, nb_conversions, nb_conversions_evolution, orders, orders_evolution, ecommerce_revenue, ecommerce_revenue_evolution
  refs #3118
- ReportPublisher plugin could now easily be implemented
  commits merged
- r6243
- r6422 (#3012)
  TODO
- the MobileMessaging settings page may need some embellishment
- @review annotations need some attention
- test if the MultiSites API evolutions have some impact on Piwik Mobile and other client code
"
4178,Neutral,"When you are logged in, you should be able to do this in ""Personal Settings"". You need to be logged in as the user you want to reset"
4179,Negative,"The piwik database can't handle more than 4.294.967.295 loglines in total due to the fact that numeric fields are integers. And that number is the max. I have hit now for the second time, and the complete Piwik setup is useless. The reports now show that there are no page views anymore. So there are no updates anymore, and everything stays zero.

Please consider the change all numeric fields to either bit integers or longs. So that the limit is theoretically 18.446.744.073.709.551.615 loglines.

I am doing about 10.000.000 loglines a day, and with that amount, it will take me about 430 days to hit the max. That is almost 1,5 year. It cannot be that I have to delete the complete Piwik install every 1,5 year. With bigint the period will be 1.844.674.400.000 days.

The solution of making backup, dropping table and create it again, is not handy. Because you will lose the option to regenerate the reports, due to missing hits.
Changing to Bigint looks better. See the numbers in this post.

I am now trying to change the fields to Bigint, in order to preserve my history. But it takes very long time with 800.000.000+ loglines in the table.

Also I am surprised that this is already known for two years, and still not fixed...
"
4180,Neutral,"@tsteur Chinese Simplified
"
4181,Neutral,"Duplicate date bug reported in forum: http://forum.piwik.org/index.php?showtopic=1602
"
4182,Neutral,"In 3c6690941b56e9af732f4dcf5a95435be0c2794e: Fixes #4670, use popen in import_logs.py to run updatetokenfile.php instead of check_output.
"
4183,Neutral,"(In [7122]) Refs #1823, modified UserCountry plugin to allow use of GeoIP databases if desired. Added two reports, getVisitsByRegion + getVisitsByCity.

Notes:
- Supports country, region, city, org & isp GeoIP databases.
- Supports GeoIP PHP API, PECL module & server modules.
- Added ability to regenerate 'general' tracker cache.
- Removed location_continent column from log_visit & log_conversion tables, and removed visits by continent blob record. Report is now a view over country report.
"
4184,Neutral,"If you can send us a link to a page that includes this code we can have a quick look. Feel free to send an email to hello at piwik.org . Afterwards comment here in case the mail goes into spam. 

Actually: Please update to Piwik 2.16.1. This was very likely fixed just recently https://github.com/piwik/piwik/pull/9925
"
4185,Neutral,"Hi @erodrig9 

> I am seeing incorrect values for the ""Revenue Per Visit"" column in the Referrer Websites widget. 

""Revenue per visit"" in the referrer websites widget, also includes the sum of revenue for all Goals.

Whereas in Ecommerce ""Revenue per visit"" it only includes the Ecommerce revenue.

To do:
- maybe we could improve ""Revenue per visit"" and ""Conversion rate"" columns metric tooltip help text, to make it clear which Goal(s) this refers to 
"
4186,Neutral,"the solution was this guide
http://piwik.org/faq/how-to/faq_59/
"
4187,Positive,"Hi Peter!

> Perhaps the best would be to just document the clientside ""setCampaignNameKey""-Config in the docblock for the serverside campaign param setting and close this.

Sounds good to me, if you can submit a PR feel free :)
"
4188,Neutral,"+1
"
4189,Neutral,"In 5dca1a29bd36a17911406b9348cf9982484dbde9: Refs #3632, add integration test for import script replay tracking.
"
4190,Neutral,"I think this issue is still here, I'm re-opening the ticket so we investigate further. I'll talk to a user this week who experiences this. 

Does anyone else still have this issue in 2.16.2?
"
4191,Neutral,"The third parameter would only be useful if Piwik knew which path the keyword originated from.  Piwik doesn't currently try to match the path in the urlref or store it.  To do so would slow down the tracker.

The performance increase replacing double quotes with single quotes is negligible.  Referring to the quoted benchmarks...  take the difference between any two timings and divide by 160000 iterations.  For example, (3937 ms - 1179 ms)/160000 is 0.0000172375 s or roughly 17 microseconds.
"
4192,Positive,"Re the instant loading times maybe it's also related to http://piwik.org/docs/setup-auto-archiving/ in case this is not activated it will improve loading time a lot. 

Maybe Piwik had no permission to reset some caches or something else happened. I still cannot really explain it but happy it works now. Can we close this issue?
"
4193,Positive,"Hi @uprise10 please try upgrade to 2.7.0 where this bug should be fixed (at least, WP-Piwik will not create new extra websites). if you still have issue after please let me know here and i'll re-open.
"
4194,Neutral,"(In [5459]) refs #1820 metrics picker shows on hover
"
4195,Neutral,"This was already fixed, probably in 3.0.0"
4196,Neutral,"I checked most icons and turns out we have already most of them available as font icons. Here are some icons that we might still need:

Not sure if we can actually use these via fonts but would be good to have:
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/forms-sprite.png

http://demo.piwik.org/plugins/Live/images/visitorProfileLaunch.png (with colors if possible, looks nice that way instead of just being able to define one color)
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/event.png

![image](https://cloud.githubusercontent.com/assets/273120/11859981/eb5dc518-a4d4-11e5-8e9f-595689bbc752.png)

http://demo.piwik.org/plugins/MobileMessaging/images/phone.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/html_icon.png 

![image](https://cloud.githubusercontent.com/assets/273120/11860108/15a05952-a4d6-11e5-9eb9-75f6ef9df0a5.png)

http://demo.piwik.org/plugins/Morpheus/images/link.gif
![image](https://cloud.githubusercontent.com/assets/273120/11859994/15ac9b64-a4d5-11e5-83a0-296577a9852a.png)

There is an icon-plus and icon-minus in the font icon but this one is bit different:
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/minus.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/plus.png

![image](https://cloud.githubusercontent.com/assets/273120/11860167/c2e8a592-a4d6-11e5-9aa2-ff7ae8f2bb50.png)

https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/row_evolution.png
(there is an icon for chart but it is for https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/chart_line_edit.png). Needed for row actions eg in Pages report

The Piwik logo:
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/logo-header.png 

Can we get the loading icon in high res? https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/loading-blue.gif see also https://github.com/piwik/piwik/issues/8987 maybe we could at some point just do one via JavaScript and/or another library

Can we get the paypal subscribe icons and the smileys in high res? 
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/paypal_subscribe.gif
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/smileyprog_0.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/smileyprog_1.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/smileyprog_2.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/smileyprog_3.png
https://github.com/piwik/piwik/blob/master/plugins/Morpheus/images/smileyprog_4.png
"
4197,Neutral,"Closing as @tsteur has finished this nice solution of a sequence table, and fixed the other ""deletion"" lock :+1: 
"
4198,Neutral,"(In [5495]) refs #2714 use default language of user for export file name
"
4199,Positive,"Heya @robocoder ! please see #4977
"
4200,Negative,"@vipsoft: md5(token_auth . widgetName) is not a good solution. If you change your password, all shared widgets will become invalid. We should generate a new random access key on a per widget basis.
"
4201,Neutral,"MAC
latest 0.0.0.5

no block brakes in coaster editor all coasters 

no screen shot needed as its a simple issue its on all maps and doesn't apply to pre built coasters but extra block brakes cannot be added 
"
4202,Neutral,"**OS:** Windows 10 64-bit
**Version:** pre-release (0.0.4)
**Commit:** 7007e04162bdbd773d1bc18512e0f2425e01fddc

When saving a park by clicking 'Save' or by using the quick save hotkey, custom scenery and rides are not exported with the saved game.

Test when loading a save that has been saved using Ctrl+F10 (quick save), and uses CD that I removed before loading the saved game:

> INFO[src\object_list.c:402 (object_list_cache_load)]: **1 object removed... updating object list cache**
> ERROR[src\object.c:172 (object_load_chunk)]: **object not installed**
> ERROR[src\object_list.c:565 (object_read_and_load_entries)]: **failed to load entry: RMCT1**

Same test - loading park with CS I don't own anymore - but was saved using 'Save as' from the menu:

> INFO[src\object_list.c:402 (object_list_cache_load)]: **1 object removed... updating object list cache**
> INFO[src\object_list.c:404 (object_list_cache_load)]: **1 object added... updating object list cache**

**Steps to reproduce:**
1. Have the option for exporting plug-in data in saved games enabled
2. Open and park, and add a new scenery entry to it using the object selection
3. Quicksave the park
4. Quit the game, remove the custom scenery file
5. Run the game again - the cache will update
6. Open the park - error
"
4203,Neutral,"Per the title, currently if a Mechanic is picked up and relocated to another part of the park after being assigned to fix a certain ride, they will forget their assigned coaster and another Mechanic elsewhere will end up receiving the call to fix the coaster/ride.
"
4204,Neutral,"**OS:** Windows 10
**Version:** 0.0.5
**Commit/Build:** ae05e0f

Player name can't be duplicated in normal ways if player is registed to server(it will became `Player #2`) but this can be bypassed by adding space to end of player's name. this can be confusing since there's no way to distinguish `""Player""` and `""Player ""`.

trailing whitespace should removed by client and server so there won't be any confusion.
- [ ] Reproducible in RCT2 (vanilla)?
- [x] Multiplayer?
"
4205,Neutral,"Drawing a red line either the way they want to go - Pic 1 
Or draw a red line where they want to go over a path - Pic 2 

**Why:** Easier for people to de-bug why their peeps are stuck / de-bugging purpose for the AI when re-making it 

Note; Not too sure if it will even be possible with how they act right now 

Inspiration from 
Prison Architect & PR #4175 

Pic 1: 
![pic 1](https://cloud.githubusercontent.com/assets/17282384/17326157/bc77c8f4-58af-11e6-9203-0a5718f303d0.png)

Pic 2: ![pic 2](https://cloud.githubusercontent.com/assets/17282384/17326160/bed28724-58af-11e6-8f4d-7f0bad16869e.png)
"
4206,Neutral,"## Rides/Construction
- [ ] GAME_COMMAND_SET_RIDE_APPEARANCE
- [ ] GAME_COMMAND_PLACE_TRACK
- [ ] GAME_COMMAND_REMOVE_TRACK
- [x] GAME_COMMAND_CREATE_RIDE #5053
- [x] GAME_COMMAND_DEMOLISH_RIDE #5053
- [x] GAME_COMMAND_SET_RIDE_STATUS #5053
- [ ] GAME_COMMAND_SET_RIDE_VEHICLES
- [x] GAME_COMMAND_SET_RIDE_NAME #5053
- [ ] GAME_COMMAND_SET_RIDE_SETTING
- [ ] GAME_COMMAND_PLACE_RIDE_ENTRANCE_OR_EXIT
- [ ] GAME_COMMAND_REMOVE_RIDE_ENTRANCE_OR_EXIT
- [ ] GAME_COMMAND_SET_RIDE_PRICE
- [ ] GAME_COMMAND_SET_BRAKES_SPEED
- [ ] GAME_COMMAND_SET_MAZE_TRACK
- [ ] GAME_COMMAND_PLACE_TRACK_DESIGN
- [ ] GAME_COMMAND_PLACE_MAZE_DESIGN

## Footpath
- [ ] GAME_COMMAND_PLACE_PATH
- [ ] GAME_COMMAND_PLACE_PATH_FROM_TRACK
- [ ] GAME_COMMAND_REMOVE_PATH

## Park
- [x] GAME_COMMAND_SET_PARK_ENTRANCE_FEE #5053
- [ ] GAME_COMMAND_RAISE_LAND
- [ ] GAME_COMMAND_LOWER_LAND
- [ ] GAME_COMMAND_EDIT_LAND_SMOOTH
- [ ] GAME_COMMAND_RAISE_WATER
- [ ] GAME_COMMAND_LOWER_WATER
- [ ] GAME_COMMAND_SET_PARK_NAME
- [ ] GAME_COMMAND_SET_PARK_OPEN
- [ ] GAME_COMMAND_BUY_LAND_RIGHTS
- [x] GAME_COMMAND_PLACE_PARK_ENTRANCE #5053
- [x] GAME_COMMAND_REMOVE_PARK_ENTRANCE #5053
- [ ] GAME_COMMAND_SET_LAND_HEIGHT
- [ ] GAME_COMMAND_SET_WATER_HEIGHT
- [ ] GAME_COMMAND_SET_LAND_OWNERSHIP
- [ ] GAME_COMMAND_MODIFY_TILE
- [ ] GAME_COMMAND_CHANGE_SURFACE_STYLE

## Staff 
- [x] GAME_COMMAND_SET_STAFF_NAME #5053 / #6347
- [ ] GAME_COMMAND_HIRE_NEW_STAFF_MEMBER
- [ ] GAME_COMMAND_SET_STAFF_PATROL
- [ ] GAME_COMMAND_FIRE_STAFF_MEMBER
- [ ] GAME_COMMAND_SET_STAFF_ORDER
- [ ] GAME_COMMAND_SET_CURRENT_LOAN
- [ ] GAME_COMMAND_SET_STAFF_COLOUR
- [ ] GAME_COMMAND_PICKUP_STAFF

## Guests
- [x] GAME_COMMAND_SET_GUEST_NAME #5053 / #6347
- [ ] GAME_COMMAND_PICKUP_GUEST

## Scenario
- [ ] GAME_COMMAND_SET_RESEARCH_FUNDING
- [ ] GAME_COMMAND_START_MARKETING_CAMPAIGN
- [ ] GAME_COMMAND_EDIT_SCENARIO_OPTIONS

## Game
- [ ] GAME_COMMAND_LOAD_OR_QUIT
- [ ] GAME_COMMAND_TOGGLE_PAUSE
- [ ] GAME_COMMAND_BALLOON_PRESS
- [ ] GAME_COMMAND_SET_PLAYER_GROUP
- [ ] GAME_COMMAND_MODIFY_GROUPS
- [ ] GAME_COMMAND_KICK_PLAYER
- [ ] GAME_COMMAND_CHEAT

## Scenery
- [ ] GAME_COMMAND_PLACE_WALL
- [ ] GAME_COMMAND_REMOVE_WALL
- [ ] GAME_COMMAND_PLACE_LARGE_SCENERY
- [ ] GAME_COMMAND_REMOVE_LARGE_SCENERY
- [ ] GAME_COMMAND_SET_SCENERY_COLOUR
- [ ] GAME_COMMAND_SET_WALL_COLOUR
- [ ] GAME_COMMAND_SET_LARGE_SCENERY_COLOUR
- [ ] GAME_COMMAND_SET_BANNER_COLOUR
- [ ] GAME_COMMAND_SET_BANNER_STYLE
- [ ] GAME_COMMAND_SET_BANNER_NAME
- [ ] GAME_COMMAND_REMOVE_BANNER
- [ ] GAME_COMMAND_CLEAR_SCENERY
- [ ] GAME_COMMAND_SET_SIGN_NAME
- [ ] GAME_COMMAND_SET_SIGN_STYLE
- [ ] GAME_COMMAND_REMOVE_SCENERY
- [ ] GAME_COMMAND_PLACE_SCENERY
- [ ] GAME_COMMAND_PLACE_BANNER"
4207,Positive,"Since having employees in a Multiplayer park (and maintaining them) desyncs the game between the server and the client a lot (like when/after setting patrols) I see a lot of hosts choosing to remove employees altogether and disabling functions that employees would normally do through the cheats, namely Vandalism and Littering. However, there is another important function that an employee does (the handyman, specifically): **watering plants**. 

I'd like to request a feature to toggle the need to water plants. It's also a good feature to have when you want to make flowers at locations a handyman can't reach, but you want them to look perfect forever nonetheless instead of clicking the cheat ""Water Plants"" every once in a while. 
"
4208,Positive,"Sometimes it would be nice if there was certain things that could only be unlocked by purchasing a special piece of land/construction rights.

I think the ideal way this would work is to have this area marked with a different flag and you buy the whole area for convenience reasons.

This is probably suited best for the upcoming plugin though."
4209,Neutral,"Hey,

So for some reason none of the peeps will interact with any of my rides or shops. I'm not sure why. I get some checksum errors on a number of objects, but I don't see why that would affect my peeps using normal rides that have loaded?

![scr6](https://cloud.githubusercontent.com/assets/11069930/6677053/804a2cdc-cc24-11e4-9125-a896ac8407f6.png)

Here's my game save and the original scenario, download and rename to .sv6
https://cloud.githubusercontent.com/assets/11069930/6677017/4233a9b4-cc24-11e4-9a33-a73c2213980b.png

https://cloud.githubusercontent.com/assets/11069930/6677037/6679e1ee-cc24-11e4-832e-0b4f716b50fe.png
Same for this, just .sc6 
"
4210,Neutral,
4211,Negative,"People enabling ""show vehicles from other track types"" and ""show all operating modes"" lead to server crashes if certain cars are used on the tracks. I have no way of stopping people from doing this.
"
4212,Neutral,"Is there a way to raise the limits from 4 rides to the 128 rides (like in a normal park) ?
I don't know why they set it only to 4.

"
4213,Neutral,"It appears that there are now a number of players using OpenRCT2 to play rather than just to test or check out. This means we should probably keep release as a stable branch and only commit and merge into a new develop branch. There are however still a number of nasty bugs in OpenRCT2 which crash the game just through normal gameplay. Perhaps these should be fixed before implementing any more of the game so that there is a stable playable build.
"
4214,Neutral,"The window for constructing footpaths has several graphical glitches:
- The greyed out captions (like Direction and Slope) do not display properly
- Clicking the buttons at the bottom (like Construct bridge or tunnel footpath) does not update the cursor, so it looks like it doesn't work. However, when you click a tile, the functionality still works as intended.
"
4215,Neutral,"Even if you uncheck all other tasks, handymen will still walk past dead gardens.
"
4216,Neutral,"I'd like a check box so that umbrellas/balloons/hats/shirts etc can be the same colour throughout the park. I can see this working like the set same price throughout the park option.
![colour](https://cloud.githubusercontent.com/assets/1381723/8137950/dfd5bcd4-113e-11e5-9d1e-853389d98fef.png)
"
4217,Positive,"First off, excellent work!

Is there a chance there will be cross platform build scripts / Make files, or is there a simple way to compile the Visual Studio project on other platforms?
"
4218,Positive,"Hi. Wouldnt it be really cool to have competetive modes for multiplayer. Where players have to compete against eachother about who can make the best park (or even small scenarios like who can make the best rollercoaster in under ""x"" minuts).

I think it would be cool. 

Example: You could make it so you are up against, lets say 4 players, and there is only 5k peeps in the map. And after four years the game ends, and whoever has the most peeps wins. 

This is just an example and you could make many different multiplayer modes. The main point is that many people really enjoy competing and having a challange, and I think multiplayer competetive mode could be really really cool. I would absolutely play it. 
"
4219,Neutral,"**OS: Arch Linux(64-bit)** 
**Version: 0.0.4** 
**Commit: 1eb91cb** 

When the game is launched it will crash quickly after. If I launched the game with ""openrct2 --headless"" the game will run happily until stopped. If I launched the game with ""openrct2 intor"" the game will work up until it reaches the main menu or until a button is pressed and it skips to the main menu.

The original copy of RCT2 is from disc.
- [ ] Reproducible in RCT2 (vanilla)?
- [ ] Multiplayer?

**Steps to reproduce:**
1. Start game with command ""openrct2 --verbose""

**Dump file**
[dump.txt](https://github.com/OpenRCT2/OpenRCT2/files/267176/dump.txt)

**Screenshots / Video:**
N/A

**Save game:**
N/A
"
4220,Neutral,"OS: Windows 10 (64-bit)
Version: 0.0.4-develop 1711

Also: that's been on march or february!

Info:
if i want play on multiplayer i go here and i searching for some best servers i joining when i joined my openrct2 crashed (you don't need help me, becuase it fixed) on newest versions
"
4221,Neutral,"Error can be seen in this twitch highlight: http://www.twitch.tv/monotonetim/v/16897315
"
4222,Neutral,"in a nutshell, since a lot of people (as far as I can remember) save track designs that normally cannot be placed unless some landscaping is done first because of ""Too High for Supports"", I feel as if there should be a way to know that if you saved a track design that cannot be placed on perfectly flat land (or especially in the Roller Coaster designer), like the design's name being outlined in a more crisp red on the track design list once the player's mouse rolls over it and the game checks to see if the highest track element is over a certain limit.
"
4223,Neutral,"Hee guys, (sorry for typos english isn't my native language)

I know its not the time to really get into this part of production yet, but since i cannot contribute to the current stage (I dont have any experience in programing) and really want to participate because I really like what you guys are doing. I came up with the following:

Awards:
In RCT2 you could win awards for being the best in this or that. Though its a cool feature it didn't really gave you anything. Let's say you win the award for safest park in the country. Would it be cool to earn a discount on new mechanics or earn a free month of wages. At least something that will benefit you. For every award you get you can think of something nice to give. This could add a lot of fun to the game.

Fanatic groups of peeps:
In real life there are people that travel around the world in groups to find the most badass rollercoasters to ride in them. Now I thought that mayby it would be cool if you constructed a rollercoaster with a excitement rating over a 9 or so that a group of people would enter your park (all dressed the same!) and go straight for your badass rollercoaster. You can implement this same principle for all sorts of attractions. like go karts or ride in a car. 

Mountain tool:
In one of the rtc1 additions there where some mountain tool options that where not included in rct2 because rct2 had the options of building scenery. But if I remember it correctly you could give the side of a hill the colour yellow and red and these also changed the apperance of an attraction going in the side of a mountian. They where round instead of square. Could you guys bring this back?

Eye dropper:
For example: you brought down a piece of land, now scenery on top of it gets deleted. (This has to disapear btw) it is very annoying to search for one or two scenery objects to replace it. An eye drop option would make this much, much easier and would speed up a building process in general.

Handyman:
Handymans could use some updates as well. How they orientate their selves around paths and towards litter. Besides that they should be able to fix vandelism. I know you guys already have some cheats to help this, but i mean actually seeing a handyman fix a bench. I can also remember a feature that chis saywer had in the original plans for rtc. And that was a handyman taking a lunch break. There's a change there might be something left in de game that shows this. How cool would it be to add this.

Tour guide:
An additional employee that walks around and accumulates peeps that will bring a buch of people from one place to another and in the mean time stops and pretends it is giving some information. This will bring the happiness up. This could also be implemented as an attraction maybe.

Mobile salesman.
An additional employee that walks around and sells for example balloons, souvenirs or icecream.

Medic:
An additional employee. There are benches and emergency posts for peeps to go to. To lower there nausia. But they will only do so when there nausia has reached a certain point. These workers will reduce lets say 20-25% percent of nausia when he/she is helping a peep. They help peeps that have a nausia rating higher than 10%.

Original peep codes:
Some cheat codes that where put in the game made some of the guests do some unique stuff. Like taking photographs and making paintings. There might be some cool ways to implement these features in the game without having them to activate threw cheat codes. The michael schumacher cheat code that let a person to drive really fast would be al cool option to use for a fanatic group of peeps when you have build a go karts attraction that has a high excitement rating. 

The amazing earl:
This guy had made alot of mods for rollercoaster tycoon 2. All of his creations look like they where made by chris saywer. The blend in perfectly. These could be used to expand the options of attractions. Here's a link: http://rct.wikia.com/wiki/The_Amazing_Earl 

Peeps:
I would like to see that peeps would enjoy the scenery more than they did originaly. By not alone giving them a bigger variety in thoughts about this. But also incorporate a game mechanic that lets a peep be picky in wich attraction he wants to go in based on the scenery that ride has to offer. There are no graphics for girls or for other races in the game. I dont know if you guys are planning to improve rtc up to that extant. but it would be awesome! If some of the peeps would prefer to walk in groups or lets say with there family that would be cool. A bigger variety in appearance. Like peeps having backpacks, already whearing glasses or applauding when there's a new ride available (only peeps that are close to the new ride)

Random events:
Planes flying over, personal messages from peeps that you follow, having peeps ask for the completion of a particular ride. fulfilling this need will boost some stats, accidents that can happen during rides that lowers happines, peeps finding money, peeps finding items raises their happines, peeps finding their solmates and stay together. 20% higher chance of this happening on the swans ride ( oehw,, romantic)
peeps sharing money or giving stuff, peeps saying funny stuff like: I think I left my oven on, at home. peeps that steal stuff which a guard can prevent, more wild life (fish, birds), peeps that request you to plant them somewhere else. A peep on drugs haha doing crazy stuff.
And many more you name it. All of this wil help to create a more dynamic wolrd.

Achievements:
All these achievements can be completed in the campaign or in a continuous park. They can only be completed one time. 

click on a duck
pop a balloon
drown a peep
a crashed coaster
build your first attraction
build your first rollercoaster
have a peep enter an attraction for the 10th time
have an excitement/intensity/nausia rating above 5, 10 and so on..
build 10, 20, 30 attractions
more than 5 rollercoasters
more than 10, 20, 30 staffmembers
placed an amount of ground/water
I could go on forever on this.. 

New attractions:
I know this would be alot of work to do properly but here's a list of attraction I thought off.

Indoor sky dive
Heli ride (actualy flyes around the park)
Plane ride (also really flyes, They could take off at the same airport)
Parachut drop with landing spot (on ground or on roofs)
Ferry ride
bus thats able to drive across footpaths.
Shooting stall
Water walkers (these big floating balls where you can climb into)
Game corner
Casino
Another type of cinema
Open theater
Slingshot
A play ground (with al kinds of different playground equipment, expandable)
minature railway with multiple platforms
paragliding
mazes with additional objects like a watch tower

Since there is a day and night cycle. Maybe it would be cool to add hotels and/or camping sites which alot of themeparks have. and restaurants. 

And additional things like fireworks, lighting, things to add on waiting lines (To ease the waiting), music boxes, custom music, scenery that benefits the experience of rides and coasters, a crossing point for footpaths and trains and so, having a clear and separete option to play a continuous game, a click and drag option for scenery no more single clicking fences please.

I can think of way more but I am done for it for now. Let me know if you guys think if there's some usefull stuff in this all. I've been busy on this for a whill now. I've one of you thought about something more let it be know in the comments.

Greets,

Hytacker.

I've included a screenshot from my best park. no mods

![scr1](https://cloud.githubusercontent.com/assets/15657920/10953037/15e65ab2-8346-11e5-85ee-9331accd601c.png)
"
4224,Neutral,"**OS:** macOS (x86)
**Version:** 0.0.5 develop
**Commit/Build:** 4ee9c2c

If you open up de building window and click on the Rollercoaster Tab, the game crashes.
- [ ] Reproducible in RCT2 (vanilla)?
- [ ] Multiplayer?

**Steps to reproduce:**
1. Open save
2. Go to rollercoaster tab in build window

**Save game:**
[Park Crash.sv6.zip](https://github.com/OpenRCT2/OpenRCT2/files/441980/Park.Crash.sv6.zip)
"
4225,Neutral,"Disappearing bottom HUD while selecting a save game to load while ""about-to-win"" scenario is running and triggers the winning condition.

https://www.reddit.com/r/openrct2/comments/3bxcek/latest_developer_build_bugs_003_908_incomplete/
"
4226,Neutral,"Raising a mountain with a one-tile-square selection costs $80.  Considering that nine tiles are affected, one might think the cost should be closer to $20*9 = $180, but Chris Sawyer's landscaping service offers a discount.  (If I recall correctly, this is consistent with RCT1.)

![1 tile mountain](https://cloud.githubusercontent.com/assets/6338134/10714404/eb701bc6-7aab-11e5-8cfc-b64ff1b094cd.png)

With OpenRCT2, we can build mountains that have larger plateaus.  A mountain with a top two tiles square costs $320 to form.  Seeing as 16 tiles are affected, $20 \* 16 = $320 sounds like it's about the right price to pay.

![2 tile mountain](https://cloud.githubusercontent.com/assets/6338134/10714414/249c9668-7aac-11e5-853d-addf639926f5.png)

By the time we reach a 3x3 mountain, the cost is $720.  25 tiles are affected, so we'd expect to pay closer to $20*25 = $500.  That said, some of the tiles would have taken two $20 operations to form, so it's about right regardless.

![3 tile mountain](https://cloud.githubusercontent.com/assets/6338134/10714438/973d9848-7aac-11e5-977b-17b236ec456c.png)

A 4x4 mountain costs $1,280 to start, which is well above the $20 \* 36 = $720 we might expect to pay for it.  This is the turning point:  we could have built the same shape for less money using the standard tools.

![4 tile mountain](https://cloud.githubusercontent.com/assets/6338134/10714441/bb0d9d04-7aac-11e5-8274-bff002bb9171.png)

It doesn't get better from here.  Starting a 64x64 mountain costs $327,680, which is way above the estimated $87,120.

It seems that the mountain tool is very naive in its pricing:  it simply multiplies the one-tile price by the number of tiles in the selection.  This isn't really the best way to go about it because it overcounts redundant land-moving operations.  I propose we change the pricing scheme to evaluate how much money it would cost if tiles were moved manually and use that value instead of the naive multiplication.
"
4227,Neutral,"Tested in build 1421.  The scrollbar tracks are supposed to be bright with dark ""grooves,"" but for the map and scenery windows in OpenRCT2, the scheme is reversed.

**Original RCT2**
![orig_scrollbars](https://cloud.githubusercontent.com/assets/6338134/11017498/adc3f04a-8555-11e5-9a1a-1122f347eb6a.png)

**OpenRCT2 build 1421**
![open_scrollbars](https://cloud.githubusercontent.com/assets/6338134/11017501/b5f410ce-8555-11e5-986d-8de3dcc47845.png)

I tested all the other scrollbars I could think of in OpenRCT2 including the build rides window, the attractions window, the news window, the scenario selection window on the title screen, and all the scenario editor configuration windows, but I didn't notice anything awry with them.
"
4228,Neutral,"<!--
  Fill in the placeholders below. Delete any headings and placeholders that you do not fill in.
-->
**OS:** [e.g. Windows 10]
**Version:** [e.g. 0.1.1]
**Commit/Build:** 8d2769d

<!-- Explanation of the issue -->

These two rides are perfectly static. The steam train's wheels don't move, and the helicopter's rotor does not spin. These two are animation type (var_11) 0x01 and 0x07 respectively.

![image](https://user-images.githubusercontent.com/3454156/31170042-82cb20aa-a8af-11e7-8515-95f19a0348ac.png)

https://gfycat.com/RegularTornCommabutterfly

The observation car is unaffected. Its animation type is 0x06."
4229,Neutral,"Version:  44a92e3 

There are two issues regarding loading SV4 games:
- The built-in dialog does not show them
- ~~When using the native dialog, they are shown, but attempting to load them yields the error~~

```
Unable to load file..

```

~~(that includes the empty newline).~~

Edit 26 APR: Second error now solved, first one still present.
"
4230,Neutral,"This is a minor issue for me since it annoys me a little bit.

Throughout OpenRCT2, I think the original games RollerCoaster Tycoon and RollerCoaster Tycoon 2 should normally be written out if there is enough space and abbreviations should be avoided if possible (OpenRCT2 is not a forum or chat).
Also, drop the “1” in “RollerCoaster Tycoon 1” and “RCT1”, because the “1” is not part of the game name.
Instead of “RCT2”, use “RollerCoaster Tycoon 2” if you have the space.

It is okay to use the abbreviations “RCT” and “RCT2” for “RollerCoaster Tycoon” and “RollerCoaster Tycoon 2” if you are low on space or for development tools. In tooltips those names should generally be written in full.

Places where the game names appear:
- Names of title sequences
- Tooltip of the option which enables capital letters for ride banners
- Tooltip of title music selection in the options
- Default theme names
- Tooltip of option to sort rides by track type (it's okay to use “RCT” (not “RCT1”) in the option name itself)
- Tooltip of scenario sorting option
- Scenario of scenario unlocking
- Tooltip of handymen mow grass by default option
- Checkboxes in “Features” tab of theme editor (use “RCT” instead of “RCT1”, maybe add tooltips if you want to)
- Probably some other places I forgot, they might be found by searching for “RCT1” and “RCT2” and “RollerCoaster Tycoon 1”
"
4231,Neutral,"The following line in shared.c

```
            gRenderer = SDL_CreateRenderer(gWindow, -1, SDL_RENDERER_ACCELERATED | SDL_RENDERER_PRESENTVSYNC);
```

on Linux returns nil and SDL_GetError returns

```
SDL_CreateRenderer Renderer already associated with window
```

which causes the game to crash if enabling hardware acceleration in the Options dialog.

Apparently you're not allowed to use https://wiki.libsdl.org/SDL_GetWindowSurface together with https://wiki.libsdl.org/SDL_CreateRenderer
"
4232,Negative,"I need to do some more research on this, but I'm pretty sure the litter bins in my park are filling up way too fast - i.e., after a single guest puts trash into them or something. How much trash are they supposed to take before filling?
"
4233,Neutral,"**OS:** openSUSE 13.1
**Version:** 0.0.4
**Commit/Build:** Stable

I have a custom keyboard mapping configured, mapping my Caps Lock to trigger a Backspace instead (`setxkbmap -option caps:backspace && xmodmap -e ""clear Lock""`). However, this is not being registered by OpenRCT2, despite working fine in essentially every other game and application I use. The regular Backspace key works fine. 

The issue manifests throughout the game in all inputs I've tested. I don't have an original RCT2 installation set up (since I'm on Linux) and can't test it there.

**Steps to reproduce:**
1. Select an input or go to 'chat' mode in multiplayer
2. Type a character
3. Hit Caps Lock
4. _nothing happens_
"
4234,Neutral,"As of the latest build, even though updating the build stores your previous versions settings, the game starts in a window and does not cycle theme music.

Is there something im missing? Even when I change the settings and then reboot the game, it starts up under its default settings.
"
4235,Neutral,"**Version:** 0.0.7-develop

- [x] Multiplayer?

When launching the headless server for the very first time, it does not store `users.json` which confuses users.

We could offer a better experience by making sure the key gets generated even for the host and use it in default-generated `users.json`, which would then let users use this key from other client or provide a scaffolding to show how key entries should look like."
4236,Neutral,"**OS:**  Windows 7 Home Premium SP1 x64
**Version:** 0.0.5
**Commit:** 6172eda - present

Hey developers. When I launched OpenRCT2, I recently saw a glitch where the paths and everything disappeared. My game also crashed in this build after I joined a server. I also would like for OpenRCT2 to pull that build off the site because the build is very buggy and glitchy.
1. Launch OpenRCT2 using the launcher and update to the latest version.
2. Investigate to see if you are experiencing the same thing as me.

![bugglitch](https://cloud.githubusercontent.com/assets/17324259/14726968/769f6d52-07f4-11e6-94bd-29c9788c52a7.png)
"
4237,Neutral,"**OS:** macOS
**Version:** 0.1.0
**Commit/Build:** 1aed33192804541bd8e891595d64c7751d29b567

The background colours used by e.g. the settings screen appear a bit washed-out, as the screenshots below illustrate.

This occurs using the software renderer. Whether hardware backing is enabled or not appears to be unrelated.

**Screenshots:**
Title screen appears normal here:
![screen shot 2017-07-14 at 12 41 12](https://user-images.githubusercontent.com/604665/28209232-ee980784-6891-11e7-81e3-e3499ca7da51.png)
In scenario they appear washed out:
![screen shot 2017-07-14 at 12 41 21](https://user-images.githubusercontent.com/604665/28209233-ee9be3b8-6891-11e7-814a-3399ef8c4a03.png)
"
4238,Positive,"Hi all!

I'm trying to build OpenRCT (Lubuntu 16.04 x86), but CMake cannot find openssl>=1.0.0

This can be fixed just by installing libssl-dev, so I was thinking on editing the wiki to add this package to the `apt-get` command but, before doing so, I want to make sure I'm doing everything correct.

First, I called the `install.sh` script inside `scripts/linux` folder. Then, I installed all the packages listed in the [wiki](https://github.com/OpenRCT2/OpenRCT2/wiki/Building-OpenRCT2-on-Linux) following instructions under APT (Debian, Ubuntu) section.

And finally, executed the `build.sh` script inside `scripts/linux` folder, which gives me the error as you can see:

```
daniel@daniel-VirtualBox:~/git/OpenRCT2$ ./scripts/linux/build.sh 
~/git/OpenRCT2/build ~/git/OpenRCT2
OPENRCT2_CMAKE_OPTS =
-- The C compiler identification is GNU 5.3.1
-- The CXX compiler identification is GNU 5.3.1
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found PkgConfig: /usr/bin/pkg-config (found version ""0.29.1"") 
-- Checking for module 'openssl>=1.0.0'
--   
CMake Error at /usr/share/cmake-3.5/Modules/FindPkgConfig.cmake:367 (message):
  A required package was not found
Call Stack (most recent call first):
  /usr/share/cmake-3.5/Modules/FindPkgConfig.cmake:532 (_pkg_check_modules_internal)
  CMakeLists.txt:75 (PKG_CHECK_MODULES)


-- Configuring incomplete, errors occurred!
See also ""/home/daniel/git/OpenRCT2/build/CMakeFiles/CMakeOutput.log"".
```

After installing `libssl-dev` everything goes perfect. 
"
4239,Neutral,"**OS:** [Windows 7 SP1]
**Version:** [0.0.5]
**Commit/Build:** [55ec765]

I keep on crashing after installing OpenRCT2 on RCT2 and cant boot and leaves a dump file
Here is a dialog while starting up,
""Scanning 2190 objects...
1KHFRUIC Error: Bad image table.
1KHFRUIC Error; Unexpectedly reached end of file.
Error reading object: 'C:\Program Files (x86)\OpenRCT2\ObjData\1KHFRUIC.dat
ASFOUNT Error: Image table too large.
Dump Path: C:\Users\solo\Documents\OpenRCT2\
Dump File Path: C:\Users\solo\Documents\OpenRCT2\79c1d996-1c69-46ce-93b-7da6cc552ac8<55cec765>.dmp
Dump Id:79c1d996-1c69-46ce-93b-7da6cc552ac8
Version 0.0.5
Commit 55ec765""
Here is the file, zipped
(Github for some reason, glitched and i could not paste the file onto the text)
https://drive.google.com/open?id=0BwQrKTJI38x3d28wTWhEYVpHSUU
"
4240,Positive,"Hi,

would it be possible to disable the 'too high for supports' errors?

Someone asked this on my forums.
https://openrct.net/forum/topic/14/too-high-for-supports#p103

Thanks,
Rune
"
4241,Neutral,"**OS:** Arch Linux
**Version:** 0.0.6
**Commit/Build:** 3e70ea9

When reaching the 10000 sprite limit (I guess, as my test had 9600 guests) the game sometimes shows graphical glitches. I attached a saved game which shows this behavior.

- [x] Reproducible in RCT2 (vanilla)?
- [ ] Multiplayer?

**Steps to reproduce:**
1. Create a small park
2. Add as many guests as possible and prevent them from leaving
3. In some cases a graphical glitch occurs

The original game also shows this and may crash.

**Screenshots / Video:**
![unnamed park 2017-01-02 00-06-21](https://cloud.githubusercontent.com/assets/8963459/21593448/89dae3fa-d117-11e6-9705-64f91b43e33d.png)
![unnamed park 2017-01-02 00-06-20](https://cloud.githubusercontent.com/assets/8963459/21593446/86b215ae-d117-11e6-8471-4c96dfa2ce94.png)

**Save game:**
[Glitch.zip](https://github.com/OpenRCT2/OpenRCT2/files/681162/Glitch.zip)
"
4242,Negative,"**OS:** Windows 10 64 bit
**Version:** 0.0.4
**Commit:** 9ef4af5

Explanation of the issue...
After wondering why guests were still complaining about disgusting paths despite hiring about 15 handymen, I looked around the park and saw that there was a huge group of them stuck in the entrance tile to one of my rides. This isn't the first time I've seen this behaviour, I also had a similar problem on a different scenario, though it has never happened to this big a group before.

I've made sure that the handymen are not set to patrol that one tile, and they aren't
- [x] Reproducable in RCT2 (vanilla)?
- [ ] Multiplayer? Not tested

**Screenshots / Video:**
[http://i.imgur.com/iTonGwV.png]

**Save game:**
[Canyon Calamities.zip](https://github.com/OpenRCT2/OpenRCT2/files/197352/Canyon.Calamities.zip)
"
4243,Neutral,"Just came up an idea that it might be good if the game can let players to select the marquee style, i.e. ALL UPPERCASE (RCT1 Style) or Both lower and upper case (RCT2 Style).
edit: If this feature isn't something that requires only few lines to change, just ignore it right now :P
![untitled-1](https://cloud.githubusercontent.com/assets/13048125/8888913/de12c5cc-32f4-11e5-988a-619ea05e90f6.jpg)
![untitled-2](https://cloud.githubusercontent.com/assets/13048125/8888914/de1a3f32-32f4-11e5-9583-a5fca09553d2.jpg)
"
4244,Negative,"**OS**:_Debian Sid_
**Version**:_0.0.5.0-develop_ 
**Commit**:_8d0481d_ 
I use the multimedia button on my keyboard on linux that launch custom commands like change songs on VLC etc (use dbus).
When i press that key i get a crash of the game, in console i get:
`
Assertion 'q->front' failed at pulsecore/queue.c:81, function pa_queue_push(). Aborting.
`

**Steps to reproduce:**
1. Press the multimedia key

I don't know if it is possible to reproduce that problem but I get this error with different builds of the last days.

I cannot compile that game on my machine because I am on amd64 and when i try to install the library required remove some programs that i need.
"
4245,Neutral,"Blank-named multiplayer users have been noticed recently, and lack of autodetection was reported during testing of #5706 (see [this comment](https://github.com/OpenRCT2/OpenRCT2/pull/5706#issuecomment-310929898))."
4246,Negative,"**OS:** Arch Linux
**Version:** 0.0.8
**Commit/Build:** f04439e0a (and earlier)

It is possible to have the game spew audio forth from the depths of hell, inconsistently. It happens when switching the audio output device, but as of yet is inconsistent. All times it has happened, I loaded the game went to Options, and changed the output. Once the bug has begun, the more times you switch, the more confused outputs get.

- [ ] Reproducible in RCT2 (vanilla)?
- [ ] Multiplayer?

**Steps to reproduce:**
1. Open Options
2. Toggle Audio Device

**Screenshots / Video:**
https://youtu.be/RnnuoQIWz2U
![audiobug](https://user-images.githubusercontent.com/3945538/26899558-785ea08e-4b9d-11e7-882f-cb1e233fdbb1.png)

"
4247,Neutral,"**OS:** Windows 7
**Version:** 0.1.2
**Commit/Build:** fd459f0

Rides can be demolished in pause mode without using any cheats. The amount of money refunded when demolishing in pause mode is also displayed when it shouldn't be."
4248,Neutral,"OS: **Windows 10**
Version: **0.0.5**
Commit/Build: **5699b9e**

Crashed when (maybe after) loading a map from server

**Steps to reproduce:**
I can't reproduce it.
I was able load the saved game (attached below) and joined the server.
- [ ] Reproducible in RCT2 (vanilla)? - I don't think so (Multiplayer)
- [x] Multiplayer?

**Dump file**
[ccc3b912-c009-4aba-afbb-0e094dc99f4f(5699b9e_x86-64).zip](https://github.com/OpenRCT2/OpenRCT2/files/553272/ccc3b912-c009-4aba-afbb-0e094dc99f4f.5699b9e_x86-64.zip)

**Save game:**
[ccc3b912-c009-4aba-afbb-0e094dc99f4f.zip](https://github.com/OpenRCT2/OpenRCT2/files/553273/ccc3b912-c009-4aba-afbb-0e094dc99f4f.zip)
"
4249,Neutral,"OS: Windows 10
Version: v0.0.5 build a3469cf

Explanation of the issue...
When building this coaster type, the trains do not bank the track, they simply remain flat as they go round corners. Same happens with dinghy slide.
"
4250,Neutral,"**OS:** [Windows 10]
**Version:** [0.0.5]
**Commit/Build:** [5b9f790]

The resolution of the game is scaled down an incorrect.
- [No] Reproducible in RCT2 (vanilla)?
- [Yes] Multiplayer? 

**Steps to reproduce:**
1. Open Game

**Screenshots / Video:**
![image](http://i.imgur.com/qzy4Tbc.png?1)
Screen on right, is OpenRCT in incorrect resolution.  Screen on left, is the correct resolution of vanilla.
![image](https://cloud.githubusercontent.com/assets/18511011/19419572/600287f6-93a8-11e6-9755-d68d4d3c7d09.png)
Settings used

This issue occurred after updating to a new development build on 10/15/16, no settings were changed by me.  Resolution simply became scaled down and cannot be reverted.
"
4251,Neutral,"**OS:** N/A
**Version:** [0.0.7]
**Commit/Build:** [https://github.com/OpenRCT2/OpenRCT2/commit/6d2776da2bc05e83fb441c84aad80b44a5c800ab]

No saved track designs: #5097
Object selection: #2294 & #3245 (can still be opened with console)
Park parameters/scenario_options (from Cheats menu or console)
Set console command (money, etc)
Invention list (opened from console)
Force a breakdown debugging tool: #5199
Setting map size while sandbox mode is on
Path of park entrance and peep spawns (sandbox mode): #5216
Guests watch ghost rides/pieces: #5058


- [ ] Reproducible in RCT2 (vanilla)?
- [x] Multiplayer?

**Steps to reproduce:**
N/A

**Dump file**
N/A

**Screenshots / Video:**


**Save game:**
N/A"
4252,Neutral,"![scr1](https://cloud.githubusercontent.com/assets/3945538/7624053/d0ddd19e-f9b0-11e4-943f-b6cdda6d9188.png)

If you do something like go to place scenery or path, or another ride, it is reset and disappears.
"
4253,Neutral,"Dunno if this is already known, but it's on the latest stable build. (originates from #2050)

![img](http://puu.sh/kLCTY/c700236013.png)

This happens when switching back and forth between the mountain tool and the normal tool after a while...

Moving around will fix this, maybe rotating the view would as well.
"
4254,Neutral,"Since we have quite a few requests to implements things like making all guests hungry, remove nausea, etc. I have decided to simply introduce cheats to min and max out all those bars in the cheat window, as well as some additional ones for preferred ride intensity, patience, vandalism, and removing guests without having to blow up all of them.

I'm putting this in an issue for two reasons. The first is the notify anyone with similar plans. The second is to ask for the best moment, since there are plans for a 0.0.2 and I'm not sure @IntelOrca is okay with putting a load of cheats in before that release.

My work would close several issues, as well as make rebasing #1187 redundant.
"
4255,Neutral,"Original: https://openrct2.org/forums/topic/736-2-bugs/

If I build a dueling coaster with 2 station and try and put the queue line entrances next to each other the queues will merge into one leading from one ride entrance to the other, it works fine on queue lines from different rides.

![Image1](https://openrct2.org/forums/uploads/monthly_2015_12/working.png.707802b9be19f1e6116fefbbdf5c3ed1.png)

![Image2](https://openrct2.org/forums/uploads/monthly_2015_12/5681881073c0d_notworking.png.af19d4710349ab4e08ae65a311d08476.png)
"
4256,Neutral,"<!--
  Fill in the placeholders below. Delete any headings and placeholders that you do not fill in.
-->
**OS:** Windows 10
**Version:** 0.0.5
**Commit/Build:** c3035b7

When taking a giant screenshot, the top and bottom are cut off. 

**Steps to reproduce:**
1. Open any park and take a giant screenshot from the option under the save menu
2. Observe how the top and bottom are missing

**Screenshots / Video:**
![ccc2 2016-12-26 23-28-44](https://cloud.githubusercontent.com/assets/9705046/21499857/ce9a1d2c-cc39-11e6-96f0-2c381a22fb7b.png)
"
4257,Negative,"Currency rates are now wrong:

| now it is | should be | change in percent |
| --- | --- | --- |
| 1 GBP == $1 | 1 GBP == $1.5 | +50% |
| 1 GBP == 1 F | 1 GBP == 1.5 F | +50% |
| 1 GBP == DM 1 | 1 GBP == DM 2.6 | +160% |
| 1 GBP == 100 YEN | 1 GBP == 178.4 YEN | +78.4% |
| 1 GBP == 1 Pts | 1 GBP == 224.9 Pts | +22390% |
| 1 GBP == L 100 | 1 GBP == L 4.3 | -95.7% |
| 1 GBP == fl. 1 | 1 GBP == fl. 3 | +200% |
| 1 GBP == 1 kr. | 1 GBP == 12.5 kr. | +1150% |
| 1 GBP == 1 EUR | 1 GBP == 1.4 EUR | +40% |
| 1 GBP == W 1000 | 1 GBP == W 1727.4 | +72.74% |
| 1 GBP == R 100 | 1 GBP == R 104.8 | +4.8% |
| 1 GBP == 10 Kč | 1 GBP == 36.5 Kč | +265% |

It is no problem to fix it, but question is, if it really should be fixed. So please tell what you think about it.
"
4258,Neutral,"When you try to start a marketing campaign - for example: advertising campaign for the park - and try to adjust the length, the game crashes.
"
4259,Negative,"See title. In the original game, peeps could find the rides alright, heading for the queue entrance as they should. This gives a lot of problems, unsolvable without redoing entire park sections, when peeps are getting stuck in a corner somewhere because their AI changed from when the area was originally built. In general, this AI mechanic limits park composition a lot. I hope you can solve this soon, because it's the only thing in OpenRCT that ruins my fun occassionally. The other bugs are so minor I can live with them, and the beneifts of Open more than compensate for them. This one though... renders parks made before OpenRCT unusable.
"
4260,Neutral,"**OS:** Linux

The compiled binary for Linux x86-64 of OpenRCT2 takes a lot of space, ~40MiB unpacked for just the ELF binary. This is partially because we use `RelWithDebInfo` build type, which embeds debug symbols into the file itself. This is very useful when we need to do actual debugging, but in most cases it just takes space.

The DWARF debug information, among others, has two types of informations:
* code-to-source-line mappings
* variable tracking information

For user to be able to provide valuable stack traces (symbolicated, with line numbers), only the first part is needed\* and the variable tracking can be turned off with `-fno-var-tracking` GCC option and this results in 25% smaller binary (30MiB). Unfortunately, disabling it at compilation time makes debug symbols much less useful.

Instead, I would like to try removing it in a post-process step. It looks like variable tracking information is located in `.debug_loc` section and perhaps simply extracting it out from the binary and into separate symbol file would yield desired effect:
* having smaller distributed binaries
* not sacrificing value of debug information.

\* This is just my assumption for now, I still have to verify it."
4261,Neutral,Do you have any lightfx settings enabled?
4262,Negative,"I don't remember, it was quite annoying so I am sure we would of heard more complains if it still happened. It can be re-opened if necessary.
"
4263,Neutral,"@Susrussr​​​​​​​ Try to delete your 'plugins.dat' and try the latest version
"
4264,Neutral,"@janisozaur is this a big deal for you? Can't looking at a nice GUI of the network satisfy your needs?
"
4265,Neutral,"I take it this was correct in the original game?
"
4266,Neutral,"https://github.com/OpenRCT2/OpenRCT2/blob/develop/src/platform/shared.c#L586

Already implemented right?
"
4267,Neutral,"Hardware: Nvidia GT555M / Intel HD3000

I cannot send the dmp file yet since: C:\Windows\Minidump and C:\Windows\ do not have .dmp files in them... So tell me where to get the dmp file and I will generate it and send it.
"
4268,Neutral,It doesn't have to do with a new save format. The limit is not enforced by SV6.
4269,Neutral,The other issue in question: https://github.com/OpenRCT2/OpenRCT2/issues/4913
4270,Neutral,"@Sweet-Tan a workaround: 
https://blogs.msdn.microsoft.com/debugger/2009/12/30/what-is-a-dump-and-how-do-i-create-one/

especially this one: 
![clip_image015_2](https://cloud.githubusercontent.com/assets/550290/22325663/64b60f96-e3af-11e6-96e1-2c429fe3e98e.jpg)

"
4271,Neutral,"We are aware of the first issue, the cash area on the screen is not correctly marked as ""dirty"" (i.e. requiring to be redrawn) when spending money, hopefully it will be fixed soon.
"
4272,Neutral,"okay so i got the permission for Tussauds Magical Kingdom, Märchen Paradies, Fizzix's Electric Fields and Mystic mountain as of now. i have 5dave's permission for floyd's family farm as well but it has a custom object and uses custom pathing and i don't really want to touch up the park too much.

http://i.imgur.com/xE55Vzd.png

so that only leaves us waiting for faas and csw for Lucky Lake Amusement Park and Clearfield Woods
"
4273,Neutral,"Edit.
![screenshot_3](https://cloud.githubusercontent.com/assets/12634026/13119850/6a58e760-d5ab-11e5-8cd9-633b20adc6fd.png)
Add the research button the object selection. You can change there the order of the rides/stalls.
+the random shuffle from the original inventionslist should be also added to this tab + researched group
"
4274,Neutral,"Is this any different to https://github.com/OpenRCT2/OpenRCT2/issues/1717
"
4275,Neutral,"I would use the water coaster style as you can already use the existing image for flat track


![hack park 2017-05-13 09-20-48](https://cloud.githubusercontent.com/assets/24964930/26025824/ddc5b460-37bd-11e7-9268-0740d1662240.png)
"
4276,Neutral,"Windows 8.1
"
4277,Neutral,"Fixed by #2177. (Tested with SF Belgium.)
"
4278,Neutral,"@MrPker5 did your self-made track include the same pole scenery that gets stuck?
"
4279,Neutral,"New version, using @Wopian's colors:

1024px:
![new](http://i.imgur.com/zOIfWRA.png)

link: http://i.imgur.com/zOIfWRA.png
link to 245 color version: http://i.imgur.com/oj4DXYb.png
link to previous colors: http://i.imgur.com/3uiWXA2.png
"
4280,Neutral,"Duplicate of #1619.
"
4281,Negative,"It would be useful if it could be used to just advance time too, like 5 months but I don't know what would be the best way to do it 
"
4282,Neutral,A new track type? This would need a lot of discussion - I am not sure we would even want to consider that until we have a new save format.
4283,Neutral,"I can't seem to reproduce this. Can you try deleting your plugin.dat file from My Documents/OpenRCT2 its possible its something related to the recent change in plugin layout.
"
4284,Neutral,"should be fixed now
"
4285,Neutral,@BelgianGuyNE you still have provided no information. We need the commit hash and the dump.
4286,Positive,"Oh in that case yeah, a console command is fine."
4287,Negative,"The sound/music sliders do not make sense to me, it's not at all what other games are doing.

@zsilencer  That might be but it doesn't make sense that I hear the merry go round even when it's not visible. What I hear in vanilla makes sense, what I hear in OpenRCT2 does not. Not that vanilla is always that great as you can sometimes hear very hard transitions in music but at least what you hear makes some sense.
"
4288,Neutral,"Is there anything logged to stderr?
"
4289,Neutral,"@Gymnasiast Yes, but paths will not be connected. On Nedesign Liampie said what would be prefered."
4290,Neutral,I know this was closed but one area where a default cheats config matters is when starting a new scenario rather than loading a new map. Also for headless servers. 
4291,Neutral,"I will look into the problem soon.
"
4292,Negative,"I don't see how this is too hard to do though - since everything would be up (except prices, sadly those don't inflate at the same rate), and since inflation would make it easier for people to walk into the park, I would say that the dynamics become interesting in higher - number years as guests would walk in with more money in their pocket than you would think and loads of guests would also walk into your park.  Inflation might make it easier for the park entrance entry fee only parks a little easier while making the ride entry fee parks slightly harder (since the rides only have so much they can take in at a time).  This could balance the game just a little bit."
4293,Neutral,"Connected to #257.

![](http://puu.sh/d1mR7/6a05ba943c.png)
"
4294,Negative,"It has been suggested once before. It's not what I would call much-requested.

Anyway, there is a very good reason for it, which you already mentioned actually: most parks are closed in the winter months, as most roller coasters cannot operate properly when it's too cold, and maintenance work is carried out during those months. Of course, there are some exceptions, even in temperate climates like in The Netherlands.

However, it would complicate things beyond belief. An RCT year (8 months) takes about 90 minutes. It would either mean most of your rides will be closed for 45 minutes, or open and close every few minutes (a day takes about 20-40 seconds in RCT!) to take the weather in account. Of course, in areas where it's always warm enough, that wouldn't apply, but then it would mean that you end up with a seriously complicated game, with very inconsistent behaviour between climates.

In short, I am against this. It's far too complicating and doesn't improve gameplay - in fact, I would say it degrades gameplay for the reasons I mentioned above.
"
4295,Neutral,"Ok, here is my verdict:
- People leaving the park on a boat is not a bug, provided they can go back as well.
- We only fix obvious mistakes in scenarios. Widening a (perceived to be) poorly designed water channel goes far beyond that.
- Boats getting stuck and doing nothing intelligent to get moving _is_ a bug. But I consider that point to be a duplicate of https://github.com/OpenRCT2/OpenRCT2/issues/866.

Because of this, I will close this issue."
4296,Positive,"Hmmm... I will look at a way to make this work properly.
"
4297,Neutral,"Closing this due to the OP not replying.
"
4298,Neutral,"I see, this happens only when using OpenGL
"
4299,Neutral,"It would require duplication of _all_ guest actions, not just those concerning rides. Also, English has looser capitalisation rules. In any way, it's jumping into conclusions that it's wrong.

As for other languages: I have solved it in Dutch (in which it wasn't not good grammar) by changing it to

```
Guests with status: Queueing for Jet Skis 1
```

Which would work with German as well. In any case I feel it's something for the native speakers to decide.
"
4300,Neutral,"Just to clarify: The assertion triggered in the group park and gave me no dump file. I got the crash+dump when doing the same steps in the track design manager. While they obviously crashed somewhere else in the code, I assumed it was the same error as the steps to reproduce it are more or less the same and the console window had the same output.
"
4301,Neutral,"http://www.mediafire.com/file/q0kxn6xq78ta1g4/openrct2.DMP

here it is.
"
4302,Neutral,"@mrtnptrs yes, it is. We should not crash even on invalid parks.

I have made a PR to address that: https://github.com/OpenRCT2/OpenRCT2/pull/6576"
4303,Neutral,"@duncanspumpkin there's no need for protection from 0-sized buffer. As per [docs](http://en.cppreference.com/w/c/memory/realloc):

> If new_size is zero, the behavior is implementation defined (null pointer may be returned (in which case the old memory block may or may not be freed), or some non-null pointer may be returned that may not be used to access storage). 

we do the proper thing."
4304,Neutral,"Any chance you could provide a .TD6 that causes a crash. I found a problem with .TD4 files that cause an instant crash but I don't have any corrupt .TD6 files so its hard to reproduce. 
"
4305,Neutral,"I don't see how it would require new save format, sounds doable within constraints of sv6."
4306,Neutral,"Yeah I was thinking it might be related. I was going to check to see if it had any custom paths in use.
"
4307,Neutral,"I tried to change SPRITE_LOCATION_NULL so it was globally fixed for any comparisons that used SPRITE_LOCATION_NULL.
"
4308,Neutral,"> The reason it's a compile-time option in the first place is that the code can affect a lot of other stuff, even when the feature is not used.

Not really"
4309,Negative,But never mind. I found a way to make it work and I'm terrible with computers so it's okay. Just blame the magnetic field I somehow have around me.
4310,Neutral,"I believe you can also close the ride a second time, forcing them out, as another temporary workaround
"
4311,Neutral,"@janisozaur oh, didn't see that. I'll see where its crashing this evening.
"
4312,Neutral,Does the sv6 have more chunks than we read?
4313,Positive,"Wow, I've never received a bug report reply so fast before!

I will try to reproduce this behavior later with more care.

What's is missing to make a port for linux? Maybe I can help in something.
"
4314,Neutral,"The game does warn you about other track configuration problems, like block brakes after another or before a station, non-complete track or more than one pull lift. I am going to make this a feature request to warn the player if there is no free block immediately upon starting the ride.
"
4315,Neutral,"As this is a duplicate of #1860, please move the discussion to there.
"
4316,Neutral,"Hm, I think it has more to do with the fact his path seems to contain `<` and `>`.
"
4317,Neutral,"No dump file that I can see; where would it be?

Just tell me what you want to see--I don't mind transcribing a screenshot if it helps.
"
4318,Negative,"No, that's not a solution. It's a workaround. We have stated the express goal of reintroducing cut RCT1 features to OpenRCT2, and this is no exception. The limit will be raised to what it was in RCT1.
"
4319,Neutral,"Here are screenshots of each folder's content:
![tracks](https://cloud.githubusercontent.com/assets/7141884/21454667/9828d5ca-c91a-11e6-9654-dd4e79aeaf5d.png)
![scenarios](https://cloud.githubusercontent.com/assets/7141884/21454668/9858f21e-c91a-11e6-9a0c-4448c6534c11.png)
![saved games](https://cloud.githubusercontent.com/assets/7141884/21454670/985928ce-c91a-11e6-8d6e-b08633120813.png)
![objdata](https://cloud.githubusercontent.com/assets/7141884/21454671/98598ab2-c91a-11e6-863d-f43ccdc671a3.png)
![landscapes](https://cloud.githubusercontent.com/assets/7141884/21454669/985914c4-c91a-11e6-93e1-34ea3a882046.png)
![install](https://cloud.githubusercontent.com/assets/7141884/21454672/9859a862-c91a-11e6-9a39-5179d275dcfa.png)
![data](https://cloud.githubusercontent.com/assets/7141884/21454673/9859ef70-c91a-11e6-85bf-e17d713a3eb3.png)






"
4320,Neutral,"It should be located at the path I wrote above.
"
4321,Neutral,"I can't even load that save on Linux.

Bunch of
```
ERROR[/home/janisozaur/workspace/OpenRCT2/src/drawing/Image.cpp:214 (gfx_object_allocate_images)]: Reached maximum image limit.
```
and then segfault:
```
>>> bt full
>>> bt full
#0  0x0000000000504187 in load_palette () at /home/janisozaur/workspace/OpenRCT2/src/drawing/drawing.c:525
        water_type = 0x60b000025da0
        palette = 4294967295
        g1 = {
          offset = 0x80 <error: Cannot access memory at address 0x80>, 
          width = 3933, 
          height = 0, 
          x_offset = 0, 
          y_offset = 0, 
          flags = 2216, 
          zoomed_offset = 0
        }
        width = 67305985
        x = 504891909
        dest_pointer = 0x1dc8198df88ade25 <error: Cannot access memory at address 0x1dc8198df88ade25>
        source_pointer = 0x7fffffffcff0 ""0\320\377\377\377\177""
#1  0x00000000005279fe in game_load_init () at /home/janisozaur/workspace/OpenRCT2/src/game.c:910
        mainWindow = 0x27e4960 <g_window_list>
        zoomDifference = 2 '\002'
#2  0x0000000000526f3d in game_load_save (path=0x27dc100 <gOpenRCT2StartupActionPath> ""/home/janisozaur/Downloads/crash save.sv6"") at /home/janisozaur/workspace/OpenRCT2/src/game.c:858
        rw = 0x60700005d080
        __func__ = ""game_load_save""
        extension_type = 6
        result = true
#3  0x000000000069f262 in rct2_open_file (path=0x27dc100 <gOpenRCT2StartupActionPath> ""/home/janisozaur/Downloads/crash save.sv6"") at /home/janisozaur/workspace/OpenRCT2/src/rct2.c:363
        extension = 0x27dc126 <gOpenRCT2StartupActionPath+38> ""sv6""
#4  0x0000000000ef8da6 in openrct2_launch () at /home/janisozaur/workspace/OpenRCT2/src/OpenRCT2.cpp:246
No locals.
#5  0x0000000000692c71 in main (argc=2, argv=0x7fffffffd538) at /home/janisozaur/workspace/OpenRCT2/src/platform/posix.c:59
        run_game = 1
>>> p *water_type
$1 = {
  string_idx = 3976, 
  image_id = 4294967295, 
  var_06 = 0, 
  var_0A = 3, 
  var_0E = 1
}
```"
4322,Neutral,"Does this also happen in vanilla?

Can you also post a saved game?
"
4323,Neutral,No. Can you send me the custom scenarios?
4324,Negative,"It seems that it is occured not only headless servers but also single play.
I cannot load scenario and just title sequence appears if I double click SC6 files on Windows."
4325,Negative,"I can confirm this one. Experienced this yesterday too!
"
4326,Neutral,11753. https://github.com/OpenRCT2/OpenRCT2/wiki/Multiplayer#starting-the-server
4327,Neutral,"The crash happens with all versions in that file. My most recent saved game was from 27 August, and I remember testing OpenRCT2 somewhere in September, then not using it for a long time - probably all of October. So the error must have been introduced somewhere in September.

Just to be sure my installation isn't corrupted, do you happen to have a DLL from 27 August or earlier? And some from September?

(Clicked 'Close issue' by accident')
"
4328,Neutral,"> Can we fix it all by pre-emptively clearing reason text before every command?

We can't do that because most things set the command text to something before running the command.
"
4329,Neutral,"Possible dupe #1959
A short title with the whole context is the best 👍 
and also a bit off an explanation etc why and links to 3rd party places where it's been talked about
So guess this is okay :p "
4330,Positive,"Well, it works, but the performance hit of that recording was too high to be merged"
4331,Neutral,"@duncanspumpkin they said their commit was 080f470, which is after the revert.
"
4332,Neutral,"Confirmed.
"
4333,Neutral,"That sounds like something that could be fixed by https://github.com/OpenRCT2/OpenRCT2/pull/2177
"
4334,Positive,"Support for plug 'n play plugins/scripts is welcome. Not everyone has C/C++ knowledge, and scripts are an useful alternative. Now I can't think of any plugin-ideas at this moment. But I'm sure others can, and will.
"
4335,Positive,"Part of it or a sub-issue. There are more debug tools than just TI. But thanks for pointing it out, I sometimes do create duplicates and in any case it's useful to have them linked even if not a dupe."
4336,Negative,"Interesting... I don't think the reliability computation or the peep though logic has been implemented. This might be caused by something else but I don't know how to go about solving this.
"
4337,Neutral,"Duplicate of #4644
"
4338,Neutral,"@adrian17 the arguments for this are that it works on all platforms and produces GIFs which are small yet lossless. They won't skip any frames because the game has control of the recording. If the player wanted sound then yes - they use 3rd party software, the intention for this is to quickly capture some footage to stick on github or reddit either as a bug report or a coaster run.
"
4339,Neutral,"Hm dont know it just happend in singleplayer too after i tried to merge tracks together and deleted them.
"
4340,Neutral,"> which probably shouldn't be called sv6

One _could_ argue that it's up to CS to determine if a file is sv6 or not.

If we decide to allow opening/saving these sv6-ish files, we could choose to only allow this when the 'classic flag' is set (and set it ourselves when exporting).

I'm not sure if we should stick with the current roadmap - all of this wouldn't be much of a problem if we used our own format (or were close to using it)."
4341,Neutral,"Yeah same in the original game
"
4342,Neutral,"No use for `sv6`. Symbols: 
[openrct2-symbols-f60f53d.zip](https://github.com/OpenRCT2/OpenRCT2/files/232542/openrct2-symbols-f60f53d.zip)
"
4343,Positive,"Huge interest in this issue. Currently all 3 server we are hosting pull a constant 30% CPU, regardless if 15 people are connected, or none are. Resource consumption is the biggest concern in regards to this.
-Sweet T"
4344,Negative,"Sorting 10 after 1 and before 2 makes no sense from a human viewpoint indeed. We should correct that. (Also, IIRC, Windows Explorer uses human sorting since XP.)
"
4345,Neutral,"Updated to b668533, still happens
"
4346,Neutral,"[peep.c:678](https://github.com/IntelOrca/OpenRCT2/blob/master/src/peep/peep.c?ts=4#L678) is missing `++`.

It never gets to the line above, its possible there is a problem with `sub_6939EB` or `sub_69E9D3`.
"
4347,Neutral,"Do you guys want to keep them open? If I were to submit a PR that adds a new track type in one of these slots, would it be rejected?"
4348,Negative,"Have you ever seen a path floating in the air in real life? :) No, this is not normal behavior. But it is normal behavior only when you're name is Harry Houdini ;)
"
4349,Neutral,So is this something that should be saved for .opensv6?
4350,Neutral,"Perhaps only allow it if there is less than 1 block between them and the ride - basically next to the path underground? Then they can ""see"" it when it is reasonable, but not any other time.
"
4351,Neutral,"No.

Regarding the error message - the Wild Mouse does have the steep lift hills and on other designs it works just fine."
4352,Neutral,"I can confirmed that it only happens when playing in scenarios; doesn't affect Roller Coaster Designer.
"
4353,Neutral,"Okay, I believe the problem is actually the ride window not displaying the message or acknowledging the fact that you haven't researched all the required scenery yet.

This can be reproduced by starting Crazy Castle and building ""Cairngorm Bobsleds"", a mini roller coaster design.
"
4354,Neutral,"I can't reproduce the hang on the latest build, and double-closing & reopening the Monorail gets it back to normal. It's possible that whatever caused this has been fixed."
4355,Neutral,"Saves made between https://github.com/OpenRCT2/OpenRCT2/commit/343e436e452630ffc3f3e05bdd2035e7a1f6e2f6 and 4852633 will have this bug until you clear the measurements.

Problem was caused by rewritten import of rides - previously, the whole ride list was copied in one go, but now it is imported field by field. This is an early preparation step for allowing a new save format."
4356,Negative,"Once we're moving to our own scenario file format, this would be an easy feature to add. Until then, the performance penalty for such a feature is too much of a downside, I think.
"
4357,Neutral,"Anyway, I was [unable to replicate](http://srv.rustin.me/devel/uncap%20fps.mp4) choppiness or slowdowns with uncap FPS. Tried toggling hardware display off and on within the game and launching with the two different settings. Pardon the giant filesize, I wanted to make sure I got the full FPS.

This video is 600x480 for the sake of filesize but I tried it at 1600x900 as well.
"
4358,Neutral,"I thought that was the purpose of this option:

![zaznaczenie_109](https://cloud.githubusercontent.com/assets/550290/14229418/d9e80646-f933-11e5-8bbf-73d31f80c98a.png)
"
4359,Negative,"Salient comment by @AaronVanGeffen copied from #6571.

> It's not just OpenRCT2's interface that needs adapting. SDL_ttf, the library we use to render text using TrueType fonts, doesn't support right-to-left rendering at all, either...

In other words, this won't be an easy fix!"
4360,Neutral,"It fixes itself when running OpenRCT2 a second time, i'll look into fixing it so the game doesn't have to be reloaded."
4361,Positive,Looks interesting - will try to replicate and investigate.
4362,Neutral,"https://drive.google.com/file/d/0Bz6WH10GYohPMDd0Z0w1M0VrdU0/view?usp=sharing
https://drive.google.com/file/d/0Bz6WH10GYohPdlQ3NmQtYzNqOUk/view?usp=sharing
https://drive.google.com/file/d/0Bz6WH10GYohPUnZPWUJ5NHlIeGs/view?usp=sharing
"
4363,Positive,"Thank you all for the comments. :) 

Gymnasiast, as a side note, I tried using the 8 cars per train function (1.302) on RCT2 running on a Windows 98 virtual machine, but it doesn't appear to work.
"
4364,Neutral,"If its only slow when there are many guests (things to draw) that is a limit of how fast it can draw. We can't optimise that any further until the whole game is complete - and isn't directly related to scrolling.
"
4365,Neutral,"The original game uses native Windows dialog boxes and have the text initially highlighted, so you can simply hit backspace to clear the input box. It would be nice if our input boxes had that functionality.
"
4366,Positive,"Hello rcthelp, thank you for the bug report.
Would you have any saved game file with that bug in action? It would speed up fixing of the bug immensely.
"
4367,Neutral,"Downloading 377/780 Meatballs...
"
4368,Neutral,"all shutdown crashes are caused by an invalid state of the ride.  
ride->num_vehicles is 2 and ->num_cars_per_train is 7, but there is only 1 vehicle with about 16 cars."
4369,Negative,"I can confirm the issue. I recognized it on Splash Mine, where they start screaming everytime, which started to annoy me. This definitely didn't happen that much on vanilla."
4370,Negative,"Can't reproduce it now either, so I guess everyone got lucky and there's no more problem now. I'll keep an eye out though, next time it happens I'll be sure to get screenshots and stuff for a more complete bug report. I've been half-assing too many of my reports and things lately.
"
4371,Neutral,Should be taken care of in https://github.com/OpenRCT2/OpenRCT2/commit/0414ba7f6bbdfe18163e225a97a4a4d348526e1b
4372,Negative,"@pizza2004 No it can't.. It's the objetive that doesn't let you drop your park rating below 700. I always put alot of time in scenery. This is made impossible that way.
"
4373,Neutral,"```
>   00100000()  Unknown
    [Frames below may be incorrect and/or missing]  
    openrct2.dll!TcpSocket::ConnectAsync::__l8::<lambda>(void * pointer=0x08102430) Line 315    C++
    openrct2.dll!int <lambda>(void *)::<lambda_invoker_cdecl>(void * pointer=0x08102430) Line 315   C++
    [External Code] 
    openrct2.dll!thread_start<unsigned int (__stdcall*)(void *)>(void * const parameter=0x08102430) Line 115    C++
    [External Code] 

```

Have some problems tho to open the dump file it seems
"
4374,Neutral,Duplicate off #578?
4375,Neutral,"Duplicate of #3916
"
4376,Negative,"@Gymnasiast See, it can even be done worse :P
"
4377,Neutral,I think this is duplicate of #2127.
4378,Neutral,Video of this bug courtesy of @PFCKrutonium - https://youtu.be/dUr7ewO-bOw
4379,Neutral,"""Ctrl+Alt+C now toggles the cheat window (On Mac, Wine driver for key mapping has issues so Alt is Cmd unless you patched the driver/config or have custom built wine)"" - from #591
"
4380,Neutral,"Not a bug. It's invalid queue placement from the user. How is the game supposed to handle that ""correctly""?
"
4381,Neutral,"@vzybilly this feature is for **in-game** windows.
"
4382,Neutral,"Possibly something going wrong with the peep generator. Maybe not setting the correct variables on spawn
"
4383,Negative,"Is it really a problem?
It seems to be off one pixel by one side, but feels a bit redundant as it's just a pixel"
4384,Neutral,On 0.0.8 i can build this ( 26196c6 )
4385,Neutral,"Would borrowing `strnatcmp` from PHP be a solution? https://github.com/php/php-src/blob/250938e2d35fc54161a18167b7901c5e3b574371/ext/standard/strnatcmp.c
"
4386,Neutral,"@BigDirtyShitHog 
If it crashed, did it create a dumpfile? And if so, can you post it here?"
4387,Neutral,"You need to click the ""no entry"" button on the sign window to make it function as a no entry sign. Simply changing the text won't do it.

![screen shot 2017-05-10 at 13 19 11](https://cloud.githubusercontent.com/assets/16639257/25898258/4641705c-3583-11e7-913f-34f73f09a426.png)
"
4388,Neutral,"May be an SDL bug – we do use different versions of it for those builds
"
4389,Neutral,Did you say that this could be resolved using a new repository that has submodules of all the other repos?
4390,Positive,"@xzbobzx, I'm neutral on the diamond. It's an awesome logo though. Not every logo needs a background. Inkscape doesn't have one for example.

![image](https://cloud.githubusercontent.com/assets/4810902/6180317/28075636-b2f1-11e4-8da8-8a81ad9a8820.png)

IMO, the diamond makes the icon too busy. But I don't care too much because Windows lets you change EXE icons _and_ one EXE can bundle multiple icons. Here's RCT2's selections (used for different program features).

![image](https://cloud.githubusercontent.com/assets/4810902/6180466/3c83449c-b2f3-11e4-90b5-46c8df3a2cbe.png)

Here's how your logo looks as a Windows desktop shortcut.

![image](https://cloud.githubusercontent.com/assets/4810902/6180389/298f5d36-b2f2-11e4-91de-b96eb1926038.png)
![image](https://cloud.githubusercontent.com/assets/4810902/6180391/2b9f8cf4-b2f2-11e4-8373-32b57529fb4e.png)

I second that text should not be on the 48px icon.
"
4391,Neutral,By me doing it I mean making it resizable. 
4392,Neutral,"`jansson>=2.7` is required.
"
4393,Neutral,"Dupe of #3948 

```
>   openrct2.dll!object_chunk_load_image_directory(unsigned char * * chunk=0x000df9a0) Line 481 C
    openrct2.dll!object_type_small_scenery_load(void * objectEntry=0x04854020, unsigned int entryIndex=0, int * chunkSize) Line 1398    C
    openrct2.dll!object_load(int type=1, void * objectEntry=0x04854020, unsigned int entryIndex=0, int * chunkSize=0x000dfb30) Line 2565    C
    openrct2.dll!object_load_file(int groupIndex=-1, const rct_object_entry * entry, int * chunkSize=0x000dfb30, const rct_object_entry * installedObject=0x033522e1) Line 137  C
    openrct2.dll!install_object_entry(rct_object_entry * entry=0x000dfb70, rct_object_entry * installed_entry=0x033522e1, const char * path, rct_object_filters * filter=0x000dfb54) Line 802   C
    openrct2.dll!object_list_load(...) Line 348 C
    openrct2.dll!rct2_init(...) Line 167    C
    openrct2.dll!openrct2_initialise(...) Line 243  C
    openrct2.dll!openrct2_launch(...) Line 271  C
    openrct2.dll!StartOpenRCT(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance=0x00000000, char * lpCmdLine=0x01773acd, int nCmdShow=10) Line 109   C
    openrct2.exe!004069e4() Unknown
    [Frames below may be incorrect and/or missing, no symbols loaded for openrct2.exe]  
    [External Code] 
```
"
4394,Neutral,"Related: http://rct2resource.bizhat.com/tutorials/paths.html
"
4395,Positive,"Fair enough - I assumed they were more separate on some level. Ignore me :+1: 
"
4396,Neutral,"It has probably saved the scenario in a compatibility directory.
"
4397,Neutral,"This _might_ have been fixed by accident in https://github.com/OpenRCT2/OpenRCT2/commit/e85c627bd5d6db14ac429c1695f421dd14d08ec3, because it avoid error messages about building in pause mode. It's probably best to see if this happens again for a few weeks, then close it if it doesn't."
4398,Neutral,"I see. Well maybe sometime in the future as an option perhaps. 
"
4399,Neutral,"It fails because running `openrct2` fails. Presumably you can't run `./openrct2` either? It appears it can't find `libopenrct2.so`, now usually when it links a library to the binary, it stores the location to it so that it can load it - but that doesn't appear to work in this case? Alternatively you can set `LD_LIBRARY_PATH` to the directory that contains `libopenrct2.so` or move that into `/usr/lib`."
4400,Neutral,"I just found another infiniteloop...
but that would be another freeze, not a crash."
4401,Neutral,"So I guess a loop counter then? But what would be a reasonable max number of loops?
"
4402,Neutral,"From memory the only dll's that should be required are openrct2 and sdl2.dll. Make sure these are in the same directory as openrct2.exe. Everything else should be handled by wine. 
"
4403,Neutral,It's inconsistent and I have yet to reproduce it. When I do (and manage to grab the dump file) I will upload it.
4404,Neutral,"As it seems, the Mini Game scenarios are essentially damaged. I think I'll introduce an option (off by default) to allow loading of damaged saves/scenarios.
"
4405,Neutral,"Yeah, by import we plan to support rct1 files but play them based on rct2 mechanics"
4406,Neutral,"Someone is pretending to be me in a server and lying to me now. I think it is a great idea to add a login system to OpenRCT2 and stop using anonymous names to prevent impersonations in the future. I also want the login systems to be added to OpenRCT2 as soon as possible to prevent impostors.
"
4407,Neutral,"See #844 and #1962.
"
4408,Neutral,"What are 55 and 59?
"
4409,Negative,"I hate wide path flags!
The issue here is that the wide path flags are acting like a wall through the patrol zone.
This is something that I had not thought of until now, but it jumped out at me as soon as I read the error report and saw the screenshot, even before I checked where the wide paths are flagged in this path layout.

The path finding heuristic currently only allows peeps to continue searching through a wide path tile if the peep is currently on a wide tile. This helps avoid peeps getting stuck in the classic scenario where the pathing requires the peep to first walk away from destination in order to get there.

It is trivial to relax this restriction, fixing this case, but the cost will be significantly worse path finding.

I need to think this over for a bit to see if I can come up with some logic that fixes this issue related to patrol areas but does not negatively impact the path finding heuristic in general... maybe ignore the wide path flag if the path tile is on the edge of the patrol zone."
4410,Neutral,"@xzbobzx: maybe 48 also without text...
"
4411,Neutral,"Hmm the only thing I can think of is it running out of sprite ids. Is this only in one save, has that save been used for a long time?
"
4412,Positive,"Flags look fine
![bildschirmfoto von 2015-11-15 21-58-21](https://cloud.githubusercontent.com/assets/4310707/11170993/452b2432-8be4-11e5-8186-e74452a0dbc1.png)
![bildschirmfoto von 2015-11-15 21-59-00](https://cloud.githubusercontent.com/assets/4310707/11170994/4552d3e2-8be4-11e5-8dab-1bed7e4cc364.png)
"
4413,Positive,"Nothing really to worry about. Thats just one of our new protection features to stop invalid memory access. It crashes if its not handled correctly. Since its not crashing its handling it fine.
"
4414,Neutral,"The text that normally goes after the pluses comes from the Windows registry.

```
reg query ""HKLM\SOFTWARE\Wow6432Node\Infogrames\RollerCoaster Tycoon 2 Setup""
reg query ""HKLM\SOFTWARE\Infogrames\RollerCoaster Tycoon 2 Setup""
```

Maybe ORCT2 failed to read from the registry.
"
4415,Neutral,"this appears on many finished rides as well - if you look closely at the looping roller coaster, it somehow cannot fit 7 cars in 6 station platforms yet it somehow never uses any portion of that last block.
"
4416,Negative,"I did look for such but didn't find anything. I don't think it makes a
difference if the vehicle type is single or trains but i don't know.

On Fri, Nov 6, 2015 at 1:32 AM, Krutonium notifications@github.com wrote:

> Same as #2110 https://github.com/OpenRCT2/OpenRCT2/issues/2110
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/OpenRCT2/OpenRCT2/issues/2215#issuecomment-154245562.

## 

Best regards; Hexile
"
4417,Neutral,"![rct height](https://cloud.githubusercontent.com/assets/25260318/22179138/765d1cc0-e018-11e6-8cd1-494514f11f79.jpg)
"
4418,Positive,It finally works using that method! Thanks to @LRFLEW and everybody. And sorry for my noobiness. 
4419,Neutral,"I don't think its related to #1720. Is this reproducable in vanilla RCT2?
"
4420,Positive,"You should use the actual names of the tracks, that would make it a lot easier to distinguish between styles and tracks. For example: 'Techno style' and 'Brimble's beat'. :)
"
4421,Neutral,"I managed to crash the game on Six Flags Great Adventure and on Fungus Woods so I don't think it has something to do with the map
"
4422,Positive,Seems like the commit of 591aa8a fixes the bugging main menu. Thanks!
4423,Neutral,"Are there any messages on the cmd prompt window? Sounds like an issue with loading. When the title fails to load it tries to reset and reload the title. That is probably why it freezes.
"
4424,Neutral,"You could add a notification, e.g. Mechanic X can't reach [ride] due to his patrol area. Preferably clearer than that though.
"
4425,Negative,@Broxzier you just described my solutions again. 
4426,Neutral,"I just checked it on my RCT1 install. After the long Grapevine (Funtopia) shot, a series of shorter shots of around a few seconds each follow. It doesn't look like there is a time difference, but that set contains a few very precisely-timed shots. In other words: it starts just when the a roller coaster train does something interesting. Recreations of RCT1 scenarios don't always have the trains in exactly the same location (not surprising, really). So in short: it doesn't look like the OpenRCT2 version is faster-paced. I'll therefore close this.
"
4427,Neutral,"@Gymnasiast I'm having trouble opening your save file. It's complaining with a bunch of ""failed to load entry"" errors. I'm assuming it's custom scenery I don't have. Can you link to the custom scenery you used? Is it possible to include the custom scenery in the save?
"
4428,Negative,"@Christipher : Stay on-topic please. What you describe is another bug entirely.
"
4429,Neutral,"@janisozaur We can already sort by track ride or ride type, so adding a way to filter by checked status shouldn't really present problems, I think.
"
4430,Negative,"I believe that gray them out will be a bad ux experience.
"
4431,Negative,"I could still reproduce the bug in 93484c7956324c6b4589b0929aa914a10dc9f1e7

As long as the dialog remains opened while editing the track, newly added block sections are correctly counted in the settings tab, but don't allow to add additional trains until the whole window is closed and re-opened.

If the train length was above the smallest block size, lowering it accordingly doesn't allow it either to increase the number of trains directly. The windows needs to re-opened in this case as well.

it only works as expected when increasing the train length after lowering the train count. In this case, the upper train count limit is scaled down immediately.
"
4432,Neutral,"It did, yes.
"
4433,Neutral,"The vanilla RCT2 screenshot isn't correct, let me upload the proper one:
![image](https://cloud.githubusercontent.com/assets/13048125/9155994/309fce2a-3efd-11e5-99a8-dce691b1fa57.png)
"
4434,Negative,"After waiting 10 minutes, I'm still getting the same issue with the Launcher. Can't confirm issue :("
4435,Neutral,@davewthompson how's the experience for you now that we've merged #5578?
4436,Negative,"I like how it currently is more than both of these proposals. Maybe these are easier to click but they're not as intuitive as the default up/down arrows. I think people are way more likely to press the wrong button with your proposed design.

But to be honest I've never had problems clicking these buttons. At least I can't recall it being an issue!
"
4437,Negative,"The problem seems to be fixed @ the latest build, thanks @IntelOrca !

edit: placing new rides will crash again :(
"
4438,Neutral,"just load my save in 0.0.2, and wait for the roller coaster finishes its test to show the result...
"
4439,Neutral,You could write a program that just lists all the chunk headers.
4440,Neutral,"![opengl-hd3000](https://cloud.githubusercontent.com/assets/20338545/16731910/d98d4c3e-477a-11e6-9b73-57bc71715a4f.png)
"
4441,Negative,"As of July 24th 2017 this appears to have been fixed.

Edit: Nevermind, appears to still be broken"
4442,Neutral,"@Nubbie can you please check what's in the dump, please?
"
4443,Neutral,Ditto on having issues with this.
4444,Neutral,"@LRFLEW can you check if any of this is still an issue?
"
4445,Neutral,"![screenshot_2015-10-19_11-28-58](https://cloud.githubusercontent.com/assets/303133/10583787/a49aeaec-7654-11e5-925e-d1a1a8428a90.png)

Yes this is happening in linux running natively off of the develop branch.
"
4446,Neutral,"Note that some languages (mostly Asian, to my knowledge) group decimals [differently](https://en.wikipedia.org/wiki/Decimal_mark#Digit_grouping). I know unicode characters are unsupported at the moment, but it does mean that the proposed solution might not suffice in the long run.
"
4447,Positive,"Yup regression is caused by my track refactor. Shouldn't take too long to find the cause.
"
4448,Neutral,"OK, I think the most likely cause is string encoding. Sounds are being loaded with a function that expects UTF8 encoded filenames, where as all the filenames are currently stored as extended ASCII.
"
4449,Neutral,"can you provide a scenario with this happening
"
4450,Neutral,"Old window:
- From station track
- From a station entrance / exit
- From a vehicle
- From construction window

New window:
- Track
- From a news items
- From guest's ride list
- From ride list
"
4451,Neutral,"But it does work for parts that aren't C, I just tested it on sound_play_panned which I found uses 5 different registers as parameters and was able to easily decompile the rest of it.  If you aren't hooking the functions then you can't test if they will actually work as a replacement, unless you decompile all the other functions that are calling it.  It also makes it easier and faster to decompile, because you can see what parameters are being passed when its being called from code that hasn't been figured out yet.  I have also updated the hook to map registers to C style function arguments: http://pastebin.com/AThD9Bcp
"
4452,Negative,"Sorry my mistake missed a x2 when dereferencing the ride type flags.
"
4453,Neutral,@adamlpi we need the commit hash it would be in the form of e0764e3. Since its 0.0.6 you are using you could also try switching to the latest build and seeing if the problem still occurs. 
4454,Neutral,"More people are reporting this issue on the forums
https://openrct2.org/forums/topic/1519-error-connecting-to-some-servers-problem-with-sprite-65535/#comment-8979

Will upload any dump files that differ

---

### YoloSwags Dump file;

**Error Message;**
Unhandled exception at 0x58E27275 (openrct2.dll) in 5f1738a6-68cd-488f-933f-8aaf482d6002(c522f9c).dmp: 0xC0000005: Access violation writing location 0x00000000.

**Call Stack;**

```
>   openrct2.dll!Guard::Assert_VA(bool expression, const char * message=0x59347d90, char * args=0x000dfd94) Line 81 C++
    openrct2.dll!Guard::Assert(bool expression=false, const char * message=0x59347d90, ...) Line 50 C++
    openrct2.dll!sprite_move(short x, short y=2768, short z=224, rct_sprite * sprite=0x01124fbc) Line 508   C
    openrct2.dll!peep_footpath_move_forward(rct_peep * peep=0x01124fbc, short x=4257, short y=2768, rct_map_element * map_element=0x00f99200, bool vandalism=false) Line 7600   C
    openrct2.dll!peep_interact_with_path(rct_peep * peep=0x01124fbc, short x, short y, rct_map_element * map_element=0x00f99260) Line 7699  C
    openrct2.dll!sub_693C9E(rct_peep * peep=0x01124fbc) Line 8808   C
    openrct2.dll!peep_update_walking(rct_peep * peep=0x01124fbc) Line 5886  C
    [External Code] 
```

**Locals;**

```
+       args    0x000dfd94 ""ÿÿ""   char *
+       buffer  0x000dfafc ""An assertion failed, please report this to the OpenRCT2 developers.\r\n\r\nVersion: OpenRCT2, v0.0.5-develop build c522f9c provided by AppVeyor\r\nTried getting sprite 65535""  char[512]
        expression  Variable is optimized away and not available.   
+       message 0x59347d90 ""Tried getting sprite %u""    const char *
        result  3   int
+       version 0x000dfcfc ""OpenRCT2, v0.0.5-develop build c522f9c provided by AppVeyor""    char[128]
```

---

### imlegos dump is same as OP
"
4455,Neutral,"Is this still a thing?
"
4456,Neutral,"@HiMyNamesEthan still having this issue?
"
4457,Neutral,"There are already shortcut keys that you can map, for switching the direction you want. "
4458,Neutral,"I think its worth keeping the common open file dialog on Windows for users that want that experience. We can improve how it is current displayed because at the moment its a button that isn't even aligned to the window properly and has a non-intuitive label. Perhaps we can have a option to have the native dialog open by default, if its disabled then it opens the in-game window with a button to open the native dialog.

Windows and OSX provide a common API for this, so this thread is for what should be used in Linux. And I assume something like GTK+ is very easy to add to the unix build process right?
"
4459,Neutral,"the other thing I would say is it has to be next laterally - vertical up or down should not count (should not check vertical as there would be a roof there effectively)
"
4460,Neutral,"Has this information been used now? (I.e. does this need to stay open?)
"
4461,Neutral,"Some more context: apparently in some configurations (items on screen) the night mode breaks people's eyes.

This might be worth fixing so when you disable day/night cycle, palette gets reset to 'day'.
"
4462,Neutral,"I have found a way to recover the tabs. Converting the save file to a scenario seems to bring them back.
"
4463,Negative,"I have two parks that I am sharing - one of which has one of my best works within it (and two irremovable rides)
Starting with the blank one:
Riverview Park - <a href=http://www.filedropper.com/riverviewpark><img src=http://www.filedropper.com/download_button.png width=127 height=145 border=0/></a><br /><div style=font-size:9px;font-family:Arial, Helvetica, sans-serif;width:127px;font-color:#44a854;> <a href=http://www.filedropper.com >upload files online</a></div>
Fun at the Beach: <a href=http://www.filedropper.com/funatthebeach><img src=http://www.filedropper.com/download_button.png width=127 height=145 border=0/></a><br /><div style=font-size:9px;font-family:Arial, Helvetica, sans-serif;width:127px;font-color:#44a854;> <a href=http://www.filedropper.com >online backup storage</a></div>

Both of the above scenarios are difficult and require ridiculous skills to pass... but they are possible.
"
4464,Neutral,"Oh are we talking about SC4? In that case, do those even show on the scenario list?"
4465,Neutral,"I guess there should be a call to setCursor somewhere then. I just checked, and only the one from 0x6ED833 is being called and also not multiple times. So I guess there are more cursor functions although I don't know which ones, maybe resetCursor or something. Also it is strange that the cursor does not get reset at one pixel between the standard buttons and the viewport.

Anyway, I put the function as far as I have it in my fork with a printf just before setting the cursor.
"
4466,Neutral,"Missing build number.
"
4467,Neutral,"@IntelOrca - I'm using Mac OS X x86 (the only option for Mac)
"
4468,Neutral,"Can't reproduce:
![image](https://cloud.githubusercontent.com/assets/1482259/18808422/17835e2e-825a-11e6-940b-5856bfec6e48.png)

Can you say the exact objects you are placing? And a screenshot?
"
4469,Neutral,"Confirmed.  The new thin junction detection in #4211 did not anticipate queue paths being used as regular paths and incorrectly classifies some junctions.  It's an easy fix.  I'll get a PR for this done today.
"
4470,Neutral,"Defining tabs will be easy to do in the new object format. Creating objects in general is something I think would be better handled outside OpenRCT2 proper in general.

Also, I remember Henry Winkelstein creating a tool to create scenery tabs. Not sure if you are aware of its existence?

Edit: it's called DATmaker and it's listed on NE: https://www.nedesigns.com/topic/34668/rct-trainers-and-tools-archive/"
4471,Neutral,"Seems like this could be related to the issues with moving land while zoomed out as described in Broxzier's comment on #2228.
"
4472,Neutral,"@PFCKrutonium ran into this, testing on Gitter confirmed this bug"
4473,Neutral,"Hm, ok. I can't reproduce this bug on the latest develop version anyway. 
"
4474,Positive,"It's not that bad. I still can save my park. Hopefully there will be in the future something to fix this. 
![naamloos](https://cloud.githubusercontent.com/assets/18737614/14970866/07c90fbe-10cd-11e6-84b4-1b13c258971d.png)
"
4475,Negative,"that would not be easy with the way the current ai works. It only calculates where the next decision point will be. So instead of a red line going the whole way you would only get a short red line to the next junction. When it evaluates a route it will do something similar to this but that knowledge is lost as soon as it works out the route. 
"
4476,Neutral,Only happens when loading via file association.
4477,Neutral,"Master Server is online, on the internet. You don't need it for local play, your issue is a firewall somewhere.
"
4478,Neutral,What did you do that eventually fixed it. Was it reverting to a backup of your objdata? Or was it using the latest .exe i provided?
4479,Neutral,"Oh, it works.
Do you have any idea how much bytes can be stored in a one line?
"
4480,Neutral,"Because instead of having ~20 colors, we could have 16,777,216 colors.
"
4481,Neutral,So to fix this we should either not stop the channel as part of the intro playing or perform some sort of Get to check if channel still exists before trying to stop.
4482,Neutral,"I got this once, it happens because guest_surface_path_finding sometimes calls peep_move_one_tile with randDirection as -1 or 255.
"
4483,Negative,"This definitely still happens in develop. nvidia, linux mint 18.1 64, steam beta."
4484,Neutral,"@Susrussr nothing regarding you, we're just investigating what has happened.
"
4485,Neutral,"PR868 should fix this issue with the installer. The bug was, most likely, introduced when the build process was changed.
"
4486,Neutral,"Research.c is often the point where the game crashes even when its not at all related to research. It sounds like something is breaking the loaded object list. Can you provide a save of a crashing scenario and I will try take a look.
"
4487,Neutral,"The stack trace help a bit, but we really need a way to reproduce."
4488,Neutral,"Yes it is another car ride with a tertiary colour of 0xFC. 
"
4489,Neutral,"As IntelOrca said, the first block brake is almost immediately after the station - the top of the left hill acts as one. You need to ensure that block sections are long enough to accommodate a train."
4490,Neutral,"True....
"
4491,Neutral,"There is already a request to change ride ratings: #1236
"
4492,Neutral,Has been fixed as a side effect of the UTF-8 fix for S4 parks.
4493,Neutral,"That is probably due to my title screen fix last night, I will fix tonight.
"
4494,Negative,"Okay thats probably the problem, but can you explain what it means. Im no programming wonder, sorry ;)
"
4495,Neutral,"a0909a2 and 45bfdad were the last two commits that touched loadsave.c, so I'd guess it's probably something in one of them. 
"
4496,Neutral,"Uhm, is it worth looking at this? The map seems to be completely corrupted (tons of Null elements) and no SV6 analyzer tool can make any sense of the file. I think it was just corrupted by a bad server, connection or an old bug or something. What do you think?
"
4497,Neutral,"I'm working on this one.
"
4498,Neutral,"I can't reproduce this anymore using the latest build. So, I think this got fixed with the UTF-changes and can be closed. But could someone else check this to make sure I'm not wrong?
"
4499,Neutral,"https://github.com/IntelOrca/OpenRCT2/blob/develop/src/ride/ride.c#L250
There should be an add secondary price before that line. I will put a fix up later tonight if I have time.
"
4500,Neutral,"@IntelOrca so just so we have a list of what is left is it just from the construction window that still opens the old window.
"
4501,Neutral,"I want to make the attribute (NSInteger) type (id) into the realm of behind me change (id) to insert (nsstrings) type, crash message realm must not be nil.
"
4502,Negative,"I attempted to archive my xcode project for submission to the app store. The archive didn't appear in the Organizer. I attempted everything from updating cocoapods, deleting derived data, cleaning the project, etc...

Finally I deleted all references to Cocoapods on realmswift. It worked! Of course my app didn't because it now heavily relies on Realm

I reinstalled the RealmSwift pod, and guess what happened? Didn't work..

So! I went performed the same thing several times and found that I receive this warning when using cocoapods:

```
Umbrella header for module 'RealmSwift' does not include header 'Pods-MY APP WatchKit     Extension-RealmSwift-umbrella.h'
```

I'm am completely unsure as to whether or not these problems are related, but i absolutely need to know how to fix this
"
4503,Neutral,"I've developed by myself a wrapper for DAO access :

```
static func retrieveAll(inClass: Object.Type, sortedBy property: String, ascending: Bool = true) -> Results<Object>? {
    if let results = RealmDAO.retrieveAll(inClass) {
        return results.sorted(property, ascending: ascending)
    }
    return nil
}
```

So, crash when ""results"" is empty.

Now I fixed adding an ""if"" block before ""return"":

```
 if results.isEmpty {
     return results
 }
```
"
4504,Neutral,"Right now we only support any.

ANY: one or more objects matches
NONE: no objects matches
ALL: all objects matches
SOME: one or more, but not all objects matches.
"
4505,Positive,"Hi!

Coming from here:
https://realm.io/docs/objc/latest/#migrations

It was well explained how to migrate the default Realm.
But what about custom realm?
For instance I have `RLMRealm *newRealm = [RLMRealm realmWithPath:path];`.
How does migration in this case work?

```
newRealm.configuration = configuration
```

Is it enough? Anyway, instead of guessing, I would highly appreciate a documentation example or any explanation on this topic, or a place where it is already explained but I was dumb enough not to find it.

Thanks in advance!
"
4506,Neutral,"May be a duplicate / follow up of #4428 and #4649

## Goals

Just using Realm.

## Expected Results

No bugs, no freeze, no warnings.

## Actual Results

I'm getting this using Realm v2.4.4, but I got a customer getting that same freeze using v2.0.4, so I was wrong when I was saying that issue was introduced *after* 2.0.4 (cf the previous issue).

The app is freezing after logging ""N5realm10LogicErrorE: Bad version number"".
Looks like a deadlock (since the audio is still playing, just the interface won't respond anymore)

Here the full stack trace from Xcode when the app has entered in the _deadlock_:

```
* thread #1: tid = 0x14ac3, 0x000000018f6cae1c libsystem_kernel.dylib`__psynch_cvwait + 8, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP
  * frame #0: 0x000000018f6cae1c libsystem_kernel.dylib`__psynch_cvwait + 8
    frame #1: 0x000000018f7909c0 libsystem_pthread.dylib`_pthread_cond_wait + 640
    frame #2: 0x000000018f0b93ec libc++.1.dylib`std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 56
    frame #3: 0x0000000101e629f4 Realm`realm::_impl::NotifierPackage::package_and_wait(realm::util::Optional<unsigned long long>) [inlined] void std::__1::condition_variable::wait<std::__1::unique_lock<std::__1::mutex> realm::_impl::RealmCoordinator::wait_for_notifiers<realm::_impl::NotifierPackage::package_and_wait(realm::util::Optional<unsigned long long>)::$_12>(realm::_impl::NotifierPackage::package_and_wait(realm::util::Optional<unsigned long long>)::$_12&&)::'lambda'()>(this=<unavailable>, __pred=<unavailable>)::$_12) + 204 at __mutex_base:345 [opt]
    frame #4: 0x0000000101e62988 Realm`realm::_impl::NotifierPackage::package_and_wait(realm::util::Optional<unsigned long long>) [inlined] std::__1::unique_lock<std::__1::mutex> realm::_impl::RealmCoordinator::wait_for_notifiers<realm::_impl::NotifierPackage::package_and_wait(this=<unavailable>)::$_12>(realm::_impl::NotifierPackage::package_and_wait(realm::util::Optional<unsigned long long>)::$_12&&) + 32 at realm_coordinator.hpp:175 [opt]
    frame #5: 0x0000000101e62968 Realm`realm::_impl::NotifierPackage::package_and_wait(this=<unavailable>, target_version=<unavailable>) + 64 at collection_notifier.cpp:422 [opt]
    frame #6: 0x0000000101f4c124 Realm`(anonymous namespace)::KVOTransactLogObserver::parse_complete(this=<unavailable>) + 1208 at transact_log_handler.cpp:639 [opt]
    frame #7: 0x0000000101f4b024 Realm`bool realm::SharedGroup::do_advance_read<(anonymous namespace)::KVOTransactLogObserver>(this=<unavailable>, observer=<unavailable>, version_id=<unavailable>, hist=<unavailable>)::KVOTransactLogObserver*, realm::VersionID, realm::_impl::History&) + 300 at group_shared.hpp:1058 [opt]
    frame #8: 0x0000000101f4214c Realm`realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&) + 72 at group_shared.hpp:960 [opt]
    frame #9: 0x0000000101f42104 Realm`realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&) [inlined] void realm::_impl::SharedGroupFriend::promote_to_write<(anonymous namespace)::KVOTransactLogObserver>(sg=0x00000001058a3600)::KVOTransactLogObserver*) at group_shared.hpp:1120 [opt]
    frame #10: 0x0000000101f42104 Realm`realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&) [inlined] void realm::LangBindHelper::promote_to_write<(anonymous namespace)::KVOTransactLogObserver>(sg=0x00000001058a3600)::KVOTransactLogObserver&&) at lang_bind_helper.hpp:349 [opt]
    frame #11: 0x0000000101f42104 Realm`realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&) [inlined] auto realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&)::$_1::operator()<(anonymous namespace)::KVOTransactLogObserver>((anonymous namespace)::KVOTransactLogObserver&&) const + 4 at transact_log_handler.cpp:706 [opt]
    frame #12: 0x0000000101f42100 Realm`realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&) [inlined] void (anonymous namespace)::advance_with_notifications<realm::_impl::transaction::begin(context=<unavailable>, sg=0x0000000104c52298)::$_1>(realm::BindingContext*, std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::_impl::transaction::begin(std::__1::unique_ptr<realm::SharedGroup, std::__1::default_delete<realm::SharedGroup> > const&, realm::BindingContext*, realm::_impl::NotifierPackage&)::$_1&&, realm::_impl::NotifierPackage&) + 476 at transact_log_handler.cpp:674 [opt]
    frame #13: 0x0000000101f41f24 Realm`realm::_impl::transaction::begin(sg=0x0000000104c52298, context=<unavailable>, notifiers=0x000000016fd294f0) + 40 at transact_log_handler.cpp:705 [opt]
    frame #14: 0x0000000101e7f7ac Realm`realm::_impl::RealmCoordinator::promote_to_write(this=0x0000000104c1a6b8, realm=<unavailable>) + 148 at realm_coordinator.cpp:777 [opt]
    frame #15: 0x0000000101f2db44 Realm`realm::Realm::begin_transaction(this=0x0000000104c521a8) + 168 at shared_realm.cpp:458 [opt]
    frame #16: 0x0000000101f111e0 Realm`::-[RLMRealm beginWriteTransaction](self=<unavailable>, _cmd=<unavailable>) + 28 at RLMRealm.mm:443 [opt]
    frame #17: 0x0000000101f114d8 Realm`::-[RLMRealm transactionWithBlock:error:](self=0x00000001740bf380, _cmd=<unavailable>, block=<unavailable>, outError=0x0000000000000000)(), NSError **) + 52 at RLMRealm.mm:488 [opt]
    frame #18: 0x0000000101f1149c Realm`::-[RLMRealm transactionWithBlock:](self=<unavailable>, _cmd=<unavailable>, block=<unavailable>)()) + 24 at RLMRealm.mm:484 [opt]
    frame #19: 0x0000000101b96624 ****`-[**** ****:](self=0x00000001702267e0, _cmd=""****:"", idx=0) + 268 at ****.m:291
    frame #20: 0x0000000101b97140 ****`-[**** ****](self=0x00000001702267e0, _cmd=""****"") + 76 at ****.m:332
    frame #21: 0x0000000101b927a4 ****`-[**** ****](self=0x00000001702267e0, _cmd=""****"") + 40 at ****.m:62
    frame #22: 0x00000001001000a4 ****`-[**** ****:](self=0x00000001058ade00, _cmd=""****:"", sender=0x00000001058e3000) + 112 at ****:284
    frame #23: 0x00000001965e7d30 UIKit`-[UIApplication sendAction:to:from:forEvent:] + 96
    frame #24: 0x00000001965e7cb0 UIKit`-[UIControl sendAction:to:forEvent:] + 80
    frame #25: 0x00000001965d2128 UIKit`-[UIControl _sendActionsForEvents:withEvent:] + 452
    frame #26: 0x00000001965e759c UIKit`-[UIControl touchesEnded:withEvent:] + 584
    frame #27: 0x00000001965e70c4 UIKit`-[UIWindow _sendTouchesForEvent:] + 2484
    frame #28: 0x00000001965e2328 UIKit`-[UIWindow sendEvent:] + 2988
    frame #29: 0x00000001965b2da0 UIKit`-[UIApplication sendEvent:] + 340
    frame #30: 0x0000000196d9c75c UIKit`__dispatchPreprocessedEventFromEventQueue + 2736
    frame #31: 0x0000000196d96130 UIKit`__handleEventQueue + 784
    frame #32: 0x00000001906aab5c CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24
    frame #33: 0x00000001906aa4a4 CoreFoundation`__CFRunLoopDoSources0 + 524
    frame #34: 0x00000001906a80a4 CoreFoundation`__CFRunLoopRun + 804
    frame #35: 0x00000001905d62b8 CoreFoundation`CFRunLoopRunSpecific + 444
    frame #36: 0x000000019208a198 GraphicsServices`GSEventRunModal + 180
    frame #37: 0x000000019661d7fc UIKit`-[UIApplication _run] + 684
    frame #38: 0x0000000196618534 UIKit`UIApplicationMain + 208
    frame #39: 0x00000001002050b4 ****`main + 140 at AppDelegate.swift:21
    frame #40: 0x000000018f5b95b8 libdyld.dylib`start + 4
```

I replaced the app symbols by `****` because I can't post it in public. However, I can share the full stack by email if that help.

## Steps to Reproduce

Once again, I don't have an easy way to reproduce it. It's a global environment issue: having a few realm transactions running at the same time, after a few more, it will freeze.
In this context, my realm is storing around 50k objects, not sure if that can change something.

## Code Sample

Sadly, don't have one... but I will try right now to make a sample project reproducing that issue since I have a better idea of the context.

## Version of Realm and Tooling

Realm version: 2.4.4

Xcode version: 8.2.1

iOS/OSX version: iOS 10.2.1

Dependency manager + version: Carthage 0.20.1"
4507,Neutral,"Was done in https://github.com/realm/realm-cocoa/issues/2043, which was never merged
"
4508,Neutral,"## Goals
I want to be able to run unit tests in a project with a RealmSwift dependency

## Expected Results
Being able to run unit tests

## Actual Results
Depending on target memberships of model files, either the app crashes or Xcode is unable to build the test target

## Steps to Reproduce
I've attached a sample app to demonstrate the issue

## Code Sample
See attached sample app

## Version of Realm and Tooling
See attached sample app

Xcode version: 8.3.3

iOS/OSX version: iOS 10 - osx: 10.12.6

Dependency manager + version: ?
Cocoapods
[RealmTest.zip](https://github.com/realm/realm-cocoa/files/1302017/RealmTest.zip)

"
4509,Neutral,"In some cases it would be nice to be able to close the realm instance by calling a close() or closeRealm() method on the RLMRealm instance.

E.g.: We are handling migration manually and sometimes we would have to close the DB for setting a new schema version. For now I have simply nilled the instance, but as the amount of data grows it seems it takes longer to close the db this way.
"
4510,Neutral,"My app got a problem when use Realm. I configure realm using:

``` objective-c
+ (void)setDefaultRealmForAccount:(NSString*)userID{
    RLMRealmConfiguration *config = [RLMRealmConfiguration defaultConfiguration];
    config.path = [[[config.path stringByDeletingLastPathComponent]
                    stringByAppendingPathComponent:userID]
                   stringByAppendingPathExtension:@""realm""];
    [RLMRealmConfiguration setDefaultConfiguration:config];
}
```

And everytime I start my app,  I will run this configuration. The data persisted last time was gone.

When should I config realm? Should I config it everytime when I start my app?
"
4511,Neutral,"## Goals

The current Realm API seemed to be focused on accessing persisted object ""on-the-fly"" from anywhere in the app. While this can be beneficial and simple to use, a more complex, layered architecture cannot be achieved with this.
I'm talking about an architecture where database access is limited to a separate **Data** layer so effectivelyI would only use Realm there. I'm trying to implement this architecture using RxSwift, where I would like to pass business entities (which are Realm objects) via Observables to the **Domain** layer, where my business logic is implemented using RxSwift operators and finally, the result will arrive to the **Presentation** layer which includes ViewControllers and Views. The core of this is that everything before the Presentation layer have to be done in a separate thread asynchronously which could be achieved easily with RxSwift. Realm objects however cannot be passed between threads, so it makes this approach impossible. However, in Java, Realm already has a solution which would be nice in Swift. More details:
[https://realm.io/news/realm-java-0.87.0/](https://realm.io/news/realm-java-0.87.0/)
[https://github.com/realm/realm-java/tree/master/examples/rxJavaExample](https://github.com/realm/realm-java/tree/master/examples/rxJavaExample)
## Expected Results

**Add `copyFromRealm()`method** to the Swift API of Realm to enable passing a ""detached"", in-memory version of Realm objects between methods, thus enabling using RxSwift in a multi-layered architecture with business logic in a separate domain layer and a different thread (RxSwift scheduler).
"
4512,Neutral,"
## Goals
Fix compile error issue
## Expected Results
Compile without errors

## Actual Results
![untitled](https://user-images.githubusercontent.com/1732834/28408645-3564f2b0-6d49-11e7-91d7-75bde54726a4.jpeg)


## Steps to Reproduce
Checkout to realm's 1.1.0 version with Cocoapods
Use Xcode 9 beta 3



## Version of Realm and Tooling

Realm framework version: 1.1.0


Xcode version: 9 beta 3

iOS/OSX version: macos 10.12.6

Dependency manager + version: Cocoapods version 1.2.1"
4513,Negative,"some code from my project. step by step:

``` objective-c
RLMRealm *realm = [RLMRealm defaultRealm];

UserRLMO *current = [[UserRLMO allObjects] firstObject];
//current not exist (is null)
UserRLMO *newUser = [[UserRLMO alloc] init];
//... newUser init
[realm transactionWithBlock:^{
    [UserRLMO createInDefaultRealmWithObject:newUser];
}];
//or trying this: 
[realm beginWriteTransaction];
[realm addObject:newUser];
[realm commitWriteTransaction];

 UserRLMO *current = [[UserRLMO allObjects] firstObject];
 NSLog(@""login: %@"",current); /// yeah - it is exist
```

but, when i restart my app - user again not exist. This is similar to i store RLMRealm in memory, but didn't.
"
4514,Neutral,"## Goals

What do you want to achieve?

Trying to share Realm database between App, and two app extensions
## Expected Results

What did you expected to happen?

It to work
## Actual Results

What did happened instead?  

<Notice>: fatal error: 'try!' expression unexpectedly raised an error: Error Domain=io.realm Code=2 ""Unable to open a realm at path '/private/var/mobile/Containers/Shared/AppGroup/CC39427A-47F7-41C5-8B1D-97AC996CD020/db.realm.lock': open() failed: Operation not permitted."" UserInfo={Error Code=2, NSFilePath=/private/var/mobile/Containers/Shared/AppGroup/CC39427A-47F7-41C5-8B1D-97AC996CD020/db.realm.lock, Underlying=open(""/private/var/mobile/Containers/Shared/AppGroup/CC39427A-47F7-41C5-8B1D-97AC996CD020/db.realm.lock"") failed: Operation not permitted, NSLocalizedDescription=Unable to open a realm at path '/private/var/mobile/Containers/Shared/AppGroup/CC39427A-47F7-41C5-8B1D-97AC996CD020/db.realm.lock': open() failed: Operation not permitted.}
## Steps to Reproduce

What are steps we can follow to reproduce this issue?

Write a NetworkExtension app extension for iOS
## Code Sample

open lazy var realm: Realm = {
        guard let directory: URL = FileManager.default.containerURL(forSecurityApplicationGroupIdentifier: ""group.shieldage.ShieldageClient"") else {
            fatalError(""Unable to setup Realm. Make sure to setup your app group in the developer portal"")
        }

```
    let realmPath = directory.appendingPathComponent(""db.realm"")
    var config = Realm.Configuration()
    config.fileURL = realmPath
    Realm.Configuration.defaultConfiguration = config

    return try! Realm()
}()
```

I am using the above code in the App, and the other two NetworkExtension code
## Version of Realm and Tooling

[In the CONTRIBUTING guidelines](https://git.io/vgxJO), you will find a script,
which will help determining these versions.

Realm version: ?
Latest download

Xcode version: ?
8.0

iOS/OSX version: ?
10.0.2 iOS

Dependency manager + version: ?
Downloaded frameworks directly from realm.io
"
4515,Neutral,"## Goals
Running Realm on Swift 3.1

## Expected Results
No error related to Realm

## Actual Results

`Module compiled with Swift 3.0.2 cannot be imported in Swift 3.1: RealmSwift.framework`

After I updated the project with Realm for Swift 3.1 downloaded from [here](https://realm.io/docs/swift/latest/), got this issue `Command failed due to signal: Illegal instruction: 4` in all model files using Realm

Tried removing the frameworks and using CocoaPods instead, but the issues persist.

## Error Description
`CompileSwift normal x86_64 /Users/linhcn/Documents/XcodeProjects/HerdManager/HerdManager/Models/ActionCategory.swift -target x86_64-apple-ios9.3 -enable-objc-interop -sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator10.3.sdk -I /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator -F /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator -F /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator/FileBrowser -F /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator/Realm -F /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator/RealmSwift -F /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator/Toast-Swift -F /Users/linhcn/Documents/XcodeProjects/HerdManager/HerdManager/Frameworks -enable-testing -g -module-cache-path /Users/linhcn/Library/Developer/Xcode/DerivedData/ModuleCache -D DEBUG -D COCOAPODS -serialize-debugging-options -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/HerdManager-generated-files.hmap -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/HerdManager-own-target-headers.hmap -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/HerdManager-all-non-framework-target-headers.hmap -Xcc -ivfsoverlay -Xcc /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/all-product-headers.yaml -Xcc -iquote -Xcc /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/HerdManager-project-headers.hmap -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Products/Debug-iphonesimulator/include -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/DerivedSources/x86_64 -Xcc -I/Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/DerivedSources -Xcc -DDEBUG=1 -Xcc -DCOCOAPODS=1 -Xcc -working-directory/Users/linhcn/Documents/XcodeProjects/HerdManager -emit-module-doc-path /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice~partial.swiftdoc -serialize-diagnostics-path /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice.dia -Onone -module-name HerdManager -emit-module-path /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice~partial.swiftmodule -emit-dependencies-path /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice.d -emit-reference-dependencies-path /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice.swiftdeps -o /Users/linhcn/Library/Developer/Xcode/DerivedData/HerdManager-exytfaymknfhzqabpximiccdzmaa/Build/Intermediates/HerdManager.build/Debug-iphonesimulator/HerdManager.build/Objects-normal/x86_64/Invoice.o`

Realm framework version: 2.5.1

Realm Object Server version: ?

Xcode version: 8.1

iOS/OSX version: 9.3

"
4516,Negative,"We ought to use more descriptive generic parameter names. Our current naming leads to confusing error messages in pretty common cases.

``` swift
let x = results.sum(ofProperty: ""foo"")
```

For example, the above line of code will fail to compile with error ""Generic parameter 'U' could not be inferred."" What is `U`? Maybe it would be better named `Result` or `PropertyType`.
"
4517,Neutral," have this kind of property how can i ignore this property
` var photos = Array<RLMFile>()
`
I am ignoring below way 
```swift
override class func ignoredProperties() -> [String] {
        return [""photos"" as String]
    }
```
but didn't ignored #2734
"
4518,Negative,"With an array you can replace its contents by doing:
```swift
a.replaceSubrange(a.indices, with: [1, 2, 3])
```

With `List<T>` you get an error because `List.Indices` is `DefaultRandomAccessIndices<List<T>>`, for which there's no overload. This should really work.

I took a brief stab at making it work but ran into a mysterious problem.  [`RangeReplaceableCollection`](https://developer.apple.com/reference/swift/rangereplaceablecollection) provides some overloads that take a `CountableRange<Int>`, so I tried changing `List.Indices` to be an alias for `CountableRange<Int>`, but for some reason the Swift compiler still won't use that overload. It appears to only see the overloads that take a `Range<Int>`."
4519,Negative,"## Goals

Report a brutal bug.

## Expected Results

Not Crash

## Actual Results

Crash

## Steps to Reproduce

Add data contain unicode
Get that unicode data --> crash

## Code Sample
````Swift
import Cocoa
import RealmSwift

@NSApplicationMain
class AppDelegate: NSObject, NSApplicationDelegate { //EXC_BAD_ACCESS at this line

    @IBOutlet weak var window: NSWindow!
    
    func applicationDidFinishLaunching(_ aNotification: Notification) {
        // Insert code here to initialize your application
        Database.add()
        _ = Database.get()
    }
}

class Database {
    static var realm: Realm {
        return try! Realm()
    }
    
    static func add() {
        try! realm.write {
            realm.add(NamerObject())
        }
    }
    
    static func get() -> String? {
        return realm.objects(NamerObject.self).first?.newName
    }
}

class NamerObject: Object {
    dynamic var newName: String = ""tên mới""
}
````

If you want to test yourself, complete project here:
[RealmUnicode.zip](https://github.com/realm/realm-cocoa/files/623984/RealmUnicode.zip)

## Version of Realm and Tooling

Realm version: Newest 
(i just add github ""realm/realm-cocoa"" in my Cartfile and run carthage update this morning, nothing else)

Xcode version: Version 8.1 (8B62)

Swift version: 3.0.1

OSX: 10.11.6 (15G1108)

Pretty sure it happens with swift 2.3 xcode 8.0 too. I doubt that this happen in many platforms and versions

## What cause the bug: 

Property name begins with ""new*"" like ""newA, newB, newXXX""

## How to fix

change 
````Swift    
dynamic var newName: String = ""tên mới""
````
to 
````Swift    
dynamic var name: String = ""tên mới"" // or do whatever that not use ""new*"" for property name
````

## Broke-in-tear comment:

It took me tons of time to figure out why it crash while there're no clue about it, i have to cut of my code many, many time to the version that i reported.
Hope Realm team can fix or at least warn other about this because bug like this is so brutal, it might cause nightmare to other (like what happen to me)

"
4520,Neutral,"<!---

**Questions**: If you have questions about how to use Realm, ask on
[StackOverflow](http://stackoverflow.com/questions/ask?tags=realm).
We monitor the `realm` tag.

**Feature Request**: Just fill in the first two sections below.

**Bugs**: To help you as fast as possible with an issue please describe your issue
and the steps you have taken to reproduce it in as many details as possible.

-->

## Goals
<!--- What do you want to achieve? -->

## Expected Results
<!--- What did you expect to happen? -->

## Actual Results
<!--- What happened instead?
e.g. the stack trace of a crash
-->

## Steps to Reproduce
<!--- What are steps we can follow to reproduce this issue? -->

## Code Sample
<!---
Provide a code sample or test case that highlights the issue.
If relevant, include your model definitions.
For larger code samples, links to external gists/repositories are preferred.
Alternatively share confidentially via mail to help@realm.io.
Full Xcode projects that we can compile ourselves are ideal!
-->

## Version of Realm and Tooling
<!---
[In the CONTRIBUTING guidelines](https://git.io/vgxJO), you will find a script,
which will help determining some of these versions.
-->
Realm framework version: ?

Realm Object Server version: ?

Xcode version: ?

iOS/OSX version: ?

Dependency manager + version: ?
"
4521,Positive,"I've been evaluating Realm and its performance.  An important use case of mine involves large numbers (100000+) of ""micro objects"".  These are really small objects with no more than a few fields, most of which are numbers (for this test no more than 64 bytes of data total).  Query performance is very good, even with high object counts, but adding, deleting, and modifying large numbers of objects from Realm can be very slow.

**Test setting:**
- Realm version:  0.83.
- Hardware / OS:  2.3Ghz Retina MacBook Pro / OS X 10.9.4.
- No properties are indexed or have any attributes (confirmed with attributesForProperty:).
- Using the defaultRealm.
- Setting `[RLMRealm useInMemoryDefaultRealm]` has no effect (not that I could run this way for production).
- Setting `defaultRealm.autorefresh = NO` has no effect (and it always seems to be turned on again during subsequent uses of the realm).

**Add objects test:**
I am generating n RLMObjects, adding them to an NSArray, then timing adding that array to the realm with `[realm transactionWithBlock:^{  [realm addObjectsFromArray:array];  }];`
- Adding a 100000 object array:  10.891676 seconds!
- Adding a 50000 object array:  2.418253 seconds!
- Adding a 25000 object array:  0.660159 seconds.
- Adding a 10000 object array:  0.131164 seconds.

It does not seem to matter how many objects are in the realm prior to adding the objects.  Adding a 10000 object array takes the same time if 0 objects are in the Realm or 1 million objects are in the Realm.

**Remove objects test:**
I am taking n RLMObjects that exist in the Realm, adding them to an NSArray, then timing removing that array from the realm with `[realm transactionWithBlock:^{  [realm deleteObjects:itemsToRemove];  }];`
- Removing a 100000 object array:  10.855915 seconds!
- Removing a 50000 object array:  2.325231 seconds!
- Removing a 25000 object array:  0.597455 seconds.
- Removing a 10000 object array:  0.102262 seconds.

It's basically the same performance as the add case.  Like the add case, the number of objects that exist in the Realm do not seem to impact delete performance.

**Modify objects test:**
I am taking the first n RLMObjects from a 100000 object Realm and changing a single integer property similar to above.
- Modifying 100000 objects:  9 _minutes_ 8.5386 seconds! (!!)
- Modifying 50000 objects:  4 _minutes_ 36.5388 seconds! (!!)
- Modifying 25000 objects:  2 _minutes_ 18.1554 seconds! (!!)
- Modifying 10000 objects:  55.511092 seconds! (!!)
- Modifying 5000 objects:  27.538283 seconds! (!)
- Modifying 1000 objects:  5.507278 seconds!
- Modifying 500 objects:  2.797262 seconds!
- Modifying 100 objects:  0.545877 seconds!

Taking the first n RLMObjects from a 10000 object Realm and changing a single integer property similar to above.
- Modifying 10000 objects:  5.118958 seconds!
- Modifying 5000 objects:  2.646211 seconds!
- Modifying 1000 objects:  0.525338 seconds!
- Modifying 500 objects:  0.270613 seconds!
- Modifying 100 objects:  0.056823 seconds.

The number of objects in the Realm do impact performance here.  From these results, when you have 10x the objects in the Realm, the result is about 10x slower performance for the same number of objects modified in a single transaction!

**Takeaways:**
- When adding and removing items from a Realm, generally, using more transactions with fewer objects performs significantly faster than using fewer transitions with more objects.  i.e., Add 10 batches of 10K objects instead of 1 batch of 100K objects.  I have not approximated the point of diminishing returns with this.  This shouldn't be.  When adding an array of objects, Realm knows the total number of items it is getting and has a schema for all of them.  It should be able to make decent estimates for the amount of memory it needs to allocate (and with some objects, perfect estimates) and the space it needs to free.
- Modifying is show-stopper expensive, even in a ""very small"" (for my case) 10K object Realm with fewer objects being modified.  While I have not tried this, from the data above it seems like it would be faster to query Realm for the objects in question, delete them, recreate new instances with the correct properties, and add them, combining it with the multi-batch approach mentioned above.  This should not be the case.  That's more work (and more needless notifications generated).
- Deleting objects taking as long as adding objects - I don't know what to think.  It is not vacuuming the Realm file.

**Other notes:**
- Memory use remained acceptable throughout the testing.

I generally like Realm's API and how to thinks about things even with what it has missing.  I'd like to use it, but it doesn't seem particularly suited for this use case.  Thoughts about what can be done here or what the timeline is for improvements?
"
4522,Neutral,"I want to delete an object with all its referencing objects. Since there is not yet a cascading delete I do the following:

```
try! self.realm.write {
    self.realm.delete(customer.address);
    self.realm.delete(customer.contact);
    self.realm.delete(customer.history);
    self.realm.delete(customer); // app crashes here
}
```

Deleting the address, the contact and the history object works fine. But when it comes to deleting the customer object itself the error is:

`'RLMException', reason: 'Object has been deleted or invalidated.'`

I thought doing all this inside the write transaction would do the trick but it doesnt. So how am I supposed to delete the customer object after I deleted all referenced objects?"
4523,Negative,"Hi,

I'm using Realm `v0.98.3` and ReactiveCocoa `v4`. I have an issue with `List`. I have a similar case as the documentation your wrote.

```
public class Dog: Object {
    dynamic public var name: String = """"
}

public class Person: Object {

    dynamic public var name: String = """"
    public let dogs = List<Dog>()

}

public class ViewModel {

    public var person: AnyProperty<Person?> { return AnyProperty(_person) }

    private var _person = MutableProperty<Person?>(nil)

    public func setExistingPerson(person: Person) {
        // print(person) ==> List of dogs is OK
        self._person.value = person
        // print(self._person.value) ==> The list of dogs is empty.
    }

}

final class ViewController: UIViewController {

    private var db: Realm?
    private let viewModel = ViewModel()

    override func viewDidLoad() {
        super.            self.db = try Realm()
        } catch { }

        if let existingPerson = self.db?.objectForPrimaryKey(Person.self, key: ""puri"") {
            self.viewModel.setExistingPerson(existingPerson)
        }
    }

}
```

If I print the list of People before assign it to a `MutableProperty`, the objects contains the correct list of dogs. After assign it, if I execute `print(db.objects(Person.self))` the list of dogs for each person is empty. It has a weird behavior, it seems like it's deleting the reference for list objects after assign it. I don't understand why.

Thanks
"
4524,Negative,"## Goals

Sometimes, we get reports in a production app about the fact that Realm objects are accessed from an incorrect thread. Troubleshooting those could be a little easier if we get some more information in the exception.
## Expected Results

Instead of just getting the plain exception, we would like to get the following result:

```
Realm object of type <classname> accessed from incorrect thread <thread_name>.
```

This would give you at least a clue on where to start looking.

The problem in Objective-C is that when you get this error in a block, it's very hard to find the correct stack trace that leads you to the source of the problem.
## Version of Realm and Tooling

We are using the Objective-C version (0.98.5) of the Realm SDK on iOS. We are using CocoaPods as the dependency manager.
"
4525,Negative,"Every time I delete objects on my Realm Object Server, I can't open the database again. My app crash with this error: 

`libc++abi.dylib: terminating with uncaught exception of type realm::_impl::TransactLogParser::BadTransactLog: Bad transaction log`

If I try to open the database using Realm Browser, the app crash too.
## Goals

I want to be able to open a database after removing objects from it
## Steps to Reproduce

1- Insert objects into a Realm Object Server
2- Open your DB using Realm Object Server. Your data is there 👍
3- Delete your objects using `try! realm.write { realm.delete(youModelName) }`
4- Try to connect to your Realm Object Server... the app crash with the _bad transaction log_ error. 😢
## Version of Realm and Tooling

Realm version: **2.0.0**

Xcode version: **8.0**

iOS/OSX version: **10**

Dependency manager + version: **CocoaPod 1.1.0.rc.2**
"
4526,Neutral,"## Goals

Filter an array based on it's child

What do you want to achieve?

An array is filtered based on it's child

What did you expected to happen?

## Actual Results

Array is filtered, but not completely, I.e missing objects that should be in  there

## Steps to Reproduce

Create two Realm objects, and filter based on child.

## Code Sample

Example:

```swift
class Class: Object {
    dynamic var name = """"
    dynamic var semester: Semester?

    convenience init(withName name: String, inSemester semester: Semester) {
        self.init()
        self.name = name
        self.semester = semester
    }
    
}
```

```swift
class Semester: Object {
    static let terms = [""Spring"", ""Summer"", ""Fall"", ""Winter""]
    dynamic var term = """"
    dynamic var year = 0
    
    convenience init(withTerm term: String, andYear year: Int) {
        self.init()
        self.term = term
        self.year = year
    }
    
    
    override static func ignoredProperties() -> [String] {
        return [""terms""]
    }
    
    // MARK: Equatable overrides
 
    static func ==(lhs: Semester, rhs: Semester) -> Bool {
        if (lhs.term == rhs.term) && (lhs.year == rhs.year) { return true }
        else { return false }
    }

    override func isEqual(_ object: Any?) -> Bool {
        guard let sem = object as? Semester else {
            return false
        }
        if (self.term == sem.term) && (self.year == sem.year) { return true }
        else { return false }
    }
    
}
```

Now lets say you have an array of Classes (Realm Results)

```swift
 var arr = [class1, class2, class3]
// For example purposes class1, and class2 are in the same semester
// In other words, doing class1.semeser == class2.semester return true (because of equatable ==)

// Doing this with a semester equal to class1, and class2 I'd expect an array with [class1, class2]
let filtered = realm.objects(Class.self).filter(""semester == %@"", semester)

// However what actually gets returned is just [class1]

// So the above doesn't work, but this does
let working = realm.objects(Class.self).filter(""semester.term == %@ AND semester.year == %@"", semester.term, semester.year)
```

Not sure what could be going on (not that experienced using Realm)
But I would imagine that if I overrode Equatable (==, and isEqual) that both solutions would work.

## Version of Realm and Tooling

Realm version: 2.0.1

Xcode version: 8.1

iOS/OSX version: 10.0

Dependency manager + version: CocoaPods
"
4527,Neutral,"## Goals
Remove Realm database and replace with a new one.

## Expected Results
After the file has been deleted according to the [documentation](https://realm.io/docs/objc/latest/#deleting-realm-files) (inside and autorelease pool) new file should not complain about having different keys especially with the file nonexistent in the filesystem.

## Actual Results
```
2017-08-31 17:42:54.466 App Staging[28778:7786471] *** Terminating app due to uncaught exception 'RLMException', reason: 'Realm at path '/Users/ppaulojr/Library/Developer/CoreSimulator/Devices/152AC3D5-FD24-40DD-AFD7-5A3C4F6EE282/data/Containers/Data/Application/60245C8B-601A-41C9-9FDE-61FEEC6F2EBE/Documents/default.realm' already opened with different encryption key'
*** First throw call stack:
(
	0   CoreFoundation                      0x000000010b6d0b0b __exceptionPreprocess + 171
	1   libobjc.A.dylib                     0x000000010b135141 objc_exception_throw + 48
	2   Realm                               0x000000010764796b +[RLMRealm realmWithConfiguration:error:] + 3179
	3   Realm                               0x0000000107644d52 +[RLMRealm defaultRealm] + 114
	4   App Staging                      0x00000001068160c7 +[RealmManager deleteRealm:numRetries:] + 247
	5   App Staging                      0x0000000106815fc9 +[RealmManager deleteRealm] + 41
	6   App Staging                      0x000000010676e0a9 -[LoginNGViewController cancelLoginHandler] + 537
	7   App Staging                      0x000000010676d33c __36-[LoginNGViewController normalLogin]_block_invoke + 204
	8   App Staging                      0x0000000106672cf0 __61-[RealmLoginOperation dataLoaderDidFailToLoadData:withError:]_block_invoke + 240
	9   libdispatch.dylib                   0x000000010d1d605c _dispatch_client_callout + 8
	10  libdispatch.dylib                   0x000000010d1bb9a1 dispatch_once_f + 503
	11  App Staging                      0x0000000106672b41 -[RealmLoginOperation dataLoaderDidFailToLoadData:withError:] + 385
	12  App Staging                      0x0000000106817e21 __41-[AppDataLoader prepareURLSessionTask]_block_invoke + 929
	13  App Staging                      0x0000000106789ace __98-[AppHttpSessionManager dataTaskWithRequest:uploadProgress:downloadProgress:completionHandler:]_block_invoke + 1438
	14  AFNetworking                        0x0000000106c10f49 __72-[AFURLSessionManagerTaskDelegate URLSession:task:didCompleteWithError:]_block_invoke + 201
	15  libdispatch.dylib                   0x000000010d1ad4a6 _dispatch_call_block_and_release + 12
	16  libdispatch.dylib                   0x000000010d1d605c _dispatch_client_callout + 8
	17  libdispatch.dylib                   0x000000010d1b7583 _dispatch_main_queue_callback_4CF + 787
	18  CoreFoundation                      0x000000010b695909 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 9
	19  CoreFoundation                      0x000000010b65bae4 __CFRunLoopRun + 2164
	20  CoreFoundation                      0x000000010b65b016 CFRunLoopRunSpecific + 406
	21  GraphicsServices                    0x000000010f288a24 GSEventRunModal + 62
	22  UIKit                               0x000000010939c134 UIApplicationMain + 159
	23  App Staging                      0x00000001066f79f7 main + 151
	24  libdyld.dylib                       0x000000010d22265d start + 1
	25  ???                                 0x0000000000000003 0x0 + 3
)
libc++abi.dylib: terminating with uncaught exception of type NSException
```

**File:** /Users/ppaulojr/Library/Developer/CoreSimulator/Devices/152AC3D5-FD24-40DD-AFD7-5A3C4F6EE282/data/Containers/Data/Application/60245C8B-601A-41C9-9FDE-61FEEC6F2EBE/Documents/default.realm is not present

## Steps to Reproduce
Discussion about the issue began at: https://stackoverflow.com/questions/45968363/rlmexception-after-key-change-already-opened-with-different-encryption-key-aft?noredirect=1#comment78936779_45968363 where some code samples have been provided.

## Code Sample
Unfortunately, we cannot share the code base, however, some sample code has been posted at https://stackoverflow.com/questions/45968363/rlmexception-after-key-change-already-opened-with-different-encryption-key-aft?noredirect=1#comment78936779_45968363

## Version of Realm and Tooling
```
ProductName:	Mac OS X
ProductVersion:	10.12.5
BuildVersion:	16F73

/Applications/Xcode.app/Contents/Developer
Xcode 8.3.3
Build version 8E3004b

/Users/ppaulojr/.rvm/gems/ruby-2.3.0@App/bin/pod
1.0.1
Realm (2.10.0)

/usr/local/bin/bash
GNU bash, version 4.4.12(1)-release (x86_64-apple-darwin16.3.0)

(not in use here)

/usr/local/bin/git
git version 2.14.1
```"
4528,Negative,"## Goals

Install Realm in a new Swift application
## Expected Results

I expected to follow the Carthage installation instructions on the Getting Started section of the Realm docs at Realm.io
## Actual Results

Following the instructions results in a linker error with frameworks not located. 
## Steps to Reproduce

Follow the Carthage installation instructions using Xcode 7.3.1 
## Code Sample

n/a
## Suggested fix

Correct installation instructions.  With Xcode 7.3.1 simply dragging Realm.framework and RealmSwift.framework binaries into the embedded binaries section of the General tab in Xcode is all that is required.  The app store submission bug that the complex instructions addresses is an Xcode 6.x specific bug. 

This is a big time suck if you are new to using embedded binaries as you have to figure out why you are getting linker errors
## Version of Realm and Tooling

Realm version: ?  1.0.2

Xcode version: ?  7.3.1

iOS/OSX version: ?  El Capital 10.11.5

Dependency manager + version: ? Carthage 
"
4529,Neutral,"Creating a new issue based off the discussion in this PR: https://github.com/realm/realm-cocoa/pull/2906.

For component work, it is helpful to have a single code-base that will work with Realm objects. To facilitate that there needs to be an interface that makes available the underlying ObjC objects within the Swift objects.

It was suggested adding:

``` swift
@objc public class ObjectiveCCompability {
  public func rlmResults(results: Results) -> RLMResults { ... }
  public func rlmArray(list: List) -> RLMArray { ... }
  public func rlmCollection(collection: RealmCollectionType) -> RLMCollection { ... }
  ...
}
```
"
4530,Neutral,"Will now contain:
- Blocks
- KVO
"
4531,Neutral,"hi,

We are using RealmSwift version 0.93.0

We just started beta testing our product and one of the crash reports coming back from crashlytics I don't understand what's happening, here the crashlog: 

```
Thread : Crashed: com.apple.main-thread
0  Realm                          0x0000000100cd1050 _ZN5realm5Array13init_from_memENS_6MemRefE + 28
1  Realm                          0x0000000100d5b458 _ZN5realm11StringIndex8DoInsertEmimNS_10StringDataE + 380
2  Realm                          0x0000000100d5b458 _ZN5realm11StringIndex8DoInsertEmimNS_10StringDataE + 380
3  Realm                          0x0000000100d5ae88 _ZN5realm11StringIndex10TreeInsertEmimNS_10StringDataE + 52
4  Realm                          0x0000000100d5ae48 _ZN5realm11StringIndex18insert_with_offsetEmNS_10StringDataEm + 144
5  Realm                          0x0000000100d31b98 _ZN5realm6Column9do_insertEmxm + 472
6  Realm                          0x0000000100da1228 _ZN5realm5Table16insert_empty_rowEmm + 120
7  Realm                          0x0000000100c98dc0 RLMAddObjectToRealm + 792
8  Realm                          0x0000000100c87dc0 _ZL18RLMAddLinkedObjectP13RLMObjectBaseP8RLMRealmm + 316
9  Realm                          0x0000000100c85ffc _ZL11RLMSetValueP13RLMObjectBasemS0_m + 484
10 Realm                          0x0000000100c88450 ___ZL13RLMMakeSetterIU8__strongP13RLMObjectBaseS2_EPFvvEmb_block_invoke_2 + 28
11 Cameo                          0x000000010016e370 
12 Cameo                          0x000000010016dc1c 
13 Realm                          0x0000000100cb9d60 -[RLMRealm transactionWithBlock:] + 60
14 RealmSwift                     0x0000000100ee9bcc _TFC10RealmSwift5Realm5writefS0_FFT_T_T_ + 228
15 Cameo                          0x000000010016c578 
16 Cameo                          0x000000010016d344 
17 Cameo                          0x000000010016d544 
18 Cameo                          0x000000010009c068 
19 Cameo                          0x0000000100097d20 
20 Cameo                          0x00000001000947d0 
21 Alamofire                      0x0000000100727144 _TFFFC9Alamofire7Request8responseFDS0_FT5queueGSqCSo8NSObject_10serializerFTCSo12NSURLRequestGSqCSo17NSHTTPURLResponse_GSqCSo6NSData__TGSqPSs9AnyObject__GSqCSo7NSError__17completionHandlerFTS2_GSqS3__GSqPS5___GSqS6___T__DS0_U_FT_T_U_FT_T_ + 496
22 libdispatch.dylib              0x0000000196c21994 _dispatch_call_block_and_release + 24
23 libdispatch.dylib              0x0000000196c21954 _dispatch_client_callout + 16
24 libdispatch.dylib              0x0000000196c2620c _dispatch_main_queue_callback_4CF + 1608
25 CoreFoundation                 0x0000000184d637f8 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12
26 CoreFoundation                 0x0000000184d618a0 __CFRunLoopRun + 1492
27 CoreFoundation                 0x0000000184c8d2d4 CFRunLoopRunSpecific + 396
28 GraphicsServices               0x000000018e4a36fc GSEventRunModal + 168
29 UIKit                          0x0000000189852fac UIApplicationMain + 1488
30 Cameo                          0x000000010026ce54 
31 libdyld.dylib                  0x0000000196c4ea08 start + 4
```
"
4532,Neutral,"## Goals

Filter/query an object

## Expected Results

Have the object returned

## Actual Results
The object is returned, but with default values

## Steps to Reproduce

Call my filter function
```swift
self.channel = DatabaseManager.channel(with: channelId)
```

## Code Sample

Model:


```swift
class func channel(with id:Int) -> MSChannel? {
        let realm = try! Realm()
        let predicate = NSPredicate(format: ""identifier = %d"", id)
        let channels = realm.objects(MSChannel.self).filter(predicate)
        let array = Array(channels)
        return array.first
    }
```

## Version of Realm and Tooling

Realm version: 2.1.0

Xcode version: 8.1

iOS/OSX version: iOS 9

Dependency manager + version: Cocapods 1.1.1

I tried querying all objects, and they all come as default:
![screenshot 2016-12-09 02 22 04](https://cloud.githubusercontent.com/assets/768893/21033024/57af4a98-bdb6-11e6-8de8-aca7877ca359.png)

And my fetched object, is, of course, also a default one:
![screenshot 2016-12-09 02 23 10](https://cloud.githubusercontent.com/assets/768893/21033039/791beeca-bdb6-11e6-85b5-517ef06da508.png)

And my objects actually exist (queried with Realm Mac OS app):
![screenshot 2016-12-09 02 25 06](https://cloud.githubusercontent.com/assets/768893/21033081/c1481246-bdb6-11e6-9a7f-30ca9bd3a508.png)

And yes, all properties on my model are dynamic
```swift
class MSChannel: Object, Mappable {
    
    dynamic var identifier: Int = MappingDefaultIdentifer
    private dynamic var privateSection = MSChannelSection.none.rawValue
    var section: MSChannelSection {
        get { return MSChannelSection(rawValue: privateSection)! }
        set { privateSection = newValue.rawValue }
    }
    
    private dynamic var privateType = MSChannelType.none.rawValue
    var type: MSChannelType {
        get { return MSChannelType(rawValue: privateType)! }
        set { privateType = newValue.rawValue }
    }
    
    dynamic var name: String?
    dynamic var descriptionString: String?
    dynamic var context: MSChannelContext?
    dynamic var membersCount: Int = 0
//    dynamic var tags: [String]? // Channel Details
    dynamic var isPrivate = false
    dynamic var createdAt: Date?
    dynamic var directMessageEntity: Entity?
    dynamic var owner: Entity?
    
    required convenience init?(map: Map) {
        self.init()
    }
    
    override class func primaryKey() -> String? {
        return ""identifier""
    }
    
    func mapping(map: Map) {
        if identifier == MappingDefaultIdentifer {
            identifier              <- map[""id""]
        }
        section                 <- (map[""section""], EnumTransform<MSChannelSection>())
        type                    <- (map[""channel_type""], EnumTransform<MSChannelType>())
        name                    <- map[""name""]
        descriptionString       <- map[""description""]
        context                 <- map[""entity_context""]
        membersCount            <- map[""entity_count""]
//        tags                    <- map[""raw_tags""]
        isPrivate               <- map[""is_private""]
        createdAt               <- (map[""created_at_ts""], DateTransform())
        directMessageEntity     <- map[""direct_message_entity""]
        owner     <- map[""owner""]
    }
}
```
"
4533,Positive,"We are receiving crashes from Fabric, here is the link to the crash:

http://crashes.to/s/03114cd32b8

Realm version: 1.1.0

Xcode version: 8.2.1

iOS/OSX version: You can find from the link above

Dependency manager + version: Cocoapods 1.1.1

Please let me know if you want more info about this crash, we couldn't reproduce this, but in fabric we receiving a lot of this.

Thanks in advance
"
4534,Neutral,"<!---

**Questions**: If you have questions about how to use Realm, ask on
[StackOverflow](http://stackoverflow.com/questions/ask?tags=realm).
We monitor the `realm` tag.

**Feature Request**: Just fill in the first two sections below.

**Bugs**: To help you as fast as possible with an issue please describe your issue
and the steps you have taken to reproduce it in as many details as possible.

-->

## Goals
<!--- What do you want to achieve? -->

## Expected Results
<!--- What did you expect to happen? -->

## Actual Results
<!--- What happened instead?
e.g. the stack trace of a crash
-->

## Steps to Reproduce
<!--- What are steps we can follow to reproduce this issue? -->

## Code Sample
<!---
Provide a code sample or test case that highlights the issue.
If relevant, include your model definitions.
For larger code samples, links to external gists/repositories are preferred.
Alternatively share confidentially via mail to help@realm.io.
Full Xcode projects that we can compile ourselves are ideal!
-->

## Version of Realm and Tooling
<!---
[In the CONTRIBUTING guidelines](https://git.io/vgxJO), you will find a script,
which will help determining some of these versions.
-->
Realm framework version: ?

Realm Object Server version: ?

Xcode version: ?

iOS/OSX version: ?

Dependency manager + version: ?
"
4535,Neutral,"hi guys, i'm using RealmsSwift.
i have two class:

``` swift
class AA: Object {
    let bb = List<BB>()
}
class BB: Object {
    dynamic var id1 : String = """"
    dynamic var id2 : String = """"
}
```

``` swift
var a = AA()
var b = BB()
b.id1 = ""1""
b.id2 = ""1""
a.bb.append(b)

var b2 = BB()
b2.id1 = ""2""
b2.id2 = ""2""
a.bb.append(b2)

public let realm = Realm()
realm.write{
    realm.add(a)
}
```

How should i use the **filter** to get AA whose bb has a row (id1 = '1' and id2 = '2')
if i write 

``` swift
realm.objects(AA).filter(""ANY  bb.id1 = '1' AND ANY bb.id2 = '2'"").count  // get 1,not right
```

and 

``` swift
realm.objects(AA).filter(""ANY  (bb.id1 = '1' AND bb.id2 = '2')"")  // error
```

so how should i use filter?
"
4536,Positive,"Hi,

I want to create an RLMObject that only one exists. For example, ""UserPreferences"". 
How to check if ""UserPreferences"" exists?
How to create only one object in database?

Thanks!
"
4537,Positive,"Hi,

I am facing error like below ""library not found for -lRealm""

Can you please help me to build this project?

```
library not found for -lRealm
```
Best Regards,
Nikunj Jadav

"
4538,Positive,"I pick the ""iphone5s"",""iphone6""..or ""iphone6s"" simulator,but it doesn't work.
thank you.

![1](https://cloud.githubusercontent.com/assets/3182964/13939498/8d25c0b8-f010-11e5-88a3-bc01710b19ae.jpg)
![2](https://cloud.githubusercontent.com/assets/3182964/13939499/8d26d8c2-f010-11e5-8cbb-f3b54d08db30.jpg)
![3](https://cloud.githubusercontent.com/assets/3182964/13939500/8d273aba-f010-11e5-8974-89725906679b.jpg)
"
4539,Neutral,"So I have a app extension that writes to my shared container that has my realm file. My app is just a visual list of all the objects within my table in the realm file. I following mostly what apple has done with extensions  and notice that when I write something from the extension and then head over to my main app, that app for some reason does not see the new object. 

Currently I am just reopening the realm that they share to read from it. The refresh for this instance doesn't seem to work with it. 

Would this be a issue with how long it takes to write to my realm file? 
"
4540,Positive,"Hi,

I'm using latest version of xCode 6 (beta4) and I'm try using Realm in a swift iOs project with CocoaPods without any success.

I'm getting the following error on build time : 
<b>File not Found ""Realm/Realm-Bridging-Header.h"" </b>

I notice that @jpsim post a [radar](http://openradar.appspot.com/radar?id=5771227683618816) to solve this problem.

Until xCode team fixes the issue, is there a workaround?

Thanks,

PS : Realm looks very powerful, I can't wait for running it on my app. :)
"
4541,Neutral,"Hi there, currently I'm observing a strange behaviour while using Realm. It seems that every time I open the my App (be it a restart of the app, or a background foreground process) seems to increase the size of the realm file without having new objects being stored. So the amount of objects stored are not changing at least not dramatically, explaining an increase of Realm file size by 1000%. Weird?! 

So I'm not sure if this is a problem how I implemented/integrated Realm in my app or if it is a issue from your side. 

A test with my iPhone 6s has shown that the Realm file increased from 4 mb to 200 mb by closing, reopening, moving it to background and back to foreground again multiple times.

Is there away to extract a Realm file to see where/what all this data is if it is not coming from stored object data it must be Metadata, right? I can also provide a copy of the big file!

**This is the full stack trace (Crashlytics):**

Fatal Exception: RLMException
mmap() failed: Cannot allocate memory size: 2147483648 offset: 0


`
Fatal Exception: RLMException
0  CoreFoundation                 0x192c811b8 __exceptionPreprocess
1  libobjc.A.dylib                0x1916b855c objc_exception_throw
2  MyApp         0x1002eb170 RLMSetErrorOrThrow(NSError*, NSError* __autoreleasing*) (RLMUtil.mm:269)
3  MyApp         0x1002d44fc RLMRealmTranslateException(NSError* __autoreleasing*) (RLMRealm.mm:242)
4  MyApp         0x1002d5220 +[RLMRealm realmWithConfiguration:error:] (RLMRealm.mm:299)
5  MyApp         0x1002d4154 +[RLMRealm defaultRealm] (RLMRealm.mm:165)
6  MyApp         0x1004ed7dc -[VLRealm setupRealms] (VLRealm.m:60)
7  MyApp         0x1000b19b4 -[VLCAppDelegate application:didFinishLaunchingWithOptions:] (VLCAppDelegate.m:51)
8  UIKit                          0x198ba86a4 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:]
9  UIKit                          0x198db8a98 -[UIApplication _callInitializationDelegatesForMainScene:transitionContext:]
10 UIKit                          0x198dbe808 -[UIApplication _runWithMainScene:transitionContext:completion:]
11 UIKit                          0x198dd3104 __84-[UIApplication _handleApplicationActivationWithScene:transitionContext:completion:]_block_invoke.3139
12 UIKit                          0x198dbb7ec -[UIApplication workspaceDidEndTransaction:]
13 FrontBoardServices             0x19485792c __FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK__
14 FrontBoardServices             0x194857798 -[FBSSerialQueue _performNext]
15 FrontBoardServices             0x194857b40 -[FBSSerialQueue _performNextFromRunLoopSource]
16 CoreFoundation                 0x192c2eb5c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__
17 CoreFoundation                 0x192c2e4a4 __CFRunLoopDoSources0
18 CoreFoundation                 0x192c2c0a4 __CFRunLoopRun
19 CoreFoundation                 0x192b5a2b8 CFRunLoopRunSpecific
20 UIKit                          0x198ba17b0 -[UIApplication _run]
21 UIKit                          0x198b9c534 UIApplicationMain
22 MyApp         0x1000c4ef4 main (main.m:14)
23 libdispatch.dylib              0x191b3d5b8 (Missing)
`

**Metadata:**

Realm version: 2.4.2

Xcode version: 8.2.1

iOS/OSX version: iOS 10.2

Dependency manager + version: Cocoapods 1.0.1

**Updated 24.02.2017 12.15:**

After moving back to Realm version 2.0.3 used in a previous release and not touching my Realm code it seems this issue is not occurring. "
4542,Neutral,"I've been using RLMResults as my data model for my tableview. One of my models has an optional property (date). I need to sort my RLMResults array using this property.

Here's my Goal model:

``` swift
class DateObject: RLMObject {
    dynamic var date: NSDate = NSDate()
}

class Goal: RLMObject {
    dynamic var user = User()
    dynamic var name = """"
    dynamic var desc = """"
    ...
    dynamic var targetDate: DateObject?
}
```

Here's my RLMResults (without sort):

``` swift
var bodyGoals:RLMResults {
        get {
            var predicate = NSPredicate(format: ""user.email = %@ AND ..."", user!.email, ...)   
            return Goal.objectsWithPredicate(predicate)
        }
    }
```

This is how I was trying to sort:

``` swift
return Goal.objectsWithPredicate(predicate).sortedResultsUsingProperty(""targetDate.date"", ascending: false)
```

Which gives me the error below (which makes sense):

``` swift
Terminating app due to uncaught exception 'Invalid sort column', reason: 'Column named '(null)' not found.'
```

What options do I have now? What would be the best approach to solve this? Is there something like sortedArrayUsingComparator to RLMResults?
"
4543,Positive,"Realm Browser will sometimes shift the column names.  Test database is here: https://dl.dropboxusercontent.com/u/63662632/realm.realm

When going to ""Match"" via the panel on the left, everything is displayed as expected.

When going to Competition -> Click on ""Match (200)"" the columns appear to be shifted.  Under the heading ""match"" there is ""Team (3)"", and under the heading ""blueTeams"" there is the officalRedScore.

I assume that this is an issue with Realm Browser, because it works when viewing the matches directly from the panel on the left.

Thanks,
Wesley.
"
4544,Neutral,"Hi!
Using Realm 0.94.1, Xcode 6.

Imagine we have two classes: Person and Dog, with a one-to-many relationship, the only thing that Dog doesn't know about the person. 
And I wish to make a migration that will add a Person property to Dog class.

Before I post what i've tried so far, I guess it's worth asking first: did you guys implement such possibility?
"
4545,Neutral,"Something is creating `~` folders inside the workspace, and inside that there is an empty `Library/Logs/CoreSimulator/CoreSimulator.log` file. I don't think that this is really causing any problems, but there is probably some code not quite doing what it thinks it is somewhere that should be fixed."
4546,Neutral,"## Goals

Load new record on top of the table view
## Expected Results

See new data on the top of a table view
## Actual Results

See duplicate of the last record on a table view
## Steps to Reproduce

Set .sorted as ""ascending: false""
You can watch recorded video:
https://dl.dropboxusercontent.com/u/99676324/realm.mp4
## Code Sample

https://www.dropbox.com/sh/i4e2b495domrqg6/AABTz-iqwd5umHHQJDpi1bu7a?dl=0
## Version of Realm and Tooling

Realm version: Realm Swift 2.0.2

Xcode version: 8

iOS/OSX version: 8+
"
4547,Neutral,"I have removed the class in my code. Now, how can I remove the table?
"
4548,Neutral,"#2766 Is there a reason that the pre-built Carthage.framework.zip does not contain a dSYM?
#2822 Use `carthage archive` command to create Carthage release zip
#2944 Test v0.96.3

According to those 3 updates, Installing v0.96.3 via Carthage should supply .dSYM as expected.
But still not found any .dSYM from https://github.com/realm/realm-cocoa/releases/download/v0.96.3/Carthage.framework.zip

Happened Carthage 0.11.0 and realm/realm-cocoa v0.96.3
"
4549,Negative,"@tonyarnold I don't think that's related. The carthage issue is that built artefacts in `Carthage.build` contain `x86_64` and `i386` architectures that are rejected by the app store :(
"
4550,Positive,"Okay good to know. I will change to `NSFileProtectionNone` for now. Can you confirm that changing in the entitlements file is the right way to go about this until you guys add support to `RLMConfiguration`?
"
4551,Neutral,"Also, in the code you provided your two different configurations appear to point to the same file, and have the same schema version numbers. Is that really the case?"
4552,Neutral,"@grantspilsbury We're working making the app public https://github.com/realm/realm-cocoa/pull/4269 . 
It will be available very soon."
4553,Neutral,"I can see how `obj.writeAsync { realm, obj in }` is a bit more succinct, but I do think that it breaks the current expectation that transactions are done on the Realm.

I would also expect a `writeAsync` method to eventually support passing in more than one object, in which case it could get pretty complex having it on the objects itself (requiring a separate type for groups of objects)."
4554,Neutral,"My solution is:

```
extension RealmModel: Hashable { }

func ==(lhs: RealmModel, rhs: RealmModel) -> Bool {
  //...Do your judgement here
}
```

It works for me.
It's quite strange that you can use `==` between two `Object`s directly, but we have to implement this method again for ""conforming"" to the `Hashable` protocol.
"
4555,Neutral,"Discussion at https://forums.developer.apple.com/thread/51071 suggests that the _absence of an entitlements file_ can result in keychain calls failing with `errSecMissingEntitlement` in the simulator. Specifying an entitlements file, even if it contains no entitlements, can work around this problem. @bmctigue, does this workaround work for you?
"
4556,Neutral,"@mohammdsss1 Is this in relation to the Stack Overflow question you asked [here](http://stackoverflow.com/questions/41138377/can-not-add-objects-from-a-different-realm-ios-swift)?
If so, please continue the discussion there. Stack Overflow is the best place to support."
4557,Negative,"Your problem is entirely unrelated to this issue. `[RLMRealmConfiguration defaultConfiguration].deleteRealmIfMigrationNeeded = YES;` does not do anything because you're mutating a newly created object and then discarding it. You must set `deleteRealmIfMigrationNeeded` on a configuration object and then pass that object to `[RLMRealmConfiguration setDefaultConfiguration:]`.
"
4558,Neutral,"@rrrlasse There are no 0-bytes in the strings, as they are IBANs.

@tgoyne I'll try to asterisk out the sensitive parts of the data and send you the database file along with the encryption key.

I should also note that the results are returned correctly when indexes are not hit, i.e. performing CONTAINS or BEGINSWITH on the indexed string column.
"
4559,Positive,"Thanks for the feature request, @anbarasu0504. We have a number of high priority features we'd like to build before diving into something like this, but it would certainly be nice to have at some point.

If you, or anyone, feels like contributing to this, please start with a design proposal in this issue demonstrating how the feature should work, which API it should expose and how to deal with potential pitfalls:
1. What kind of operations and/or models can be undone?
2. Should undos be grouped by transaction? Or by some other mechanism? Or not grouped at all?
3. What happens in a multithreaded or multiprocess scenario?
4. How can we efficiently compact the transaction log to only preserve history which can be undone while discarding the irrelevant aspects?
"
4560,Neutral,"@jhoughjr have you tried applying the strategies suggested in this thread? You mention you've tried copying the Realm objects into an Array and that not working. Can you please elaborate? How about the associated object approach?
"
4561,Neutral,"I don't find screenshots and videos to be a particularly effective mechanism for sharing code. If you're unable to demonstrate the problem via standalone test code, feel free to share any code snippets you'd like kept private via email to help@realm.io."
4562,Neutral,"Just tried its returning all future events irrespective of endDate

po date
2015-05-12 18:30:00 +0000

(lldb) po predicate
startTime >= CAST(453148200.000000, ""NSDate"") AND CAST(453234600.000000, ""NSDate"") < endTime

And RLMResults returned all future events
<img width=""373"" alt=""screen shot 2015-07-16 at 8 20 45 pm"" src=""https://cloud.githubusercontent.com/assets/349211/8726501/36a43d6e-2bf8-11e5-8056-8fd7b1b65044.png"">

So as per screenshot If given date is 24 then RMLResults should return events which comes in the range of startDate - endDate
"
4563,Neutral,"If we do this at all we should add it to the userInfo for the exception, not to the message.

There is currently not a common code path used for exceptions at the moment so this requires changing quite a bit of code.
"
4564,Neutral,"I do understand that `Object` is supposed to not be used directly. That is fine. I am all about best practices. I can use another method besides creating an `Object` instance directly. 

I got the idea to creating an `Object` instance from [your comment in this issue](https://github.com/realm/realm-cocoa/issues/4005#issuecomment-285221162). 

Is there another way to create an unmanaged instance from a managed instance of an object? I come from the realm-java lib where creating unmanaged instances of managed instances is built into the lib. What is the realm-cocoa equivalent or best practice instead? 

My use case: I perform a realm query to get a realm `Object` > I perform a write on this object > Perform an API call > Perform another write on this object. 

I am trying to create an unmanaged object because I can share the object across threads (as I will be on a different thread after the API call is performed since the API call will be performed on another thread and the callback after it is complete will be called from this API thread).

I was looking through the Realm docs yesterday for Swift and it mentioned [passing instances across threads](https://realm.io/docs/swift/latest/#passing-instances-across-threads). I am guessing this is the realm-cocoa equivalent to working with managed objects across threads? 

I don't mind this solution. However, it does not seem as flexible as creating an unmanaged object. Unmanaged objects are very flexible do handle them however you would like. The biggest limitation that I see is `A ThreadSafeReference object must be resolved at most once.` I may have scenarios that I would need to resolve a ThreadSafeReference 2+ times. What do I do in this case? Is there a pattern that users usually do? "
4565,Positive,"Thanks for filing that radar, @dgrekov. Let's keep this issue open as a reminder to check again once Xcode 7 goes GM.
"
4566,Neutral,"This appears to be a segfault in `object_isClass(_:)`, which itself is being called by Foundation's KVO machinery. I'd guess this is a bug in iOS rather than Realm. Have you filed a radar for this?
"
4567,Positive,"Work on a more robust interprocess locking mechanism is underway in Realm's core.
"
4568,Neutral,The need to check out submodules is mentioned in the [repository's README file](https://github.com/realm/realm-cocoa#building-realm).
4569,Neutral,"  I use the realm encryption, decryption is unable to open ,in release.

```
NSData *data=[self getKey];
NSError *error=nil;
@autoreleasepool {
    NSString *defaultRealmPath = [RLMRealm defaultRealmPath];
    NSString *v0Path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:ML];
    [[NSFileManager defaultManager] removeItemAtPath:defaultRealmPath error:nil];
    [[NSFileManager defaultManager] copyItemAtPath:v0Path toPath:defaultRealmPath error:nil];
    [RLMRealm setEncryptionKey:data forRealmsAtPath:defaultRealmPath];
}

@autoreleasepool {
    RLMRealm *realmv1 = [RLMRealm realmWithPath:[RLMRealm defaultRealmPath] encryptionKey:data readOnly:YES error:&error];
    UILabel *numView = [[UILabel alloc] init];
    [numView setFont:[UIFont systemFontOfSize:15]];
    numView.textAlignment=NSTextAlignmentLeft;
    numView.numberOfLines=100;
    [numView setBackgroundColor:[UIColor clearColor]];
    [numView setTextColor:UIColorFromRGB(0x000000)];
    [self.view addSubview:numView];
    [numView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.edges.equalTo(self.view);
    }];

    if ([error code]!=0) {
        numView.text = [NSString stringWithFormat:@""%@+++"",[error description]];
    }else{
        RLMResults *dogs = [ZtyHomeWorkContent allObjects];
        numView.text = [NSString stringWithFormat:@""%@----"",dogs];
        NSLog(@""%@"",dogs);
    }
}
```
"
4570,Negative,"here is the crash report:
https://gist.github.com/OlegAnghelov/95a71efdf2b7e1e3e584

I did made some sensitive sanitizing, but tried to kept the logic behind the names, hopefully it will be helpful.

Sadly, cannot give any projects because the only was we actually saw these crashes is by HockeyApp reports from Production (the version that is actually on appstore). 
Worth mentioning that we use Realm 0.91.1 .
"
4571,Negative,"@markst Sorry, no. I switched to Core Data instead."
4572,Neutral,"And finally, the last test ....

``` objc
[...]

RLMRealm *realm = [RLMRealm defaultRealm];
[realm transactionWithBlock:^{

    user.facebookID = @"""";
    user.userName = userName;
    user.name = name;
    user.email = email;                     <-------- Execution stops here! This is the primary key!
    user.birthday = birthday;
    user.gender = gender.integerValue;
    user.image = image;

    [realm addOrUpdateObject:user];

}];

if (completion) {
    completion(YES, nil);
}
```
"
4573,Neutral,"![](http://media.giphy.com/media/Vmunw0k7q12Ks/giphy.gif)
"
4574,Neutral,"I am seeing your latter error with a fresh pull:

```
 export WATCHOS_DEPLOYMENT_TARGET=2.0
    /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7k -dynamiclib -isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/WatchOS.platform/Developer/SDKs/WatchOS2.0.sdk -L/Users/alan/src/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos -Lcore -F/Users/alan/src/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos -filelist /Users/alan/src/realm-cocoa/build/DerivedData/Realm/Build/Intermediates/Realm.build/Release-watchos/watchOS.build/Objects-normal/armv7k/Realm.LinkFileList -install_name @rpath/Realm.framework/Realm -Xlinker -rpath -Xlinker @executable_path/Frameworks -Xlinker -rpath -Xlinker @loader_path/Frameworks -mwatchos-version-min=2.0 -dead_strip -fembed-bitcode-marker -lrealm-watchos -stdlib=libc++ -fobjc-arc -fobjc-link-runtime -fapplication-extension -single_module -compatibility_version 1 -current_version 1 -Xlinker -dependency_info -Xlinker /Users/alan/src/realm-cocoa/build/DerivedData/Realm/Build/Intermediates/Realm.build/Release-watchos/watchOS.build/Objects-normal/armv7k/Realm_dependency_info.dat -o /Users/alan/src/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos/Realm.framework/Realm
ld: in core/librealm-watchos.a(librealm-WatchOS-prelink.a.o), building for watchOS, but linking in object file built for iOS, for architecture armv7k
clang: error: linker command failed with exit code 1 (use -v to see invocation)

** BUILD FAILED **


The following build commands failed:
    Ld build/DerivedData/Realm/Build/Products/Release-watchos/Realm.framework/Realm normal armv7k
(1 failure)
Nomenclature:realm-cocoa alan$ git status
On branch swift-2.0
Your branch is up-to-date with 'origin/swift-2.0'.
nothing to commit, working directory clean
```
"
4575,Neutral,"@bdash consider it's done
"
4576,Neutral,The first issue I've noticed in your code is that your models' properties are not declared as `dynamic` (see [docs](https://realm.io/docs/swift/latest/#property-attributes)). Second: if you want to have relationship between `UserInfo` and `UserDevice` you should use `List` type and declare this property as `let devices = List<UserDevice>()` (see [docs](https://realm.io/docs/swift/latest/#to-many-relationships) for more info). However the `List` type is not supported by ObjectMapper out of the box so you'll probably need to implement your own `TransformType` to map JSON to your models. See more info and examples here: https://github.com/Hearst-DD/ObjectMapper/issues/143 
4577,Positive,"yeap, confirmed is all good now, thanks for the quick reply :)
"
4578,Neutral,Hi @Entsch did you try the suggestions above? Do you still need further help or can we close this issue?
4579,Positive,"Now that subqueries are implemented `ALL` should be easy to implement.
"
4580,Positive,"It would be good to have these changes in place on a branch for Monday so that our initial Swift 3 preview support at least resembles what the API will end up being. I think it's fine to keep iterating on the exact naming after that.
"
4581,Neutral,"Steps:
- [ ] expose a C-header interface to the C++ bits of Realm Cocoa
- [ ] have minimal Swift with SwiftPM build system that calls into some symbols to demonstrate that the build system works
- [ ] write a basic ""dynamic""-ish API, not built on top of existing Realm Cocoa
- [ ] come up with a possibly verbose, but comprehensive subset of the API
- [ ] possibly have a codegen tool to generate models, or find an alternative mechanism for accessors
"
4582,Neutral,"See  issue [2135](https://github.com/realm/realm-cocoa/issues/2135) which is the same problem.   It was recently closed as a Swift/lldb problem, not a realm problem.
"
4583,Negative,"I reopened the Java ticket, as it is a Java responsibility then. I am completely baffled we missed this however :(

The task now is the following IMO: 
1) Create automated test-suite to test interoperability as discussed before, i.e. each platform creates a test suite that A) can create a set of test files and B) run those files through a series of unit tests. Then it should be relatively easy to create a set of test files for each version released that can be sent to the other platform to verify we do not regress.

2) Realm Java will fix the bug on our side: 1) Stop appending ""class_"" to names in the pk_table 2) Make a fallback so it works in both cases with and without ""class_"" prefix. 
"
4584,Neutral,"I have the similar problem.
I'm working with Xcode 9.0.1 and Swift 4"
4585,Neutral,"You can already achieve the same thing by doing `[array removeObjectAtIndex:[array indexOfObject:object]]`
"
4586,Neutral,"I can't reproduce this:

```bash
$ carthage version
0.24.0
$ echo ""github \""realm/realm-cocoa\"""" > Cartfile
$ carthage update --platform iOS
*** Fetching realm-cocoa
*** Downloading realm-cocoa.framework binary at ""v2.8.3""
*** xcodebuild output can be found in /var/folders/tv/cc131sv94cv_xk5bzg81559r0000gn/T/carthage-xcodebuild.nQZ701.log
```"
4587,Neutral,"This looks like #3579, which was fixed in #3603 and included in 0.103.0. @ehlersd could you please update to Realm 1.0 and let us know if you're still seeing this?
"
4588,Positive,"@matthewcheok After the initial PR with a first type to work out the exact approach, it should be easier to add new types. At that point, it will make sense to propose new types.
"
4589,Negative,"@dhmspector I did some investigation, and unfortunately the error that results from a Realm 3.x client trying to connect to a ROS 1.x server is not distinctive enough to uniquely identify this error case. (It's reported as an ""End of input"" error, and the error category is not one of the ones recognized by Realm 3, so the error handler ignores it.)"
4590,Neutral,"Can you please share the crash log or exception message?
"
4591,Positive,"The lack of encryption on watchOS and tvOS means that it's not possible to use the Realm Mobile Platform on those platforms yet.

If it's possible to enable encryption on those platforms, this would definitely expand the number of devices that could take advantage of online sync. :)"
4592,Neutral,"The top of the backtrace is:

```
(lldb) bt all
* thread #1: tid = 0x30d52b, 0x0000000100121660 Realm`-[RLMProperty initSwiftPropertyWithName:indexed:linkPropertyDescriptor:property:instance:] + 560, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)
    frame #0: 0x0000000100121660 Realm`-[RLMProperty initSwiftPropertyWithName:indexed:linkPropertyDescriptor:property:instance:] + 560
    frame #1: 0x00000001001152c0 Realm`+[RLMObjectSchema propertiesForClass:isSwift:] + 612
    frame #2: 0x0000000100114408 Realm`+[RLMObjectSchema schemaForObjectClass:] + 404
    frame #3: 0x00000001001890c4 Realm`RLMRegisterClass(objc_class*) + 144
    frame #4: 0x0000000100189860 Realm`__25+[RLMSchema sharedSchema]_block_invoke + 16
    frame #5: 0x0000000181108cac CoreFoundation`__65-[__NSDictionaryM enumerateKeysAndObjectsWithOptions:usingBlock:]_block_invoke + 120
    frame #6: 0x0000000181108b60 CoreFoundation`-[__NSDictionaryM enumerateKeysAndObjectsWithOptions:usingBlock:] + 144
    frame #7: 0x00000001001896f4 Realm`+[RLMSchema sharedSchema] + 144
    frame #8: 0x0000000100181720 Realm`+[RLMRealm realmWithConfiguration:error:] + 1388
    frame #9: 0x0000000101537930 RealmSwift`RealmSwift.Realm.__allocating_init () throws -> RealmSwift.Realm + 120
```

That indicates the crash is happening while we're trying to initialize your app's schema. Would you mind sharing the declarations of your model classes so we can determine what about them is leading to the crash?
"
4593,Neutral,"Well, it relies on that CocoaPods PR also being finished, so it wouldn't be of much use now.
"
4594,Positive,"@JonFBit cool! We'll track this as a feature request.
"
4595,Neutral,"Could you please share the model declaration for `Event`? If it's inheriting from `Object`, calling `className()` on it should theoretically never be returning `nil`.
"
4596,Neutral,"On which thread are your notification blocks being called? Notification blocks are only called if there is an [active run loop on the thread](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html), which threads handling blocks dispatched to the global background queues lack."
4597,Neutral,"This is fixed on master
"
4598,Positive,"That works brilliantly for what I need. Thank you!
"
4599,Positive,"Thanks for the info. It's worth noting that when I build in Xcode 6.2, this issue does not manifest at all, so it seems to be related to the current dev tools release, not some intrinsic limitation.

Is the static library distributed with the Realm Cocoapods release built in 6.3 or 6.2? The internal C++ library we are using is built with 6.3, but I could also try building it with 6.2 before linking in 6.3.

The dev forum post by the Apple dev support agent suggests that this will go away in the next Xcode 6.4 beta, so I may try that as well.
"
4600,Neutral,"This is a known issue and was just fixed in 0.87.2. Download it here: http://static.realm.io/downloads/cocoa/realm-cocoa-0.87.2.zip
"
4601,Negative,"Regarding @jlandrum's point about the toaster and the refrigerator, I'd say this is more like a refrigerator without in-door water and ice service. Few _need_ it, but it's extremely convenient for almost everybody and fits completely within the reasonable feature set of such an appliance.

The absence of this feature itself doesn't bother me--I can get by. What bothers me is how can it be possible that this feature, which they said was coming soon last September (and maybe earlier), isn't here yet. It makes me question either their judgment in public statements, or their ability to get stuff done (both are important to me when considering an investment in 3rd party technology).

So +1
"
4602,Neutral,"I upgraded today to iOS 10 and compiled today and:

@bdash Could not cast value of type '__NSArrayI' (0x1b3c57cc8) to 'NSMutableArray'

Changed NSMutableArray to NSArray and it's fixed.
"
4603,Positive,"Thanks, that reveals the problem immediately :-)

You need to add the following as well:

``` ruby
pod 'Realm', :git => 'https://github.com/realm/realm-cocoa.git', :submodules=> true
```

Otherwise CocoaPods will pull down the most recent Realm release to satisfy RealmSwift's dependency on Realm.
"
4604,Neutral,"That works for Realm, but the request is for RealmMapView as [described in this tutorial](https://realm.io/news/building-an-ios-clustered-map-view-in-swift/). 

Currently there is no mechanism to adjust the query that is used to populate the map.
"
4605,Positive,"Thanks for the tip @apalancat, I wasn’t aware that was possible! (The current instructions don’t recommend you disable Gatekeeper for all apps, just that you bypass it for ours, though.) I’ve updated our docs to reflect your tip, it should be live on our site soon. Thanks again for taking the time to let us know!
"
4606,Positive,"Hi @Kluskey!

Oh dear. I've had that issue in a lot of my apps before as well. The error usually implies that there was something wrong with the file path you specified, but that sadly means there could be any number of issues with it. Usually the first point of debugging this sort of issue is to print your file path value to the console and see if anything looks incomplete/malformed

In this case, I think the issue might be the way you're converting an `NSURL` value to a `String` in order to pass it to Realm's `writeCopyToPath` method.

Instead of `String(url4)`, try `url4.path` and let me know if that fixes it. :)

Thanks!
"
4607,Neutral,"@virt87 no, the `if` statement is correct. Once you've opened a Realm at that path, you cannot set a different schema version for that path, since the open Realm would not be able to update to that new schema version you've set.
"
4608,Positive,"App submitted successfully with 0.95.2 :+1: :+1: :+1: 

Thanks again
"
4609,Neutral,"ok so suppose I have ToDoItem containing list of comments. Then I can use filter on comments is it so?
"
4610,Negative,"still nothing on this?
This problem is causing 99% of all of my Realm crashes.
"
4611,Neutral,"Update.  I was able to resolve the issue somewhat by switching to the `al-swift` branch and building the `RealmSwift.framework`.  It created a couple of other minor problems, but all of these had easy workarounds.  It seams that the `RealmSwift.List<Class>` syntax somehow fixes something in the underlying order of operations.
"
4612,Positive,Feel free to comment below or file a new issue if you do @i-schuetz! :)
4613,Negative,Amazing 👍 It's our biggest crash atm though <1% of users affected.
4614,Neutral,"I just ran into this exact same issue on 0.91.3. Is querying a related `RLMArray` property not allowed anymore?
"
4615,Neutral,"Okay so this what I am trying to do, unify my create delete update logic into one interface called 

``` Obj-c

-(void) saveObjectGraphWithRoot: (RLMObject*) objectRoot {
if ( rootObject.primarykey  == nil) {  // assuming it doesn't have a primary key then it must be persisted

}
else if (rootObject.primarykey !=nil){ // it has primary key then it can be updated.

} 
else if (rootObject.isMarkedForDelete = YES) {// delete this

}

}
```

So two questions to help me out, in the latest version of Realm ...
Have you included primary key properties on the objects by it's self ? or do I have to override the function to get generate a primary key? 

``` Obj-C
+ (NSString *)primaryKey {
    return @""key""; // generate key here ?
}
```

Are the primary keys generated when the object is created in memory ? or when the object is committed ?
"
4616,Negative,"Hey Bernhard, sorry that I didn't got back to you earlier, missed that you filed an issue over here.

> Usually this should work without any problems, just bump the schemaVersion and add an empty migration block.
> Here was the first hurdle we had to add a migration since it was crashing. So we added the following migration.

That's true. How was it crashing for you? How were you testing the migration?

---

Coming to the problem you're seeing with the deployed version: Did you added `dateSaved` as a property and users could be stuck on an older version which don't have that property yet in their schemas? Because in such a case you would get that error on an attempt to access a non-existing property.

So if you still know or can figure out with which version, you introduced that property, then you can just make sure that this migration enumerations only objects of schemas which have this property already.

``` swift
if (5...13).contains(oldSchemaVersion) {
  migration.enumerate(Post.className()) { oldObject, newObject in
    if let oldDateSaved = oldObject?[""dateSaved""] as? NSDate {
       newObject?[""dateSaved""] = oldDateSaved.timeIntervalSince1970 > 0 ? oldDateSaved : nil
    }
  }
}
```

Alternatively you can dynamically check the `oldObject.objectSchema` to figure out whether that property already exists. This could look then like below:

``` swift
if oldSchemaVersion < 13 {
  migration.enumerate(Post.className()) { oldObject, newObject in
    guard let _ = oldObject?.objectSchema[""dateSaved""] else {
       newObject?[""dateSaved""] = nil
       return
    }
    if let oldDateSaved = oldObject?[""dateSaved""] as? NSDate {
       newObject?[""dateSaved""] = oldDateSaved.timeIntervalSince1970 > 0 ? oldDateSaved : nil
    }
  }
}
```
"
4617,Positive,"@mrackwitz i have send the data to help@realm.io, you can check it when you have time, if there is any problem please let me know, thanks very much!
"
4618,Neutral,"+1
Would love to see support for this-- even if it is just syntactic sugar over the Box<Type> solution."
4619,Neutral,"Wanting to have overridden getters and setters for a property on unmanaged objects while still wanting the property to be persisted in Realm would be somewhat odd, but there's nothing inherently broken about it, so even if we could reliably detect this case and implicitly ignore the property it's not obvious that it would be the right thing to do."
4620,Positive,"0.97 was just released! Could you give this a try @Reggian and let us know if it's resolved?
"
4621,Neutral,"@manzoorShaikh, can you try running the following commands to force CocoaPods to re-download Realm?

```
rm -r Pods/Realm*
rm -r ~/Library/Caches/CocoaPods/Pods/Release/Realm*
pod install
```
"
4622,Neutral,"Nope not yet, was when I tried to upload a beta build so there is no pressure on this for me. Would you consider this as the next step or do you want to check the compiler thingy first?
"
4623,Neutral,"@santhoshs5 Realm object's `init(value:)` initializer can accept a KVC-compliant value that responds to all the required property keys, you can pass a managed object to the initializer to make an unmanaged copy, and vice-versa."
4624,Neutral,"I'll close this issue because it's not related Realm. If you have further questions, feel free to ask us.
"
4625,Positive,"@OlegAnghelov thanks so much for putting together this example project. The code path behind `createOrUpdate` is something that needs a good refactor (see https://github.com/realm/realm-cocoa/issues/1362), and that refactor should definitely address this issue. In the meantime, your best bet would be to not pass cyclical object graphs to `createInRealm` -- I know that's not ideal, but it should work as a stopgap while we fix the underlying issue.
"
4626,Neutral,"You can also try this: https://github.com/realm/realm-cocoa/pull/1942
You'll need to manually build until next release, but it should go through submission just fine.
"
4627,Neutral,"Ran today into the same issue (previously using 0.39 cocoapods, now --pre release). 

As suggested fixed by issuing `pod install` instead of `pod update`. Not related to any Xcode plugin but probably best practice to use `install` after major changes to CocoaPods itself.
"
4628,Neutral,"Now that fine-grained notifications are implemented, how would you do this with those notifications?"
4629,Neutral,"@bennichols your best bet will be to clone this repo and add `RealmSwift.xcodeproj` as a subproject to your own project (or workspace)
"
4630,Negative,"I'm also having this issue. Cleaning build folder didn't help.

```
source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '9.0'
use_frameworks!

target 'My-App' do

    pod 'Alamofire', '~> 3.3'
    pod 'AlamofireObjectMapper', '~> 3.0'
    pod 'XLPagerTabStrip'
    pod 'Kingfisher'
    pod 'DZNEmptyDataSet'
    pod 'RealmSwift'

end
```
"
4631,Neutral,"> error: The following binaries use incompatible versions of Swift

This error is indicative of a stale build cache from having used a previous version of Swift. Have you followed the steps listed here? https://realm.io/docs/swift/latest/#reinstalling-via-dependency-managers
"
4632,Neutral,"This was mostly done in #2895. There are some complex predicates involving multi-level key paths that are not yet supported, but the `link.property > link.otherProperty` case [definitely works](https://github.com/realm/realm-cocoa/blob/v0.103.0/Realm/Tests/QueryTests.m#L1126-L1131).
"
4633,Positive,"Thanks, I appreciate you keeping us in the loop!"
4634,Negative,"Hi @mrackwitz, sorry for not updating this issue sooner. I had to get this code working with a deadline so I ended up reworking it to create the Realm objects all at once rather than individually. I know this isn't necessarily a solution but I hope it helps someone if they run into a similar problem.
"
4635,Neutral,"Ah, I didn't know you could catch NSExceptions in Swift, but I [got it to work](http://stackoverflow.com/a/36454808/2597).

This is the error that occurs: `Error Domain=RLMException Code=0 ""(null)"" UserInfo={RLMRealmVersion=2.0.3, RLMRealmCoreVersion=unknown}`

The only change I made to the schema is renaming the Object.
Person to Employee, in this example.
"
4636,Neutral,"You can unpack the core archive directly into your `core` directory.
"
4637,Positive,"i attempted 2 fixes:

Use CocoaPods 0.38 - doesn't work
specify to use master - doesn't work

```
#import <Realm/RLMArray.h> - Include of non-modular header inside framework module 'Realm'
```

can you provide a fix that works? thank you.
"
4638,Negative,"I don't think `if a user has more complex UITableView needs` is a valid argument.

When we design the database API, one should not care about the presentation of the data. Getting the low-level framework coupled with high-level module is way too weird.

Can you explain what is the `section` from the database's point of view
"
4639,Neutral,"@pepibumur we still haven't heard back from you since posting an attempt at a repro case over two weeks ago, so we're closing this issue.
"
4640,Negative,"The reason I asked it here is because it was ignored in StackOverflow (was opened more than 2 weeks ago)....... :(

http://stackoverflow.com/questions/41305863/real-time-sync-with-table-view-sections"
4641,Neutral,"Yes indeed, it's fairly easy to work around. Just use `.lowercaseString` when saving a copy of your string to your model, as well as when searching.

`searchAutocompleteEntriesWithSubstring(substring.lowercaseString)`

```
if realmSuggestions.filter(""lowercaseRU BEGINSWITH '\(substring)'"").count > 0 {

        for suggestion in realmSuggestions {

            suggestions.append(""\(suggestion.valueForKey(""ru"") as! String)"")
        }

        suggestionsTableView.reloadData()
}
```

But still, please don't keep putting it off. A work-around is a work-around, not a solution.
"
4642,Neutral,"+1
"
4643,Neutral,"Accessors being deallocated on the wrong thread is the potentially problematic case.
"
4644,Neutral,"DEFINITELY demanded.

It's great that you guys took the single-relationship option but we just swept our codebase and in fact all our sorting use-cases are ""to-many"" scenarios (and thus have to do them out of Realm / custom).

For example, our list of conversations is sorted by the last unread message. To achieve this you need to sort using SortDescriptors of first ""unread messages"" (this is a subquery), then secondly by ""messages.sentAt"".

Would sorting by SUBQUERY be yet another feature request or be handled in this 'to-many' scenario?"
4645,Neutral,"@xiaodao rather than wait for us to make a release to accommodate the non-standard compiler flags you use in your project, perhaps you could just remove those flags from your Xcode project's build settings in the meantime?"
4646,Neutral,"Hi @ehlersd, your Xcode project appears to have been incorrectly configured.

By running `pod deintegrate && pod install`, I could get everything building again. I've found that this is generally a good way to ""reset"" Xcode projects if they've been set up in a way that CocoaPods won't automatically find all its source or header files.

Here's the diff in the `pbxproj` file after running those commands:

```diff
diff --git a/RealmTest.xcodeproj/project.pbxproj b/RealmTest.xcodeproj/project.pbxproj
index 87400ff..db506b0 100644
--- a/RealmTest.xcodeproj/project.pbxproj
+++ b/RealmTest.xcodeproj/project.pbxproj
@@ -7,8 +7,9 @@
 	objects = {
 
 /* Begin PBXBuildFile section */
-		50324231151D783D93F95FCC /* Pods_RealmTestUITests.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 7737F5D32420A654DB9935E0 /* Pods_RealmTestUITests.framework */; };
-		588C82B88E92FBB3A21A683D /* Pods_RealmTestTests.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 79E8A80257C3D9FDB1D67D0F /* Pods_RealmTestTests.framework */; };
+		166EFCBC4AF5F7702E375FC8 /* Pods_RealmTestTests.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = B10C9C107289AAA2CA398E9E /* Pods_RealmTestTests.framework */; };
+		423EFB246D4E3BDC8462A88F /* Pods_RealmTest.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = A2FFDCB5D5C16CA8676A7E76 /* Pods_RealmTest.framework */; };
+		4F9FBDCD5DAAABF5450FA302 /* Pods_RealmTestUITests.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 3737DEBC4EE10859FF700A45 /* Pods_RealmTestUITests.framework */; };
 		6A4FEE291DF5D6A30089050B /* Podfile in Resources */ = {isa = PBXBuildFile; fileRef = 6A4FEE281DF5D6A30089050B /* Podfile */; };
 		6A7CF6181DF5D5C500D54676 /* main.m in Sources */ = {isa = PBXBuildFile; fileRef = 6A7CF6171DF5D5C500D54676 /* main.m */; };
 		6A7CF61B1DF5D5C500D54676 /* AppDelegate.m in Sources */ = {isa = PBXBuildFile; fileRef = 6A7CF61A1DF5D5C500D54676 /* AppDelegate.m */; };
@@ -18,7 +19,6 @@
 		6A7CF6261DF5D5C500D54676 /* LaunchScreen.storyboard in Resources */ = {isa = PBXBuildFile; fileRef = 6A7CF6241DF5D5C500D54676 /* LaunchScreen.storyboard */; };
 		6A7CF6311DF5D5C500D54676 /* RealmTestTests.m in Sources */ = {isa = PBXBuildFile; fileRef = 6A7CF6301DF5D5C500D54676 /* RealmTestTests.m */; };
 		6A7CF63C1DF5D5C500D54676 /* RealmTestUITests.m in Sources */ = {isa = PBXBuildFile; fileRef = 6A7CF63B1DF5D5C500D54676 /* RealmTestUITests.m */; };
-		B9185C406987067581369573 /* Pods_RealmTest.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = 7A543924CBEA131A8B5BAE93 /* Pods_RealmTest.framework */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXContainerItemProxy section */
@@ -39,8 +39,8 @@
 /* End PBXContainerItemProxy section */
 
 /* Begin PBXFileReference section */
-		1071BAD235260652D9B75781 /* Pods-RealmTestTests.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestTests.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests.release.xcconfig""; sourceTree = ""<group>""; };
-		295B5881AB1F217B0DB73CE2 /* Pods-RealmTestUITests.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestUITests.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests.release.xcconfig""; sourceTree = ""<group>""; };
+		3737DEBC4EE10859FF700A45 /* Pods_RealmTestUITests.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTestUITests.framework; sourceTree = BUILT_PRODUCTS_DIR; };
+		61868A30A04AE7E09A7BEEF3 /* Pods-RealmTestTests.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestTests.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests.debug.xcconfig""; sourceTree = ""<group>""; };
 		6A4FEE281DF5D6A30089050B /* Podfile */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = text; path = Podfile; sourceTree = ""<group>""; };
 		6A7CF6131DF5D5C500D54676 /* RealmTest.app */ = {isa = PBXFileReference; explicitFileType = wrapper.application; includeInIndex = 0; path = RealmTest.app; sourceTree = BUILT_PRODUCTS_DIR; };
 		6A7CF6171DF5D5C500D54676 /* main.m */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.objc; path = main.m; sourceTree = ""<group>""; };
@@ -58,13 +58,13 @@
 		6A7CF6371DF5D5C500D54676 /* RealmTestUITests.xctest */ = {isa = PBXFileReference; explicitFileType = wrapper.cfbundle; includeInIndex = 0; path = RealmTestUITests.xctest; sourceTree = BUILT_PRODUCTS_DIR; };
 		6A7CF63B1DF5D5C500D54676 /* RealmTestUITests.m */ = {isa = PBXFileReference; lastKnownFileType = sourcecode.c.objc; path = RealmTestUITests.m; sourceTree = ""<group>""; };
 		6A7CF63D1DF5D5C500D54676 /* Info.plist */ = {isa = PBXFileReference; lastKnownFileType = text.plist.xml; path = Info.plist; sourceTree = ""<group>""; };
-		6D5926F3BAE435ED23587B11 /* Pods-RealmTest.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTest.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest.release.xcconfig""; sourceTree = ""<group>""; };
-		753A81689F5AF4553645F1D6 /* Pods-RealmTestUITests.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestUITests.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests.debug.xcconfig""; sourceTree = ""<group>""; };
-		7737F5D32420A654DB9935E0 /* Pods_RealmTestUITests.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTestUITests.framework; sourceTree = BUILT_PRODUCTS_DIR; };
-		79E8A80257C3D9FDB1D67D0F /* Pods_RealmTestTests.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTestTests.framework; sourceTree = BUILT_PRODUCTS_DIR; };
-		7A543924CBEA131A8B5BAE93 /* Pods_RealmTest.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTest.framework; sourceTree = BUILT_PRODUCTS_DIR; };
-		B5CDBD318E151151EA2CF963 /* Pods-RealmTest.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTest.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest.debug.xcconfig""; sourceTree = ""<group>""; };
-		EB9DCF9D2455306598199607 /* Pods-RealmTestTests.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestTests.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests.debug.xcconfig""; sourceTree = ""<group>""; };
+		7A20EF2FBB2108FDCC769750 /* Pods-RealmTestUITests.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestUITests.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests.release.xcconfig""; sourceTree = ""<group>""; };
+		9341DF17B6959DCA7D785DC8 /* Pods-RealmTest.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTest.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest.release.xcconfig""; sourceTree = ""<group>""; };
+		A2FFDCB5D5C16CA8676A7E76 /* Pods_RealmTest.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTest.framework; sourceTree = BUILT_PRODUCTS_DIR; };
+		B10C9C107289AAA2CA398E9E /* Pods_RealmTestTests.framework */ = {isa = PBXFileReference; explicitFileType = wrapper.framework; includeInIndex = 0; path = Pods_RealmTestTests.framework; sourceTree = BUILT_PRODUCTS_DIR; };
+		BF74E2EA6114416342370291 /* Pods-RealmTest.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTest.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest.debug.xcconfig""; sourceTree = ""<group>""; };
+		C72B1E08E14D1CAAAECCB3C9 /* Pods-RealmTestUITests.debug.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestUITests.debug.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests.debug.xcconfig""; sourceTree = ""<group>""; };
+		E3DA3E9F4B42F95B82603E49 /* Pods-RealmTestTests.release.xcconfig */ = {isa = PBXFileReference; includeInIndex = 1; lastKnownFileType = text.xcconfig; name = ""Pods-RealmTestTests.release.xcconfig""; path = ""Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests.release.xcconfig""; sourceTree = ""<group>""; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -72,7 +72,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				B9185C406987067581369573 /* Pods_RealmTest.framework in Frameworks */,
+				423EFB246D4E3BDC8462A88F /* Pods_RealmTest.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -80,7 +80,7 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				588C82B88E92FBB3A21A683D /* Pods_RealmTestTests.framework in Frameworks */,
+				166EFCBC4AF5F7702E375FC8 /* Pods_RealmTestTests.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -88,26 +88,13 @@
 			isa = PBXFrameworksBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
-				50324231151D783D93F95FCC /* Pods_RealmTestUITests.framework in Frameworks */,
+				4F9FBDCD5DAAABF5450FA302 /* Pods_RealmTestUITests.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
 /* End PBXFrameworksBuildPhase section */
 
 /* Begin PBXGroup section */
-		504984F0D92CD7E989E8D034 /* Pods */ = {
-			isa = PBXGroup;
-			children = (
-				B5CDBD318E151151EA2CF963 /* Pods-RealmTest.debug.xcconfig */,
-				6D5926F3BAE435ED23587B11 /* Pods-RealmTest.release.xcconfig */,
-				EB9DCF9D2455306598199607 /* Pods-RealmTestTests.debug.xcconfig */,
-				1071BAD235260652D9B75781 /* Pods-RealmTestTests.release.xcconfig */,
-				753A81689F5AF4553645F1D6 /* Pods-RealmTestUITests.debug.xcconfig */,
-				295B5881AB1F217B0DB73CE2 /* Pods-RealmTestUITests.release.xcconfig */,
-			);
-			name = Pods;
-			sourceTree = ""<group>"";
-		};
 		6A7CF60A1DF5D5C500D54676 = {
 			isa = PBXGroup;
 			children = (
@@ -116,8 +103,8 @@
 				6A7CF63A1DF5D5C500D54676 /* RealmTestUITests */,
 				6A7CF6141DF5D5C500D54676 /* Products */,
 				6A4FEE281DF5D6A30089050B /* Podfile */,
-				504984F0D92CD7E989E8D034 /* Pods */,
-				A97DC70AF3C30F10328A2D5A /* Frameworks */,
+				A16CEACEC1A032711D389BC2 /* Pods */,
+				AE56D0A3EC80F69017FFF684 /* Frameworks */,
 			);
 			sourceTree = ""<group>"";
 		};
@@ -173,12 +160,25 @@
 			path = RealmTestUITests;
 			sourceTree = ""<group>"";
 		};
-		A97DC70AF3C30F10328A2D5A /* Frameworks */ = {
+		A16CEACEC1A032711D389BC2 /* Pods */ = {
+			isa = PBXGroup;
+			children = (
+				BF74E2EA6114416342370291 /* Pods-RealmTest.debug.xcconfig */,
+				9341DF17B6959DCA7D785DC8 /* Pods-RealmTest.release.xcconfig */,
+				61868A30A04AE7E09A7BEEF3 /* Pods-RealmTestTests.debug.xcconfig */,
+				E3DA3E9F4B42F95B82603E49 /* Pods-RealmTestTests.release.xcconfig */,
+				C72B1E08E14D1CAAAECCB3C9 /* Pods-RealmTestUITests.debug.xcconfig */,
+				7A20EF2FBB2108FDCC769750 /* Pods-RealmTestUITests.release.xcconfig */,
+			);
+			name = Pods;
+			sourceTree = ""<group>"";
+		};
+		AE56D0A3EC80F69017FFF684 /* Frameworks */ = {
 			isa = PBXGroup;
 			children = (
-				7A543924CBEA131A8B5BAE93 /* Pods_RealmTest.framework */,
-				79E8A80257C3D9FDB1D67D0F /* Pods_RealmTestTests.framework */,
-				7737F5D32420A654DB9935E0 /* Pods_RealmTestUITests.framework */,
+				A2FFDCB5D5C16CA8676A7E76 /* Pods_RealmTest.framework */,
+				B10C9C107289AAA2CA398E9E /* Pods_RealmTestTests.framework */,
+				3737DEBC4EE10859FF700A45 /* Pods_RealmTestUITests.framework */,
 			);
 			name = Frameworks;
 			sourceTree = ""<group>"";
@@ -190,12 +190,12 @@
 			isa = PBXNativeTarget;
 			buildConfigurationList = 6A7CF6401DF5D5C500D54676 /* Build configuration list for PBXNativeTarget ""RealmTest"" */;
 			buildPhases = (
-				E9CED28B73C7958BCFFD8E17 /* [CP] Check Pods Manifest.lock */,
+				9C2B040C3A4ED7CCA887369D /* [CP] Check Pods Manifest.lock */,
 				6A7CF60F1DF5D5C500D54676 /* Sources */,
 				6A7CF6101DF5D5C500D54676 /* Frameworks */,
 				6A7CF6111DF5D5C500D54676 /* Resources */,
-				DCF3C7B6F3F0C601703ECE25 /* [CP] Embed Pods Frameworks */,
-				19245360536494C98E11637C /* [CP] Copy Pods Resources */,
+				0E54427C5212B4F87DA0E9C8 /* [CP] Embed Pods Frameworks */,
+				6E4023AB38EF7D58B4241810 /* [CP] Copy Pods Resources */,
 			);
 			buildRules = (
 			);
@@ -210,12 +210,12 @@
 			isa = PBXNativeTarget;
 			buildConfigurationList = 6A7CF6431DF5D5C500D54676 /* Build configuration list for PBXNativeTarget ""RealmTestTests"" */;
 			buildPhases = (
-				E2098A4CB855E5FA21B4FEFF /* [CP] Check Pods Manifest.lock */,
+				2F41F96CA346DD7FD2A4DBC2 /* [CP] Check Pods Manifest.lock */,
 				6A7CF6281DF5D5C500D54676 /* Sources */,
 				6A7CF6291DF5D5C500D54676 /* Frameworks */,
 				6A7CF62A1DF5D5C500D54676 /* Resources */,
-				4F8B687AB24DD5162EA164C8 /* [CP] Embed Pods Frameworks */,
-				D6C96065341EABF4DE111B6B /* [CP] Copy Pods Resources */,
+				4781B4A18C4005F5D65FBB01 /* [CP] Embed Pods Frameworks */,
+				65C8392B3D36636C3A722E10 /* [CP] Copy Pods Resources */,
 			);
 			buildRules = (
 			);
@@ -231,12 +231,12 @@
 			isa = PBXNativeTarget;
 			buildConfigurationList = 6A7CF6461DF5D5C500D54676 /* Build configuration list for PBXNativeTarget ""RealmTestUITests"" */;
 			buildPhases = (
-				11E9F2C45C268928781E152A /* [CP] Check Pods Manifest.lock */,
+				26C3734F892A2D784122BE53 /* [CP] Check Pods Manifest.lock */,
 				6A7CF6331DF5D5C500D54676 /* Sources */,
 				6A7CF6341DF5D5C500D54676 /* Frameworks */,
 				6A7CF6351DF5D5C500D54676 /* Resources */,
-				C383F0D3CCA040ED7B5418FA /* [CP] Embed Pods Frameworks */,
-				BE3242C6C970C858DED0E6C8 /* [CP] Copy Pods Resources */,
+				88B7BB64DA68A057774FCAFA /* [CP] Embed Pods Frameworks */,
+				CB679901377B321BC1797712 /* [CP] Copy Pods Resources */,
 			);
 			buildRules = (
 			);
@@ -325,82 +325,82 @@
 /* End PBXResourcesBuildPhase section */
 
 /* Begin PBXShellScriptBuildPhase section */
-		11E9F2C45C268928781E152A /* [CP] Check Pods Manifest.lock */ = {
+		0E54427C5212B4F87DA0E9C8 /* [CP] Embed Pods Frameworks */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Check Pods Manifest.lock"";
+			name = ""[CP] Embed Pods Frameworks"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""diff \""${PODS_ROOT}/../Podfile.lock\"" \""${PODS_ROOT}/Manifest.lock\"" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \""error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\"" >&2\n    exit 1\nfi\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest-frameworks.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
-		19245360536494C98E11637C /* [CP] Copy Pods Resources */ = {
+		26C3734F892A2D784122BE53 /* [CP] Check Pods Manifest.lock */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Copy Pods Resources"";
+			name = ""[CP] Check Pods Manifest.lock"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest-resources.sh\""\n"";
+			shellScript = ""diff \""${PODS_ROOT}/../Podfile.lock\"" \""${PODS_ROOT}/Manifest.lock\"" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \""error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\"" >&2\n    exit 1\nfi\n"";
 			showEnvVarsInLog = 0;
 		};
-		4F8B687AB24DD5162EA164C8 /* [CP] Embed Pods Frameworks */ = {
+		2F41F96CA346DD7FD2A4DBC2 /* [CP] Check Pods Manifest.lock */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Embed Pods Frameworks"";
+			name = ""[CP] Check Pods Manifest.lock"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests-frameworks.sh\""\n"";
+			shellScript = ""diff \""${PODS_ROOT}/../Podfile.lock\"" \""${PODS_ROOT}/Manifest.lock\"" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \""error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\"" >&2\n    exit 1\nfi\n"";
 			showEnvVarsInLog = 0;
 		};
-		BE3242C6C970C858DED0E6C8 /* [CP] Copy Pods Resources */ = {
+		4781B4A18C4005F5D65FBB01 /* [CP] Embed Pods Frameworks */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Copy Pods Resources"";
+			name = ""[CP] Embed Pods Frameworks"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests-resources.sh\""\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests-frameworks.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
-		C383F0D3CCA040ED7B5418FA /* [CP] Embed Pods Frameworks */ = {
+		65C8392B3D36636C3A722E10 /* [CP] Copy Pods Resources */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Embed Pods Frameworks"";
+			name = ""[CP] Copy Pods Resources"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests-frameworks.sh\""\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests-resources.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
-		D6C96065341EABF4DE111B6B /* [CP] Copy Pods Resources */ = {
+		6E4023AB38EF7D58B4241810 /* [CP] Copy Pods Resources */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
@@ -412,10 +412,10 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestTests/Pods-RealmTestTests-resources.sh\""\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest-resources.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
-		DCF3C7B6F3F0C601703ECE25 /* [CP] Embed Pods Frameworks */ = {
+		88B7BB64DA68A057774FCAFA /* [CP] Embed Pods Frameworks */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
@@ -427,10 +427,10 @@
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTest/Pods-RealmTest-frameworks.sh\""\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests-frameworks.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
-		E2098A4CB855E5FA21B4FEFF /* [CP] Check Pods Manifest.lock */ = {
+		9C2B040C3A4ED7CCA887369D /* [CP] Check Pods Manifest.lock */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
@@ -445,19 +445,19 @@
 			shellScript = ""diff \""${PODS_ROOT}/../Podfile.lock\"" \""${PODS_ROOT}/Manifest.lock\"" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \""error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\"" >&2\n    exit 1\nfi\n"";
 			showEnvVarsInLog = 0;
 		};
-		E9CED28B73C7958BCFFD8E17 /* [CP] Check Pods Manifest.lock */ = {
+		CB679901377B321BC1797712 /* [CP] Copy Pods Resources */ = {
 			isa = PBXShellScriptBuildPhase;
 			buildActionMask = 2147483647;
 			files = (
 			);
 			inputPaths = (
 			);
-			name = ""[CP] Check Pods Manifest.lock"";
+			name = ""[CP] Copy Pods Resources"";
 			outputPaths = (
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 			shellPath = /bin/sh;
-			shellScript = ""diff \""${PODS_ROOT}/../Podfile.lock\"" \""${PODS_ROOT}/Manifest.lock\"" > /dev/null\nif [ $? != 0 ] ; then\n    # print error to STDERR\n    echo \""error: The sandbox is not in sync with the Podfile.lock. Run 'pod install' or update your CocoaPods installation.\"" >&2\n    exit 1\nfi\n"";
+			shellScript = ""\""${SRCROOT}/Pods/Target Support Files/Pods-RealmTestUITests/Pods-RealmTestUITests-resources.sh\""\n"";
 			showEnvVarsInLog = 0;
 		};
 /* End PBXShellScriptBuildPhase section */
@@ -616,7 +616,7 @@
 		};
 		6A7CF6411DF5D5C500D54676 /* Debug */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = B5CDBD318E151151EA2CF963 /* Pods-RealmTest.debug.xcconfig */;
+			baseConfigurationReference = BF74E2EA6114416342370291 /* Pods-RealmTest.debug.xcconfig */;
 			buildSettings = {
 				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
 				DEVELOPMENT_TEAM = T864D3RXRZ;
@@ -629,7 +629,7 @@
 		};
 		6A7CF6421DF5D5C500D54676 /* Release */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = 6D5926F3BAE435ED23587B11 /* Pods-RealmTest.release.xcconfig */;
+			baseConfigurationReference = 9341DF17B6959DCA7D785DC8 /* Pods-RealmTest.release.xcconfig */;
 			buildSettings = {
 				ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon;
 				DEVELOPMENT_TEAM = T864D3RXRZ;
@@ -642,7 +642,7 @@
 		};
 		6A7CF6441DF5D5C500D54676 /* Debug */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = EB9DCF9D2455306598199607 /* Pods-RealmTestTests.debug.xcconfig */;
+			baseConfigurationReference = 61868A30A04AE7E09A7BEEF3 /* Pods-RealmTestTests.debug.xcconfig */;
 			buildSettings = {
 				BUNDLE_LOADER = ""$(TEST_HOST)"";
 				DEVELOPMENT_TEAM = T864D3RXRZ;
@@ -656,7 +656,7 @@
 		};
 		6A7CF6451DF5D5C500D54676 /* Release */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = 1071BAD235260652D9B75781 /* Pods-RealmTestTests.release.xcconfig */;
+			baseConfigurationReference = E3DA3E9F4B42F95B82603E49 /* Pods-RealmTestTests.release.xcconfig */;
 			buildSettings = {
 				BUNDLE_LOADER = ""$(TEST_HOST)"";
 				DEVELOPMENT_TEAM = T864D3RXRZ;
@@ -670,7 +670,7 @@
 		};
 		6A7CF6471DF5D5C500D54676 /* Debug */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = 753A81689F5AF4553645F1D6 /* Pods-RealmTestUITests.debug.xcconfig */;
+			baseConfigurationReference = C72B1E08E14D1CAAAECCB3C9 /* Pods-RealmTestUITests.debug.xcconfig */;
 			buildSettings = {
 				DEVELOPMENT_TEAM = T864D3RXRZ;
 				INFOPLIST_FILE = RealmTestUITests/Info.plist;
@@ -683,7 +683,7 @@
 		};
 		6A7CF6481DF5D5C500D54676 /* Release */ = {
 			isa = XCBuildConfiguration;
-			baseConfigurationReference = 295B5881AB1F217B0DB73CE2 /* Pods-RealmTestUITests.release.xcconfig */;
+			baseConfigurationReference = 7A20EF2FBB2108FDCC769750 /* Pods-RealmTestUITests.release.xcconfig */;
 			buildSettings = {
 				DEVELOPMENT_TEAM = T864D3RXRZ;
 				INFOPLIST_FILE = RealmTestUITests/Info.plist;
```"
4647,Negative,"This should be fixed. We had a website bug that caused this for about 24 hours yesterday to this morning.
"
4648,Neutral,"that is why there is a need to be able to specify columns, which could be used as insert-update condition without specifying primary key #1473 , because in a real world primary key is not there in many cases ..may be something like:
`+ (NSArray *)uniqueKeys { return @[@""countryCode"", @""postalCode""] }` for a Geo Area
"
4649,Neutral,"You can't currently use 2 combined columns as a primary key. At the moment you can manually combine these columns and store the combined value in a third column which is primary. Using a helper method which updates both the base and combined column simultaneously can make this easier.
"
4650,Positive,"+1 This was a dealbreaker for me when evaluating Realm for use in some upcoming iOS apps.
"
4651,Positive,"Hi @vipindhangar!

Thanks for that! I think I need a little more information to work out what's going on here. It sounds like the resources from user1 aren't getting cleaned up properly before user2 comes in, causing some kind of inconsistent state.

How does user1 log out before user2 is allowed to log in? Are you able to post some code samples?

Thanks!"
4652,Positive,"Thank you very much!
"
4653,Neutral,"@kishikawakatsumi I can't say exactly how much data is actually stored, but it would make sense that we are going over realms abilities here because some of the people that are experiencing this issue have hundreds of images in their existing core data databases. "
4654,Neutral,"@michaelsand are you using Carthage 0.7.4?
"
4655,Positive,"Thanks, @crrobinson14. It looks like the exception that is being thrown is [`SlabAlloc::Retry`](https://github.com/realm/realm-core/blob/v1.5.0/src/realm/alloc_slab.cpp#L823-L829). Throwing that exception by itself shouldn't turn into a crash. Do you have a crash log that shows more details about the crash than your initial screenshot?
"
4656,Neutral,"Why not follow @tgoyne [suggestion](https://github.com/realm/realm-cocoa/pull/3369#issuecomment-200937115) and just have it accept a single object which is either an object or a collection of objects, thus you only have to cast back into that?
"
4657,Neutral,"The cause of the error is failing to create named pipe for inter-thread and inter-process notification, though I'm in the middle of the investigation. 

Realm will create `RLMNotifier` instance when initializing itself, 
https://github.com/realm/realm-cocoa/blob/master/Realm/RLMRealm.mm#L450-L452

but instantiating `RLMNotifier` is failed due to `mkfifo()` (named pipe) function is not allowed on actual devices from beta2.
https://github.com/realm/realm-cocoa/blob/cf1d33bf485516ec2992397017377551840650fd/Realm/RLMRealmUtil.mm#L192-L206
"
4658,Positive,"Yup, that seems to be the case- apologies for missing that issue in my cursory search. I can confirm that PR #5421 resolves my issue. Thanks!"
4659,Neutral,"Sure I can put something together. I’ll post a link once it’s published.

> On Aug 13, 2014, at 3:40 PM, bmunkholm notifications@github.com wrote:
> 
> Would it be possible for you to share some code (maybe a reduced version of 
> your app) that can reproduce this? You can use help@realm.io if we should 
> keep it confidential. 
> 
> On Thu, Aug 14, 2014 at 12:28 AM, Ben D. Jones notifications@github.com 
> wrote: 
> 
> > For me it’s happening on all devices, and combos. If I remove the array 
> > sorting and just use allObjects() the crash doesn’t happen (of course it 
> > makes it pretty useless). 
> > 
> > > On Aug 13, 2014, at 3:24 PM, Thomas Goyne notifications@github.com 
> > > wrote: 
> > > 
> > > I was hitting a crash in the same place yesterday while trying to 
> > > diagnose a different issue, but when I started trying to narrow it down it 
> > > magically stopped happening... 
> > > 
> > > Does this happen for all combinations of debug/release and device/sim, 
> > > or just one specific one? 
> > > 
> > > — 
> > > Reply to this email directly or view it on GitHub < 
> > > https://github.com/realm/realm-cocoa/issues/789#issuecomment-52120279>. 
> > 
> > — 
> > Reply to this email directly or view it on GitHub 
> > https://github.com/realm/realm-cocoa/issues/789#issuecomment-52120615. 
> > 
> > —
> > Reply to this email directly or view it on GitHub https://github.com/realm/realm-cocoa/issues/789#issuecomment-52121751.
"
4660,Neutral,"Let's continue on http://stackoverflow.com/questions/39741866/not-able-to-save-multiple-records-with-realm
I will re-open this issue if we find a bug in Realm.
"
4661,Neutral,"@stel  We encrypted each field before storing. Little hectic, but it works. "
4662,Neutral,"@springhand nope. I fixed a good few of my leaks by adding `[weak self]` inside all of my closures containing `self`, and checking for it. The memory leaks regarding these realm models is my only leak sources left."
4663,Neutral,"Looks like code that you're running in a Realm write transaction is throwing that exception. Realm doesn't handle exceptions thrown by your code, you have to handle those yourself.

Please keep in mind that most Objective-C frameworks don't throw exceptions as control flow or runtime handlable error reporting, but rather to indicate programmer error or API misuse, so you should instead avoid the exception being thrown rather than catching it explicitly."
4664,Neutral,":+1:
"
4665,Neutral,"This is now documented in https://realm.io/docs/objc/latest/#encryption.
"
4666,Positive,"@jpsim Thank you! I really appreciate all the help you and the other Realm peeps have given over the last few days. 
"
4667,Neutral,"Ah yes, is see. I missed this part in the docs:

> If a Realm is advanced to the latest version as part of starting a write transaction, notification handlers might be called synchronously. This will happen if, when the Realm was advanced to the latest version, Realm entities being observed were modified or deleted in a way that would trigger notifications. Such notifications will run within the context of the current write transaction, meaning attempting to begin a write transaction within the notification handler will cause Realm to throw an exception.

I understand that it is expected behavior, but is it also wanted behavior? Just curious what the usecase is.

Is calling refresh() an expensive operation when the realm is already up-to-date? Otherwise i can add an extension that always calls refresh() before starting the write-transaction.
"
4668,Positive,"Great, well that is a great catch. If you need any other info just tell me."
4669,Neutral,"Tagging as a P1 since this breaks code signatures of the frameworks when following the installation instructions for prebuilt binaries.
"
4670,Neutral,"Hi, I have similar issue. It appears not every time, only on v0.97, on 0.96.3 seems to be ok. I also noticed that it happens while serialising large JSON file to Object subclasses, but in random place during this process.  

My stack trace: 

```
* thread #1: tid = 0x98ef49, 0x00000001040d7aff Realm`(anonymous namespace)::TransactLogObserver::TransactLogObserver<realm::_impl::transaction::advance(this=0x00007fff5c47b440, context=0x00007f8d8402a300, sg=0x00007f8d830bd600, func=0x00007fff5c47b430, validate_schema_changes=true)::$_0>(realm::BindingContext*, realm::SharedGroup&, realm::_impl::transaction::advance(realm::SharedGroup&, realm::ClientHistory&, realm::BindingContext*)::$_0&&, bool) + 1279 at transact_log_handler.cpp:227, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)
  * frame #0: 0x00000001040d7aff Realm`(anonymous namespace)::TransactLogObserver::TransactLogObserver<realm::_impl::transaction::advance(this=0x00007fff5c47b440, context=0x00007f8d8402a300, sg=0x00007f8d830bd600, func=0x00007fff5c47b430, validate_schema_changes=true)::$_0>(realm::BindingContext*, realm::SharedGroup&, realm::_impl::transaction::advance(realm::SharedGroup&, realm::ClientHistory&, realm::BindingContext*)::$_0&&, bool) + 1279 at transact_log_handler.cpp:227
    frame #1: 0x00000001040d71be Realm`(anonymous namespace)::TransactLogObserver::TransactLogObserver<realm::_impl::transaction::advance(this=0x00007fff5c47b440, context=0x00007f8d8402a300, sg=0x00007f8d830bd600, func=0x00007fff5c47b430, validate_schema_changes=true)::$_0>(realm::BindingContext*, realm::SharedGroup&, realm::_impl::transaction::advance(realm::SharedGroup&, realm::ClientHistory&, realm::BindingContext*)::$_0&&, bool) + 62 at transact_log_handler.cpp:203
    frame #2: 0x00000001040d7161 Realm`realm::_impl::transaction::advance(sg=0x00007f8d830bd600, history=0x00007f8d81db8850, context=0x00007f8d8402a300) + 81 at transact_log_handler.cpp:436
    frame #3: 0x00000001040c7738 Realm`realm::Realm::notify(this=0x00007f8d81db8770) + 472 at shared_realm.cpp:368
    frame #4: 0x0000000103f4286c Realm`realm::_impl::ExternalCommitHelper::add_realm(this=0x0000000103f42830, info=0x00007f8d81db8770)::$_1::operator()(void*) const + 28 at external_commit_helper.cpp:256
    frame #5: 0x0000000103f42848 Realm`realm::_impl::ExternalCommitHelper::add_realm(info=0x00007f8d81db8770)::$_1::__invoke(void*) + 24 at external_commit_helper.cpp:255
    frame #6: 0x0000000105979a31 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
    frame #7: 0x000000010596f95c CoreFoundation`__CFRunLoopDoSources0 + 556
    frame #8: 0x000000010596ee13 CoreFoundation`__CFRunLoopRun + 867
    frame #9: 0x000000010596e828 CoreFoundation`CFRunLoopRunSpecific + 488
    frame #10: 0x000000010a975ad2 GraphicsServices`GSEventRunModal + 161
    frame #11: 0x00000001066e2610 UIKit`UIApplicationMain + 171
    frame #12: 0x00000001038705bd AppName`main + 109 at AppDelegate.swift:15
    frame #13: 0x0000000108f2392d libdyld.dylib`start + 1
```

It might be related with issue https://github.com/realm/realm-cocoa/issues/3035. These issues appears alternatively. 

```
util/thread.cpp:165: [realm-core-0.95.5] Destruction of mutex in use
0   Realm                               0x000000010e297668 _ZN5realm4util18terminate_internalERNSt3__118basic_stringstreamIcNS1_11char_traitsIcEENS1_9allocatorIcEEEE + 40
1   Realm                               0x000000010e29793a _ZN5realm4util9terminateEPKcS2_l + 458
2   Realm                               0x000000010e297db1 _ZN5realm4util5Mutex14destroy_failedEi + 33
3   Realm                               0x000000010e378dab _ZN5realm11SharedGroupD2Ev + 267
4   Realm                               0x000000010e25cd94 _ZN5realm5RealmD2Ev + 2116
5   Realm                               0x000000010e25cec5 _ZN5realm5RealmD1Ev + 21
6   Realm                               0x000000010e26b9c8 _ZNSt3__120__shared_ptr_pointerIPN5realm5RealmENS_14default_deleteIS2_EENS_9allocatorIS2_EEE16__on_zero_sharedEv + 152
7   libc++.1.dylib                      0x0000000112e93dea _ZNSt3__119__shared_weak_count16__release_sharedEv + 44
8   Realm                               0x000000010e121fcf _ZNSt3__110shared_ptrIN5realm5RealmEED2Ev + 47
9   Realm                               0x000000010e119d05 _ZNSt3__110shared_ptrIN5realm5RealmEED1Ev + 21
10  Realm                               0x000000010e236e3e -[RLMRealm .cxx_destruct] + 126
11  libobjc.A.dylib                     0x000000010f35f7bb _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127
12  libobjc.A.dylib                     0x000000010f36a390 objc_destructInstance + 93
13  libobjc.A.dylib                     0x000000010f36a3c3 object_dispose + 22
14  Realm                               0x000000010e2343e2 -[RLMRealm dealloc] + 258
15  libobjc.A.dylib                     0x000000010f374afe _ZN11objc_object17sidetable_releaseEb + 232
16  libobjc.A.dylib                     0x000000010f3750b8 _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 488
17  libdispatch.dylib                   0x0000000113073c75 _dispatch_root_queue_drain + 1963
18  libdispatch.dylib                   0x00000001130734c5 _dispatch_worker_thread3 + 111
19  libsystem_pthread.dylib             0x00000001133c368f _pthread_wqthread + 1129
20  libsystem_pthread.dylib             0x00000001133c1365 start_wqthread + 13
IMPORTANT: if you see this error, please send this log to help@realm.io.group.cpp:1557: [realm-core-0.95.5] Assertion failed: is_attached()
0   Realm                               0x000000010e297668 _ZN5realm4util18terminate_internalERNSt3__118basic_stringstreamIcNS1_11char_traitsIcEENS1_9allocatorIcEEEE + 40
1   Realm                               0x000000010e29793a _ZN5realm4util9terminateEPKcS2_l + 458
2   Realm                               0x000000010e373da8 _ZN5realm5Group16advance_transactEmmRNS_5_impl17NoCopyInputStreamE + 840
3   Realm                               0x000000010e27ccdd _ZN5realm5_impl11GroupFriend16advance_transactERNS_5GroupEmmRNS0_17NoCopyInputStreamE + 45
4   Realm                               0x000000010e2743fc _ZN5realm11SharedGroup12advance_readIN12_GLOBAL__N_120TransactLogValidatorEEEvRNS_7HistoryEPT_NS0_9VersionIDE + 1052
5   Realm                               0x000000010e273fd5 _ZN5realm5_impl17SharedGroupFriend12advance_readIN12_GLOBAL__N_120TransactLogValidatorEEEvRNS_11SharedGroupERNS_7HistoryEPT_NS5_9VersionIDE + 69
6   Realm                               0x000000010e273f85 _ZN5realm14LangBindHelper12advance_readIN12_GLOBAL__N_120TransactLogValidatorEEEvRNS_11SharedGroupERNS_7HistoryEOT_NS4_9VersionIDE + 69
7   Realm                               0x000000010e273e6a _ZZN5realm5_impl11transaction7advanceERNS_11SharedGroupERNS_13ClientHistoryEPNS_14BindingContextEENK3$_0clIJRN12_GLOBAL__N_120TransactLogValidatorEEEEDaDpOT_ + 106
8   Realm                               0x000000010e273a6c _ZN12_GLOBAL__N_119TransactLogObserverC2IZN5realm5_impl11transaction7advanceERNS2_11SharedGroupERNS2_13ClientHistoryEPNS2_14BindingContextEE3$_0EESA_S6_OT_b + 1132
9   Realm                               0x000000010e2731be _ZN12_GLOBAL__N_119TransactLogObserverC1IZN5realm5_impl11transaction7advanceERNS2_11SharedGroupERNS2_13ClientHistoryEPNS2_14BindingContextEE3$_0EESA_S6_OT_b + 62
10  Realm                               0x000000010e273161 _ZN5realm5_impl11transaction7advanceERNS_11SharedGroupERNS_13ClientHistoryEPNS_14BindingContextE + 81
11  Realm                               0x000000010e263738 _ZN5realm5Realm6notifyEv + 472
12  Realm                               0x000000010e0de86c _ZZN5realm5_impl20ExternalCommitHelper9add_realmEPNS_5RealmEENK3$_1clEPv + 28
13  Realm                               0x000000010e0de848 _ZZN5realm5_impl20ExternalCommitHelper9add_realmEPNS_5RealmEEN3$_18__invokeEPv + 24
14  CoreFoundation                      0x000000010fb15a31 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
15  CoreFoundation                      0x000000010fb0b95c __CFRunLoopDoSources0 + 556
16  CoreFoundation                      0x000000010fb0ae13 __CFRunLoopRun + 867
17  CoreFoundation                      0x000000010fb0a828 CFRunLoopRunSpecific + 488
18  GraphicsServices                    0x0000000114b11ad2 GSEventRunModal + 161
19  UIKit                               0x000000011087e610 UIApplicationMain + 171
20  AppName                            0x000000010da0c57d main + 109
21  libdyld.dylib                       0x00000001130bf92d start + 1
22  ???                                 0x0000000000000001 0x0 + 1
IMPORTANT: if you see this error, please send this log to help@realm.io
```

I hope that it help. 
"
4671,Positive,"This seems pretty simple. I can do this in Swift 3 with the Realm Database but not with the Object Server (although I'm certain that has nothing to do with it). I have tried adding and subtracting the number of articles in my `numberOfItemsInSection` e.g. `articles -= 1`. 

This raises the exception `Left side of mutating operator isn't mutable: 'articles' is a 'let' constant`

Here's what I am trying to accomplish:

**Second VC**

     //  Write article to the realm
    func publishToRealm() {
        DispatchQueue.main.async {
            let article = Article()
            self.realm = try! Realm(configuration: myConfig(user: SyncUser.current!))
            article.username = self.usernameLabel.text!
            article.text = self.editorTextView.text
            article.title = self.editorTitleTextField.text!
            try! self.realm.write {
                self.realm.add(article)
            }
        }
    }

**First VC**

These are my variables

    // Set up realm
    var realm : Realm!
    var articles : Results<Article>?
    var notificationToken: NotificationToken!

This is what I call in `viewDidLoad` e.g. `setUpRealm()`

     // Open realm using the Daily configuration
    private func setUpRealm() {
        DispatchQueue.main.async {
            // Acknowledge the user and access the realm on the main thread
            self.realm = try! Realm(configuration: myConfig(user: SyncUser.current!))
            self.articles = self.realm.objects(Article.self).sorted(byKeyPath: ""created"", ascending: false)
            
            // Observe notifications and update the UI when the underlying data has been changed
            self.notificationToken = self.articles?.addNotificationBlock { [weak self] (changes: RealmCollectionChange) in
                
                guard (self?.collectionView) != nil else { return }
                
                switch changes {
                case .initial:
                    self?.collectionView.reloadData()
                    break
                    
                case .update(_, let deletions, let insertions, let modifications):
                    self?.collectionView.performBatchUpdates({
                        self?.collectionView.deleteItems(at: deletions.map({ IndexPath(row: $0, section: 0)}))
                        self?.collectionView.insertItems(at: insertions.map({ IndexPath(row: $0, section: 0)}))
                        self?.collectionView.reloadItems(at: modifications.map({ IndexPath(row: $0, section: 0)}))
                        
                    }, completion: nil)
                    break
                    
                case .error(let error):
                    print(error.localizedDescription)
                    break
                }
            }
        }
    }

This is my data source

    /// Data Source Methods
    extension FirstViewController: UICollectionViewDataSource {
    
    func numberOfSections(in collectionView: UICollectionView) -> Int {
        return  1
    }
    
    
    func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -> Int {
        guard let articles = articles?.count  else { return 0 }
            return articles 
    }

    
    func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -> UICollectionViewCell {
        
        let cell = collectionView.dequeueReusableCell(withReuseIdentifier: reuseIdentifier, for: indexPath) as! ArticleCell
        
        let dateFormatter = DateFormatter()
        dateFormatter.dateStyle = .medium
        
        if (articles?.count) != nil {
            let article = articles?[indexPath.item]
            cell.usernameLabel.text = article?.username
            cell.articleTitleLabel.text = article?.title
            cell.articleTextView.text = article?.text
        }
    }

Apologies for the delay. Thank you, again, for your help."
4672,Neutral,"It appears that the TMPDIR variable in the build.sh install script was not being defined for 0.96.3.
After defining it explicitly on the command line and rerunning the script, the build worked properly.

TMPDIR=/path/to/valid/tmp pod install 
"
4673,Positive,"Thanks @kishikawakatsumi 
"
4674,Positive,"Hi @afriedman94,

It looks like you're still having issues. It shouldn't be necessary to specify the `:git =>` option in CocoaPods.

Would you be willing to share the version of CocoaPods you're using? You can check this using the command `pod --version`.

We have a couple of CocoaPods-related troubleshooting tips in our [documentation](https://realm.io/docs/swift/latest/#reinstalling-via-dependency-managers). In particular, you should try cleaning your build folder, and resetting your project's CocoaPods state and caches using the Terminal commands given.

Hope this helps; if you have any questions please do let us know, either in this ticket or by opening a new issue. Thanks!
"
4675,Negative,"@bmunkholm linking objects across Realms is not something that we will ever support with the given design, so it doesn't make sense to keep this open.

If users need this they can either copy objects across Realm, or they can use primary keys to reference objects across multiple Realms. Both of these scenarios are already supported in the binding.
"
4676,Neutral,"I'm having the same issue when launching my app.

`uncaught exception in notifier thread: N5realm10LogicErrorE: Bad version number`

- Realm 2.1.1 (RealmSwift/cocoapods)
- iOS 10.1
- XCode 8.1

No crash and everything is working fine. It seems to only appear once in the log."
4677,Neutral,"> For my original question - I think I have to iterate RLMArray and append each object in NSArray,

No, that also wouldn't create standalone objects. See my last comment as to why.
"
4678,Negative,"I should add that I'm sorry for the inconvenience. We generally strive to avoid breaking user code, but since this has already shipped, I find it unlikely that we'll change it back.
"
4679,Positive,"Thanks for shedding some light into this!

After some research on The Net, I stumbled across the ""rpath"" approach, but unfortunately it was to no avail.

Next thing on my plate is replicating what's been publish in Alsey's blog.
"
4680,Neutral,"Done in #3081.
"
4681,Negative,"do it every time :) doesn't work :(
"
4682,Neutral,":+1: 
"
4683,Neutral,"Hi @scriptedSheep, could you please share your code to help us reproduce this issue?

My first two guesses would be that there's an `RLMRealm` instance being created outside the autorelease pool, but that gets deallocated inside the pool; or that there is a bug in Realm's core.

But these are just guesses from the crash log. Seeing the code to reproduce this issue will help understand what's happening.
"
4684,Neutral,"Turns out that the exception is just thrown at one place, so that `old_version` is always greater than `new_version`. So I guess that we just swapped old and new version in the error message by accident.
"
4685,Positive,"Thanks for the help @mrackwitz , @kishikawakatsumi. A coworker of mine claimed you _could_ in previous versions (which explains why I never got this error in .8). At least, for now, you've helped me white box the problem so I know what's going on. Maybe/hopefully it's supported in future versions.

Thanks again!
"
4686,Positive,"Yeah, the initializer is probably better than the [`+initialize`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/#//apple_ref/occ/clm/NSObject/initialize) method.

> What am i missing by not being able to close the Realm?

You won't be able to reset the database contents by deleting it or seed your Realm with a bundled file.
"
4687,Positive,"Thanks for the excellent reproduction case. Turns out that this is a duplicate of https://github.com/realm/realm-cocoa/issues/2905. There is ongoing work in PR https://github.com/realm/realm-cocoa/pull/2901 to fix this issue. I'll close this issue for now.
"
4688,Positive,"@BarlowTucker This one is work for me.. thank you
"
4689,Neutral,"I think the problem is `fireDateForTokenExpirationDate` returns `nil`. 

https://github.com/realm/realm-cocoa/blob/e44a4760337c2c70d99e54aff74047ac30540ee8/Realm/RLMSyncSessionRefreshHandle.mm#L93-L98

Is the behavior of that as intended?
"
4690,Neutral,"@phongleq @GreatApe I remember reading this elsewhere that Realm needs to have detailed notifications to support this but doesn't at the moment. Basically you just get a notification when something changed but not what changed and how (whether added, deleted, etc.). That's why the example just does a reload on receiving a notification.
"
4691,Neutral,"To avoid having data change beneath your feet in the middle of a function, we only update which version of the data an RLMRealm uses between each iteration of the runloop. Unfortunately, because GCD blocks are the highest-priority events, `dispatch_async(dispatch_get_main_queue(), ^{ ... })` immediately after a commit can result in the block being run on the main thread before our autorefresh signal, resulting in the block seeing the version of the Realm from before the commit.

You can work around this by explicitly calling `[realm refresh]` at the beginning of your block that needs to see the latest data. The more proper way would be to instead do the work in a Realm notification block rather than a dispatched block, but with the current limited notifications that'd be difficult to do.
"
4692,Neutral,"+1
"
4693,Neutral,"@austinzheng I can see this bug still reproduces on 3.0.1

```
PODS:
  - Realm (3.0.1):
    - Realm/Headers (= 3.0.1)
  - Realm/Headers (3.0.1)
  - RealmSwift (3.0.1):
    - Realm (= 3.0.1)
```"
4694,Neutral,"FYI, the .self requirement may be relaxed post Swift 3.0, see https://github.com/apple/swift-evolution/blob/master/proposals/0090-remove-dot-self.md.
"
4695,Positive,"@anbarasu0504 If you're still having issues here, please post more of your code for us to have a look. :)

It definitely sounds like some sort of scoping issue with the reference to your tableView.
"
4696,Negative,"In general you will want to populate the properties of your view controllers in `viewDidLoad` rather than directly initializing them. It's unfortunately a bit more verbose (and in Swift requires using implicitly-unwrapped optionals), but doing work on view controller construction tends to run into a lot of issues like this where it's constructed surprisingly early in the life cycle.
"
4697,Positive,@westd sudo xcode-select -s /Applications/Xcode.app is a life saver! ❤️  
4698,Neutral,"howdy, happened to me too - Derping for life
"
4699,Neutral,"The error in question is:

```
CompileC Pods.build/Debug-iphonesimulator/Realm.build/Objects-normal/x86_64/list.o Realm/Realm/ObjectStore/src/list.cpp normal x86_64 c++ com.apple.compilers.llvm.clang.1_0.compiler

In file included from PJTEST 2/Pods/Realm/Realm/ObjectStore/src/list.cpp:19:
PJTEST 2/Pods/Vialer-pjsip-iOS/VialerPJSIP.framework/Versions/A/Headers/pj++/list.hpp:23:10: fatal error: 'pj/list.h' file not found
#include <pj/list.h>
         ^
1 error generated.
```

What's happening is that when building the Realm pod, headers from the Vialer-pjsip-iOS pod are being picked up instead of Realm's headers (list.cpp does `#include ""list.hpp""` and expects to find its own list.hpp rather than one from a different directory). I'm not clear whether this is a bug in Realm's CocoaPod spec or Vialer-pjsip-iOS's CocoaPod spec, or if something else is going on. Someone more familiar with CocoaPods can probably shed some more light on this.
"
4700,Neutral,"We should really map out all the methods in NSArray and NSMutableArray and
see which ones that would be relevant to support.

On Mon, Dec 29, 2014 at 10:52 AM, Ari Lazier notifications@github.com
wrote:

> This is available on NSMutableArray. Requested by a user.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/realm/realm-cocoa/issues/1276.
"
4701,Neutral,"@jpsim if you try the following, the test fails:

```
let objectTypes: [Object.Type] = [SwiftStringObject.self, SwiftBoolObject.self]

for objectType in objectTypes {
    let object = realm.create(objectType)
}
```

The created object will be of type `Object` and not `SwiftStringObject` or `SwiftBoolObject`
"
4702,Neutral,"To do this safely, you can do your copy within an @autoreleasepool block. If you do this the realm instance will be disposed of at the end of the block, and later requests for a realm will create a new instance.
"
4703,Neutral,"Then at least have it throw an error.  I am using this with a primary key.  Sometimes, when I am downloading objects, I might download existing objects, but do not want to update them, thus the desire to mark update: false.  This however, crashes my app
"
4704,Neutral,"@thonydam Please file a new issue with information about what you're seeing. This reporter of this bug filed this as an enhancement request for Realm to provide more visibility into change notifications during development. It'd be confusing to try and also track the performance problem you're seeing in this same issue.
"
4705,Neutral,"Ah ok, I misread. `RLMArray` _already_ conforms to `RLMCollection`, so the solution is just to call, for example

`[user.followers sortedResultsUsingProperty:@""firstname"" ascending:YES];`
"
4706,Neutral,"@bdash I can see in the debugger that `[RLMObject objectInRealm: forPrimaryKey:]` returns an object of my custom class `RealmObject` but both my properties `key` and `value` are nil. While doing detailed step by step debugging in Realm source I found that the exact place where the properties are supposed to be assigned from the row, but that part is skipped because `isSwiftClass` is false. That happens in function `RLMInitializeSwiftAccessorGenerics()`, like I explained above.

https://github.com/realm/realm-cocoa/blob/9df4bcb39459bb58a376a4ef0e088f8fc2376a83/Realm/RLMObjectStore.mm#L78"
4707,Positive,"Hi @mustafa-almulla, are you using a release candidate of CocoaPods 1.0 by any chance? If so, please note that Realm only supports the latest stable version of CocoaPods (0.39.0) and that we're tracking adding support for CocoaPods 1.0 in #3052.

If you're already using CocoaPods 0.39.0, you can reset your pods installation by running the following commands, which should reinstall Realm successfully:

```
rm -rf ~/Library/Caches/CocoaPods
rm -rf Pods
pod install
```

If this still doesn't help your situation, please report back providing more information following our [guidelines](https://github.com/realm/realm-cocoa/blob/master/CONTRIBUTING.md#filing-issues).

Thanks!
"
4708,Neutral,"I built my sample app on top of Cocoa, so that may account for the difference.

The callback blocks are powered by Realm notifications under the hood, and thus require an active run loop on the thread to work properly. I'm pretty sure Swift console applications don't start a runloop by default; if you start one manually do the callbacks get called?"
4709,Neutral,"I was able to reproduce this by following the steps to reproduce listed in the original report. I'm not yet sure why it fails, but I did notice that Realm appears to be built in two different ways. It's built by Carthage due to being listed as a dependency in HotTakeRealm's Cartfile, and it's built as part of HotTakeRealm's workspace due it including Realm's Xcode project from a checked-in copy of Realm's source in HotTakeRealm's git repository. The Realm build is failing when being built as part of HotTakeRealm's workspace."
4710,Neutral,I just refresh the realm in main queue after I finish write operation. And I use RAC to observe the UserInfo's change in main queue.Am I pass the UserInfo between queues?
4711,Neutral,":dolphin:
"
4712,Positive,"I see, thank you.
"
4713,Neutral,Fixed in #5273.
4714,Neutral,"We certainly care about adding this feature, but have to weigh it against all the other work that needs to be done.

The fact that it's easy to work around for most cases (see recommendations in https://github.com/realm/realm-cocoa/issues/2879#issuecomment-158101749) is one reason why this isn't prioritized more highly.
"
4715,Positive,Okay @semireg - thanks for the summary.
4716,Neutral,"This might be somewhat orthogonal to the goal of this feature, but perhaps a good first step and useful extension would be something similar to NSIncrementalStore that allows us to fetch results remotely and populate a local realm as needed. 
"
4717,Negative,"@jpsim Any plans on supporting it? I am forced to do so, as other things are not working properly with stable cocoapods version. With beta I don't have any problems except for RealmSwift import. :( 
"
4718,Neutral,"That'd explain it, then. Closing this as I didn't remember having used null-string support build in the test project.
"
4719,Neutral,"@scinfu did deleting the `/tmp/core_bin` directory fix this issue for you? Please re-open this issue if you're still experiencing problems.
"
4720,Neutral,"It is possible that it is only on 32 bit devices since these are both 32 bit devices and we do not have the issue on any of our 64 bit devices.  We just did not want to classify it as all 32 bit devices since the iPhone 5 and iPad 2 are the only two 32 bit devices we have to test it.  The id variable is an Int64.
"
4721,Positive,"First of all @bigfish24: thank you so much  for fixing this in such a quick timeframe.

Thumbs up to your wonderful and detailed explanation of the issue. 
Now I can totally understand that the ""myth"" that UI animations rules (NSEventTrackingRunLoopMode) over other resources is true. 

And thanks again for pointing that excelent reading about IPC on @realm. Excelent piece of engineering!

I hope this fix will also help many more users as it helps us.

Cheers,

Carlos

> On 10 Dec 2015, at 19:56, Adam Fish notifications@github.com wrote:
> 
> The issue was related to how Realm notifies other Realm instances to update. When you commit a write transaction on a background thread, a notification is then sent to other Realm instances on other threads (this works through a named pipe) to refresh to the latest version of the DB that includes the recently committed transaction. The problem though is that notification is processed on the receiving thread only during the default run loop mode. When you are scrolling, the main thread will run in NSEventTrackingRunLoopMode for that pass of the run loop. This means that Realm's notification will not be processed until the thread is back in default mode.
> 
> The result of this means that RBQFetchedResultsController should simply manually call refresh on the Realm that contains the objects backed by the FRC before attempting to retrieve it. This alleviates the assumption that the notification to trigger the refresh has been processed before object/safeObjectAtIndexPath: is called.
> 
> I can confirm this commit fixes the problem: Roobiq/RBQFetchedResultsController@03de5b6
> 
> —
> Reply to this email directly or view it on GitHub.
"
4722,Neutral,@TimOliver : I left my app running for a while on Friday with no crash happening. I'll turn up the frequency of the REST calls which resulted in this crash and try again when I'm back at work in the new year. Will follow up with any progress I make.
4723,Neutral,"Hello Tim,

Please ignore the last message.

Please find the code flow which is creating problem : -

1. //----------------------------------------------------------
------------------------------------------------------------
---------------------------
- (void)updateRealm:(NSDictionary *)message
//----------------------------------------------------------
------------------------------------------------------------
---------------------------
{
    RLMRealm *realm = [RLMRealm defaultRealm];
    [realm beginWriteTransaction];
    [DBMessage createOrUpdateInRealm:realm withValue:message];
    [realm commitWriteTransaction];
}

2. + (instancetype)createOrUpdateInRealm:(RLMRealm *)realm
withValue:(id)value {
    // verify primary key
    RLMObjectSchema *schema = [self sharedSchema];
    if (!schema.primaryKeyProperty) {
        NSString *reason = [NSString stringWithFormat:@""'%@' does not have
a primary key and can not be updated"", schema.className];
        @throw [NSException exceptionWithName:@""RLMExecption"" reason:reason
userInfo:nil];
    }
    return (RLMObject *)RLMCreateObjectInRealmWithValue(realm, [self
className], value, true);
}

3. + (instancetype)createOrUpdateInRealm:(RLMRealm *)realm
withValue:(id)value {
    // verify primary key
    RLMObjectSchema *schema = [self sharedSchema];
    if (!schema.primaryKeyProperty) {
        NSString *reason = [NSString stringWithFormat:@""'%@' does not have
a primary key and can not be updated"", schema.className];
        @throw [NSException exceptionWithName:@""RLMExecption"" reason:reason
userInfo:nil];
    }
    return (RLMObject *)RLMCreateObjectInRealmWithValue(realm, [self
className], value, true);
}

4. static NSUInteger getRowForObjectWithPrimaryKey(RLMClassInfo const&
info, id primaryValue) {

    REALM_ASSERT_DEBUG(info.propertyForPrimaryKey());

    RLMProperty *const primaryProperty = info.propertyForPrimaryKey();
    const NSUInteger primaryPropertyColumn =
info.tableColumn(primaryProperty);

    switch (primaryProperty.type) {
        case RLMPropertyTypeString:
            return info.table()->find_first_string(primaryPropertyColumn,
RLMStringDataWithNSString(primaryValue));
//In this line the app get crashed
        case RLMPropertyTypeInt:
            if (primaryValue) {
                return info.table()->find_first_int(primaryPropertyColumn,
[primaryValue longLongValue]);
            } else {
                return info.table()->find_first_null(primaryPropertyColumn);
            }

        default:
            REALM_UNREACHABLE();
    }
}

Thanks

Vipin Dhangar
9893074069
8770280434


On Fri, Dec 23, 2016 at 3:41 PM, Vipin Dhangar <dhangar.vipin@gmail.com>
wrote:

> Hello Tim,
>
> Please find the code flow which is creating problem : -
>
> 1. //----------------------------------------------------------
> ------------------------------------------------------------
> ---------------------------
> - (void)updateRealm:(NSDictionary *)message
> //----------------------------------------------------------
> ------------------------------------------------------------
> ---------------------------
> {
>     RLMRealm *realm = [RLMRealm defaultRealm];
>     [realm beginWriteTransaction];
>     [DBMessage createOrUpdateInRealm:realm withValue:message];
>     [realm commitWriteTransaction];
> }
>
> 2. + (instancetype)createOrUpdateInRealm:(RLMRealm *)realm
> withValue:(id)value {
>     // verify primary key
>     RLMObjectSchema *schema = [self sharedSchema];
>     if (!schema.primaryKeyProperty) {
>         NSString *reason = [NSString stringWithFormat:@""'%@' does not
> have a primary key and can not be updated"", schema.className];
>         @throw [NSException exceptionWithName:@""RLMExecption""
> reason:reason userInfo:nil];
>     }
>     return (RLMObject *)RLMCreateObjectInRealmWithValue(realm, [self
> className], value, true);
> }
>
>
> Vipin Dhangar
> 9893074069
> 8770280434
>
>
> On Fri, Dec 23, 2016 at 6:31 AM, Tim Oliver <notifications@github.com>
> wrote:
>
>> Hi @vipindhangar <https://github.com/vipindhangar>!
>>
>> Thanks for that! I think I need a little more information to work out
>> what's going on here. It sounds like the resources from user1 aren't
>> getting cleaned up properly before user2 comes in, causing some kind of
>> inconsistent state.
>>
>> How does user1 log out before user2 is allowed to log in? Are you able to
>> post some code samples?
>>
>> Thanks!
>>
>> —
>> You are receiving this because you were mentioned.
>> Reply to this email directly, view it on GitHub
>> <https://github.com/realm/realm-cocoa/issues/4479#issuecomment-268923471>,
>> or mute the thread
>> <https://github.com/notifications/unsubscribe-auth/ACJKSzSfSMPhRdJMjcF6CQ0dLSP8AHX6ks5rKx1egaJpZM4LT_IC>
>> .
>>
>
>
"
4724,Neutral,"This issue seems to be related to https://github.com/Carthage/Carthage/issues/417. It looks like a bug in `xcodebuild` where an incompatible target is picked.

I was able to work around this by changing the build command for the simulator to pick the latest OS, that's the same fix suggested for the Carthage issue.

This is the new build command in `build.sh`:

```
$cmd ""-scheme '$scheme' -configuration $config -sdk iphonesimulator ONLY_ACTIVE_ARCH=NO -destination 'platform=iOS Simulator,name=iPhone 4s,OS=latest'""
```

That allows me to successfully build:

```
sh build.sh ios-swift
```

However, when I run: 

```
sh build.sh build
```

I run into the following error:

```
Ld build/DerivedData/Realm/Build/Products/Release-watchos/Realm.framework/Realm normal armv7k
    cd /Users/benjaminencz/Downloads/realm-cocoa
    export PATH=""/Applications/Xcode-beta.app/Contents/Developer/Platforms/WatchOS.platform/Developer/usr/bin:/Applications/Xcode-beta.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/libexec:/usr/local/bin:/usr/bin:/bin:/usr/libexec:/usr/texbin:/Users/benjaminencz/.rvm/gems/ruby-2.2.0/bin:/Users/benjaminencz/.rvm/gems/ruby-2.2.0@global/bin:/Users/benjaminencz/.rvm/rubies/ruby-2.2.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/texbin:/Users/benjaminencz/.rvm/bin""
    export WATCHOS_DEPLOYMENT_TARGET=2.0
    /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch armv7k -dynamiclib -isysroot /Applications/Xcode-beta.app/Contents/Developer/Platforms/WatchOS.platform/Developer/SDKs/WatchOS2.0.sdk -L/Users/benjaminencz/Downloads/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos -Lcore -F/Users/benjaminencz/Downloads/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos -filelist /Users/benjaminencz/Downloads/realm-cocoa/build/DerivedData/Realm/Build/Intermediates/Realm.build/Release-watchos/watchOS.build/Objects-normal/armv7k/Realm.LinkFileList -install_name @rpath/Realm.framework/Realm -Xlinker -rpath -Xlinker @executable_path/Frameworks -Xlinker -rpath -Xlinker @loader_path/Frameworks -mwatchos-version-min=2.0 -dead_strip -fembed-bitcode-marker -lrealm-watchos -stdlib=libc++ -fobjc-arc -fobjc-link-runtime -fapplication-extension -single_module -compatibility_version 1 -current_version 1 -Xlinker -dependency_info -Xlinker /Users/benjaminencz/Downloads/realm-cocoa/build/DerivedData/Realm/Build/Intermediates/Realm.build/Release-watchos/watchOS.build/Objects-normal/armv7k/Realm_dependency_info.dat -o /Users/benjaminencz/Downloads/realm-cocoa/build/DerivedData/Realm/Build/Products/Release-watchos/Realm.framework/Realm
ld: in core/librealm-watchos.a(librealm-WatchOS-prelink.a.o), building for watchOS, but linking in object file built for iOS, for architecture armv7k
clang: error: linker command failed with exit code 1 (use -v to see invocation)
```

It seems like the linker error also occurs when working with Cocoapods and Realm for Swift 2: https://github.com/realm/realm-cocoa/issues/2210
"
4725,Negative,"I don't know if theses ""new version feature"" news on the website are published by you guys, but the method listed on the following url still uses the old method, thus misleading people, including myself.

@segiddins @jpsim @alazier 

[http://realm.io/news/realm-cocoa-0.89.0/](http://realm.io/news/realm-cocoa-0.89.0/)
"
4726,Neutral,"I read the docs and used:

    let facebookCredentials = SyncCredentials.facebook(token: FBSDKAccessToken.current().tokenString)

and then the `SyncUser.logIn` method calls the handler with the error:

> Error Domain=io.realm.sync Code=3 ""(null)"" UserInfo={statusCode=400}

There doesn't look that the `SyncUser.logIn` method is implemented in RealmTasks."
4727,Neutral,"Your `markerID` property's type is a pointer to an `NSInteger`. You probably want to store this as an integer: `@property (nonatomic) int markerID;`.
"
4728,Neutral,"+1
"
4729,Positive,"Thanks for filing this, @francisykl. We're already tracking this feature in #1265 so I'll be closing this ticket as a duplicate. Subscribe to that one for any updates on the topic.
"
4730,Neutral,"Let me investigate it a bit more. It only happens intermittently so is tricky to reproduce. I have noticed that occasionally a client seems to ""fall behind"" and can take a few minutes to reach the same state as the ROS. For instance:

I make a change on device A.
For quite a while (sometimes up to a minute or more) there is no activity in the log.
Then suddenly a flurry of changes occurs and the other devices (including simulator and MacOS client) all synchronize.

When I make changes on all devices simultaneously, it can take a while for the sync changes to be replicated across all devices.

Now I'm wondering whether I was trying to open a Realm on a device that didn't have all the updates and it was just taking a while (2-3 minutes) to synchronize before it was opened, i.e. I might not have been patient enough.

I have about 40K objects and the changes are of the order of 20-30 rows in a table. 

As I said, let me keep investigating this issue."
4731,Positive,"@bdash Thanks for clearing that up. For completeness sake, I've extended the sample to include lists as well, and added one level of depth.

```
                let realm = try! Realm()
                let p1 = Person(); p1.name = ""Tim""
                let p2 = Person(); p2.name = ""Tom""; p2.children.append(p1)
                let p3 = Person(); p3.name = ""Max""; p3.children.append(p2)
                let p4 = Person(); p4.name = ""Ben""; p4.children.append(p3)
                // Ben -> Max -> Tom -> Tim
                try! realm.write {
                    realm.add([p1,p2,p3,p4])
                }

                let ben = realm.objects(Person).filter(""name = 'Ben'"").first!
                // Result<T>s
                let children = ben.children.filter(""name = name"")
                let grandchildren = children.first!.children.filter(""name = name"")
                let grandgrandchildren = grandchildren.first!.children.filter(""name = name"")
                // List<T>s
//                let children = ben.children
//                let grandchildren = children.first!.children
//                let grandgrandchildren = grandchildren.first!.children


                let token = realm.addNotificationBlock { notification, realm in
                    print(""---"")
                    print(ben)
                    print(""---"")
                    print(children) // L3, R3
                    print(""---"")
                    print(grandchildren) // L2, R2
                    print(""---"")
                    print(grandgrandchildren) // L1, R1
                }
                try! realm.write {
                    // realm.delete(p4)
                    // realm.delete(p3)
                    // realm.delete(p2)
                    // realm.delete(p1)
                }
                // L1: Lists, delete p2: failed: caught ""RLMException"", ""RLMArray is no longer valid""
                // L2: Lists, delete p3, failed: caught ""RLMException"", ""RLMArray is no longer valid""
                // L3: Lists, delete p4: failed: caught ""RLMException"", ""RLMArray is no longer valid""

                // R1: Results, delete p2, SIGABRT in Realm`realm::LinkView::size(...) const with '[realm-core-0.95.5] Assertion failed: is_attached()'
                // R2: Results, delete p3, EXC_BAD_ACCESS in Realm`realm::TableViewBase::is_in_sync() const
                // R3: Results, delete p4, EXC_BAD_ACCESS in Realm`realm::TableViewBase::is_in_sync() const
```

We can see that adding an additional level of depth doesn't surface any other crashes. Yet we also see that `List`s throw an `RLMException` about not being valid anymore. Maybe `Result`s should also throw to indicate that they are not valid anymore?

@bdash, any ETA on when this will be resolved in core? Or can you provide a temporary work around for these situations?
"
4732,Neutral,"@JadenGeller It's not that I don't know it - it's that I wish I could make @xiaodao's function reusable for any object I have.
"
4733,Positive,"@tgoyne awesome, thanks a lot! :+1: 
"
4734,Neutral,"I made the messages the same in the migration work I am currently doing.
"
4735,Positive,Hi @JQHee. Just echoing my previous request. Would you be able to elaborate further or provide one or more of the things I requested above? Thanks.
4736,Neutral,"This error is thrown when you're adding an object that is already present in a Realm to a different Realm. In other words, one or more of the objects in the array passed to `-[RLMRealm addOrUpdateObjectsFromArray:]` are already associated with a different Realm (perhaps a Realm from a different thread, or a Realm at a different path on disk).
"
4737,Neutral,"That's correct. If the Playground process is read-only, it won't be possible to make changes to any Realm files from within it.

Yes, you can use the Simulator to test out writing to Realms with no limitations.
"
4738,Neutral,Any news on this one?
4739,Neutral,"The key part for sanitizing a Realm file is to use `writeCopyToPath:` at the end to get a new file with only the live data, as a Realm file will normally contain some old data that hasn't been overwritten yet. If the sensitive data isn't needed to reproduce the issue, one option would be to create a small program with your object schema but with all of the sensitive properties removed, open the Realm (with a no-op migration), and write a new copy.
"
4740,Positive,"Got it! Anything you can share with us that we could use to reproduce the hanging behavior would be greatly helpful. I understand how much work it is to repackage a project especially when you just want to get it out the door. Thanks for your patience in debugging this so far, glad to hear it is working at the very least! Feel free to ping on this issue/email, if you do come up with a small project we could use.
"
4741,Neutral,"```
   dynamic var name_parent = """"                   
   dynamic var ticker_parent = """"           
   dynamic var srs = """"                    
   dynamic var pts = """"                         
   dynamic var nav_price_ratio_fcst_parent = """"    
   dynamic var nav_fcst_parent = """"              
   dynamic var nav_parent = """"                  
```

```
    dynamic var name_parent = ""name""                   
    dynamic var ticker_parent = ""000001""           
    dynamic var srs = ""0""                    
    dynamic var pts = ""1""                         
    dynamic var nav_price_ratio_fcst_parent = ""1.05""    
    dynamic var nav_fcst_parent = ""-10.25""              
    dynamic var nav_parent = ""3.78""
```

##### This is a list entity. Each entity corresponding fields have different values.  And  i follow the values of one sort fields, not found in the sort order.

```
memoryRealm.objects(JSVMutualFundEntity).sorted(""nav_parent"", ascending: false)
```
"
4742,Neutral,"@hhanesand this would be one of the possible approaches I mentioned:

> I thought about other approaches. For example, to store the items in the Realm with the same hierarchy used in the table view, i.e. having section realm objects that are in an ordered list and contain the list items. But this would mean I have to add a notification block to each section, where these sections of course are loaded dynamically and can be modified/deleted themselves.

I was not sure if the notification tokens work well in such dynamic scenario. It's basically the same as lists with items that can be modified/deleted themselves, but with the difference that you're using all the sections / listening to multiple notification blocks from the sections as well as the contained items at the same time. It may be that it works when I test it, but in some situations something weird happens. So I wanted to ask first. Is this recommended?
"
4743,Neutral,This was fixed in 2.8.1.
4744,Neutral,"@Padarom Carthage 0.9.2 or 0.9.3 will probably fix this issue. Please update your Carthage to the latest version. Carthage 0.9.2 and 0.9.3 cannot be installed via Homebrew. So you build Carthage from source or download and run the Carthage.pkg from latest release https://github.com/Carthage/Carthage/releases
"
4745,Positive,"Thanks for reporting this, @thanyalukj. I just pushed a workaround to the `swift-2.0` branch (d404ffd2c9abf5e2cbc3b0789052af803deda5bc), so if you pull from CocoaPods again, this should be resolved. I'll be filing a radar about this shortly.
"
4746,Negative,"Same issue on Cocoapods 1.0.1. Doing this do nothing:

```
pod cache clean Realm
pod cache clean RealmSwift
pod deintegrate || rm -rf Pods
pod install --verbose
rm -rf ~/Library/Developer/Xcode/DerivedData
```

The only fix I found is to downgrade to Cocoapod 0.39.0. Not the best, but it works..
"
4747,Neutral,"Yeah I figure you will eventually need to get custom notifications working inorder to solve this problem.
"
4748,Positive,"Actually what I was doing is I am inserting my title from another view controller i.e. from the addViewController and I am inserting postID when I tap on share button from the tableViewCell.

```
 var shareAction = UITableViewRowAction(style: UITableViewRowActionStyle.Default, title: ""Share"" , handler: { (action:UITableViewRowAction!, indexPath:NSIndexPath!) -> Void in
            // 2
            let currentCell = tableView.cellForRowAtIndexPath(indexPath)! as UITableViewCell
            print(currentCell.textLabel!.text
            let notSureItem = NotSureItem()
            let switchStatusFromDefault = NSUserDefaults.standardUserDefaults().boolForKey(""switch"")
            if switchStatusFromDefault {
                if (FBSDKAccessToken.currentAccessToken() != nil) {
                    if FBSDKAccessToken.currentAccessToken().hasGranted(""publish_actions"") {

                        let param = [""message"": ""\(currentCell.textLabel!.text!)""]
                        let feedRequest : FBSDKGraphRequest = FBSDKGraphRequest(graphPath: ""me/feed"", parameters: param, HTTPMethod: ""POST"")
                        feedRequest.startWithCompletionHandler({ (connection, result, error) -> Void in
                            if ((error) != nil) {

                                print(""Error: \(error)"")

                            } else {
                                if let dic = result as? Dictionary<String, AnyObject> {

                                    let id = dic[""id""] as! String
                                    let realm = RLMRealm.defaultRealm()
                                    realm.beginWriteTransaction()
                                    notSureItem.postID = id
                                    realm.addObject(notSureItem)
                                    print(""post: \(id)"")
                                    _ = try? realm.commitWriteTransaction()
                                }
                            }
                        })
                    } else {
                        print(""require publish_action"")
                    }
                }
            }
```

This is the code where I used the tableRowActionStyle method  from which I am trying to insert the postId into the same row of that cell title.

Is this information could help you to solve my problem. Thank you!
@austinzheng 
"
4749,Neutral,"I am also seeing this issue. If you guys would like sample screwed up realm files causing this, I can figure out how to get them. We've seen this issue happen to 70 users.

I'm hesitant to make my app respond by automatically deleting the database, just because that would suck and the data could be salvageable (for us, the realm file actually stores user curated data, and isn't a persistent cache).
"
4750,Neutral,"Closing as this is a limitation inherent to iOS and cannot be avoided outright. Please see @tgoyne's previous links for potential workarounds.
"
4751,Neutral,"You could ignore the property so it's never persisted. For example:

``` objc
@interface MyObject : RLMObject
@property NSString *presistedString;
@property NSString *memoryString;
@end
@implementation MyObject
+ (NSArray *)ignoredProperties {
  return @[@""memoryString""];
}
@end
```

Then you could display `memoryString` in your UI. For example, by appending a value to `persistedString`.

I'd recommend posting questions like these to the [mailing list](groups.google.com/forum/#!forum/realm-cocoa) or [StackOverflow with the `realm` tag](https://stackoverflow.com/questions/tagged/realm?sort=newest), since we use GitHub issues more for bugs in Realm or missing features. Thanks!
"
4752,Neutral,"In my case, all way had some file the project can not find, event I drag the framework in the project manually , so I still using the 0.96.2
"
4753,Negative,"So your Dictionary.realm is something you update with an app update, and the UserDictionary.realm is updated by your users and stays on the phone even after an app update. Ok, I can see your point.
We unfortunately don't support any cross Realm operations at all. So you would have to look up in both databases. Alternatively use one Realm and have a flag for user supplied words that you then can copy over to a new realm when you update the app.
"
4754,Positive,"@segiddins, thanks for the reply. 

I added it in the bridging header but the issues were still there. One thing that i did is included `#import ""Realm/Realm.h""` in the `Fitonomy-Swift.h` file and it worked. The only problem is that it is getting overridden for every build and I need to add it there again every time.
"
4755,Neutral,"@xnth97 the maximum size for any single `NSData` property is 16 MB, as documented at https://realm.io/docs/objc/latest/#current-limitations.
"
4756,Neutral,"Apparently it's again an issue related to facilitating AFP-mounted volumes.

Cloning the repository to a folder on the internal drive, and building realm there succeeds as expected. Carrying out the very same task with a folder residing on an AFP-mounted volumes leads to a build failure.
"
4757,Neutral,"@conradwt Hi Conrad! I'm just going through the issues here and touching base on some of the ones that haven't been followed up properly yet.

In what context would you want to uninstall Realm? Are you wanting to switch away from Realm to another library? And if so, how come?

In any case, at this point, I'm not sure if there's much to actually write in regards to 'uninstalling' Realm. Most often than not, it's simply a matter of removing the frameworks references from your app project.
"
4758,Neutral,":+1: 
"
4759,Neutral,"The reason why you don't get the changes you refer to, is that they are on master and not in the latest release. You'd need to use Realm from master, what you can achieve by changing your dependency in your Podfile to:

``` ruby
pod 'RealmSwift', :head
```
"
4760,Neutral,"So is it now working for you? Which third-party libraries are those, where you noticed clashes with? Would you mind sharing your Podfile? Is this perhaps more sort of a general problem with CocoaPods?
"
4761,Negative,"This issue is definitely not solved.

We are trying to adopt Realm notifications (from our previous custom mechanism) and are observing this same issue (tried in both Realm v2.5.1 and 2.7.0).

Logic seems very straight-forward:

``` Swift
override func viewDidLoad() {
    // load data
    chats = try! Realm().objects( Chat.self )
    // show only ongoing chats
    .filter( ""SUBQUERY(memberStates, $memberState, $memberState.member.DAL_id == '\(User.currentUser.person.id.stringValue)' && $memberState.isArchived == false).@count > 0"" )
    .sorted( byKeyPath: ""updatedAt"", ascending: false )

    // observe changes
    plansChangedObservationToken = chats.addNotificationBlock { [weak self] (changes:RealmCollectionChange) in
        guard let chatsList:UITableView = self?.chatsList else { return }
        switch changes {
        case .initial:
            chatsList.reloadData()

        case let .update( chat, deletions, insertions, modifications ):
            chatsList.beginUpdates()
            chatsList.insertRows( at: insertions.map({ IndexPath( row: $0, section: 0 )}), with: .automatic )
            chatsList.deleteRows( at: deletions.map({ IndexPath( row: $0, section: 0 )}), with: .automatic )
            chatsList.reloadRows( at: modifications.map({ IndexPath( row: $0, section: 0 )}), with: .automatic )
            try chatsList.endUpdates()
        case .error( let error ):
            assertionFailure( ""Could not initialize chats changed Realm observation. Error: \(error)"" )
        }
    }
}
```

When our background sync does a full sync and processes all the sync operations (adding/updating/removing them from the local Realm DB) we get the following error:

Getting error:
``` 2017-05-14 17:06:07.015 Happ.Mobile[24874:1424540] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'attempt to delete row 13 from section 0 which only contains 10 rows before the update' ```

It seems the table-view gets out of sync with what is notified in the sync token.


Question 1) Is there any way to tell a realm to only fire notifications at specific times (ie: at the end of our sync loop, so that updates only get pushed up once?

Question 2) Is there some way to synchronize the table-view and the NotificationToken so that it only applies the deltas to the table-view once they've been fully applied? (it seems right now it's firing faster than the table-view is able to apply them)

We tried applying insertRows/updateRows etc. without animations ("".none"" for the last param) but it still fails in the same way."
4762,Positive,"Hi @ehlersd! Sorry to hear you've been experiencing a crash.

Before we proceed, there's a few things I'd like to ask first:
- You're running on Ream 0.98.7, which is quite old at this point, and we've shipped a lot of bug fixes since then. Is there a reason why you haven't updated your copy of Realm?
- Can you please post the model definition for your `DAORealmBeer` object?
- Are you performing any checks to see if `expiredItems` actually contains any objects (i.e. `expiredItems.count > 0`) before starting a Realm transaction?

Please let me know these things as soon as you can! Thanks!
"
4763,Negative,"Guys sorry for taking your time, the problem was that I've updated `Realm` only for the subproject, but not for the main project too, I totally forgot about that.
"
4764,Negative,"Yes, sorry for the mixup, I was thinking of `NSURLIsExcludedFromBackupKey`.
"
4765,Neutral,"For anyone who discovers this issue, we continued the conversation in #1893.
"
4766,Positive,"@tgoyne Oh, I see. Thanks, will test it again.
"
4767,Neutral,"I had been doing that even restarting Xcode, but I'm still experiencing that issue.
"
4768,Neutral,"It's probably worthwhile noting that these sorts of importer omissions don't matter much: worse case, we could mark nearly every function as `NS_REFINED_FOR_SWIFT` to provide a Swiftier API (though I'm unsure if this extra layer of indirection would be optimized away on non-final classes…). What really needs to be investigated still is whether we can support parsing models without separate `RLMObject` and `Object` subclasses of `RLMBaseObject`.
"
4769,Neutral,"@bmunkholm After installation of `pod 'RealmSwift', :git => 'https://github.com/realm/realm-cocoa', :tag => 'null-string-beta-2'`

I got compiler error: `Pods/RealmSwift/RealmSwift/Property.swift:46:40: 'RLMProperty' does not have a member named 'optional'`
"
4770,Neutral,"@ashokds did my suggestion work for you?
"
4771,Neutral,"Interesting, maybe I’m wrong but it feels like the iMessage icon makes the
gradient pop by going extremely dark on the bottom/right edges, and kinda
light on the top/left edges, but a nice moderate hue without much shift in
the middle. As it stands the center shade of pink is maybe a bit too light
to keep the R very visible in our icon, so maybe we can try something like
that, if I’m not reading the iMessage gradient wrong?

On Thu, May 7, 2015 at 11:55 AM, Michael Helmbrecht <
notifications@github.com> wrote:

> @timanglade https://github.com/timanglade Your wish is my command!
> Gradient a bit more visible. Going to be harder to get more without the top
> being too close to white and the bottom being too dusty. I think this is
> good until the rebrand. [image: :+1:]
> [image: screen shot 2015-05-07 at 11 48 42 am]
> https://cloud.githubusercontent.com/assets/1855036/7523313/cb9f547e-f4af-11e4-8375-d631731976b6.png
> 
> Review requests: @yoshyosh https://github.com/yoshyosh @TimOliver
> https://github.com/TimOliver
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/realm/realm-cocoa/issues/1836#issuecomment-99978928.
"
4772,Neutral,I am using collectionView with refreshControl. As i do pull refresh  I add some data to feeds. I also use realm notificationBlock for changes to get updated in collectionView but feeds(`Results<NewsFeed>`) gets updated before notification block is called which cause issues because feeds  has media(`List<Media>`) and different feeds has different media count then collectionView `cellForItemAt:` tries to access feeds media and as collectionView is not yet updated(notification block is not yet called) i get crashes.
4773,Neutral,"I hope we were able to answer all your questions, @vamshikrishna-iitbhu! I'm closing this issue now since we haven't heard back from you in a little while.
"
4774,Neutral,"Most robust way is executing fetch and create in same block. Fetch Realm object at beggining of the block, and create objects and save left of the block.

Also I'm wondering why you use GCD for all operaions. Generally, Realm is enough fast to executing queries on main thread.

Could you please more details or show your code snippets? Then I might show you more practical advise.
"
4775,Negative,"+1

Just started with Realm and not limit or offset? really?, and how about change listener when you only want a subset. This really sucks.
"
4776,Positive,"@alazier Thank you for the quick reply.
Adding a PK to class B doesn't work if there are objects of other classes who need to reference it.
In my scenario I would be using an OptionalString class (as described here https://github.com/realm/realm-cocoa/issues/628#issuecomment-56765986) and could be referenced from, say, Book and Author classes. Using a Book's PK as an OptionalString's PK at the same time as using the Author's PK as an OptionalString's PK will work only while there are no duplicate PKs in the Author and Book tables (which can't be guaranteed).
Also, if the Author has multiple properties that are OptionalStrings there's a PK clash again (that's not a 1-to-1 relationship, strictly speaking).

Probably to do this right each OptionalString property should be of some different class, like AuthorName or BookName, which both descend from OptionalString. But that means creating new classes not because they're logically needed, but because of implementation intricacies. Kind of violates the Occam's Razor principle, if you see what I mean.
"
4777,Neutral,The instructions were followed but the issue only started to happen in realm 2.2 ~ 2.4 version.
4778,Positive,@ashhanai could you please provide an example xcode project/code sample in order to reproduce this case? Thanks!
4779,Neutral,"Although it's possible that having the Realm Browser open while you perform operations on the Realm in your app could be at fault, that scenario is generally something that Realm supports.

Again, a repro case would be very useful in digging into what's happening here.
"
4780,Neutral,"Why do you need this? If you want to delete an object in your current schema, you should have the class type to be able to pass to it:

``` swift
func delete(type: Object.Type, id: Int) {
     // Get the default Realm
     let realm = try! Realm()
     let queryResult = realm.objects(type).filter(""id = %@"", id)
     try! realm.write {
         realm.delete(queryResult)
     }
}
```

If you don't have the model class available, is it because you're in a migration and the class may no longer exist? In that case, you should be using [`Migration.deleteData(forType:)`](https://realm.io/docs/swift/latest/api/Classes/Migration.html#/s:FC10RealmSwift9Migration10deleteDataFT7forTypeSS_Sb):

``` swift
// in migration block:
migration.deleteData(forType: ""RemovedClassName"")
```

If you want to expose functionality in your app where you don't know which model should be deleted, you can use Realm's dynamic API to do this:

``` swift
func delete(typeName: String, id: Int) {
     // Get the default Realm
     let realm = try! Realm()
     let queryResult = realm.dynamicObjects(typeName).filter(""id = %@"", id)
     try! realm.write {
         realm.delete(queryResult)
     }
}
```
"
4781,Neutral,"I resolved this by replacing 

``` javascript
 else {        
            let fundDBRealmObject = self.fundDB
            DB_HANDLER.saveFundToDB(fundDBRealmObject)
        }
```

with 

``` javascript
else {
          let fundDBRealmObject = FundDB(value: self.fundDB)
          DB_HANDLER.saveFundToDB(fundDBRealmObject)
        }
```

As I see, when deleting fundDB Realm object from default.realm DB file on disk also deleted fundDB instance (property) on my VC. 
"
4782,Neutral,"I guess since the mutable counterparts are subclasses, not need to support them. The user could simply create a mutable copy after handover.
"
4783,Neutral,"What we really wan is a general key/value store interface. This was part of the original design but didn't make it in for launch. You can see one of its intended purposes here: https://github.com/realm/realm-cocoa/blob/master/Realm/RLMRealm.h#L276

The interface in the headers can easily be used by users of the api to store custom table/column metadata as follows:

``` objc
realm[@""metadata""][tableName][propertyName][attributeName] = value;
id value = realm[@""metadata""][tableName][propertyName][attributeName];
```
"
4784,Neutral,"Doing the realm.write on each iteration is what caused the issue. For some reason it's fine on the main thread, but when doing an async, you should place it outside the For loop.
"
4785,Positive,"  pod 'RealmSwift', :git => 'https://github.com/realm/realm-cocoa.git', :branch => 'swift-2.0'

I thought ""Realm"" is automatically pulled as a dependency of RealmSwift by Cocoapods.

Adding the line explicitly:

```
pod 'Realm', :git => 'https://github.com/realm/realm-cocoa.git', :branch => 'swift-2.0'
```

seems to have fixed the issue. Thanks for the hint!
"
4786,Positive,"> But my data saved last time was gone.

What do you mean by this? How are you writing data to the Realm? Is the write transaction succeeding? How are you then fetching data back out of the Realm on subsequent runs, what results are you expecting and what's actually happening?

We're happy to help you with this problem but need more information to understand what's happening.

Thanks!
"
4787,Neutral,"I am facing this problem today, the @madawei2699 is right.
In addition:
for RealmSiwft 2.10.0 source path:
https://static.realm.io/downloads/sync/realm-sync-cocoa-1.10.8.tar.xz
and then pull the file into `/tmp/dir`, pod install again is OK."
4788,Neutral,"I did verify that #3270 is a bug on our end yesterday (the initial refcount is wrong so it never gets freed, but now I need to verify that everything is correct with them actually being destroyed).
"
4789,Positive,"@jpsim: Fair! Sorry I forgot to do that myself.

@TimOliver: Thanks for the advice. I have to say we are a little overloaded with other work right now but I will reference your comment when I next consider the topic!
"
4790,Neutral,"I have the same problem, too.
I'm using tools same version @BelminSalkica ."
4791,Positive,Glad to hear it!
4792,Positive,"Thanks for your kind reminding, will watch master and get it changed as soon as beta4 support is done.
"
4793,Neutral,"Hmm, UUIDs are pretty much standard as being 128 bit numbers and even their generation algorithms are mostly from the same set afaik, a lnowledte that could be exploited for indexing. There are uuids in standard cocoa/swift and Java and in c++ there is boost.  C# has the GUID, which should be the same thing...
"
4794,Neutral,"I originally was creating my objects with out a primary key and parsing updates for my objects from my returned JOSN from the server. I would then apply these updates with out discrimination and noticed way to many `modifications` being passed through in my `addNotificationBlock` (On a  `List<Object>` of the highest level objects in my data graph). My fault I told myself. I went and changed all my realm objects to have a primary key and passed updates using the `realm.add(self, update: true)` method. 

I was still getting all the notifications!! I'm glad I found this thread. I simply stopped reloading my `UITableViewCell`'s and I can manage the ~3 second spike of CPU usage. When reloading the `UITableViewCell`'s the CPU was pegged at 100% for a few seconds. 

I guess what I'm trying to say is that I would love it if Realm did actually only send notifications for actual changes. If not, I guess I can propagate my own custom notifications on the server sync's."
4795,Neutral,"This feature is required to use modules from Cocoapods, am I right?

Currently receiving this error after `pod install`:
`import Realm` - No such module 'Realm'
(For manually installed Realm it is working ok)
"
4796,Neutral,"Submitted Radar: 21859260
"
4797,Positive,"I've run our unit tests in a number of configurations without being able to reproduce the issue. Tests were run on Xcode 7 beta 4 with an ""All Exceptions"" breakpoint and ""Address Sanitizer"" enabled.
1. iOS 9 beta 4 on an iPhone 6
2. iOS 7.0.3 on an iPhone 5S
3. iOS 8.1.3 on an iPhone 5

Given the circumstances in which Address Sanitizer detected a _potential_ issue in combination with the ""All Exceptions"" breakpoint, I'd say this was probably a false positive and I wouldn't worry too much about it. As soon as you start catching exceptions in Objective-C code that isn't compiled to be safe with exceptions, you'll start seeing some funny behavior.

So in light of this, I'm closing the issue. If you can provide us a reproducible scenario affecting ""normal"" development (without Address Sanitizer or All Exceptions breakpoint), we'll reopen and address it.

Thanks!
"
4798,Positive,"Ok thx for the reply. It will have to do for now.
"
4799,Neutral,"I had the same issue in obj-c code: https://github.com/realm/realm-cocoa/issues/1077
"
4800,Neutral,"That path to RealmSwift.framework doesn't look like where Carthage puts its frameworks. Carthage puts them at `$(SRCROOT)/Carthage/Build/iOS/`. Are you sure your Xcode project is configured to use Realm Swift from Carthage, rather than from some other source? I'd suggest checking what the framework at the path referenced in the error message is and where it came from."
4801,Neutral,"I seem to have hit a bug with hosts filtering. I have a pretty simple setup with 2 servers, and when I try to deploy to only one (either with `HOSTS=hostname` or `--hosts=hostname`) I get an error about a release directory not existing on the other host.
"
4802,Neutral,"the latest git version is 2.6.12.but on the centos system use `yum install git-core`. the git version is 1.7.1 but the capistrano  still works good 

in the docs: https://github.com/capistrano/capistrano/blob/master/README.md

`Capistrano support these source code version control systems out of the box:

Git 1.8 or higher
Mercurial
SVN`
"
4803,Neutral,"Using the following setup, I'm getting an error stating bundle can't be found.  I'm unable to figure out where the configuration is incorrect?  Does anyone see anything, perhaps something on the server?
### error.log

```
INFO [0be106dd] Running bundle exec rake assets:precompile on staging.example.com
DEBUG [0be106dd] Command: cd /var/www/example.com/releases/20140115151457 && ( PATH=/opt/ruby/bin:$PATH RAILS_ENV=staging bundle exec rake assets:precompile )
DEBUG [0be106dd]    bash: bundle: command not found
DEBUG [0be106dd]
cap aborted!
rake stdout: Nothing written
rake stderr: Nothing written
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/command.rb:94:in `exit_status='
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:142:in `block (4 levels) in _execute'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/channel.rb:551:in `call'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/channel.rb:551:in `do_request'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:561:in `channel_request'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:465:in `dispatch_incoming_packets'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:221:in `preprocess'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:205:in `process'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `block in loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/channel.rb:269:in `wait'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:164:in `block (2 levels) in _execute'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/channel.rb:514:in `call'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/channel.rb:514:in `do_open_confirmation'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:545:in `channel_open_confirmation'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:465:in `dispatch_incoming_packets'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:221:in `preprocess'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:205:in `process'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `block in loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/net-ssh-2.7.0/lib/net/ssh/connection/session.rb:169:in `loop'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:166:in `block in _execute'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:123:in `tap'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:123:in `_execute'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:66:in `execute'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/capistrano-rails-1.1.0/lib/capistrano/tasks/assets.rake:63:in `block (6 levels) in <top (required)>'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/abstract.rb:89:in `with'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/capistrano-rails-1.1.0/lib/capistrano/tasks/assets.rake:62:in `block (5 levels) in <top (required)>'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/abstract.rb:81:in `within'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/capistrano-rails-1.1.0/lib/capistrano/tasks/assets.rake:61:in `block (4 levels) in <top (required)>'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:54:in `instance_exec'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/backends/netssh.rb:54:in `run'
/Users/altonymous/.rvm/gems/ruby-2.1.0-p0@example/gems/sshkit-1.3.0/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'
```
### Capfile

```
# Load DSL and Setup Up Stages
require 'capistrano/setup'

# Includes default deployment tasks
require 'capistrano/deploy'
require 'capistrano/rvm'
require 'capistrano/bundler'
require 'capistrano/rails/assets'

# Loads custom tasks from `lib/capistrano/tasks' if you have any defined.
Dir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }
```
### deploy.rb

```
set :application, 'example'
set :repo_url, 'git@github.com:example/example.git'

ask :branch, proc { `git rev-parse --abbrev-ref HEAD`.chomp }

set :deploy_to, '/var/www/example.com'
set :scm, :git

set :format, :pretty
set :log_level, :debug
set :pty, true

set :linked_files, %w{config/database.yml}
set :linked_dirs, %w{bin log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}

set :bundle_without, %w{development test travis}.join(' ')
set :default_env, { path: ""/opt/ruby/bin:$PATH"" }
# set :keep_releases, 5

namespace :deploy do
  desc 'Restart application'
  task :restart do
    on roles(:app), in: :sequence, wait: 5 do
      within release_path do
        # Your restart mechanism here, for example:
        #execute :touch, release_path.join('tmp/restart.txt')
      end
    end
  end

  after :restart, :clear_cache do
    on roles(:web), in: :groups, limit: 3, wait: 10 do
      # Here we can do anything such as:
      # within release_path do
      #   execute :rake, 'cache:clear'
      # end
    end
  end

  after :finishing, 'deploy:cleanup'
end
```
### staging.rb

```
server 'staging.example.com', user: 'ubuntu', roles: %w{web app}

set :ssh_options, { forward_agent: true, auth_methods: ['publickey'], keys: %w(~/.ssh/example.pem) }
```
### ~/.bash_profile

```
[[ -s ""$HOME/.profile"" ]] && source ""$HOME/.profile"" # Load the default .profile

[[ -s ""$HOME/.rvm/scripts/rvm"" ]] && source ""$HOME/.rvm/scripts/rvm"" # Load RVM into a shell session *as a function*
```
### ~/.profile

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
```
"
4804,Neutral,"We have 3 app servers.  If a task has capture, it only runs on the first server, rather than all the servers.  We are trying to use this to read the pid to kill it.  Is this expected behavior?
"
4805,Neutral,
4806,Neutral,"The SHA value logged in revisions.log is captured from the output of `git rev-parse --short HEAD` run on the remote repository. The value this command outputs will normally be the hash of the head of the master branch, assuming that the contents of `repo/HEAD` haven't been changed by the user. If capistrano is configured to deploy a different branch using `set :branch, 'production'` (say) then the SHA value logged in revisions.log will not be the hash of the head of the specified branch, it will be the hash of the head of the master branch.

Here's an edited log:

```
DEBUG [0da6f4cf] Command: ( GIT_ASKPASS=/bin/echo GIT_SSH=/tmp/app/git-ssh.sh /usr/bin/env git ls-remote user@host.com:git/app.git )
DEBUG [0da6f4cf]        24a9bf2c4e3a13d213654d7901ce97c578e8eb8b        HEAD
DEBUG [0da6f4cf]        24a9bf2c4e3a13d213654d7901ce97c578e8eb8b        refs/heads/master
DEBUG [0da6f4cf]        8cb56ceba741e739615027d8ac3a89b431564fa2        refs/heads/production
DEBUG [0da6f4cf]        1410e421ca88a2813808078292c3edd822d2bdb3        refs/heads/staging
DEBUG [0da6f4cf] Finished in 2.913 seconds with exit status 0 (successful).
[...]
DEBUG [3fa41250] Command: cd /home/deploy/app/repo && git rev-parse --short HEAD
DEBUG [3fa41250]        9b6bb74
DEBUG [3fa41250] Finished in 0.053 seconds with exit status 0 (successful).
DEBUG [7b8673d8] Command: cd /home/deploy/app/repo && /usr/bin/env git remote update
DEBUG [7b8673d8]        Fetching origin
DEBUG [7b8673d8]        Fetching origin
DEBUG [7b8673d8]        From host.com:git/app
DEBUG [7b8673d8]        Fetching origin
DEBUG [7b8673d8]           9b6bb74..24a9bf2  master     -> master
DEBUG [d0dfa444] Command: cd /home/deploy/app/repo && git rev-parse --short HEAD
DEBUG [d0dfa444]        24a9bf2
DEBUG [d0dfa444] Finished in 0.052 seconds with exit status 0 (successful).
[...]
DEBUG [9229341c] Command: cd /home/deploy/app/repo && ( GIT_ASKPASS=/bin/echo GIT_SSH=/tmp/app/git-ssh.sh /usr/bin/env git archive staging | tar -x -C /home/deploy/app/releases/20140117114326 )
[...]
DEBUG [f601385f] Command: echo ""Branch staging (at 24a9bf2) deployed as release 20140117114326 by mhw; "" >> /home/deploy/app/revisions.log
```

The staging branch is deployed correctly because the `git archive staging` command names the branch, but the SHA in the log message (`24a9bf2`) is the SHA for the master branch.

This is using capistrano 3.1.0, capistrano-rails 3.1.1, capistrano-bundler 1.1.1.
"
4807,Neutral,"Right now the implementation of the `repo_url` helper method has some special logic that is Git-specific. It looks for the presence of `:git_http_username` and `:git_http_password` and uses these to mutate the original `:repo_url`.

From `dsl/paths.rb`:

``` ruby
def repo_url
  require ""cgi""
  require ""uri""
  if fetch(:git_http_username) && fetch(:git_http_password)
    URI.parse(fetch(:repo_url)).tap do |repo_uri|
      repo_uri.user     = fetch(:git_http_username)
      repo_uri.password = CGI.escape(fetch(:git_http_password))
    end.to_s
  elsif fetch(:git_http_username)
    URI.parse(fetch(:repo_url)).tap do |repo_uri|
      repo_uri.user = fetch(:git_http_username)
    end.to_s
  else
    fetch(:repo_url)
  end
end
```

This is a handy feature, but I believe this is the wrong place to implement it. It should live in the Git SCM plugin.

Since we eventually want to move all SCM implementations out of core and into separate plugins, this code will need to be moved as well. I suggest we do this after #1572 is merged.
"
4808,Positive,"I just set up capistrano and was wondering why my cap tasks were not working. I got the error message ""Stage not set, please call something such as `cap production deploy`, where production is a stage you have defined."" (https://github.com/capistrano/capistrano/blob/master/lib/capistrano/i18n.rb#L11). I was not in the root directory of my application, so Capistrano would not find my stages. I think the error message can be missleading and I suggest to include something like: ""Make sure to be in your root directory."" I can do a pull request if you like to. Just close this issue, if you think this wouldn't improve anything :)
Keep up the great work :+1: 
"
4809,Neutral,"I can't seem to get this one working. I have this one my staging.rb

``` ruby
...
set :user,              ""ubuntu""
set :group,             ""www-data""
...
```

And I want to access it on my deploy.rb

``` ruby
set :stages, %w(staging production)
set :default_stage, ""staging""
require 'capistrano/ext/multistage'
require 'bundler/capistrano'
require 'rvm/capistrano'

# Retrieve user variable
set(:test_variable)    { ""#{user}"" }
```

However Capistrano keeps complaining:

```
`method_missing_with_variables': undefined local variable or method `user' for #<Capistrano::Configuration:0x007fbbec55fe10> (NameError)
```

This is my Capfile

``` ruby
load 'deploy'
# Uncomment if you are using Rails' asset pipeline
load 'deploy/assets'
load 'config/deploy' # remove this line to skip loading any of the default tasks
```
"
4810,Neutral,"I would like the ability to define multiple parameters in the following way for a deploy script in a command such as the provided one.

```
cap -S app_server=the_rails_way.com,secure_ssh_port=8256 deploy
```

This only picks up app_server, and sets it to the_rails_way.com,secure_ssh_port=8256
"
4811,Neutral,"```
 ** Removing assets that haven't been deployed for 10080 minutes...
  * executing ""cd -- /home/deployer/apps/self/shared/assets/ && for f in $( find * -mmin +10080 -type f | LC_COLLATE=C sort | LC_COLLATE=C comm -23 -- - /home/deployer/apps/self/REQUIRED_ASSETS ); do echo \""Removing unneeded asset: $f\""; rm -f -- \""$f\""; done; rm -f -- /home/deployer/apps/self/REQUIRED_ASSETS""
    servers: [""176.58.122.173""]
    [176.58.122.173] executing command
*** [err :: 176.58.122.173] comm: file 2 is not in sorted order
```

Any idea why I get this error?

I am using Capistrano version `2.14.2`
"
4812,Neutral,"_This worked in 3.2.1, and broke in 3.4.0._

Say I set user per-host likes this:

``` ruby
# production stage
server 'foo.example.org', user: 'deployer', roles: [:util]
role :util_exec, 'foo.example.org', user: 'runner', no_release: true
```

notice that it's the same server hostname is in 2 different roles, with 2 different users
then I run the task `cap production debug` that's implemented like this:

``` ruby
task(:debug) {
  on(primary :util) do
    puts capture('whoami')
  end
}
```

It prints the runner user (which is equal to my local username) instead of the expected `'deployer'`.
"
4813,Neutral,"for example

``` bash
ruby --version
# => ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]
cap --version
# => Capistrano Version: 3.3.3 (Rake Version: 10.4.2)
cap install
echo ""server 'example.com', roles: :test, my_var: [1, 2, 3]"" > config/deploy/test.rb
cat << '__EOF__' > lib/capistrano/tasks/show.rake
desc 'show variable'
task :show do
  on roles(:test) do |h|
    p h.fetch :my_var
  end
end
__EOF__
cap test show
# => [1, 2, 3, 1, 2, 3]
```
"
4814,Negative,"Hey!

I've got problem with deploy rails 4 application:

``` console
  * 2013-07-24 15:47:21 executing `deploy:assets:update_asset_mtimes'
  * executing ""[ -e /home/username/appname/shared/assets/manifest* ] && cat /home/username/appname/shared/assets/manifest* || echo""
    servers: [""5.9.152.213""]
    [5.9.152.213] executing command
    command finished in 505ms
*** [deploy:update_code] rolling back
  * executing ""rm -rf /home/username/appname/releases/20130724134533; true""
    servers: [""5.9.152.213""]
    [5.9.152.213] executing command
 ** [out :: 5.9.152.213] Warning! PATH is not properly set up, '/home/username/.rvm/gems/ruby-2.0.0-p247/bin' is not at first place,
 ** [out :: 5.9.152.213] usually this is caused by shell initialization files - check them for 'PATH=...' entries,
 ** [out :: 5.9.152.213] to fix run: 'rvm use ruby-2.0.0-p247'.
    command finished in 411ms
/home/michal/.rvm/rubies/ruby-2.0.0-p247/lib/ruby/2.0.0/psych.rb:205:in `parse': (<unknown>): mapping values are not allowed in this context at line 3 column 20 (Psych::SyntaxError)
```

and my deploy.rb file:

``` ruby
require ""bundler/capistrano""
require ""rvm/capistrano""
set :rvm_ruby_string, ""ruby-2.0.0-p247@appname""
set :rvm_type, :user

set :application, ""appname""
set :repository,  ""git@bitbucket.username/appname.git""
set :user, ""username""
set :branch, ""master""

set :deploy_to, ""/home/#{user}/#{application}""
set :deploy_via, :copy
set :use_sudo, false

set :port, 32323

set :scm, :git

role :web, ""xxx""
role :app, ""xxx""
role :db,  ""xxx"", :primary => true
role :db,  ""xxx""

after ""deploy:update_code"",""deploy:config_symlink""

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run ""#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}""
  end

  task :config_symlink do
    run ""cp #{release_path}/config/database.yml.example #{release_path}/config/database.yml""
  end
end

before 'deploy', 'rvm:create_gemset'
```

I've read about this bug with manifest, but still doesn't work :(

Can anybody help me? It's a very important for me to deploy app fast, and now I can't.`

thanks!
Michał
"
4815,Neutral,"I have 

``` ruby
set :keep_releases, 5
```

but all releases remain.

Additionally, I think all releases that failed and didn't make it, but are still there, should also be kicked or is it a problem of a rollback that is not yet implemented in v3?
"
4816,Neutral,"```
$ bundle exec gem list |grep cap
capistrano (3.1.0)
capistrano-bundler (1.1.2)
capistrano-rvm (0.1.1
```

I use capistrano to fire up an old version of resque through rake that has some deprecation warnings to STDERR.  

Here's the whole task:

```
  desc 'Restart worker'
  task :resque_restart do
    on roles(:web) do
      fetch(:resque_num_workers).times do |i|
        pid_file = File.join(fetch(:deploy_to), ""web_work_#{i}.pid"")
        execute ""if [ -e #{pid_file} ]; then echo 'Killing resq'; kill -s QUIT `cat #{pid_file}`; rm -f #{pid_file}; fi;""
        within current_path do
          with rack_env: fetch(:rack_env), interval: 5, pidfile: pid_file, queue: fetch(:resque_queue), background: 'yes' do
            execute :rake, 'resque:work', ""-r ./web.rb >> #{fetch(:resque_logfile)} &""
          end
        end
      end
    end
  end
```

This generates the command here in the logs, which works fine on the console:

```
cd /home/atweb/deployer/current && ( RACK_ENV=production INTERVAL=5 PIDFILE=/home/atweb/deployer/web_work_1.pid QUEUE=deploy BACKGROUND=yes ~/.rvm/bin/rvm default do bundle exec rake resque:work -r ./web.rb >> log/resque.log & )
```

Cap finishes all with 0/successful exit codes, but the resque workers get killed off somehow despite any combination of nohup and & to make them survive a cap deployment.  

The trick that finally made the resque workers survive for good was replacing the `>> log/resque.log` in the above with `&>> log/resque.log` to capture both stderr and stdin and redirect it to the log.  

What's going on here?  
"
4817,Neutral,"Why do I keep getting this error:

```
  * executing ""cat /var/www/myproject/current/REVISION""
    servers: [""foo.bar.com""]
    [foo.bar.com] executing command
[err :: foo.bar.com] cat: 
[err :: foo.bar.com] /var/www/myproject/current/REVISION
[err :: foo.bar.com] : No such file or directory
```

With this code:

``` ruby
  namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture(""cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l"").to_i > 0
        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}
      else
        logger.info ""Skipping asset pre-compilation because there were no asset changes""
      end
    end
  end
```

And current_release defined as:

``` ruby
_cset(:current_revision) { capture(""cat #{current_path}/REVISION"", :except => { :no_release => true }).chomp }
```
"
4818,Neutral,"``` ruby
namespace :deploy do
  desc 'Notify to co-workers'
  task :notify do
    summury = ""[#{fetch(:application)}](#{fetch(:stage)}) "" + revision_log_message
    Mail.send_one(summury, 'my-team-mail-address@team.com')
  end

  task :notify_with_full_log do
    full_log = get_capistrano_full_log # here
    Mail.send_one(full_log, 'my-team-mail-address@team.com')
  end
end
```

I made my own task `deploy:notify` to notify deployment to my coworkers and it works well.
I would also want to make `deploy:notify_with_full_log` task but I can't find the way yet.
Is there a method or way to do this?
"
4819,Neutral,"Using `cap deploy:cleanup` while requiring `active_support` or `rails` it breaks:

```
executing `deploy:cleanup'
/Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/activesupport-3.1.3/lib/active_support/core_ext/kernel/reporting.rb:75:in `eval': (eval):1: syntax error, unexpected tREGEXP_BEG, expecting keyword_do or '{' or '(' (SyntaxError)
$ls -xt /var/www/web0/html/alchemy2/re...
         ^
(eval):1: unknown regexp options - www
(eval):1: syntax error, unexpected tUMINUS, expecting keyword_do or '{' or '('
...0/html/alchemy2/releases = LS -XT /VAR/WWW/WEB0/HTML/ALCHEMY...
...                               ^
(eval):1: unknown regexp options - WWW
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/activesupport-3.1.3/lib/active_support/core_ext/kernel/reporting.rb:75:in `ensure in capture'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/activesupport-3.1.3/lib/active_support/core_ext/kernel/reporting.rb:75:in `capture'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/recipes/deploy.rb:427:in `block (2 levels) in load'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `instance_eval'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:139:in `invoke_task_directly'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/callback.rb:38:in `call'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:123:in `block in trigger'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:123:in `each'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:123:in `trigger'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/callbacks.rb:27:in `invoke_task_directly_with_callbacks'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:45:in `each'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/help.rb:19:in `execute_requested_actions_with_help'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:34:in `execute!'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/lib/capistrano/cli/execute.rb:14:in `execute'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/gems/capistrano-2.11.2/bin/cap:4:in `<top (required)>'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/bin/cap:19:in `load'
    from /Users/tvd/.rvm/gems/ruby-1.9.3-p0@alchemy-2.1/bin/cap:19:in `<main>'
```
"
4820,Neutral,"If create stage with name :install it will invoke install task and reinit files.

Example:

```
cap install some_task:update  
```

It invoke `cap install` first, and then `some_task:update` for stage :install.
"
4821,Neutral,"#### Steps to reproduce

Updated to latest cap version

Capistrano Version: 3.6.0 (Rake Version: 11.2.2)
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]

Got 1 project where I have password auth.
Which worked before updating.

Now I get 

`Text will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.`

Full output:

```

cap production deploy
00:00 git:wrapper
      01 mkdir -p /***/tmp
Text will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.
user@clientip's password:Text will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.
user@clientip's password:-----
    ✔ 01 user@clientip 6.292s
Text will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.
user@clientip's password:-----
    ✔ 01 user@clientip 7.565s
Text will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.
user@clientip's password:-----
      Uploading /kunden/client.de/tmp/git-ssh-client.de-production-user.sh 100.0%
      02 chmod 700 /kunden/client.de/tmp/git-ssh-client.de-production-user.sh
    ✔ 02 user@clientip 0.048s

```
#### Expected behaviour

It should deploy.
#### Actual behaviour

Asks 3 times for password and then after the third time nothing happens. 
And deploy does not work.
"
4822,Neutral,"What is the proper way to `deploy:setup` and to do a cold deploy with Capistrano?

Using Capistrano v2.14.2 and Vagrant to virtualize my server, this is my scenario:
1. when running `deploy:setup`, Capistrano makes use of root privileges to prepare the directory structure for deployment
2. yet upon `deploy:cold` Capistrano attempts to checkout (from git in this case) and write as the `vagrant` user – the user specified in `deploy.rb`
3. Of course, the `deploy:check` report bares no surprises: the `vagrant` user cannot write in the directories created during `deploy:setup` since the two users belong to different groups – `root:root` versus `vagrant:vagrant`

_Note:_ For output listing, and other details, please check [the sister-question on StackOverflow](http://stackoverflow.com/q/15144815/341929).

What is the reasoning behind this, and what prerequisite is not satisfied yet so the deployment passes this issue?  
Is there any elegant way to make this work, or is SSH-ing in and changing the permissions manually the way to go?
"
4823,Neutral,"Here is the full error.
    Command: cd /var/www/apps/PersonalApp/releases/20150326201706 && ~/.rvm/bin/rvm default do bundle install --path /var/www/apps/PersonalApp/shared/bundle --without development test --deployment --quiet
    DEBUG [8cd0e53c]    /home/deploy/.rvm/scripts/set: line 19: exec: bundle: not found

I get a similar error that seems to be asking for bundle, looking for it in the env path but it's not findable. 

cd /var/www/apps/PersonalApp/releases/20150326205357 && /usr/bin/env bundle install --path /var/www/apps/PersonalApp/shared/bundle --without development test --deployment --quiet
DEBUG [34eb93b4]    /usr/bin/env:
DEBUG [34eb93b4]    bundle
DEBUG [34eb93b4]    : No such file or directory
"
4824,Neutral,"Is it possible to add an option to specify the location of the config folder?

I see I can change the location of tasks folder if I edit the Capfile and replace this line:   

``` ruby
Dir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }
```

In Capistrano 2 I had something like this in my Capfile:

``` ruby
set :stage_dir, 'deployment/deploy'
require ""./deployment/railsless-deploy.rb""
load 'deployment/deploy' if respond_to?(:namespace)
```
"
4825,Neutral,
4826,Neutral,"Gemfile.lock:

```
GEM
  remote: https://rubygems.org/
  specs:
    airbrussh (1.1.2)
      sshkit (>= 1.6.1, != 1.7.0)
    capistrano (3.7.2)
      airbrussh (>= 1.0.0)
      capistrano-harrow
      i18n
      rake (>= 10.0.0)
      sshkit (>= 1.9.0)
    capistrano-composer (0.0.6)
      capistrano (>= 3.0.0.pre)
    capistrano-file-permissions (1.0.0)
      capistrano (~> 3.0)
    capistrano-harrow (0.5.3)
    capistrano-symfony (1.0.0.rc2)
      capistrano (~> 3.1)
      capistrano-composer (~> 0.0.3)
      capistrano-file-permissions (~> 1.0)
    i18n (0.8.1)
    net-scp (1.2.1)
      net-ssh (>= 2.6.5)
    net-ssh (4.1.0)
    rake (12.0.0)
    sshkit (1.12.0)
      net-scp (>= 1.1.2)
      net-ssh (>= 2.8.0)

PLATFORMS
  ruby

DEPENDENCIES
  capistrano (~> 3.4)
  capistrano-symfony (~> 1.0.0.rc1)

BUNDLED WITH
   1.13.5
```

```
set :default_env, { ""PATH"" => ""/opt/php/php-7.1.3/bin:$PATH"" }
before 'deploy:started', 'deploy:php_info'

namespace :deploy do

  desc ""Checking php version""
  task :php_info do
    on roles(:all) do
      execute ""php -v""
    end
  end

end
```

Printed:

01 php -v
      01 PHP 5.5.38 (cli) (built: Dec 10 2016 19:31:59)

Expected 
01 php -v
      01 PHP 7.1.3 (cli) (built: Mar 18 2017 19:23:29) ( NTS )

echo $PATH 

01 echo $PATH
      01 /usr/local/bin:/bin:/usr/bin
Expected:

/opt/php/php-7.1.3/bin:/usr/local/bin:/bin:/usr/bin
"
4827,Neutral,"Sometimes it's very necessary to set the revision, which is being deployed currently.
"
4828,Neutral,"**Important:** GitHub issues are for feature requests or bug reports. The Capistrano team recommends you use [Stack Overflow](http://stackoverflow.com/questions/tagged/capistrano) for general questions. For more details, please see our [contribution policy](https://github.com/capistrano/capistrano/blob/master/CONTRIBUTING.md).

---
#### Steps to reproduce
1. Capistrano v3.4.1
2. set :branch variable as correct git tag
3. While deploy capistrano throws error
#### Expected behaviour

Capistano should use git tag as git branch name and should deploy application give tag
I suppose that there is hard written ""origin"" word in class Capistrano::Git < Capistrano::SCM at the update method:

```
def update
      # Note: Requires git version 1.9 or greater
      if (depth = fetch(:git_shallow_clone))
        git :fetch, ""--depth"", depth, ""origin"", fetch(:branch)
      else
        git :remote, :update, ""--prune""
      end
    end
```

Should be also ""tags"" while tag is given.
#### Actual behaviour

```
INFO [ecc362f9] Running /usr/bin/env git reset --quiet --hard origin/1.0.9 as tomcyr@localhost
DEBUG [ecc362f9] Command: cd tmp/deploy && ( export SYMFONY_ENV=""prod"" SYMFONY_ENV=""prod"" ; /usr/bin/env git reset --quiet --hard origin/1.0.9 )
DEBUG [ecc362f9]    fatal: ambiguous argument 'origin/1.0.9': unknown revision or path not in the working tree.
DEBUG [ecc362f9]    Use '--' to separate paths from revisions, like this:
DEBUG [ecc362f9]    'git <command> [<revision>...] -- [<file>...]'
(Backtrace restricted to imported tasks)
cap aborted!
SSHKit::Command::Failed: git exit status: 32768
git stdout: Nothing written
git stderr: fatal: ambiguous argument 'origin/1.0.9': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]'

Tasks: TOP => rsync:release => rsync => rsync:stage_done => rsync:stage
(See full trace by running task with --trace)
The deploy has failed with an error: git exit status: 32768
git stdout: Nothing written
git stderr: fatal: ambiguous argument 'origin/1.0.9': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions, like this:
'git <command> [<revision>...] -- [<file>...]'
```
#### Your configuration

```
set :scm, :git
ask :branch, 'develop'
```
"
4829,Neutral,"If using the cached_copy, capistrano issues a svn update command, if a cached copy is available. But if you switch the branch or tag, that command won't do anything useful. If you use svn switch, it'll switch to the new repo location (if necessary) AND update to the given revision. So there is no downside in using svn switch instead svn update.
"
4830,Neutral,"When coming to the wiki for the first time, it is not possible to understand what capistrano is and if I should care.

I found out about this project as github is featuring it in its help section. Following the link I get to the wiki but nothing explains in a simple paragraph what this project is and if it is interesting to me.

Please add a describing ""about"" paragraph at the top with stats what capistrano is, what it is not, what I can do with it and in which situations I should care about it.
"
4831,Neutral,"I have multiple environments setup to deploy to using capistrano (production and staging). In my staging environment it appears everything is correct and my capistrano is linking my release folder correctly when I try to run a cap deploy:migrate. When I try to run the same command in my production environment I get a no such file or directory error like the following:

```
 bash: line 0: cd: /home/deployer/apps/app_name/releases/wrapper.: No such file or directory
```

Why would it not be linking my production environment?

EDIT:

Just to clarify, the cap deploy command for that environment seems to have the proper wrapper replacement with the actual release number. It appears just the migrate command doesn't work.
"
4832,Negative,"Sorry about that guys.
I destroyed the page ""Configuration variables"" after wrong manipulation ""3 open tabs on github"".

https://github.com/capistrano/capistrano/wiki/2.x-Significant-Configuration-Variables

Does anyone have it on his side please ?

Many thanks .. and shame on me.
"
4833,Neutral,"Cap 2.x had a debug mode (by passing a -d cli argument) that would stop and prompt you whether you wanted to run/skip a task. I can't find it for Cap 3, and I need such feature in order to debug a deployment issue I'm having. Any ideas?
"
4834,Neutral,"these can usually be found via https://github.com/capistrano/capistrano/commits/legacy-v2/lib/capistrano/version.rb
"
4835,Neutral,"I'm working on a test project in which i deploy a rails app to a vagrant VM
I'm using nginx and puma to serve the application.

Whenever i do `cap production puma:start`, the output seems correct:

```
DEBUG [32cdd59f] Command: cd /var/www/gb-blog/current && /usr/local/rvm/bin/rvm ruby-2.0.0-p247 do bundle exec puma --debug -q -d -e production -b unix:///var/www/gb-blog/shared/sockets/puma.sock -S /var/www/gb-blog/shared/puma.state --control unix:///var/www/gb-blog/shared/sockets/pumactl.sock
DEBUG [32cdd59f]    Puma starting in single mode...
DEBUG [32cdd59f]    
DEBUG [32cdd59f]    * Version 2.6.0, codename: Pantsuit Party
DEBUG [32cdd59f]    
DEBUG [32cdd59f]    * Min threads: 0, max threads: 16
DEBUG [32cdd59f]    
DEBUG [32cdd59f]    * Environment: production
DEBUG [32cdd59f]    
DEBUG [32cdd59f]    * Listening on unix:///var/www/gb-blog/shared/sockets/puma.sock
DEBUG [32cdd59f]    
DEBUG [32cdd59f]    * Daemonizing...
DEBUG [32cdd59f]    
 INFO [32cdd59f] Finished in 2.889 seconds with exit status 0 (successful).
```

but the server does not actually start.
However, if i manually run the exact same command as capistrano (first line of the previous output) via ssh, the same output appears and the server works correctly.

Additionally, if i remote the `-d` option from the capistrano task, thus not running in daemon mode, it also works (although capistrano hangs waiting for it, obviously)

So the problem seems to only happen when starting it via capistrano, and only when using daemon mode.

I don't see any log files or debug information, so i can i know what's causing this?
"
4836,Neutral,"Rails 4 store manifest in JSON file like `manifest-effbd5715fcc7c1600baa48c1bc283ee.json`, not in `manifest.yml`. So right now we can’t deploy Rails 4 application.
"
4837,Neutral,"There are a few other people with this problem, e.g. http://stackoverflow.com/questions/9934148/deploying-to-linode-via-capistrano-using-git-on-a-windows-machine.

The gist of it is that I must use :deploy_via :copy, and at least when using git as the scm, that causes cap to chain the clone, cd and checkout commands with && operators. This does not work in Windows (at least not when using jRuby and msysgit). Whether or not it is invoked from e.g. cygwin makes no difference. It'd be great if the chaining could be done in some other way so I wouldn't have to spin up a VM just to deploy from.
"
4838,Neutral,"Hello, guys!

I'm using capistrano v.3 on centos vps with rvm installed.

If I add 

``` ruby
require 'capistrano/rails'
```

I have error like:

```
 INFO [2b2d81e7] Running bundle exec rake db:migrate on 91.231.85.175
DEBUG [2b2d81e7] Command: cd /home/asiniy/nod_avatars/releases/20131027164508 && ( RAILS_ENV=production bundle exec rake db:migrate )
cap aborted!
rake stdout: Nothing written
rake stderr: Nothing written
/home/abr/.rvm/gems/ruby-2.0.0-p195@nod_avatars/gems/sshkit-1.1.0/lib/sshkit/command.rb:94:in `exit_status='
```

What's going wrong?
"
4839,Neutral,"#### Steps to reproduce

Deployment of Capistrano from an EC2 Amazon Ubuntu instance.
#### Expected behaviour

Capistrano should go through all the steps of the deployment.
The dry run DOES show all the steps
#### Actual behaviour

Capistrano deployment stops without any error message after deploy:check:linked_files

```
** Invoke deploy:check:directories (first_time)
** Execute deploy:check:directories
00:01 deploy:check:directories
      01 mkdir -p /var/www/mywebsite-prod/shared /var/www/mywebsite-prod/releases
    ✔ 01 ubuntu@someserver.compute.internal 0.007s
    ✔ 01  0.007s
** Invoke deploy:check:linked_dirs (first_time)
** Execute deploy:check:linked_dirs
00:01 deploy:check:linked_dirs
      01 mkdir -p /var/www/mywebsite-prod/shared/log /var/www/mywebsite-prod/shared/tmp/pids /var/www/mywebsite-prod/shared/tmp/cache /v…
    ✔ 01  0.006s
    ✔ 01 ubuntu@someserver.compute.internal 0.004s
** Invoke deploy:check:make_linked_dirs (first_time)
** Execute deploy:check:make_linked_dirs
00:01 deploy:check:make_linked_dirs
      01 mkdir -p /var/www/mywebsite-prod/shared /var/www/mywebsite-prod/shared/config
    ✔ 01 ubuntu@someserver.compute.internal 0.006s
    ✔ 01  0.006s
** Invoke deploy:check:linked_files (first_time)
** Execute deploy:check:linked_files
00:01 deploy:check:linked_files
      linked file /var/www/mywebsite-prod/shared/.env does not exist on someserver.compute.internal
ubuntu@ip-172-31-17-141:~/deploy/mywebsite$
```

The permissions of the folder are ok, and some folders
#### Your configuration

After hiding the EC2 instance name + name of app

```
rvm 1.27.0 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]
rvm 1.27.0 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]
ruby-2.3.0
ruby-2.3.0
ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]
ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]

Environment

    Ruby     ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]
    Rubygems 2.5.1
    Bundler  1.12.3
    Command  /home/ubuntu/.rvm/gems/ruby-2.3.0/bin/cap remote_production doctor

Gems

    capistrano              3.5.0
    airbrussh               1.0.1
    rake                    11.1.2
    sshkit                  1.10.0
    capistrano-bundler      1.1.4
    capistrano-env          0.3.3
    capistrano-env-config   0.3.0
    capistrano-harrow       0.5.1
    capistrano-linked-files 1.1.1
    capistrano-passenger    0.2.0
    capistrano-rvm          0.1.2
    capistrano-secrets-yml  1.0.0

Variables

    :application                     ""mywebsite""
    :branch                          :production
    :bundle_bins                     [""gem"", ""rake"", ""rails""]
    :bundle_flags                    """"
    :bundle_path                     #<Pathname:/var/www/mywebsite-prod/shared/bundle>
    :bundle_roles                    :all
    :bundle_servers                  [#<Capistrano::Configuration::Server:0x00000001853da0 @user=nil, @hostname="""", @port=nil, @properties=#<Capistrano::Configuration::Server::Properties:0x0000000184fb88 @properties={}, @roles=#<Set: {:app}>>>, #<Capistrano::Configuration::Server:0x00000002fa9ef0 @user=""ubuntu"", @hostname=""someserver.compute.internal"", @port=22, @properties=#<Capistrano::Configuration::Server::Properties:0x00000002fa9b30 @properties={}, @roles=#<Set: {:web, :app, :db}>>, @ssh_options={:keys=>[""~/.ssh/id_rsa""], :forward_agent=>true, :auth_methods=>[""publickey""]}>]
    :bundle_without                  ""development production deploy""
    :default_env                     {}
    :default_environment             {""HOST""=>""https://production.mywebsite.com"", ""PORT""=>""443"", ""HTTP_BASIC_AUTH""=>""true""}
    :deploy_to                       ""/var/www/mywebsite-prod""
    :format                          :airbrussh
    :git_environmental_variables     {:git_askpass=>""/bin/echo"", :git_ssh=>""/tmp/mywebsite/git-ssh.sh""}
    :keep_releases                   5
    :linked_dirs                     [""log"", ""tmp/pids"", ""tmp/cache"", ""tmp/sockets"", ""vendor/bundle"", ""public/system""]
    :linked_files                    ["".env"", ""config/secrets.yml""]
    :local_user                      ""ubuntu""
    :log_level                       :debug
    :passenger_environment_variables {}
    :passenger_in_path               true
    :passenger_restart_command       ""passenger-config restart-app""
    :passenger_restart_limit         2
    :passenger_restart_options       ""/var/www/mywebsite-prod --ignore-app-not-running""
    :passenger_restart_runner        :sequence
    :passenger_restart_wait          5
    :passenger_restart_with_sudo     false
    :passenger_roles                 :app
    :passenger_rvm_ruby_version      ""default""
    :pty                             false
    :rails_env                       ""production""
    :repo_url                        ""git@github.com:Startouf/mywebsite.git""
    :rvm_custom_path                 ""/usr/share/rvm""
    :rvm_map_bins                    [""gem"", ""rake"", ""ruby"", ""bundle""]
    :rvm_path                        ""/usr/share/rvm""
    :rvm_ruby_version                ""default""
    :rvm_type                        :system
    :scm                             :git
    :secrets_yml_env                 ""production""
    :secrets_yml_local_path          ""config/secrets.yml""
    :secrets_yml_remote_path         ""config/secrets.yml""
    :stage                           :production
    :tmp_dir                         ""/tmp""

```
"
4840,Neutral,"Updated capistrano to 2.13.5 breaks our deployment.

Deploy.rb:

``` ruby
set :deploy_to, ""~/rails""
```

Failing capistrano command:

```
executing ""chmod -R -- g+w \\~/rails/releases/20121102105156 && rm -rf -- \\~/rails/releases/20121102105156/public/system && mkdir -p -- \\~/rails/releases/20121102105156/public/ && ln -s -- ~/rails/shared/system \\~/rails/releases/20121102105156/public/system && rm -rf -- \\~/rails/releases/20121102105156/log && ln -s -- ~/rails/shared/log \\~/rails/releases/20121102105156/log && rm -rf -- \\~/rails/releases/20121102105156/tmp/pids && mkdir -p -- \\~/rails/releases/20121102105156/tmp/ && ln -s -- ~/rails/shared/pids \\~/rails/releases/20121102105156/tmp/pids""
```

Error:

```
chmod: cannot access `~/rails/releases/20121102105156': No such file or directory
```

Problem can be solved by changing the deploy_to path to the full path (/var/www/.../rails) but I think ""~/rails"" should still work as we don't want to change our deploy_to variable for each project where we decide to update capistrano.
"
4841,Neutral,"Hello,

I'm trying to run my first deploy and when the capistrano come on this step, it stop and don't continue. I have waited for 30, 40, 50 minutes and nothing...

Is there some way to know what is happening ?

It does not return any exception, error message, nothing, only ''stop'' and don't finished.

I'm using rails 3.2.3 and Capistrano v2.13.5. I'm trying to use a Amazon ec2 instance. The enviroment is seted up to another one similar application e work, so i can't stand why it is not working for this app.

Any tips are welcome, thanks!
"
4842,Neutral,"If I execute cap deploy I get the following error:

triggering start callbacks for `deploy'
- executing `multistage:ensure'
  *** Defaulting to`staging'
- executing `staging'
- executing `deploy'
  triggering before callbacks for`deploy'
- executing `check_production'
- executing `deploy:update'
  *\* transaction: start
- executing `deploy:update_code'
  updating the cached checkout on all servers
  executing locally: ""git ls-remote git@github.com:xxxxxxx/myproject.git develop""
  command finished in 5163ms
- executing ""if [ -d /var/www/staging-myproject/shared/cached-copy ]; then cd /var/www/staging-myproject/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 26b7ff0248cef4c57c177f1e26d80b2ba719208c && git clean -q -d -x -f; else git clone -q git@github.com:xxxxxxx/myproject.git /var/www/staging-myproject/shared/cached-copy && cd /var/www/staging-myproject/shared/cached-copy && git checkout -q -b deploy 26b7ff0248cef4c57c177f1e26d80b2ba719208c; fi""
  servers: [""184.169.131.xxx"", ""myprojectpreview.com""]
  [184.169.131.xxx] executing command
  [myprojectpreview.com] executing command
  *\* [184.169.131.xxx :: out] fatal: destination path '/var/www/staging-myproject/shared/cached-copy' already exists and is not an empty directory.
    command finished in 64664ms
  **\* [deploy:update_code] rolling back

Any help?
"
4843,Neutral,"If the output log stream showed when cap enters and leaves a task, then the flows would be dead obvious.  Also, it would assist with determining which task caused a command shown in the output.
"
4844,Neutral,"in [the page describing multistage extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension), it is using `:deploy_env`.  it should be `:rails_env`
"
4845,Positive,"I couldn't sleep this night and some idea came to my mind :joy:

What if we could make a tool like `capify`, but more intellectual?

I've made [capistrano-wizard](https://github.com/kirs/capistrano-wizard), tool that asks about plugins (rails/bundler/rvm/etc) you're going to use and on which stages and hosts you're going to deploy.

As a result, this tool generates the same files as `capify`, but with specific plugins and options enabled for individual configuration the developer needs.

What do you think about it?
I'm not sure if this should be part of Capistrano at all, but it might be useful for newbies.
"
4846,Neutral,"We've deprecated `remote_file` with a promise that it will be removed entirely in Capistrano 3.7.0. This issue is a reminder to remove it.

See #1679.
"
4847,Neutral,"Something is trying to undef a method that doesn't exist.

```
$ rs thin
/usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require': iconv will be deprecated in the future, use String#encode instead.
/Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:47:in `undef_method': undefined method `logger=' for class `Capistrano::Configuration::Namespaces::Namespace' (NameError)
    from /Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:47:in `block in <class:Configuration>'
    from /Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:46:in `each'
    from /Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:46:in `<class:Configuration>'
    from /Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:22:in `<module:Capistrano>'
    from /Users/jwaldrip/dev/capistrano/lib/capistrano/configuration.rb:18:in `<top (required)>'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/jwaldrip/dev/capistrano/lib/capistrano.rb:3:in `<top (required)>'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
    from /Users/jwaldrip/dev/itriage3/config/application.rb:5:in `<top (required)>'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `require'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `tap'
    from /usr/local/Cellar/rbenv/0.3.0/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/railties-3.2.9/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
```
"
4848,Neutral,"secret_token.rb should be kept secret.
Could be nice if there were a task in capistrano to regenerate the file when executing cap deploy:setup.

Thoughts?
"
4849,Negative,"_From @mattbrictson on February 9, 2016 1:5_

:weary: 

> You are currently using the 'redcarpet' Markdown engine, which will not be supported on GitHub Pages after May 1st. At that time, your site will use 'kramdown' for markdown rendering instead. To suppress this warning, remove the 'markdown' setting in your site's '_config.yml' file and confirm your site renders as expected. For more information, see https://help.github.com/articles/updating-your-markdown-processor-to-kramdown.

_Copied from original issue: capistrano/documentation#172_
"
4850,Negative,"I was giving v3 a try and this popped up:

```
 INFO Keeping 5 of 5 deployed releases on monday
 INFO [32f5cec4] Running /usr/bin/env rm -rf  on monday
 INFO [32f5cec4] Finished in 0.083 seconds command successful.
```

That is scary as shit. Good it didn't put a `/` there willy-nilly, but running it empy is spooky enough.
"
4851,Neutral,"I have an app that was deploying to multiple servers fine on `3.3.5`. The servers shared an IP but had separate ports, so I'd connect to them like this:

``` ruby
server '123.4.5.67',
  user: fetch(:deploy_user),
  roles: %w(web app db),
  port: 123,
  ssh_options: {
    forward_agent: true
  }

server '123.4.5.67',
  user: fetch(:deploy_user),
  roles: %w(web app),
  port: 124,
  ssh_options: {
    forward_agent: true
  }

server '123.4.5.67',
  user: fetch(:deploy_user),
  roles: %w(web app),
  port: 125,
  ssh_options: {
    forward_agent: true
  }
```

After upgrading to `3.4.0` capistrano is only connecting to the last defined server. Do I need to update my configuration or is this a new bug?

thanks
"
4852,Neutral,"Upon deploy with 2.15.5 using subversion as scm when it trys to access the repo it appends the scm_username with --password.

So it of course can't login with a username of blah--password.

2.15.4 works great.

Added a pull request with test.
"
4853,Neutral,"Hi,

I have segmentation fault when doing `cap deploy`. 
It first occured while capistrano tried execute command `RAILS_ENV=production script/delayed_job stop -m;`, so I thought it is delayed job issue. But when I removed delayed job from deploy.rb, I got segmentation fault when executing `git clone`.

Does someone know if this is capistrano related problem? What is strange - my teammates, with very similar enviroments don't get this error. 

I am on osx 10.7.2, capistrano 2.9.0, ruby 1.9.3, bundler 1.1rc

```
  * executing ""git clone -q git@github.com:drogus/foo.git /u/foo/releases/20111205130757 && cd /u/foo/releases/20111205130757 && git checkout -q -b deploy fdd0c2b0c6d7886579f6ede44b43188372d49da3 && (echo fdd0c2b0c6d7886579f6ede44b43188372d49da3 > /u/foo/releases/20111205130757/REVISION)""
    servers: [""main.foo.bar""]

/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:255: [BUG] Segmentation fault
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0]

-- Control frame information -----------------------------------------------
c:0031 p:---- s:0144 b:0144 l:000143 d:000143 CFUNC  :e=
c:0030 p:0198 s:0140 b:0140 l:000139 d:000139 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:255
c:0029 p:0028 s:0135 b:0135 l:000134 d:000134 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:239
c:0028 p:0218 s:0131 b:0130 l:000108 d:000129 BLOCK  /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:111
c:0027 p:---- s:0124 b:0124 l:000123 d:000123 FINISH
c:0026 p:---- s:0122 b:0122 l:000121 d:000121 CFUNC  :each_line
c:0025 p:0031 s:0119 b:0119 l:000108 d:000118 BLOCK  /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:95
c:0024 p:---- s:0115 b:0115 l:000114 d:000114 FINISH
c:0023 p:---- s:0113 b:0113 l:000112 d:000112 CFUNC  :open
c:0022 p:0075 s:0109 b:0109 l:000108 d:000108 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:93
c:0021 p:0027 s:0103 b:0103 l:000094 d:000102 BLOCK  /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:23
c:0020 p:---- s:0100 b:0100 l:000099 d:000099 FINISH
c:0019 p:---- s:0098 b:0098 l:000097 d:000097 CFUNC  :map
c:0018 p:0012 s:0095 b:0095 l:000094 d:000094 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:23
c:0017 p:0026 s:0090 b:0090 l:000089 d:000089 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:17
c:0016 p:0324 s:0085 b:0085 l:000084 d:000084 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/algorithms.rb:213
c:0015 p:0070 s:0080 b:0080 l:000079 d:000079 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/algorithms.rb:96
c:0014 p:---- s:0075 b:0075 l:000074 d:000074 FINISH
c:0013 p:---- s:0073 b:0073 l:000072 d:000072 CFUNC  :new
c:0012 p:0248 s:0068 b:0068 l:002220 d:002220 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:78
c:0011 p:---- s:0062 b:0062 l:000061 d:000061 FINISH
c:0010 p:---- s:0060 b:0060 l:000059 d:000059 CFUNC  :new
c:0009 p:0458 s:0055 b:0055 l:000054 d:000054 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh.rb:186
c:0008 p:0026 s:0044 b:0044 l:000638 d:000043 BLOCK  /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:41
c:0007 p:0377 s:0038 b:0038 l:000037 d:000037 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:93
c:0006 p:0019 s:0025 b:0025 l:000638 d:000638 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:40
c:0005 p:0022 s:0020 b:0020 l:000019 d:000019 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:20
c:0004 p:0066 s:0016 b:0013 l:000012 d:000012 METHOD /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:223
c:0003 p:0018 s:0006 b:0006 l:001d20 d:000005 BLOCK  /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:218
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   

-- Ruby level backtrace information ----------------------------------------
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:218:in `block in establish_connection_to'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:223:in `safely_establish_connection_to'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb:20:in `connect_to'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:40:in `connect'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:93:in `connection_strategy'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb:41:in `block in connect'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh.rb:186:in `start'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh.rb:186:in `new'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:78:in `initialize'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb:78:in `new'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/algorithms.rb:96:in `initialize'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/algorithms.rb:213:in `prepare_preferred_algorithms!'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:17:in `search_for'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:23:in `search_in'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:23:in `map'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:23:in `block in search_in'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:93:in `keys_for'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:93:in `open'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:95:in `block in keys_for'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:95:in `each_line'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb:111:in `block (2 levels) in keys_for'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:239:in `read_key'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:255:in `read_keyblob'
/Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb:255:in `e='

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------

* Loaded script: /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bin/cap

* Loaded features:

    0 enumerator.so
    1 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/enc/encdb.bundle
    2 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/enc/trans/transdb.bundle
    3 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
    4 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/rbconfig.rb
    5 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
    6 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
    7 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
    8 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems.rb
    9 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/pathname.bundle
   10 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/pathname.rb
   11 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
   12 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/etc.bundle
   13 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb
   14 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
   15 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
   16 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
   17 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
   18 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
   19 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/psych.bundle
   20 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/stringio.bundle
   21 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/node.rb
   22 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/stream.rb
   23 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/document.rb
   24 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/sequence.rb
   25 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/scalar.rb
   26 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/mapping.rb
   27 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes/alias.rb
   28 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/nodes.rb
   29 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/streaming.rb
   30 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/visitor.rb
   31 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/strscan.bundle
   32 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/scalar_scanner.rb
   33 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/to_ruby.rb
   34 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/emitter.rb
   35 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb
   36 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/json/ruby_events.rb
   37 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/json_tree.rb
   38 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors/depth_first.rb
   39 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/visitors.rb
   40 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/handler.rb
   41 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/tree_builder.rb
   42 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/parser.rb
   43 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/omap.rb
   44 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/set.rb
   45 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/coder.rb
   46 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/core_ext.rb
   47 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/date_core.bundle
   48 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/date/format.rb
   49 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/date.rb
   50 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/deprecated.rb
   51 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych/json.rb
   52 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/psych.rb
   53 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/yaml.rb
   54 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/rubygems_integration.rb
   55 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/shared_helpers.rb
   56 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/fileutils.rb
   57 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/gem_helpers.rb
   58 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/match_platform.rb
   59 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/rubygems_ext.rb
   60 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/version.rb
   61 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler.rb
   62 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/digest.bundle
   63 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/digest.rb
   64 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/digest/sha1.bundle
   65 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/environment.rb
   66 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/runtime.rb
   67 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/settings.rb
   68 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/definition.rb
   69 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/dependency.rb
   70 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/dsl.rb
   71 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/common.rb
   72 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/generic.rb
   73 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ftp.rb
   74 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/http.rb
   75 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/https.rb
   76 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ldap.rb
   77 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/ldaps.rb
   78 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri/mailto.rb
   79 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/uri.rb
   80 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/user_interaction.rb
   81 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/f_sync_dir.rb
   82 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_header.rb
   83 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/enc/iso_8859_1.bundle
   84 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/zlib.bundle
   85 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_input.rb
   86 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_output.rb
   87 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader/entry.rb
   88 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader.rb
   89 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_writer.rb
   90 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/package.rb
   91 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/format.rb
   92 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb
   93 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/ext/configure_builder.rb
   94 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/optparse.rb
   95 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/command.rb
   96 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/ext/ext_conf_builder.rb
   97 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/ext/rake_builder.rb
   98 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/ext.rb
   99 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/require_paths_builder.rb
  100 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb
  101 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/remote_fetcher.rb
  102 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/errors.rb
  103 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/text.rb
  104 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb
  105 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/open3.rb
  106 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/gem_installer.rb
  107 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/source.rb
  108 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/lockfile_parser.rb
  109 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/lazy_specification.rb
  110 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/tsort.rb
  111 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/forwardable.rb
  112 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/spec_set.rb
  113 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/index.rb
  114 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/remote_specification.rb
  115 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/dep_proxy.rb
  116 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/ifirma-api-17085bab1481/lib/ifirma/version.rb
  117 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/scanf.rb
  118 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/version.rb
  119 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/set.rb
  120 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/resolver.rb
  121 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/endpoint_specification.rb
  122 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb
  123 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/setup.rb
  124 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/logger.rb
  125 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/callback.rb
  126 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/callbacks.rb
  127 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/thread.rb
  128 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb
  129 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/logger.rb
  130 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/config.rb
  131 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/errors.rb
  132 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/loggable.rb
  133 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/socket.bundle
  134 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/socket.rb
  135 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/timeout.rb
  136 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/version.rb
  137 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/ruby_compat.rb
  138 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/openssl.bundle
  139 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/bn.rb
  140 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/cipher.rb
  141 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/config.rb
  142 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/digest.rb
  143 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/buffering.rb
  144 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/x86_64-darwin11.2.0/fcntl.bundle
  145 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/ssl-internal.rb
  146 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl/x509-internal.rb
  147 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/openssl.rb
  148 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/openssl.rb
  149 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffer.rb
  150 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/known_hosts.rb
  151 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/identity_cipher.rb
  152 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/cipher_factory.rb
  153 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/constants.rb
  154 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/abstract.rb
  155 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/md5.rb
  156 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/md5_96.rb
  157 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/sha1.rb
  158 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/sha1_96.rb
  159 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac/none.rb
  160 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/hmac.rb
  161 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/kex/diffie_hellman_group1_sha1.rb
  162 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/kex/diffie_hellman_group_exchange_sha1.rb
  163 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/kex.rb
  164 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/server_version.rb
  165 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/algorithms.rb
  166 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/buffered_io.rb
  167 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/constants.rb
  168 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/connection/constants.rb
  169 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/packet.rb
  170 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/state.rb
  171 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/packet_stream.rb
  172 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/verifiers/null.rb
  173 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/verifiers/strict.rb
  174 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/verifiers/lenient.rb
  175 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/transport/session.rb
  176 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/erb.rb
  177 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/abbrev.rb
  178 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/compatibility.rb
  179 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/system_extensions.rb
  180 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/question.rb
  181 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/menu.rb
  182 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/color_scheme.rb
  183 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/style.rb
  184 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline/string_extensions.rb
  185 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/highline-1.6.8/lib/highline.rb
  186 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/prompt.rb
  187 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/key_factory.rb
  188 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/agent.rb
  189 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/key_manager.rb
  190 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/methods/abstract.rb
  191 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/methods/publickey.rb
  192 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/methods/hostbased.rb
  193 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/methods/password.rb
  194 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/methods/keyboard_interactive.rb
  195 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/authentication/session.rb
  196 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/connection/term.rb
  197 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/connection/channel.rb
  198 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/service/forward.rb
  199 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh/connection/session.rb
  200 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-2.2.1/lib/net/ssh.rb
  201 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-ssh-gateway-1.1.0/lib/net/ssh/gateway.rb
  202 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ssh.rb
  203 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/errors.rb
  204 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/connections.rb
  205 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/execution.rb
  206 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/loading.rb
  207 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/server_definition.rb
  208 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/task_definition.rb
  209 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/namespaces.rb
  210 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/role.rb
  211 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/roles.rb
  212 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/servers.rb
  213 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/variables.rb
  214 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/shellwords.rb
  215 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-scp-1.0.4/lib/net/scp/errors.rb
  216 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-scp-1.0.4/lib/net/scp/upload.rb
  217 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-scp-1.0.4/lib/net/scp/download.rb
  218 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-scp-1.0.4/lib/net/scp.rb
  219 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/constants.rb
  220 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/errors.rb
  221 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/packet.rb
  222 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/base.rb
  223 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/attributes.rb
  224 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/name.rb
  225 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/base.rb
  226 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/02/base.rb
  227 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/03/base.rb
  228 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/attributes.rb
  229 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/name.rb
  230 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/base.rb
  231 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/05/base.rb
  232 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/06/attributes.rb
  233 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol/06/base.rb
  234 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/protocol.rb
  235 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/response.rb
  236 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/request.rb
  237 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/operations/dir.rb
  238 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/operations/upload.rb
  239 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/operations/download.rb
  240 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb
  241 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/operations/file_factory.rb
  242 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp/session.rb
  243 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/net-sftp-2.0.5/lib/net/sftp.rb
  244 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/processable.rb
  245 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/transfer.rb
  246 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/actions/file_transfer.rb
  247 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/actions/inspect.rb
  248 /Users/sarniak/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/benchmark.rb
  249 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/command.rb
  250 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration/actions/invocation.rb
  251 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/configuration.rb
  252 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/extensions.rb
  253 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/ext/string.rb
  254 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano.rb
  255 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/cli/execute.rb
  256 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/cli/help.rb
  257 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/cli/options.rb
  258 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/cli/ui.rb
  259 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/cli.rb
  260 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/scm.rb
  261 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/strategy.rb
  262 /Users/sarniak/.rvm/lib/rvm/capistrano.rb
  263 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/capistrano-ext-1.2.1/lib/capistrano/ext/multistage.rb
  264 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/deployment.rb
  265 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/bundler-1.1.rc/lib/bundler/capistrano.rb
  266 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/whenever-0.7.0/lib/whenever/capistrano.rb
  267 /Users/sarniak/Projects/rails/foo/config/boot.rb
  268 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/gems/airbrake-3.0.5/lib/airbrake/capistrano.rb
  269 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/local_dependency.rb
  270 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/remote_dependency.rb
  271 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/dependencies.rb
  272 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/strategy/base.rb
  273 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/strategy/remote.rb
  274 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/strategy/checkout.rb
  275 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/scm/base.rb
  276 /Users/sarniak/.rvm/gems/ruby-1.9.3-p0/bundler/gems/capistrano-6134697d25ab/lib/capistrano/recipes/deploy/scm/git.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6
```
"
4854,Negative,"I don't see the use-case personally, if you're doing some API calls to look up roles, then you can easily do that up-front, for one or many machines, if you want to lazy evaluate it, that sounds a bit contrived (i.e wait until you're in the middle of something important, before risking reliance on a 3rd party server.)

We'd take a patch, if you wanted to write one, all the code along these paths is relatively simple, and well tested and robust, but I don't see myself implementing it, sorry.
"
4855,Neutral,"Was using HTTPS to access the github repository. Tried HTTP but still same sequence of events. No matter what command seems to be having an issue just after the channel_close.  Hope thats some help.
"
4856,Positive,"Thank you for the feedback @leehambley. You are correct, we had to navigate into the repo where the submodule was loading, run `git pull` from master to make sure it's up to date.  Than we navigating out of the submodule and committed to the repository.  Than we ran `cap staging deploy` and everything worked like normal.  cc: @matt-morris 
"
4857,Neutral,"Closed in favor of #1679.
"
4858,Negative,"Another update,  I've attempted to solve it by creating a ""capistrano"" user group and add all the ""deploying"" users to it and gave that group `g+wrx` permission on `/tmp/git-ssh.sh` but then capistrano decides it wants to CHANGE the permissions of the file...

```
DEBUG Uploading /tmp/git-ssh.sh 0.0%
 INFO Uploading /tmp/git-ssh.sh 100.0%
 INFO [e643f41f] Running /usr/bin/env chmod +x /tmp/git-ssh.sh on mccme-web.msbb.uc.edu
DEBUG [e643f41f] Command: /usr/bin/env chmod +x /tmp/git-ssh.sh
DEBUG [e643f41f]    chmod: changing permissions of `/tmp/git-ssh.sh'
DEBUG [e643f41f]    : Operation not permitted
```

I mean, I get why it needs it to be owned by the user so that the files that ""git"" pulls down don't get owned by the root:capistrano but still... just wish I could find an alternative solution.

Back to the drawing board again...
"
4859,Neutral,"Or perhaps the more concise (and similar to `skip_before_action`, etc. in Rails):

``` ruby
skip_validation :application
```
"
4860,Neutral,"Look around, 2.x is unsupported since nearly half a year.
"
4861,Neutral,"https://github.com/capistrano/capistrano/blob/36f10e2c19644f79717cd9bdeddf9cded4c4e255/lib/capistrano/defaults.rb#L3
https://github.com/capistrano/capistrano/blob/eba1b007a11f6aa2ea233c2b9b77a518f2cdff72/lib/capistrano/setup.rb

That happens because default value of `deploy_to` is populated **before** `application_name` is set.
I believe there is a bug here.
"
4862,Positive,"> I have always been relying on this ~/.bashrc behavior for my deployments.

Interesting :) Let's keep this ticket then, it's tagged correctly at least and we can figure out what to do with the ""Why does something work in SSH but not Capistrano"" page of the docs, and maybe something on the website/readme about how we interact with the shell, unrelated to people who're debugging.

As a rule I've always used a deploy user, and done the user/groups/umask dance so that the deploy user can share with others in his group, then personal shell init files are never in the scene as far as Capistrano is concerned."
4863,Positive,"#461 fixed this, so it can be closed.

@riverlook and @dbkbali Thanks for the report!
"
4864,Neutral,"Here's what I'm using in my cap recipes. Should I open a pull request?

``` ruby
# Like capistrano's built-in ask(), but does not echo user input.
# Suitable for passwords, etc. Requires the highline gem.
#
#   ask_secretly(:postgresql_password)
#
def ask_secretly(key, default=nil)
  require ""highline""
  set key, proc{
    hint = default ? "" [#{default}]"" : """"
    answer = HighLine.new.ask(""Enter #{key}#{hint}: "") do |q|
      q.echo = false
    end.to_s
  }
end
```
"
4865,Neutral,"You get an empty timestamped `releases/xxxxxxxxx` folder; my post-deploy tasks put some folders in there.

Does this not reproduce for you?
"
4866,Neutral,"@leehambley @seenmyfate are you ok with this proposal?
"
4867,Positive,"I think I did also write the code for `assets_manifest.yml`, and that was solely to handle rollbacks. When you only store the `asset_manifest.yml` files in the release directories, they get deleted whenever the release is cleaned up. This is a problem, because it's very possible to cycle through all your releases (e.g. 5) well before your assets expiry time, such as the default of 2 weeks. So as soon as you clean up the release, all of the unique assets in that file are going to be deleted. My ideal solution was to keep timestamped asset manifests in a separate shared directory, where their timestamp is set to the _last_ time they were deployed. That means that the manifest file generated during the previous deploy would have the same timestamp as the current release, because that was the last time that those assets were being served to web browsers. If all of this is in place, then we can just delete any manifests with a timestamp older than 2 weeks (for example), and your assets will always be expired correctly, no matter how many releases you keep, how many times you deploy, or how frequently you deploy.

So those are the edge cases that aren't handled by the backed up manifest solution. They are handled by the mtime solution, but that turned out to be terribly slow. 

Great work on the Rails 4 assets support, btw!
"
4868,Neutral,"I'm not sure this is a bug, but you are right that the way Capistrano and DropletKit are designed are inherently conflicting.

Capistrano does add its DSL to all object. Normally in Capistrano's universe this isn't a problem, since Capistrano is usually used as a standalone tool and not in combination with other libraries or with application code.

I'm not sure we can do much about it, as altering how the Capistrano DSL is defined is probably a big breaking change.

In your case specifically, if you aren't using the DSL `delete` method, you could remove it. Try this before your DropletKit code is executed (e.g. at the bottom of your Capfile):

``` ruby
Capistrano::DSL::Env.send(:remove_method, :delete)
```
"
4869,Neutral,"Possibly related to https://github.com/capistrano/capistrano/pull/395, which has a proposed fix attached.
"
4870,Neutral,"Closing as I'm satisfied that the OP has what he needs as he hasn't replied in a long time.

For clarity, my succestion was following

``` ruby
task :deploy do
  # (this augments the existing implementation, it does not replace it)
  set(:are_we_deploying, :yes)
end
```

Then at any other time you can use `fetch(:are_we_deploying)` to detect if that's how you entered into the command.
"
4871,Neutral,"(support questions are better asked, and answered on the mailing list at Google Groups)
"
4872,Positive,Thanks for pointing this out! Can you put together a quick PR with a CHANGELOG entry?
4873,Neutral,":+1: to this issue. I'm faced this problem, too.
"
4874,Negative,"I have a similar issue. I have not been able to successfully deploy my application using capistrano script as it keeps failing at a line in my deploy script that say 

Command bundle exec rake assets:clean && EXECJS_RUNTIME='Node' JRUBY_OPTS='-J-d32 -X-C' bundle exec rake assets:precompile returned status code 256

There is no way to figure out what the error code means. Is this resolved?
"
4875,Neutral,"@richardriman Can you paste the line where the deploy fails?
"
4876,Neutral,"A patch would certainly be appreciated, please also check out the discussion [here](https://github.com/capistrano/rails/pull/13) around this issue
"
4877,Neutral,"There seems to be some miscommunication here. The Rake docs specify that **stderr** is the default. 

> --trace{=output} (-t)
> Turn on invoke/execute tracing. Also enable full backtrace on errors. The output parameter is optional, but if specified it controls where the trace output is sent. If output is stdout, then trace output is directed to standard output. **If `output` is stderr, or if it is missing, then trace output is sent to standard error.**

Capistrano is not deviating from this.
"
4878,Neutral,"Maybe the properly question is:

How to use capistrano to run `bundle list` with a seperate traveling-ruby (independent the ruby which is used in project), anywhy, capistrano just a deployment tools, it should run any shell command as use with
shell, right? as following:

```sh
x=$(bundle list)
# or x=`bundle list`
echo ""$x""
```

use with shell, it always work.

"
4879,Positive,"First of all, thanks for such a prompt response. I really appreciate the help. 

The other thing i said, it's not actually related to capistrano, but more to rake gem

i have another project: https://github.com/bogdanRada/capistrano_multiconfig_parallel and i was trying to show progress of tasks while they are running in parallel, but in order to do that i run them with option ""--dry-run"" first to save the invocation chain  for each worker and then while they are executing i can show progress.

However now I  discovered this bug with '--dry-run' that actually runs the tasks, and i can't really do this using current version (because that will execute some of the tasks on server)  

So if i revert completely the patch or use my patch and try to run this command:

```
 bundle exec cap ghcp-api:development deploy --dry-run --trace
```

 I get only this output and then it stops:

```
** Invoke ghcp-api:development (first_time)
** Execute (dry run) ghcp-api:development
** Invoke deploy (first_time)
** Invoke gitflow:verify_up_to_date (first_time)
** Execute (dry run) gitflow:verify_up_to_date
** Execute (dry run) deploy
```

But probably this thing with rake and hooks is most likely a bug in rake gem or something . So you can
deconsider this afirmation:

> However what is annoying is that having this option set to true, it does not follow the invocation chain
> of the task , but that is something that can be fixed in rake gem i think
"
4880,Neutral,"I'm using 2.X but I'd be just as happy to implement in both
"
4881,Neutral,"Ah, ok, I'm using Capifony, which I didn't realize requires quite an old version of Capistrano (2.15.5).  Looks like things are quite different there, so I actually need to modify the :update task, rather than :publishing, and replace :create_symlink.  Looks like that handles both regular releases and rollbacks in this version, so that _should_ do it...
"
4882,Neutral,"@kopen Do you think [these lines](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/ext/multistage.rb#L22-30) are the culprit?
"
4883,Neutral,"Everyone that ran into this issue: can you test my branch of SSHKit to see if it resolves the problem for you? See https://github.com/capistrano/sshkit/issues/322
"
4884,Neutral,"Support at [the mailing list](https://groups.google.com/forum/#!forum/capistrano) or [StackOverflow](http://stackoverflow.com/questions/tagged/capistrano), please. 
"
4885,Neutral,"the same issue for capistrano (2.14.2) with Rails(3.2.12)
"
4886,Neutral,"How about adding the user as part of the path?
"
4887,Negative,"@leehambley I agree however I'd hate to see Capistrano (which has a good reputation) be relegated to an unmaintained project. :(

I've joined the conversation on deployrb and will close this issue.  Can you migrate your initial reply here to Issue #1 on that project?

Looking forward to fleshing this out.
"
4888,Positive,"Dude you rock - I know all too well being a one man show on projects!
"
4889,Neutral,"I still get the above trace and `Connection refused` even with the port in the host string. Since it's a key-based auth, I'm afraid the problem is there. On old Cap 2 deploy I always defined the keys with `[File.join(ENV[""HOME""], "".ssh"", ""id_rsa_wtmh"")]`.
"
4890,Neutral,"Properties are applied to servers, not to roles, so I'm afraid there isn't a straightforward way to do this. You'll probably need to approach the problem from a different angle. Maybe crosspost at Stack Overflow for more feedback."
4891,Neutral,"Hmm... not sure where SVN support is at now but I am certainly having problems.

scm_username and scm_password no longer seem to work (although they were broken in later releases of Cap 2 also) and am having to embed username and password in repo_url as

`set :repo_url, ""--username #{fetch(:scm_user)} --password #{fetch(:scm_pass)} --no-auth-cache #{fetch(:svn_server)}/branches/integration""`

Although this seemed to satisfy the svn:check task in svn.rake, for some reason `svn:update` task wouldnt work with the lines

```
within repo_path do
  strategy.update
end
```

which I had to replace with just:

```
strategy.update
```

Same was true of `svn:set_current_revision` task so I don't know what's going on here?
"
4892,Positive,"All done! The website is now being published from `docs/`. 🎉 
"
4893,Neutral,"@itsSaad you could try: `puts $!`
"
4894,Neutral,"Yeah, I can do that, should we check for ENV['CLICOLOR'].nil? or do you have something different in mind?
"
4895,Positive,"Since Capistrano just uses SSH to call out to Rails, let's assume it's a Rails problem.

One thing you might try is 

```
set(:pty, false)
```

As early as feasible in your cap scripts to avoid the chance that your dotfiles are causing weird environmental issues.

You might also try appending (see the docs, I don't have them handy) `LC_ALL=C` to the default environment for Capistrano.

Otherwise go back to your Chef/Puppet/whatever you are using recipes, and try and figure out why your machines have been provisioned with different locales.

Please reference the Rails issue here when you've opened it so we can track the resolution.

Thanks
"
4896,Neutral,"(when it's a bit more mature)
"
4897,Positive,"@torrancew There's the capistranorb.com repository that I started last ween on the _capistrano_ account, and the handbook (which got a lot of good feedback) on my personal account.

I'm actually starting a week long vacation tomorrow afternoon, after that I'm away 50% of August (odd days here and there) - thus my shortness of time.

More than happy to do whatever I can - contact me and please don't be concerned if it takes me a day or two to come back to you.
"
4898,Negative,"Sorry, I'm not a ruby developer, so there will be no pull request from me.
"
4899,Positive,"> ... I don't see the use-case myself, ...

When I created this feature request our deployment strategy was different than it currently is.

By that time we used to use a single role for everything and we wanted to specify the hooks ourselves depending on which environment and application to load but simply requiring the gems in Capfile would activate all hooks.

Currently we no longer set up the roles in config/deploy.rb but we conditionally set up the roles depending on the environment and application so that it doesn't matter if the hook was installed since we stopped using `on(:all)` blocks.

The gems we use (bundler, rails, sidekiq) don't use `on(:all)` blocks with automatic hooks, so we're fine with the current Capistrano state currently. I can still think that this feature might be used for some gem possibly, but I'd prefer to have a real use-case scenario well defined before implementing such feature in a patch to avoid bloating Capistrano's source code.

I'll close this ticket for now and if I find myself needing it again I'll reopen the issue and implement some patch if you agree with the approach.

We currently use a mix of Capistrano and Chef to deploy to our environments. It was similar to this a while ago, but it went through some changes after I created this repository:

https://github.com/rosenfeld/capistrano-chef-deployment

This was created for an article I've written about the approach:

https://www.packtpub.com/books/content/part-1-managing-multiple-apps-and-environments-capistrano-3-and-chef-solo (part 2 hasn't been published yet I guess - formatting and code highlighting is not enabled in this article, but this is out of my control)

Previously we had been using Capistrano more like this:

https://www.packtpub.com/books/content/part-1-managing-multiple-apps-and-environments-capistrano-3-and-chef-solo
https://www.packtpub.com/books/content/part-2-deploying-multiple-applications-capistrano-single-project

Currently our deployment strategy consists of a single ""app"" Capistrano environment and we use something like spec=server_environment_app to decide what to do in the Capistrano side. Capistrano will then run Chef possibly in multiple servers (the database server, the proxy server and every server involved in the process) before running the application's Capistrano recipes (in the deploy:full task).

We don't currently need to patch Capistrano in any way to achieve that goal. Thank you for your great product :)
"
4900,Neutral,"I just did a github search for default_env and couldn't seem to find where the commands were being filtered and prefixed. If you point me in the right direction, I'll try to create a fix and PR.
"
4901,Negative,"@deivid-rodriguez sorry, I am not familiar with capistrano-pending. I suggest opening an issue in that repo and hopefully the author or current maintainer can take it from there. "
4902,Neutral,"I have the same error in capistrano when I execute ""cat /tmp/temp_id_rsa.pub >> /home/fuck-yea/.ssh/authorized_keys"" in an ubuntu server (my host is Mac OSX). At the moment I'm using the next configuration in the task 
set :default_shell, ""/bin/bash""
     set :user, 'root'
The bug happens before some $stdin.gets (I think that is releated with the problem).

passwd: password updated successfully
    command finished in 22077ms
- executing ""adduser fuck-yea sudo""
  servers: [""10.179.33.42"", ""10.179.33.253""]
  [10.179.33.42] executing command
  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:257: [BUG] Segmentation fault
  ruby 1.9.3p362 (2012-12-25 revision 38607) [x86_64-darwin11.4.2]

-- Control frame information -----------------------------------------------
c:0054 p:0011 s:0201 b:0201 l:001290 d:000200 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:257
c:0053 p:---- s:0197 b:0197 l:000196 d:000196 FINISH
c:0052 p:---- s:0195 b:0195 l:000194 d:000194 CFUNC  :call
c:0051 p:0035 s:0190 b:0190 l:000189 d:000189 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/channel.rb:607
c:0050 p:0035 s:0186 b:0186 l:000185 d:000185 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:581
c:0049 p:0110 s:0182 b:0182 l:000181 d:000181 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:456
c:0048 p:0037 s:0178 b:0178 l:000177 d:000177 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:213
c:0047 p:0011 s:0175 b:0175 l:000158 d:000174 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:17
c:0046 p:0010 s:0172 b:0172 l:000162 d:000171 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:43
c:0045 p:---- s:0168 b:0168 l:000167 d:000167 FINISH
c:0044 p:---- s:0166 b:0166 l:000165 d:000165 CFUNC  :each
c:0043 p:0023 s:0163 b:0163 l:000162 d:000162 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:41
c:0042 p:0014 s:0159 b:0159 l:000158 d:000158 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:17
c:0041 p:0009 s:0152 b:0152 l:0005e0 d:0001b8 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:165
c:0040 p:---- s:0150 b:0150 l:000149 d:000149 FINISH
c:0039 p:---- s:0148 b:0148 l:000147 d:000147 CFUNC  :loop
c:0038 p:0009 s:0145 b:0145 l:0005e0 d:000648 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:164
c:0037 p:0024 s:0143 b:0143 l:000142 d:000142 METHOD /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/benchmark.rb:295
c:0036 p:0017 s:0139 b:0139 l:0005e0 d:0005e0 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:163
c:0035 p:0027 s:0131 b:0131 l:000130 d:000130 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:134
c:0034 p:0055 s:0125 b:0125 l:000098 d:000124 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:185
c:0033 p:0026 s:0121 b:0121 l:000106 d:000120 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:198
c:0032 p:---- s:0117 b:0117 l:000116 d:000116 FINISH
c:0031 p:---- s:0115 b:0115 l:000110 d:000114 IFUNC 
c:0030 p:---- s:0113 b:0113 l:000112 d:000112 CFUNC  :each
c:0029 p:---- s:0111 b:0111 l:000110 d:000110 CFUNC  :each_slice
c:0028 p:0456 s:0107 b:0107 l:000106 d:000106 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:186
c:0027 p:0215 s:0099 b:0099 l:000098 d:000098 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:183
c:0026 p:0128 s:0094 b:0094 l:000093 d:000093 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:155
c:0025 p:0042 s:0087 b:0087 l:000086 d:000086 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/namespaces.rb:191
c:0024 p:---- s:0081 b:0081 l:000080 d:000080 FINISH
c:0023 p:0058 s:0079 b:0079 l:001110 d:0011c8 BLOCK  ./config/deploy.rb:65
c:0022 p:---- s:0075 b:0075 l:000074 d:000074 FINISH
c:0021 p:---- s:0073 b:0073 l:000072 d:000072 CFUNC  :instance_eval
c:0020 p:0026 s:0070 b:0070 l:000069 d:000069 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:138
c:0019 p:0027 s:0066 b:0066 l:000065 d:000065 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/callbacks.rb:25
c:0018 p:0056 s:0061 b:0061 l:000060 d:000060 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:89
c:0017 p:0083 s:0057 b:0057 l:000056 d:000056 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:101
c:0016 p:0024 s:0050 b:0050 l:000041 d:000049 BLOCK  /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:46
c:0015 p:---- s:0047 b:0047 l:000046 d:000046 FINISH
c:0014 p:---- s:0045 b:0045 l:000044 d:000044 CFUNC  :each
c:0013 p:0055 s:0042 b:0042 l:000041 d:000041 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:45
c:0012 p:0091 s:0038 b:0038 l:000037 d:000037 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/help.rb:19
c:0011 p:0162 s:0034 b:0034 l:000033 d:000033 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:34
c:0010 p:0024 s:0029 b:0029 l:000028 d:000028 METHOD /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:14
c:0009 p:0029 s:0026 b:0026 l:000025 d:000025 TOP    /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/bin/cap:4
c:0008 p:---- s:0024 b:0024 l:000023 d:000023 FINISH
c:0007 p:---- s:0022 b:0022 l:000021 d:000021 CFUNC  :load
c:0006 p:0127 s:0018 b:0018 l:000ad8 d:002010 EVAL   /Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/cap:19
c:0005 p:---- s:0015 b:0015 l:000014 d:000014 FINISH
c:0004 p:---- s:0013 b:0013 l:000012 d:000012 CFUNC  :eval
c:0003 p:0101 s:0007 b:0007 l:000ad8 d:0006d0 EVAL   /Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:000ad8 d:000ad8 TOP   

-- Ruby level backtrace information ----------------------------------------
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in`eval'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/cap:19:in `<main>'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/cap:19:in`load'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/bin/cap:4:in `<top (required)>'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:14:in`execute'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:34:in `execute!'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/help.rb:19:in`execute_requested_actions_with_help'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:45:in`each'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:101:in`find_and_execute_task'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:89:in `execute_task'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/callbacks.rb:25:in`invoke_task_directly_with_callbacks'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:138:in `invoke_task_directly'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb:138:in`instance_eval'
./config/deploy.rb:65:in `block (2 levels) in load'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/namespaces.rb:191:in`method_missing'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:155:in `run'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:183:in`run_tree'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:186:in `execute_on_servers'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:186:in`each_slice'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:186:in `each'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb:198:in`block in execute_on_servers'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb:185:in `block in run_tree'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:134:in`process'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:163:in `process!'
/Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/benchmark.rb:295:in`realtime'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:164:in `block in process!'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:164:in`loop'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:165:in `block (2 levels) in process!'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:17:in`process_iteration'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:41:in `ensure_each_session'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:41:in`each'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:43:in `block in ensure_each_session'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb:17:in`block in process_iteration'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:213:in `preprocess'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:456:in`dispatch_incoming_packets'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb:581:in `channel_success'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/channel.rb:607:in`do_success'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/channel.rb:607:in `call'
/Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb:257:in`block in request_pty_if_necessary'

-- C level backtrace information -------------------------------------------

   See Crash Report log file under ~/Library/Logs/CrashReporter or
   /Library/Logs/CrashReporter, for the more detail of.

-- Other runtime information -----------------------------------------------
- Loaded script: /Users/jairud/.rvm/gems/ruby-1.9.3-p362/bin/cap
- Loaded features:
  
  0 enumerator.so
  1 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/enc/encdb.bundle
  2 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/enc/trans/transdb.bundle
  3 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/defaults.rb
  4 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/rbconfig.rb
  5 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/deprecate.rb
  6 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/exceptions.rb
  7 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb
  8 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems.rb
  9 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/version.rb
  10 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/requirement.rb
  11 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/platform.rb
  12 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb
  13 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/path_support.rb
  14 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb
  15 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/etc.bundle
  16 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/fileutils.rb
  17 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/pathname.bundle
  18 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/pathname.rb
  19 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/gem_path_manipulation.rb
  20 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/syntax_error.rb
  21 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/psych.bundle
  22 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/stringio.bundle
  23 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/node.rb
  24 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/stream.rb
  25 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/document.rb
  26 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/sequence.rb
  27 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/scalar.rb
  28 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/mapping.rb
  29 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes/alias.rb
  30 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/nodes.rb
  31 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/streaming.rb
  32 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/visitor.rb
  33 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/strscan.bundle
  34 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/scalar_scanner.rb
  35 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/to_ruby.rb
  36 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/emitter.rb
  37 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/yaml_tree.rb
  38 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/json/ruby_events.rb
  39 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/json_tree.rb
  40 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors/depth_first.rb
  41 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/visitors.rb
  42 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/handler.rb
  43 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/tree_builder.rb
  44 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/parser.rb
  45 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/omap.rb
  46 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/set.rb
  47 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/coder.rb
  48 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/core_ext.rb
  49 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/date_core.bundle
  50 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/date/format.rb
  51 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/date.rb
  52 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/deprecated.rb
  53 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/stream.rb
  54 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/json/yaml_events.rb
  55 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/json/tree_builder.rb
  56 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/json/stream.rb
  57 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych/handlers/document_stream.rb
  58 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/psych.rb
  59 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/yaml.rb
  60 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/psyched_yaml.rb
  61 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/gem_helpers.rb
  62 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/match_platform.rb
  63 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/rubygems_ext.rb
  64 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/config_file.rb
  65 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/psych_additions.rb
  66 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/psych_tree.rb
  67 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/syck_hack.rb
  68 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/rubygems_integration.rb
  69 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/version.rb
  70 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler.rb
  71 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/digest.bundle
  72 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/digest.rb
  73 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/digest/sha1.bundle
  74 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/environment.rb
  75 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/shared_helpers.rb
  76 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/runtime.rb
  77 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/settings.rb
  78 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/set.rb
  79 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/definition.rb
  80 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dependency.rb
  81 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dsl.rb
  82 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/common.rb
  83 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/generic.rb
  84 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/ftp.rb
  85 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/http.rb
  86 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/https.rb
  87 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/ldap.rb
  88 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/ldaps.rb
  89 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri/mailto.rb
  90 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/uri.rb
  91 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/user_interaction.rb
  92 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/f_sync_dir.rb
  93 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_header.rb
  94 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/enc/iso_8859_1.bundle
  95 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/zlib.bundle
  96 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_input.rb
  97 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_output.rb
  98 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader/entry.rb
  99 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_reader.rb
  100 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package/tar_writer.rb
  101 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/package.rb
  102 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/format.rb
  103 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/ext/builder.rb
  104 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/ext/configure_builder.rb
  105 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/optparse.rb
  106 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/command.rb
  107 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/ext/ext_conf_builder.rb
  108 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/ext/rake_builder.rb
  109 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/ext.rb
  110 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/require_paths_builder.rb
  111 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/installer.rb
  112 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/remote_fetcher.rb
  113 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/errors.rb
  114 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/text.rb
  115 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/spec_fetcher.rb
  116 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/gem_installer.rb
  117 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/source.rb
  118 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lockfile_parser.rb
  119 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/lazy_specification.rb
  120 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/tsort.rb
  121 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/forwardable.rb
  122 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/spec_set.rb
  123 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/index.rb
  124 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/remote_specification.rb
  125 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/endpoint_specification.rb
  126 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/bundler/gems/jstree-rails-e2ad211ea783/lib/jstree/rails/version.rb
  127 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/dep_proxy.rb
  128 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb
  129 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/rubygems-bundler-1.1.0/lib/rubygems-bundler/noexec.rb
  130 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/fix_rake_deprecated_dsl.rb
  131 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/logger.rb
  132 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/alias_task.rb
  133 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/callback.rb
  134 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/callbacks.rb
  135 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/thread.rb
  136 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb
  137 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/logger.rb
  138 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/config.rb
  139 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/errors.rb
  140 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/loggable.rb
  141 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/socket.bundle
  142 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/socket.rb
  143 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/timeout.rb
  144 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/version.rb
  145 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/ruby_compat.rb
  146 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/openssl.bundle
  147 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/bn.rb
  148 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/cipher.rb
  149 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/config.rb
  150 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/digest.rb
  151 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/buffering.rb
  152 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/x86_64-darwin11.4.2/fcntl.bundle
  153 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/ssl-internal.rb
  154 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl/x509-internal.rb
  155 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/openssl.rb
  156 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/openssl.rb
  157 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/buffer.rb
  158 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/known_hosts.rb
  159 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/ctr.rb
  160 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/key_expander.rb
  161 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/identity_cipher.rb
  162 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/cipher_factory.rb
  163 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/constants.rb
  164 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/abstract.rb
  165 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/md5.rb
  166 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/md5_96.rb
  167 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha1.rb
  168 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha1_96.rb
  169 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha2_256.rb
  170 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha2_256_96.rb
  171 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha2_512.rb
  172 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/sha2_512_96.rb
  173 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/ripemd160.rb
  174 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac/none.rb
  175 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/hmac.rb
  176 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/diffie_hellman_group1_sha1.rb
  177 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/diffie_hellman_group14_sha1.rb
  178 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/diffie_hellman_group_exchange_sha1.rb
  179 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/diffie_hellman_group_exchange_sha256.rb
  180 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/ecdh_sha2_nistp256.rb
  181 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/ecdh_sha2_nistp384.rb
  182 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex/ecdh_sha2_nistp521.rb
  183 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/kex.rb
  184 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/server_version.rb
  185 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/algorithms.rb
  186 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/buffered_io.rb
  187 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/constants.rb
  188 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/constants.rb
  189 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/packet.rb
  190 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/state.rb
  191 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/packet_stream.rb
  192 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/verifiers/null.rb
  193 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/verifiers/secure.rb
  194 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/verifiers/strict.rb
  195 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/verifiers/lenient.rb
  196 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/transport/session.rb
  197 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/erb.rb
  198 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/abbrev.rb
  199 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/compatibility.rb
  200 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/system_extensions.rb
  201 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/question.rb
  202 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/menu.rb
  203 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/color_scheme.rb
  204 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/style.rb
  205 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline/string_extensions.rb
  206 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/highline-1.6.15/lib/highline.rb
  207 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/prompt.rb
  208 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/key_factory.rb
  209 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/agent/socket.rb
  210 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/agent.rb
  211 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/key_manager.rb
  212 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/methods/abstract.rb
  213 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/methods/publickey.rb
  214 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/methods/hostbased.rb
  215 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/methods/password.rb
  216 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/methods/keyboard_interactive.rb
  217 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/authentication/session.rb
  218 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/term.rb
  219 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/channel.rb
  220 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/service/forward.rb
  221 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh/connection/session.rb
  222 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-2.6.2/lib/net/ssh.rb
  223 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-ssh-gateway-1.1.0/lib/net/ssh/gateway.rb
  224 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/ssh.rb
  225 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/errors.rb
  226 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/connections.rb
  227 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/execution.rb
  228 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/loading.rb
  229 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/log_formatters.rb
  230 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/server_definition.rb
  231 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/task_definition.rb
  232 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/namespaces.rb
  233 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/role.rb
  234 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/roles.rb
  235 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/servers.rb
  236 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/variables.rb
  237 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/shellwords.rb
  238 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-scp-1.0.4/lib/net/scp/errors.rb
  239 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-scp-1.0.4/lib/net/scp/upload.rb
  240 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-scp-1.0.4/lib/net/scp/download.rb
  241 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-scp-1.0.4/lib/net/scp.rb
  242 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/constants.rb
  243 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/errors.rb
  244 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/packet.rb
  245 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/base.rb
  246 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/attributes.rb
  247 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/name.rb
  248 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/01/base.rb
  249 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/02/base.rb
  250 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/03/base.rb
  251 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/attributes.rb
  252 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/name.rb
  253 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/04/base.rb
  254 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/05/base.rb
  255 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/06/attributes.rb
  256 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol/06/base.rb
  257 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/protocol.rb
  258 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/response.rb
  259 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/request.rb
  260 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/operations/dir.rb
  261 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/operations/upload.rb
  262 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/operations/download.rb
  263 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/operations/file.rb
  264 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/operations/file_factory.rb
  265 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp/session.rb
  266 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/net-sftp-2.0.5/lib/net/sftp.rb
  267 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/processable.rb
  268 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/transfer.rb
  269 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/file_transfer.rb
  270 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/inspect.rb
  271 /Users/jairud/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/benchmark.rb
  272 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/command.rb
  273 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration/actions/invocation.rb
  274 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/configuration.rb
  275 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/extensions.rb
  276 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/ext/string.rb
  277 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano.rb
  278 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/execute.rb
  279 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/help.rb
  280 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/options.rb
  281 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli/ui.rb
  282 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/cli.rb
  283 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/recipes/deploy/scm.rb
  284 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/capistrano-2.14.1/lib/capistrano/recipes/deploy/strategy.rb
  285 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/deployment.rb
  286 /Users/jairud/.rvm/gems/ruby-1.9.3-p362@global/gems/bundler-1.2.3/lib/bundler/capistrano.rb
  287 /Users/jairud/.rvm/gems/ruby-1.9.3-p362/gems/rvm-capistrano-1.2.7/lib/rvm/capistrano.rb

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Abort trap: 6
"
4903,Positive,@mattbrictson I would be more than happy to assist you and to contribute to the project. Thanks for the great tool. :)
4904,Neutral,"I'm having the exact same problem. the ""queueing packet nr 12 type 97 len 28"" is exactly the same. 
"
4905,Negative,"2.x is unsupported sorry.
On 20 Nov 2013 22:10, ""Reydi Sutandang"" notifications@github.com wrote:

> @leehambley https://github.com/leehambley for some reason i need to
> downgrade to 2.15, and i got the same problem. can i just remove this line
> to make it stay in the HEAD branch on my local?
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/359#issuecomment-28931255
> .
"
4906,Neutral,"@leehambley @robd The changes needed to integrate Airbrussh into Capistrano turned out easier than I expected, and I don't see any need to merge them gems.

Here are the PRs that accomplish the integration:
- https://github.com/capistrano/sshkit/pull/308
- https://github.com/mattbrictson/airbrussh/pull/70
- #1541 
"
4907,Neutral,"Hi @BenjaminKim the formatters (take a look) for Capistrano live in SSHKit, mostly - and they take a standard `IO` - typically this is set to $stdout, but you could easily wrap $stdout in something else that responds to `#write`, and keeps a copy. The formatters don't always receive plain strings, they receive `Command` objects, and whatever else, and they make decisions about how to print them, you might take a look at https://github.com/mattbrictson/airbrussh for some inspiration, although you wouldn't have to go anywhere near that far, simply keep a copy of each thing that is written to your output, and then do something with it to render it for the user. That might mean that you do the same thing (mostly, just call `.to_s` on everything you receive, or you might want to do something cleverer, to make it into HTML or strip the colours/formatting for email display.
"
4908,Neutral,"It breaks the editor in production. When I rollback the capistrano version and deploy again, the editor works OK.
"
4909,Positive,"Cool, gem is already available, and its close to being production reqdy
On Aug 14, 2013 6:31 PM, ""betesh"" notifications@github.com wrote:

> Ok so I'll try to put aside some time for v3 and then I'll bundle update
> if/when you release the gem. Thank you!
> 
> On Wed, Aug 14, 2013 at 12:17 PM, Lee Hambley notifications@github.comwrote:
> 
> > I don't think it makes sense, but I'd b? Happy to be proven wrong -v3 is
> > just rake, so might be easy, I certainly won't take a patch for v2,
> > however
> > On Aug 14, 2013 5:53 PM, ""betesh"" notifications@github.com wrote:
> > 
> > > I'm using 2.X but I'd be just as happy to implement in both
> > > 
> > > —
> > > Reply to this email directly or view it on GitHub<
> > 
> > https://github.com/capistrano/capistrano/issues/613#issuecomment-22645300>
> > 
> > > .
> > 
> > —
> > Reply to this email directly or view it on GitHub<
> > https://github.com/capistrano/capistrano/issues/613#issuecomment-22647402>
> > 
> > .
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/613#issuecomment-22648257
> .
"
4910,Neutral,"duplicates #1013 
"
4911,Neutral,"This should be fixed in https://github.com/capistrano/capistrano/commit/b1cbb0cd54ed79960ccee0feab52ead209512858#diff-abe5c05a8883574eaa474ba7994a3f96R37 which will be included in the next release.
"
4912,Neutral,"> Mecurial, Subversion, and CVS Support These have been removed [...] we are actively looking for people who are interested in contributing
> http://www.capistranorb.com/2013/06/01/release-announcement.html
"
4913,Neutral,"@patricknelson Yes, there is a place for you to add custom Capistrano tasks to your project, usually {Rails.root}/lib/capistrano/tasks/ -- look at the end of your Capfile.  Take the entirety of the code I posted above (minus the `set :optional_linked_files, ...` part that goes in config/deploy.rb) and put it in a file under that directory (such as lib/capistrano/tasks/optional_linked_files.rake)."
4914,Neutral,"Perhaps the solution here is to, at most, add the following lines to the default `deploy.rb`:

```ruby
# Uncomment the following to require manually verifying the host key before first deploy.
# set :ssh_options, verify_host_key: :secure
```"
4915,Positive,"@leehambley This is the results I got from that checkit task

```
server_1_ip_address, app, web, basic_work_q_tender
server_2_ip_address, delayed_job, search
```

Seeing that I don't see the db role that is the problem right? Do I basically need to merge lines 1 and 2 from my example above to fix it? If so line 2 has the primary true flag set. Is that legacy or is that still needed?

Thanks again for your support here.
"
4916,Positive,"@j15e Please feel free to modify the wiki, that's why it's a wiki :)
"
4917,Neutral,"> @leehambley Do you know if there is software which allows us to track (ideally on a paragraph by paragraph level) which parts of the docs changed, and throw them in a queue for translation? It'd be nice to have the docs translated, and perhaps it would be doable if it was easy to mark which sections were up to date and help translate them…

The only thing I've seen is Git backed book authorship tools
"
4918,Neutral,"I'm using version 2.12.0, but I can't seem to get this code working.  to my eyes it looks like it should, but am I missing something? I'm just doing as above, assigning assets role to :app in my case.
"
4919,Positive,"Actually, apart from this one issue which I'm happy enough to continue working around, it works fine here. Perhaps the fact that we've already moved to a system backed by ACLs, where we can deploy as ourselves rather than the shared user running Rails, has made this work better than it might have otherwise.

We were deploying remotely but have just switched to `:local` because our new environment is very locked down and we only allow SSH access from one specific access machine. We could deploy from there but it made more sense to pull our Capistrano files onto the target, which already has Ruby installed and already has access to the git server. The initial setup is done by Chef so all we have to do is jump on there and basically run `bundle install; cap deploy`.

I didn't consider Rake or Thor because Capistrano, whether local or remote, does exactly what we need it to do out of the box. This is a Rails application so it handles the assets and migrations, but even for our non-Rails stuff, it intelligently deploys each release whilst dealing with RVM and Bundler. I don't want to give that up! It's true that we are not using the multi-server aspect of it, beyond having multiple stages, but that's only a small part of the larger package.

I'm not aware of the reasons why you want to remove `:local` but if I come across any issues, I'll do my best to fix them myself.
"
4920,Neutral,"I'm looking on the master branch: https://github.com/capistrano/capistrano/blob/master/lib/capistrano/logger.rb#L99

(We're using 2.13.5, fwiw)
"
4921,Neutral,"Closing because I’m not sure this is an issue, if you are convinced that this is really a bug, please feel free to re-open the issue and add more information (your versions (Ruby, Cap, etc), your Capfile, your logs, and relevant sections out of your Gemfile)

Otherwise support is done via the mailing list (https://groups.google.com/forum/#!forum/capistrano) or at StackOverflow (http://stackoverflow.com/questions/tagged/capistrano) with questions tagged `capistrano`.
"
4922,Neutral,"Finally, I see in your logs that your `git` command is different than mine. Yours is:

```
git fetch --depth 1 origin ...
```

Whereas mine is:

```
git remote update --prune
```

Based on the Capistrano source, I can deduce that you are have this in your configuration:

```
set :git_shallow_clone, 1
```

Correct?

Furthermore, when I look at the code, there is a comment that says:

> Note: Requires git version 1.9 or greater

But you are running 1.8.3.1.

Could that be the problem?

The code looks like this:

https://github.com/capistrano/capistrano/blob/e27b0322f2e84104023d64dd6e63436a15ca7c91/lib/capistrano/git.rb#L31-L38

``` ruby
def update
  # Note: Requires git version 1.9 or greater
  if (depth = fetch(:git_shallow_clone))
    git :fetch, ""--depth"", depth, ""origin"", fetch(:branch)
  else
    git :remote, :update, ""--prune""
  end
end
```
"
4923,Positive,"Unless I'm missing something, with the way Capistrano currently works, the only way to reliably get the previous deploy is by reading/parsing `revisions.log`. There's no way to do it through the mirrored `repo` clone since Cap is using `git archive` to create a new release.

So if parsing `revisions.log` is the acceptable solution, I can give it a shot. Although it may not be done too quickly :)
"
4924,Neutral,"Unless you have a good reason not to do so, yes. If you write commands with spaces in their names the complexity for correct shell escaping goes through the roof, imagine the example:

``` ruby
within release_path do
    execute ""rm -rf some file""
end
```

Its impossible to know which spaces should be escaped (probably the user meant to type `some\ file`, or `'some file'`), and which should not (the spaces around the `-rf`)

For that reason, if people wish to use spaces in their commands, they are free to do something like this:

``` ruby
execute <<-EOCOMMAND
  (
    cd #{release_path};
    pwd && ls;
  )
EOCOMMAND
```

We (the core team) are of the opinion that our decision makes sense, although admittedly from outside it's not immediately clear the reasoning behind that.
"
4925,Neutral,"@leehambley On looking at the code there are tests in place for this and they also refer to 'role' and 'host', so it was a doc error. Although I'm tempted to change the names to 'roles' and 'hosts' to fit in with the command line and ENV names, doing so would break existing usage. How about we allow both? I'll create a PR that just makes this addition, then we can leave the documentation unchanged, and existing users won't break.
"
4926,Neutral,"Still happening to me as well on version 3.2.1, current fix is to load in a backwards order.
"
4927,Neutral,"@kbruneel  You can also use Connection sharing... http://protempore.net/~calvins/howto/ssh-connection-sharing/ has a how-to.

Basically, ssh connects once and leaves the connection hanging around for a while.  If you try connecting again, it reuses the same connection.

You can set it to something short like `10m` for example and it'll prevent UFW from getting upset.
"
4928,Neutral,"Yeah, using:

set :assets_role, [:web, :app, :worker]

Fixed the problem for me - I just think that should be the default.

Ian
"
4929,Neutral,"@leehambley I can't speak for @siannopollo but we use the tinder gem during deploys which loads ActiveSupport.
"
4930,Positive,"Sure, send me a PR with your suggestion, I'd be more than happy to merge it in :) (as maintainer I never know where is logical with putting information in the docs, as I knew it all anyway :-D)
"
4931,Positive,"@cgriego Any news? :) What are the problems you are facing?
"
4932,Neutral,"Duplicate at #1545 where we'll fix this, see the newly linked issue there.
"
4933,Negative,"@clintonb If you're here to troll me because you have a problem with my management style, don't bother.
"
4934,Positive,"> with something like:

uniquetmpdir = capture(""mktemp -d --tmpdir=#{fetch(:tmp_dir)} #{fetch(:application)}XXXXXXXXXXXXXXXX"")

That might be reasonable, but it leaves scripts hanging around after the deploy, unless the bash ssh script is extended to remove itself with a trap, but then it's not reliable for all git operations, and we'd have to upload a new one every time we perform a git operation.

There's a good reason that it's the way it is now, it's a compromise for which we didn't yet find a better solution.

If you have the time to play around, and try and come up with something we didn't think of, I'd be glad of it!
"
4935,Neutral,"@finkelm We are doing our best to improve the docs, with a big recent push to the README and to [capistranorb.com](http://capistranorb.com).

I know that your concern is with the SSHKit DSL specifically, which we haven't written much about (yet). So this issue isn't ""done"" by any means. I'm going to move it to the https://github.com/capistrano/documentation repository where it is better suited.

:arrow_right: https://github.com/capistrano/documentation/issues/159
"
4936,Neutral,"Im on mobile but will try and have a look at the history andnsee if I can
live with it.

Summary: agree with the merge to docs/, would prefer keeping history if the
price isn't too high... (@matt, what command did you use to merge them?)

(Sent from my Nexus 6, please forgive typos!)

On Aug 24, 2016 03:16, ""Matt Brictson"" notifications@github.com wrote:

> OK, how about this? I spliced the entire history of the documentation
> repository on top of capistrano @ master. That means the capistrano history
> remains unmodified; all tags are still valid, etc. There are just a bunch
> of new commits that add docs/.
> 
> Will that work? See: https://github.com/mattbrictson/capistrano/tree/
> merge-docs
> 
> Or if we don't think we need to pollute the capistrano repo with the
> documentation commit history, we can just add docs/ with one enormous
> commit.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/capistrano/capistrano/issues/1752#issuecomment-241930520,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/AABKCLSDE4bq4AfPhAxwI_-C6VPgof1xks5qi5tqgaJpZM4Jo9LE
> .
"
4937,Positive,"Thank @niklas!  Worked for me.
"
4938,Neutral,"We use .cap, the same way as Rake uses .rake, which is also a bit weird.
I'm sure that we could also look for .rb files, or .rake files. Can you not
train your IDE?

We specify the files to load in the Capfile, see the example
`./lib/capistrano/templates/Capfile` in the repository, which ends up as
your main Capfile, which has the line:

Dir.glob('lib/capistrano/tasks/*.cap').each { |r| import r }

The `import` line is kind of important, as that refers to loading files as
""task sources"" as against just parsing them as Ruby, but you could easily
change that if it doesn't suit your env, We might even be able to change
the globbing pattern to something like 'lib/capistrano/tasks/*.cap{,.rb}'

## Lee Hambley

http://lee.hambley.name/
+49 (0) 170 298 5667

On 19 June 2013 17:00, Ain Tohvri notifications@github.com wrote:

> I was just creating a few custom tasks for Cap 3 and recognised the
> autoimport from lib/capistrano/tasks is expected in *.cap. While this is
> surely more readable and descriptive, the problem is majority of IDEs have
> no idea what the *.cap is, therefore the old concept of *.rb would still
> deliver better, or, why not *.cap.rb.
> 
> Ideas?
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/516
> .
"
4939,Negative,"@leehambley Have you got more time yet to look into this for us? :wave: 
"
4940,Neutral,"SSHKit's `upload!` would deliver nicely instead of the Git stack in `updating` stage.

I'd just reroute the `#{scm}:create_release` to the upload strategy that should then have a path reference to the artefacts.
"
4941,Neutral,"@mattbrictson Hmmm. I inherited some of this config, and it does have:

```
namespace :deploy do
  after :publishing, :restart_unicorn
  after :failed, :rollback
end
```

That shouldn't matter though, right? Even in that case, the rollback should still not remove a directory that wasn't created in this deploy."
4942,Neutral,Sounds like this has been resolved.
4943,Positive,"Cheers @knightlabs 
"
4944,Positive,"I don't recall why we didn't release it, but I definitely would be in favor of it.
"
4945,Positive,"Yeah I think that would be great. Although I'm personally a fan of articles over videos.

I'd like to add that the guides on the new site are very good. It was just that I needed something to have more of a step by step, from the beginning, kind of flow to it. I eventually got everything working without too much wasted time, but I used the old guide that I linked to above to help me.
"
4946,Positive,"Yep, your way looks nicer:

``` ruby
set :scm_arguments, {:all => '--revision 1234', :export => '--ignore-externals' }
```

I've made the changes and issued a pull request.
"
4947,Neutral,"Wrong project, intended for capistrano/symfony.
"
4948,Negative,"> Although, it might work if you base your calculations on when the asset was last deployed. E.g. delete assets that haven't been actively deployed for a week.

I'm having trouble thinking through all the implications, this stuff is confusing. But don't some of the cases require you to keep assets from the _last_ deploy, even if the last deploy was 3 months ago?  After all, even if the last deploy was deployed 3 months ago, it was _operative_ until _just now_ when you did the new deploy. Don't some of the 'keep old asset tasks' cases require you to thus keep them around?

> OK, I've completely removed all of the 'asset cleaning' code, pending further investigation into the capistrano expiring task. 

Aww, sad, it seemed like such a magic solution. But you're probably right. This stuff is confusing, i can't quite wrap my head around all the cases. Would probably be useful for someone try to document each of the ""why you need to keep old assets around"" cases, I think there are actually several of em. 
"
4949,Neutral,"@felixbuenemann - do you think this regression is also showing itself with branch deploys?

`BRANCH_NAME=homepage-menu-type-info cap staging deploy`

results in:

```
Tasks: TOP => git:set_current_revision
(See full trace by running task with --trace)
The deploy has failed with an error: Exception while executing as oamm@0.0.0.100: git exit status: 128
git stdout: Nothing written
git stderr: fatal: ambiguous argument 'homepage-menu-type-info': unknown revision or path not in the working tree.
Use '--' to separate paths from revisions
```

If I remove the remote `repo` directory, and rerun, it works.
"
4950,Neutral,"> should I do something like this : `SSHKit.config.command_map[:rm] = ""rm --one-file-system""` in one of the capistrano config file?

Yes, exactly. Put that in your `deploy.rb`."
4951,Neutral,"@gjuric There's no simple way of doing this at the moment, but I think this is a prerequisite for being able to properly package deploys and share them between applications using the same environments. I'll take a look at this over the next week.
"
4952,Neutral,"So how do I figure out what deploy:setup is trying to do, so I can do it with my ""un-privileged user"", and or have IT do for me?
"
4953,Neutral,"Any workaround on this issue?
"
4954,Neutral,"I can't speak about this @carsomyr not sure what it refers to, I've never worked on this part of the code.

What modifications are you making to the cap code?
"
4955,Neutral,"Looks like the PRs attempted for this (#767, #783) were abandoned. I'm adding the ""you can help"" tag in case anyone else wants to step up and take a crack at this.
"
4956,Neutral,"@seenmyfate it did not work even after setting 'user' in both deploy or staging.rb. it only worked after putting the user as part of server directive
"
4957,Positive,"Closing issue, as we merged the related PR, and there's more than enough workarounds/fixes applied so far. I think that's a satisfactory resolution, right everyone? [Feel free to let me know if not.](http://thinkprogress.org/wp-content/uploads/2012/05/pitchfork-mob-300x225.jpg)
"
4958,Neutral,"We should also release updated versions of bundler, rails and rbenv following changes to the dependency requirements today.
"
4959,Neutral,"Is there a way of setting up multiple proxy command hops? Something like:

```
server 'app',
  ssh_options: {
    proxy: Net::SSH::Proxy::Command.new('ssh bastion nc -w 120 %h %p')
  }

server 'bastion',
  ssh_options: {
    proxy: Net::SSH::Proxy::Command.new('ssh jumpbox nc -w 120 %h %p')
  }
```

I also attempted to pass an array of Net::SSH::Proxy::Command to the ssh_options proxy and that failed.
"
4960,Neutral,"Unfortunately even if you are willing to restrict yourself to deploying from the same OS as your target you have to develop a custom strategy to make this work. `set :build_script, 'bundle package'` does not suffice because bundler will run in your current environment instead of packaging in the `:copy_dir`.

An example gem that creates a custom strategy to work around this problem can be found here: https://github.com/rainux/capistrano-strategy-copy-with-bundle-package

If the `:build_script` approach provided more control over the sub-shell environment the script is executed in or if there was a way to hook in to the build step (if build were more like a task for example) it would be a lot simpler to integrate `bundle package` into a deployment.
"
4961,Neutral,"Are we going to have `3.0.1`?
"
4962,Negative,"Isn't it weird to wrap such a popular feature in lambda expression? I think this is a bug then. 
"
4963,Positive,"@leehambley at weekend I'll take a look if I do not forget it completely :smile: 
"
4964,Positive,"Merged! (I'll get a release out some time today, I have a few things I need to fix related to output logging, and I wanted to add better errors someplace)
"
4965,Neutral,"If developers lose time scratching their heads, I think it's worth fixing.  So where would be an appropriate place to define this method?

```
def append_to(target, values)
  set target, fetch(target).push(*values)
end
```
"
4966,Positive,"Surprisingly amount of useful stuff in there. Thanks for taking care of the
release Matt.

On 22 Oct 2017 20:40, ""Matt Brictson"" <notifications@github.com> wrote:

> We are due for another Capistrano release according to our six-week
> cadence. Next up is 3.10.0. I think this warrants a minor version bump
> because there is some new behavior.
>
> I'll do the release to Rubygems on Monday morning PDT if there are no
> objections.
> ------------------------------
>
> v3.9.1...HEAD
> <https://github.com/capistrano/capistrano/compare/v3.9.1...HEAD>
>
>    - #1922 <https://github.com/capistrano/capistrano/pull/1922>: Prevents
>    last good release from being deleted during cleanup if there are too many
>    subsequent failed deploys
>    - As of this release, version 2.x of Capistrano is officially End of
>    Life. No further releases of 2.x series are planned, and pull requests
>    against 2.x are no longer accepted. The maintainers encourage you to
>    upgrade to 3.x if possible.
>    - #1937 <https://github.com/capistrano/capistrano/pull/1937>: Clarify
>    error message when plugin is required in the wrong config file.
>    - #1930 <https://github.com/capistrano/capistrano/issues/1930>:
>    Default to locking the version using the pessimistic version operator at
>    the patch level.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/capistrano/capistrano/issues/1942>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AABKCBxH_gZNyDbNZ4TveXpIgoq5_Rpzks5su4wYgaJpZM4QCDhy>
> .
>
"
4967,Neutral,"@palominoz did upgrading to the latest version solve this issue for you?
"
4968,Neutral,"I have the same issue, but can't use the SSH url because that port isn't open on the deployment server. I can pull it down by hand fine with the https url but Capistrano just freezes right after it asks for username. 
"
4969,Positive,"Thanks for the reply, I'll give that a shot.
"
4970,Neutral,"We've had some issue with `role` vs `roles` being accepted in the keys - I think we decided that the docs are out of date, since there's people with code in the wild.

Personally it's a feature I never use, so it's hard to say what it _should_ be, but I think `code > docs` in terms of deciding for A or B.
"
4971,Positive,"You are almost certainly attempting to run Cap v3 with a `Capfile` generated using v2, which would tend to start with:

```
load 'deploy'
```

This file no longer exists in v3.  I recommend following the [Installation Guide](http://www.capistranorb.com/documentation/getting-started/installation/) to ensure that you application is configured correctly (you may want to rename current `Capfile` first).

If you still are having problems after working through the guide, I would suggest asking for some help from the awesome people of the [cap google group](https://groups.google.com/forum/#!forum/capistrano).

For now though, I'm going to close this issue as it doesn't look to be caused by a bug within cap, but rather deploy/server configuration - but I do hope one of these suggestions solves your problem.
"
4972,Negative,"Niels,

Yes, Capture is designed to run that way, sorry for the surprise, you'd be better writing something like:

```
run('if [ -e #{pid_file} ] then; #{try_sudo} #{kill} $(cat #{pid_file}) ;fi')
```

That's the only workaround (i.e. let the server do the work to capture the pid)
- Lee 

On Wednesday, March 14, 2012 at 5:51 PM, Niels Meersschaert wrote:

> We have 3 app servers. If a task has capture, it only runs on the first server, rather than all the servers. We are trying to use this to read the pid to kill it. Is this expected behavior?
> 
> ---
> 
> Reply to this email directly or view it on GitHub:
> https://github.com/capistrano/capistrano/issues/181
"
4973,Neutral,"As far as I am aware, the point is to update the asset timestamps (mtime) so that the asset cleanup task has something to work with, assets that are un-touched for a long time can be identified by ancient mtimes and thus cleaned up, otherwise Rails doesn't provide a good way to clean up (what should be) shared assets directories symlinked between releases.
"
4974,Neutral,"@carsomyr Anything new?
"
4975,Positive,"Thank you for responding. I love Capistrano and have used it for many years. I'm trying to understand what the designers of the new version intended.

> If a deployment fails

So, is it inadvisable to use capistrano for anything other than deploys? The docs certainly tout capistrano as a generic automation tool.

But this sounds like a fatal flaw for an automation tool (from [the docs](http://capistranorb.com/documentation/getting-started/rollbacks/)):

> when a task fails on one server by exiting with a non-0 exit code, Capistrano closes the SSH connections to any still in-progress servers and their tasks exit.

This seems crazy. I don't see how tasks can be designed such that they would leave their systems in a consistent state no matter which of their individual commands was aborted and killed in the middle of execution. If only there were some mechanism to run command X to clean up state when command Y fails.

I swear I must be missing something. Am I asking the wrong question? Imagine if databases had no transactional support and would leave any update query half-applied if it hit an error.
"
4976,Neutral,"See #826
"
4977,Neutral,"Any luck in solving this? I'm facing the same issue
"
4978,Neutral,"A slightly old technology but still in use in several places, so I figured out a way to use Subversion with Capistrano overcoming the problems with authentication to the SVN server the following way:

In file lib/capistrano/svn.rb I modified line 19 from:

```
      test! :svn, :info, repo_url
```

to the following:

```
      test! :svn, :info, repo_url, '--username', fetch(:svn_username), '--password', fetch(:svn_password)
```

Did the same with the other methods and got a working SVN with authentication, adding the variables :svn_username and :svn_password to the deployment file.

If there is interest and the way it is done is considered fine, I can create a pull request with the changes.
"
4979,Neutral,"```
/Users/Development/capistrano-jelastic/lib/capistrano/tasks/deploy_on_jelastic.cap:43
```

@gerardo-navarro Can you share what your code is doing on this line? Unless the backtrace is omitting something, it looks like you are calling `any?` directly. I'm curious to see what you are using it for.
"
4980,Positive,"Sure, I think that would be awesome :+1: 
"
4981,Neutral,"Repository at [capistrano/chruby](https://github.com/capistrano/chruby)
"
4982,Neutral,"Same issue here, upgrading from 2.12.0 => 2.13.0
"
4983,Neutral,"This test seems to be what is needed. It just needs to be made to pass.

https://github.com/will-in-wi/capistrano/commit/2c34cedcbecdb24877496d25993ee42a70be340c"
4984,Positive,"Whoohoo!
"
4985,Neutral,"Is it because of the deprecation in commit 021c0574?
"
4986,Neutral,"The error is with Ruby, please do as the error message (from Ruby) suggests.
"
4987,Neutral,"I got the same problem when I upgrade capistrano from 2.\* to 3._. The actual problem is capfile and deploy.rb syntax are totally different in 2._ and 3.*. However, I didn't get any deprecated message or any syntax error when I upgrade. It give this error which doesn't make sense for me.

```
/Users/wuboy/.rvm/gems/ruby-2.1.0/bin/cap:23:in `<main>'
(See full trace by running task with --trace)
/Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/lib/capistrano/application.rb:36:in `exit_because_of_exception': undefined method `deploying?' for #<Capistrano::Application:0x00000102037b88> (NoMethodError)
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:175:in `rescue in standard_exception_handling'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:165:in `standard_exception_handling'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/gems/rake-10.1.1/lib/rake/application.rb:75:in `run'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/lib/capistrano/application.rb:15:in `run'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/bin/cap:3:in `<top (required)>'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/bin/cap:23:in `load'
    from /Users/wuboy/.rvm/gems/ruby-2.1.0/bin/cap:23:in `<main>'
```

The fix is simply remove exit_because_of_exception method in lib/capistrano/application.rb

```
    def exit_because_of_exception(ex)
      if deploying?
        exit_deploy_because_of_exception(ex)
      else
        super
      end
    end
```

capistrano will call super exit_because_of_exception wiithout using deploying? method.
After that, capistrano give me understandable message now.

```
cannot load such file -- deploy
/Users/wuboy/workspace/spree_pinshop/Capfile:1:in `load'
/Users/wuboy/workspace/spree_pinshop/Capfile:1:in `<top (required)>'
/Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/lib/capistrano/application.rb:24:in `load_rakefile'
/Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/lib/capistrano/application.rb:15:in `run'
/Users/wuboy/.rvm/gems/ruby-2.1.0/gems/capistrano-3.1.0/bin/cap:3:in `<top (required)>'
/Users/wuboy/.rvm/gems/ruby-2.1.0/bin/cap:23:in `load'
/Users/wuboy/.rvm/gems/ruby-2.1.0/bin/cap:23:in `<main>'
```

That message made me realize that syntax has been changed between 2.\* and 3.\* .
So, for those who still use old capistrano syntax. The fix will be just sticky capistrano gem version to 2.*.

```
gem 'capistrano', :github => ""capistrano/capistrano"", :tag => ""2.15.5""
```

You should also uninstall 3.\* capistrano gem because cap command may still refer to 3.*.

```
gem uninstall capistrano
Select gem to uninstall:
 1. capistrano-3.1
 2. capistrano-2.15.5
 3. All versions
> 1
```

Everything is back now.
"
4988,Neutral,"No output logs?
"
4989,Neutral,"I can't see what version of Git that was added to - I'll check the changelogs - https://git-scm.com/docs/git-remote
"
4990,Positive,"I'm fairly new to Capistrano and I'm curious what the timeline is for the 3.1 release. As best I can tell this is the only remaining issue for the milestone. I'd like to go ahead and use the 3.1 version as I'm starting my configuration but others on my team aren't comfortable using an unreleased version, hence my interest.
"
4991,Negative,"Ugh, I just realized that example from the blog post is broken in several ways, actually. And it's not entirely clear how to make it work. (It's _not_ succesfully doing a git log between the 'last' deploy and now). 

Well, anyone have any ideas for a way to make this work right?   I'm getting really tired of waiting the extra 90+ seconds for an assets precompile even when no assets have changed. 
"
4992,Positive,"it was just known to me ;) so till now it was just my fault being to lazy to report ;) thx for the quick reply
"
4993,Neutral,"They don't work by default. I'll post the code that I had to use later. It
still seems dirty, and not a real replacement of the Capistrano 2 as you
have to modify your code to support the ENV scenario.
On Nov 6, 2013 7:30 PM, ""Lee Hambley"" notifications@github.com wrote:

> Just use ENV vars!
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/770#issuecomment-27899978
> .
"
4994,Neutral,"In the first case, take this issue to ActiveSupport, they've changed something which has broken other libraries (see the Rake debacle on the same topic) (a closed Capistrano issue).

I don't even know if @siannopollo's commit has been merged in and/or released - I'll have to check.
"
4995,Neutral,"Learn about how to shell out from/with/to bundler. Its well documented!

Sent from my Nexus 4.
On 25 Mar 2014 21:41, ""Ellis Berner"" notifications@github.com wrote:

> @leehambley https://github.com/leehambley, ok, given that it's a
> bundler problem, what is the prognosis?
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/981#issuecomment-38617796
> .
"
4996,Negative,"OK, I'm confused here. My understanding from that [article you linked to](http://capistranorb.com/documentation/advanced-features/ptys/), (which I had read before), was by setting `:pty` to `true`, this should make the session 'interactive', and allow me to provide the input. This was the OPs understanding too:

> And before anyone asks, yes pty is set to true like:
> set :pty, true

Is this your understanding? Or would you still expect this not to work even if after calling `set :pty, true`?

To be clear, this doesn't work. The password I type is echoed on screen, but it doesn't get passed to the server, and the execution doesn't continue.

The [gem](https://github.com/kentaroi/sshkit-sudo) I linked to fixes this issue and allows the password to be captured, and execution continues as expected.

Others with this issue:
- http://stackoverflow.com/questions/19948809/capistrano-3-sudo-task
- http://stackoverflow.com/questions/28598799/capistrano-3-sudo-password-hangs
- http://stackoverflow.com/questions/23781619/sudo-command-for-restart-in-rails-4-capistrano
"
4997,Neutral,"Here is a full stacktrace for a failed deploy using 1.8.6-p420 and capistrano 2.12.0

> /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:209: syntax error, unexpected ',', expecting '|' (SyntaxError)
> ...nd(:define_method, m) {|*args, &block| parent.send(m, *args,...
>                               ^
> /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/lib/capistrano/configuration/namespaces.rb:209: syntax error, unexpected '}', >expecting kEND
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`require'
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/lib/capistrano/configuration.rb:8
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`require'
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/lib/capistrano.rb:3
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`require'
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/lib/capistrano/cli.rb:1
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
>   from /home/skateinmars/.rvm/rubies/ruby-1.8.6-p420/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in`require'
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/gems/capistrano-2.12.0/bin/cap:3
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/bin/cap:19:in `load'
>   from /home/skateinmars/.rvm/gems/ruby-1.8.6-p420/bin/cap:19

I'm really not sure about this, but the error may come from the fact that ruby 1.8.6 does not accept blocks arguments with define_method. This code only works in 1.8.7 and 1.9 :

``` ruby
class ExampleClass
  define_method(:sample_method) {|&b| b.call } 
end
```

Whereas 1.8.6 will raise a SyntaxError.
If this is the same error encoutered in Capistrano the code may be refactored using class_eval, though I'm not sure what this code even does.

Then again, as 1.8.6 is already obsolete, maintaining compatibility may not be worth the extra work and simply specifying a required ruby version in the README is a lot easier.
"
4998,Positive,"NB! v3 label also applies to this topic, the latter part of it at least :)
"
4999,Negative,"You could also have a `lock` method call in your `config/deploy.rb`, insisting on an older cap version than you are actually using in your Gemfile.  

Haven't figured out how yet how this deploy.rb `lock` is intended to be used, but I had to manually modify it to use a more recent cap after upgrading cap -- bundle exec did not work by itself, cause the Capfile was not willing to tolerate the version in my bundle, due to `lock`. "
5000,Neutral,"The reasoning was right in the description of the symlink task:

> Assets are shared across deploys to avoid mid-deploy mismatches between old application html asking for assets and getting a 404 file not found error.
"
5001,Neutral,"Capistrano is designed to do deployment, not simple patching, if you want to do a partial deploy I would recommend writing your own task, or looking at:
- http://blog.railsware.com/2011/10/25/delivery-via-patch/

Which came up recently in my Google Alerts for capistrano related blogs, the same blog has some other tips on more advanced, non-typical usage.
"
5002,Neutral,"Send it over!

Sent from my Nexus 5.
On 8 Oct 2014 13:55, ""Juan Paulo Gutierrez"" notifications@github.com
wrote:

> There are some unused block args that need to be cleaned up. I have fixed
> them locally and would like to push changes through PR.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/capistrano/capistrano/issues/1148.
"
5003,Neutral,"Just to clarify:

> main deploy.rb file common to all stages in config/deploy.rb and various stages in the config/deploy dir

^ This is still the standard practice for Capistrano 3.

What I was describing as problematic is when you put the `deploy.rb` _inside_ the stages directory:

`config/deploy/deploy.rb` <-- bad
"
5004,Neutral,"I got the workaround from the git task source: [lib/capistrano/tasks/git.rake#L25](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/tasks/git.rake#L25)
Is this the recommended way of doing this or should there be a better/more convenient way?
"
5005,Neutral,"Hi @nicolas-bastien that's pretty much the gist of it indeed. You should just be able to `require_relative ../` from `Capfile` or `deploy.rb` to anywhere for your file to be loaded. If not, ping me back and maybe I can help.
"
5006,Positive,"Thanks for the feedback @robd. We discussed a lot whether a little configuration was better than some implicit magic, and settled upon clarity through explicit definition vs. magical inference of the should-be settings.

I appreciate the alternative point of view but don't feel compelled to change anything, but I'll let the issue stand to allow the others to weigh-in with their opinions."
5007,Positive,"@leehambley I completely agree with both statements.  I also agree with @greinacker that `:db_migrations` seems a little clearer when in the context of the `role` definition.

I do still feel that there are times when tasks need to be run directly on the DB server, however since you can manually specify roles, this may be an exercise for the user to define on an 'as needed' basis.
"
5008,Positive,"But I agree this a problem that trips a lot of people up, so it is worth explaining it better in the docs."
5009,Negative,"We have more than 100 obsolete issues  to close, and past experience
suggests the OPs never reapond
On 2 Nov 2013 20:36, ""Andres G. Aragoneses"" notifications@github.com
wrote:

> Ok, then I have not tested that. And I'm afraid I will not be able to test
> it very soon.
> 
> Just one advice: if you want to close issue in order to request feedback
> from users about new versions, add a comment explaining why you are closing
> the issue.
> Thanks
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/capistrano/capistrano/issues/440#issuecomment-27630609
> .
"
5010,Positive,"Sure, I'd love to answer any questions.
1. From the docs: Assets are shared across deploys to avoid mid-deploy mismatches between old application html asking for assets and getting a 404 file not found error. This is because deploying a new release does not guarantee that the previous assets won't be requested any more. (Maybe a browser has some cached html which references the old asset.)
2. This is what I've just been working on. Assets are currently fully recompiled on each run, and I've just finished the feature to only recompile changed assets based on their source fingerprints. See https://github.com/ndbroadbent/turbo-sprockets-rails3 and https://github.com/rails/sprockets-rails/pull/21. This is the main reason I've been fixing up assets for Capistrano.
3. Because my pull requests have not yet been merged :)
4. Yes, which is what I'm solving in #281 
5. #281 does not address #227 (skip if no changes to assets), it only addresses #210 (rollback of cap deploy:assets uses newest assets). However, it also adds a feature to clean up unneeded assets so your `shared/assets` directory doesn't keep growing out of control. I've addressed #227 with pull requests to `sprockets-rails` and `sprockets` (solving the problem at the source), as well as reasing my [turbo-sprockets-rails3](https://github.com/ndbroadbent/turbo-sprockets-rails3) gem.
"
5011,Neutral,"The problem is clearly listed, your repository already contains a `config/database.yml` and therefore linking it from the shared folder (it's probably configured with a `linked_file` directive somewhere)

You appear to have defined your server there twice, but as you've censored the posting I can't be sure, so they are racing against each other to link the database yml.
"
5012,Neutral,"Here's a workaround for capistrano v2: http://stackoverflow.com/a/19251695/162793
"
5013,Neutral,"There is a [bug in capistrano-rails](https://github.com/capistrano/capistrano/pull/699#issuecomment-26398382) that will be fixed soon, but for now you can replace 

``` ruby
require 'capistrano/rails/assets'
require 'capistrano/rails/migrations'
```

with

``` ruby
require 'capistrano/rails'
```

And `rails_env` will be filled automatically.
"
5014,Neutral,"You can't at the moment, but if you could, it'd be a feature we pulled into [capistrano/sshkit](https://github.com/capistrano/sshkit/)
"
5015,Neutral,"Works if credentials are pushed into the repo URL, but that also works on Cap 2 so seems there's no real benefit of using Cap 3 on HTTPS?

**UPDATE**: the benefit is the possibility to use special characters in the password.
"
5016,Neutral,"@jwensley2 another solution to use next feature of capistrano:

``` ruby
set :linked_dirs, fetch(:linked_dirs) + %w{craft/storage}
```

or 

``` ruby
set :linked_dirs, %w{public/assets/uploads craft/storage}
```

And you would not require to create the directory by own self. And the storage folder would be one and shared among to other revisions.
"
5017,Neutral,"Probably https://github.com/capistrano/sshkit/commit/711c7aa30ca606a33d36bd90848c4cc7be69f8bb, or perhaps pm2 is confused. Seems like nothing in Capistrano but rather SSHKit. 

I'll close this here, because all the connection handling/etc is done by SSHKit for Capistrano, and the formatting and printing, as well.

Maybe you could check that pm2 haven't changed something in the meantime (since that looks like) output has changed. Or at least attach your logs to the ticket, that I'd like to ask you to open with sshkit.
"
5018,Neutral,"> IMO, it's pretty critical because asset mtimes are not being touched. That causes deploy:assets:clean_expired to remove required assets.

So everyone using 2.x to deploy a Rails app is seeing all of their assets being deleted? If so I would think this would be widely reported. Is this a recent regression?
"
5019,Positive,"Thanks. Of course I can/could/will use something else, but I also prefer, if I can, to push for a world where things work well. I'm sure you get just as annoyed as I do by shit we have to deal each and every day that we really shouldn't in 2013.

Regarding spaces breaking shells, absolutely not. POSIX shells, which most shells we encounter on Unix systems are, handle spaces perfectly. Things shouldn't be run through shells at all if possible, but even if they were, argument parsing rules for a POSIX shell are fairly easy. At worst, wrap everything in single quotes and escape a backslash and a single quote and done.
"
5020,Neutral,"To @filipegiusti's [suggestion](https://github.com/capistrano/capistrano/issues/725#issuecomment-29962869): Is there a way to setup different users for the proxy as for the deployment server(s) themselves? Something like:

```
require 'net/ssh/proxy/command'

set :ssh_options, {
  auth_methods: %w(publickey),
  proxy: Net::SSH::Proxy::Command.new('ssh jump_user@proxy -W %h:%p'),
}

role :app, %w{root@prod_server1 deploy@prod_server2}
role :web, %w{root@prod_server1 deploy@prod_server2}
```

Or, how would this be done via a local /.ssh/config file ?
"
5021,Positive,"Sure :smile: 
"
5022,Neutral,"I sent a pull request for capistrano/documentation https://github.com/capistrano/documentation/pull/50
"
5023,Neutral,"@vizcay you ever figure this out? I just ran into it.
"
5024,Positive,"Thanks, it was for setting the password for a MySQL database but looking at that part of my script, I didn't need it anyway.
"
5025,Neutral,"Just for the sake of people being able to find the issue (and be enlightened by the work-around: ""not read a variable""), this issue should remain open.
"
5026,Positive,"Indeed, thanks! I thought one of the ""assignment comparisons"" might be a
bug too! Thanks for your contribution!
On 30 Mar 2015 4:29 am, ""Paul Schreiber"" notifications@github.com wrote:

> I fixed most of these:
> 
> These are the remaining warnings, which I suspect are the actual bugs.
> 
> lib/capistrano/configuration/question.rb:41:7: W: Do not suppress exceptions.
>       rescue Errno::EIO
>       ^^^^^^^^^^^^^^^^^
> spec/support/Vagrantfile:8:47: W: Shadowing outer local variable - config.
>     config.vm.define(role, primary: true) do |config|
>                                               ^^^^^^
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/capistrano/capistrano/issues/1404#issuecomment-87517659
> .
"
5027,Neutral,"Hmm. I would prefer not to add a setting.

Instead, what if we internally track a ""key"" for each server which is the string that was used to originally declare it. We always match on this key. (That means we could use a Hash, rather than looping through servers using `matches?`.)

For example:

``` ruby
server ""db01"", :roles => %w(db) # key is ""db01""
server ""app@host"", :roles => %w(app) # key is ""app@host""

# This merges a new property onto db01 since the keys match
server ""db01"", :primary => true

# This creates a new server, since the keys do not match
server ""web@host"", :roles => %w(app)
```

Another example:

``` ruby
# The key in both cases is ""server1"", so the properties are merged
role :redis, %w{server1 server2 server3 server4}, redis: { port: 6379, slave: true}
server 'server1', redis: { slave: false }
```

This might make everyone happy. Thoughts?
"
5028,Positive,"Created a pull request (sorry, no test changes) https://github.com/capistrano/capistrano/pull/1890

Many Thanks"
5029,Neutral,"But was it ok after you removed the turbo-sprockets?  

## 

Kir Shatrov
+7 (929) 631-46-35

On Thursday 20 March 2014 at 00:26, jahrichie wrote:

> Thanks for the fast reply @kirs (https://github.com/kirs) !!! I removed the gem from the gemfile, bundled, deployed three times, added the gem back, deployed again, and the fingerprints are still wrong.  
> 
> —
> Reply to this email directly or view it on GitHub (https://github.com/capistrano/capistrano/issues/273#issuecomment-38102417).
"
5030,Positive,"Josh, you're right that there is a new, similar issue with php 5.6. That
issue is the use of zend opcache, which does not realize a change has been
made when a symlink is updated.

Fortunately, since you're using fpm, all your processes share a cache, so
if you clear it (the one used by fpm, not the cli) after updating the
symlink, it should solve your problem.

## 

Nathan
On Feb 2, 2016 4:55 PM, ""Josh Ribakoff"" notifications@github.com wrote:

> I do not use Capistrano, I use my own script(s) that deploy using
> symlinks. I've done this for years using both nginx & apache without cache
> issues. However today I ran into the cache issues on both nginx & apache.
> 
> Its something that has changed in PHP, between 5.0.x and 5.6.x there has
> been some change to the PHP SAPI / php-fpm, where it caches the locations
> of files to be executed. Setting realpath_cache_size to 0 and setting
> realpath_cache_ttl to 1 fix the cache issue for both nginx & Apache.
> 
> Its not specific to Apache at all. This is a PHP.ini setting that is
> ""new"", which affects both mod_apache & php-fpm, regardless of if you use
> apache, nginx, or some other server.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/capistrano/capistrano/issues/985#issuecomment-178927404
> .
"
5031,Positive,"@niklas  nice tip worked out for me too!
"
5032,Positive,"Awesome thanks for investigating to improve our stuff, we have a new release scheduled for _really_ soon (this weekend, time permitting) - so you won't have to live with a monkey patch for too long. For what it's worth as I'm sure you know, you can use your own fork, or our master of SSHKit (once we merge your PR) with `gem 'sshkit', github: 'capistrano/sshkit'` in your project's Gemfile.
"
5033,Neutral,"Found the answer :
http://stackoverflow.com/questions/15732014/psych-rb-error-when-deploying-with-capistrano-mapping-not-allowed-in-this-conte

fixed my problem.
"
5034,Neutral,"@ndbroadbent How about a ridiculously large value?
"
5035,Neutral,"> Is what you described the reason I have to insert an exit statement when running `bash` as the command?

Yes.

> Would you mind submitting a formal pull request for this and closing the issue?

Sure, but I wanted a better solution first, since this solution is quite use case specific.

For instance, `run` can take a block which might want to read from standard input, which is used in Capistrano::Deploy::Strategy::Remote#scm_run.  Since this block is only called when output it received, it wouldn't be able to send data before any output is received without using the `:data` option.  So this solution would actually conflict with this use case.

A better solution would check wether a block is passed to `run`, if this isn't the case it would close the standard input stream.

Closing the standard input stream may be useful even if a block is passed to `run`.  So an explicit option to change the default behaviour would account for this use case, and `run` could `||=` this option based on whether a block is passed to the method.  This would make it easier to implement, a solution because `run` just uses `run_tree`, which wouldn't know whether a block is passed to `run`, so an options would propagate this knowledge.
"
5036,Neutral,"I posted the stackoverflow suggestion. The only thing is that sometimes `deploy:cold` might be run from an automated script like a build server, in which case the process would hang or downright fail every time.
"
5037,Neutral,"Were these fixes included? I seem to be running into the same issues, and the latest release was after these comments. Is there a different build I should be using?

Thank you.
"
5038,Positive,"Thanks!  I just uninstalled the gem version that I had patched and replaced it with the one you released (well, actually one patch later, 2.14.1) and confirmed that the find command succeeds now.  Much better!
"
5039,Positive,"Correct, the gem was simply released already, and the docs need to be fixed (they are open source, and on GH if you feel like submitting a patch)
"
5040,Neutral,"Closing because this no longer seems to be a problem in Capistrano 3.4.0. I get `git stderr: fatal: Not a valid object name` when specifying a nonexistent branch.
"
5041,Neutral,"I am having a problem using the Net::SSH solution, this is my setting (asks for password if username is not given):

<pre>
set :ssh_options, proxy: Net::SSH::Proxy::Command.new('ssh -vvv username@gateway.com -W %h:%p')
</pre>

This is what I get from the command line (192.168.100.86:22 is the local ip on the gateway server):

<pre>
debug3: client_setup_stdio_fwd 192.168.100.86:22
debug1: channel_connect_stdio_fwd 192.168.100.86:22
debug1: channel 0: new [stdio-forward]
debug2: fd 5 setting O_NONBLOCK
debug2: fd 6 setting O_NONBLOCK
debug1: getpeername failed: Bad file descriptor
debug1: Entering interactive session.
debug2: channel 0: open confirm rwindow 2097152 rmax 32768
debug2: channel 0: read<=0 rfd 5 len 0
debug2: channel 0: read failed
debug2: channel 0: close_read
debug2: channel 0: input open -> drain
debug2: channel 0: ibuf empty
debug2: channel 0: send eof
debug2: channel 0: input drain -> closed
debug2: channel 0: rcvd eof
debug2: channel 0: output open -> drain
debug2: channel 0: obuf empty
debug2: channel 0: close_write
debug2: channel 0: output drain -> closed
debug2: channel 0: rcvd close
debug3: channel 0: will not send data after close
debug2: channel 0: almost dead
debug2: channel 0: gc: notify user
debug1: stdio forwarding: done
cap aborted!
Authentication failed for user @192.168.100.86
</pre>
"
5042,Neutral,"Actually considering this further, I seem to recall that `filter` is actually an alias for `select`, meaning that this is actually the opposite of what you would need here - maybe we need to implement an `except` option, or alternatively just set a default option to all servers of `release: true` and then explicitly set `release: false` for the servers that don't require the code.  That way maybe `on roles :all, select: :release` might read a little better.
"
5043,Positive,"Thanks Dimitri that would be my issue. Now to figure out how to point to
1.5.x ( this is all new to me )

On Sunday, June 15, 2014, Dmitri Moore notifications@github.com wrote:

> @jconroy https://github.com/jconroy make sure your Gemfile points to
> the latest 1.5.x sshkit. If I am not mistaken, Capistrano 3.2.1 is still on
> 1.4 where this issue exists.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/capistrano/capistrano/issues/697#issuecomment-46093174
> .

## 
"
5044,Neutral,"It looks like the PATH is correctly set if I use execute with two args, i.e `execute :which, ""rbenv""`. Is this not supposed to be equivalent to `execute ""which rbenv""` ?
"
5045,Neutral,"Do you have capistrano-bundler required?
"
5046,Positive,"@knightlabs You're absolutely right, I'd be more than happy to take a patch, many people simply override this task anyway (they are the box-defaults, and many of us are forced to implement improvements to suit our environments)

It should be a relatively easy fix, and would allow many smaller deployments to throw away an overridden task in the name of expected behaviour.
"
5047,Neutral,"@pseidemann, I think there's an issue with that solution, which is dynamically generated tasks that people hook sooner in the lifecycle (e.g. before they exist)

I'm not finished repairing the `deploy:symlink` issue yet, but I'll push something new today with more information, if you're not doing already, follow @capistranorb on twitter.
"
5048,Neutral,"@johnkharvey There have been many code changes since this discussion. It is now even easier to plug whatever you need. We currently use a customized capistrano setup, specially regarding the SCM.
"
5049,Neutral,"We have to ""Question"" Github tag label. See you in the correct forum.
"
5050,Neutral,"I think this qualifies as an enhancement request for SSHKit's `Local` backend.

I'm closing this issue so that we can move the discussion to SSHKit: https://github.com/capistrano/sshkit/issues/317
"
5051,Positive,"Thanks for the bug report. I am currently on vacation until the middle of
next week, but will investigate when I get back. Ahoy!

(Sent from my Nexus 6, please forgive typos!)

On Nov 25, 2016 11:01 AM, ""Thibaut Barrère"" <notifications@github.com>
wrote:

> I'm a long-time capistrano user coming back to it after a lack of need to
> use it. First, thanks for your work on this!
>
> I've been kind of surprised to see bundle exec cap install take around 1
> minute here today:
>
> $ time bundle exec cap install --trace
> ** Invoke install (first_time)
> ** Execute install
> mkdir -p config/deploy
> create config/deploy.rb
> create config/deploy/staging.rb
> create config/deploy/production.rb
> mkdir -p lib/capistrano/tasks
> create Capfile
> Capified
> # parts above were very quick ; time is taken below
> ** Invoke harrow:install (first_time)
> ** Execute harrow:install
>
> real	1m0.991s
> user	0m0.696s
> sys	0m0.200s
>
> I've read a bit on Harrow (including here
> <http://capistranorb.com/documentation/harrow/> where it is stated that
> ""Capistrano (...) will include discrete hooks offering Harrow to users
> without being intrusive"", so I was surprised to see this delay.
>
> I investigated a bit. I'm on capistrano (3.6.1), which brings in
> capistrano-harrow (0.5.3), which does that install.
>
> I read on the capistrano-harrow readme that I can disable harrow
> integration with git config harrow.disabled true apparently, but even
> with that setting, the delay remain.
>
> Is there a way to avoid the install completely since I'm not using harrow
> at the moment?
>
> Thanks!
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/capistrano/capistrano/issues/1806>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AABKCA18hZkNiCxJmFJ7oZIeXN7URtLuks5rBr_1gaJpZM4K8VI7>
> .
>
"
5052,Positive,"Please see also [this discussion](https://github.com/capistrano/capistrano/issues/692) - I think this would be a good move (for me, certainly preferable to rescuing in before/after)
"
5053,Neutral,"Oh, I finally found the definitions. Reading them now: http://stackoverflow.com/questions/1046933/posix-process-groups
"
5054,Positive,"Lemme know anything g you learn mate, thanks

Sent from my Nexus 5.
On 8 Jan 2015 20:19, ""Kir Shatrov"" notifications@github.com wrote:

> I'm having a conversation with Github stuff to prevent the spam.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/capistrano/capistrano/issues/1272#issuecomment-69232770
> .
"
5055,Negative,"@hellige If you describe the circumstances under which this happens, I would be happy to fix it. The OP was unresponsive.
"
5056,Neutral,"Tasks are logged only if they execute SSH commands. This is because logging in Capistrano is the responsibility of SSHKit.

Does your `post_revision` task execute SSH commands (`on...execute`)?"
5057,Neutral,"@arkadyan You should add before the task definition a description. Example:

```
desc 'My super task'
task :super_task do
end
```
"
5058,Neutral,Closing since we now have an official solution in the `invoke!` method.
5059,Positive,"I don't know how much of a problem this is in the wild. Capistrano has been around 8 years and it's never come up so far, however NFS just won't go away, so anything is possible :)

What's always important to remember is that we could simply add the `--one-file-system` option to `rm` but it should be protected by a feature flag. We really don't like config flags because they're all in a flat namespace, and we have to be very careful about what options we make the defaults. We'd also need to know how widely `--one-file-system` is supported across multiple implementations of `rm`.

Have you been able to work around this by patching the implementation of the task that removes the old releases to solve your own use-case already?

I don't *really* know if this needs to be in the cap core, if you have a working workaround.

Other maintainers?"
5060,Neutral,"yep, i have, this is very strange situation, i'll rollback to v2
"
5061,Neutral,"@aspiers @leehambley Alternatively, you can use Chef. Here's a snippet of my recipe.

```
[app_dir.parent,
 app_dir,
 app_dir.join(""releases""),
 app_dir.join(""shared""),
 app_dir.join(""shared"", ""config""),
 app_dir.join(""shared"", ""log""),
 app_dir.join(""shared"", ""pids""),
 app_dir.join(""shared"", ""system"")].each do |dir|
  directory dir.to_s do
    owner ""foo""
    group ""foo""
    mode 0755
    action :nothing
  end.action(:create)
end
```

The rationale for using Chef to create the Capistrano deployment structure is strengthened by the possibility that you're going to put files in the `shared` directory _anyways_.
"
5062,Neutral,- https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html
5063,Neutral,"Hi James,

I'm not interested in making Capistrano thread safe, it was never designed to be used like that. You might have more success with multi-process, but you'll have to throw Sidekiq and your Actor pattern out.

I'm not even certain if the underlying Net::SSH implementation is thread safe. There is WIP on a replacement release of Capistrano with a significantly different architecture, and more flexibility, I can't give you a timeline but ""summer 2012"" seems like a reasonable ballpark.

As a workaround, I'd recommend looking for the Sidekiq equivalent of Resque::Lock, or perhaps even better - have your actors fork the deploy task.

Just some food for thought, short version - bide your time, the changes required would probably be a disaster (DSL and config, and task execution would need to change, and testing for thread safety is a nightmare, so we'd be looking at a LOT of work), the new implementation has a Queue/Actor pattern at the heart of it's design, so is much more likely to be right by default. 

## 

Lee Hambley

On Friday, April 20, 2012 at 11:48 PM, James Miller wrote:

> We're using cap to deploy multiple apps to multiple clusters simultaneously directly from Ruby using Sidekiq (multithreaded) for our message processor:
> 
> ``` ruby
> 
> def capistrano_config(options = {})
> config = Capistrano::Configuration.new
> config.load do
> 
> # Configure basic app info
> set :application, app.friendly_id
> set :deploy_to, app.deploy_to_path
> set :deploy_user, app.cluster.machine_username
> set :ruby_version, app.ruby
> set :current_path, app.current_path
> set :shared_path, app.shared_path
> set :user, app.cluster.machine_username
> 
> namespace :deploy do
> task :default do
> # Do stuff...
> end
> end
> end
> return config
> end
> 
> capistrano_config(options).find_and_execute_task(""deploy"")
> ```
> 
> This works very well, but if multiple deploys are run from sidekiq to different apps, the values defined with `set` in the config bleed into other `Capistrano::Configuration` instances.
> 
> Do you have any ideas on potential workarounds for this? What would it take to make Capistrano thread-safe?
> 
> ---
> 
> Reply to this email directly or view it on GitHub:
> https://github.com/capistrano/capistrano/issues/199
"
5064,Neutral,"Fixed with a merge of #513.
"
5065,Negative,"4> remove the old latest release dir, as it is no longer the current release.

This is a tricky one, as some people like to keep that one around to do a post mortem and figure out why the release was broken… but I'd be open to both ways. ( I don't care! )
"
5066,Neutral,"@seenmyfate @kirs . I'm trying the solution from the upper post. Here are the full error output.

```
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/net-ssh-2.7.0/lib/net/ssh.rb:215:in `start'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/sshkit-0.0.34/lib/sshkit/backends/netssh.rb:156:in `ssh'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/sshkit-0.0.34/lib/sshkit/backends/netssh.rb:68:in `upload!'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/capistrano-3.0.0/lib/capistrano/tasks/git.rake:11:in `block (3 levels) in <top (required)>'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/sshkit-0.0.34/lib/sshkit/backends/netssh.rb:42:in `instance_exec'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/sshkit-0.0.34/lib/sshkit/backends/netssh.rb:42:in `run'
/home/edwinlunando/.rvm/gems/ruby-2.0.0-p247/gems/sshkit-0.0.34/lib/sshkit/runners/parallel.rb:29:in `block (2 levels) in execute'
Tasks: TOP => git:check => git:wrapper
```
"
5067,Negative,"Bundle install isn't the only issue.  I have a custom task I was running after deploy:update_code to write my production database.yml files.  If this doesn't go before the asset precompile, I get a failure because rake isn't loading right.  There are other post-code-update things people might want to do as well that may affect how it runs.  I ended up moving it to before deploy:finalize_update, but it feels wrong and brittle to have to jigger things around like that.

Would before deploy:symlink be so bad?  I can't think of anything else that would depend on this update except for the running app, so it seems like a good place to make it happen without being affected by anything else.
"
5068,Negative,"There's still something that is not clear to me. It seems the session is only responsible for job control, right? So, it's not actually a problem if you don't double-fork (or use disown in a bash shell) for getting the goal of running a generic process as a daemon, right? I mean, not a real daemon, but a background process that won't get any other signals from the process group since it was the only remaining process in that group and has been orphaned and will be the single process in the session id created by the original shell. The session leader (the shell) process will be gone, so job control is no longer an issue, right?

So, why do you say that your background implementation may still not work for some cases?
"
5069,Neutral,"@leehambley This method isn't the ideal.  To reiterate, the ideal is being able to have a wildcard task that would answer to `wp:*`.
"
5070,Neutral,"I implemented gateway per server doing the following

``` ruby
require 'net/ssh/proxy/command'

server 'internal-hostname',
  ssh_options: {
    port: 98765, # This didn't honored the global ssh_options
    proxy: Net::SSH::Proxy::Command.new('ssh mygateway.com -W %h:%p'),
  }
```

I guess in a similar manner you can have that globally. Having this solution I don't think we need to add support directly into capistrano, but it would be good to document it somewhere.
"
5071,Neutral,"Anyway, the Capistrano is not loading the $LANG var from my server
configuration, and that seems to be capistrano's fault.

Capistrano runs a non-interactive terminal, where things like $LANG are of
no consequence, you should specify to use a PTY if you need environmental
variables.

But I won't patch thing iside of Capistrano, this is a problem of either a)
bundler, or b) ruby.
- Lee
"
5072,Positive,"Closing, lack of feedback. @betesh I saw we merged a couple of things from you already, would be nice to get this in, too... happy to see a PR for this. (even if only a doc fix)
"
5073,Neutral,"As a follow-up, even the [multistage documentation](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension) still shows that you can set the rails_env flag in `config/deploy.rb`.
"
5074,Neutral,"I think the PR to fix this is here: https://github.com/capistrano/capistrano/pull/1492

It needs work, however."
5075,Neutral,"Why would a cached page not have the cached assets, well, cached?
"
5076,Positive,"Great. It works now
"
5077,Neutral,"@leehambley when will `3.4.1` be released?
"
5078,Positive,"@kirs I added that line to the top of my deploy.rb file and it worked for me. thanks!
"
5079,Positive,"+1, thanks @cmaitchison for your workaround.
"
5080,Positive,"Given your hint, i investigated my net-ssh installation.
It seems that on OSX, gem install net-ssh pulls version 2.9.2, while on Debian it pulls version 2.10.0.beta2
Forcing the same version (2.10.0.beta2) on OSX, the issue is resolved. So, it seems a bug introduced in net-ssh 2.9.x

Thank you for your help, i'm closing this issue
"
5081,Neutral,"@feoh Did you call `set :branch, 1.250` anywhere in your Capfile?
"
5082,Neutral,"http://stackoverflow.com/questions/3724534/how-to-change-the-temporary-dir-capistrano-used
"
5083,Neutral,"This is PR #460.
"
5084,Neutral,"Take it up with the Rails team. The meaning of a Rails migration is to nominate one machine to make the changes to the database, why let two machines race to run `ALTER TABLE……` in separate transactions, only to have one of them fail because other writer won?
"
5085,Neutral,"The FAQ explains why we _intentionally_ do not load those files. 
"
5086,Neutral,"> The silent ""death"" when the password is missing is something we should change pronto though.

I'm using Capistrano 3.1.0. The error message originally reported in this ticket, which gives no clear indication as to what the problem is, has not changed. Is this something that can be updated so that the error message is more helpful?
"
5087,Positive,"I'll do that, thanks for the clarification :)"
5088,Negative,"@kot-behemoth The decision was taken to remove run_locally as the following case was really confusing:

``` ruby
run_locally do
  within(""some_directory"") do
    rake ""pwd""
  end
end
```

In this case the `within` and `rake` are unaffected by the `run_locally`, and execute on the server as normal. That is to say the `run_locally` and `on` APIs weren't (and couldn't be made to be) symmetrical.

As a result is was removed, it'd be better to use the rake provided [`sh`](http://rake.rubyforge.org/classes/FileUtils.html#M000018), or something like [`Open3`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html) and the logging methods from Capistrano/SSHKit.

There are some traces in the code for SSHKit still of `run_locally`, but they will go away when we do some spring cleaning. Unfortunately it was a bit of a failed experiment, and we never felt entirely comfortable with `run_locally` being a part of a _remote_ orchestration tool (either Capistrano, or by extension SSHKit.)
"
5089,Neutral,"I was able to get this working with the following patch:

``` ruby
Capistrano::Configuration::Namespaces::Namespace.class_eval do
  def capture(*args)
    parent.capture *args
  end
end
```
"
5090,Negative,"OK, my bad, you were right, it was a path issue. If applicationdir is not an absolute path, capistrano dies.
"
5091,Neutral,"Indeed, I absolutely forgot after throwing you the .gem at the office, incoming.
"
5092,Negative,"@leehambley Why was this issue closed? As @betesh stated, the documentation doesn't deal with the non-ideal case. Looking at the code, it does not appear that this functionality is still supported.

If it is, would you tell us how/where? If it isn't, would you leave the ticket open so someone can work on this feature? Such a feature is quite useful. In my case, I need to know when deployments fail so that I can trigger Hipchat notifications.

P.S. This is not a v2 issue. It is an issue with v3.
"
5093,Neutral,"Which subfolders are missing? Are you compiling your assets with the `assets:precompile` task?
"
5094,Positive,"Yep no worries, 

See https://github.com/gtmtech/capistrano3-bugdemo for a complete checkout of the bug.

As you can see in config/deploy/qa.rb

```
require 'bracecomp'

role :myproduct_servers_a, ""box{01..02}"".expand
role :myproduct_servers_b, ""box{03..04}"".expand
role :myproduct_servers_all, ""box{01..04}"".expand
```

the roles should be a=01-02, b=03-04, all=01-04

With task mytask:

```
namespace :mytask do

  desc ""bug""
  task :bug do

    puts roles(:myproduct_servers_a)

  end
end
```

I am outputting the value of roles(a) which should be 01-02

However when I run:

```
$ be cap qa mytask:bug
box01
box02
box03
box04
```

I get all 4 boxes.
"
5095,Neutral,"I try to discourage posting ""help requests"" on the Github (_Issues_) tool since we have two other support forums which we maintain (IRC and the Google Group), and the community maintains stack-overflow itself.
"
5096,Positive,"@nilbus nice work - that confirms what I had read. Thanks for #103, I'm sure we spoke about that previously. 

Regarding the way forward, if there's a long-hand way to do this, which is backwards and future compatible, I vote to stay with it.

Preferably the Git submodule would be as agnostic as possible, Capistrano is already quite severely limited by the lowest common denominator (:copy) so I don't see why SCM support should be any different!
"
5097,Neutral,"@jeremy @nzkoz @tenderlove thoughts?
"
5098,Neutral,"**Problem persists in pre6.**
"
5099,Positive,"Fun fact: `cap -T` only worked in this scenario due to a happy accident involving the capistrano-harrow gem. Now that capistrano-harrow has been removed, `cap -T` is broken again. 😄 

I should have a fix for this figured out soon."
5100,Neutral,"Ok, I got your point, I also think that result should be the same in both cases, I''ll try to come up with a patch for the `transfer` method.
"
5101,Positive,"I successfully updated my precise chroot with xfce and chromium targets on my Samsung ARM wtih:

sudo sh -e ~/Dowloads/crouton -t xfce -u and all is working well.

A couple of suggestions:

'1. Can croutonversion be put outside the chroot in /usr/local/bin ? I realize it can be accessed with a much longer path outside of the chroot, but a link or just putting it in usr/local/bin from crosh/shell would save me time, from remembering it is in: 

/usr/local/chroots/precise/usr/local/bin/croutonversion or an even longer 

/mnt/stateful_partition/ ...

What I currently do is sudo enter-chroot or sudo startxfce4, and from there /usr/local/bin/croutonversion -d -u replaces my old crouton with the new crouton (backing up the old one to crouton.old or something might be a nice idea too, just in case ...)

then exit the chroot and run the update command.

[update: Below may not be an issue, I am playing audio started in Chromium OS, and it is playing fine after I toggled to the chroot, worked in the chroot, and exited, or toggled back - audio app is just chrome browser playing an mp3]

'2. I may be the exception here, but is it possible to get updates without the CRAS components? I actually like being able to start and play audio in Chrome, and have that audio playing seamlessly as I work in the chroot or go go back and forth.
"
5102,Positive,"Hi,

I forked the project to update the boot scripts so it installs an extended set of packages (texlive-full, nginx, etc). I added these to `installer/ubuntu/bootstrap`, however, I found that these lines were never executed.

I then proceeded to add echo statements which also never showed up. It seemed that despite changing the URLs in `installer/crouton`, the files being procured were older versions.

Looking at `/tmp/crouton-installer-cache`, I noticed that this script is being generated from `build/wrapper.sh` and that there is a specific git revision that it is using. My guess is that this is the revision from which the remaining files are checked out.

I tracked this down to `build/release.sh` which is supposed to create the releases. Unfortunately, I'm not quite sure how to use this script works. It expects me to provide it a bundle (`git bundle`? Which I tried BTW) which I'm not sure how to create/generate. Some help on how to use this would be greatly appreciated.

Thanks for your excellent work on crouton :)
"
5103,Positive,"chronos@localhost / $ sudo edit-chroot-all
sudo: edit-chroot-all: command not found



I tried to install ubunto on my samsung chromebook xe 303 and went fine until...

E: Unable to locate package kodi
Failed to complete chroot setup.
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...

I inputed this...

chronos@localhost / $ sudo sh ~/Downloads/crouton -r trusty -t xfce,cli-extra,extension,keyboard,xbmc,chrome
Google Chrome does not yet have an ARM build. Installing Chromium instead.

that also came up and I thought it was wierd
Thanks in advance
"
5104,Negative,"xiwi appears to pass through post-Chromium-keyboard-layout keypresses, which then confuses X11.  That is, if you use a keyboard layout that maps s -> r and r -> p, pressing the S key in xiwi will result in an R keypress in X11.  If you are then silly enough to set up the same keyboard layout inside of X11, that R will then be helpfully translated into a P by X11.

xiwi should send raw keypresses, disregarding any keyboard layout settings.
"
5105,Negative,"I keep having to update my chroot to fix this problem, for whatever reason I keep getting this output when I try to start xfce now.

Entering /mnt/stateful_partition/crouton/chroots/precise...
/usr/bin/startxfce4: Starting X server

/etc/X11/xinit/xserverrc: 19: exec: /usr/bin/X: not found
/usr/bin/xinit: giving up
/usr/bin/xinit: unable to connect to X server: No such file or directory
/usr/bin/xinit: server error
Unmounting /mnt/stateful_partition/crouton/chroots/precise...
"
5106,Neutral,"```
Please paste the output of the following command here: sudo edit-chroot -all
```
 sudo edit-chroot -all
#### Please describe your issue:

i have my chromebook in developer mode but whenever i try to download crouton it always says ""file type is not supported. Please search the chrome web store for an app that supports this type of file."" I try to find an app but cannot find one.
#### If known, describe the steps to reproduce the issue:
"
5107,Negative,"Hello everyone,

I just tried to install the **Intel graphics drivers** but once i restarted my chromebook, my ubuntu screen wont come up, i get a black screen (it shows my unity desktop for a sec and then turns black)

I dont know what can i do to get back to the original configuration
I'm running **Ubuntu Precise** with **Unity** on a **Acer C720P**
I already tried some of the solution that i could find here but nothing seems to work (#548 especially)

Here what it does when i start unity : 
![screenshot 2014-03-29 at 12 44 33](https://cloud.githubusercontent.com/assets/6609866/2558169/8dfcc770-b737-11e3-8a4f-47d1495341f1.png)

Please, help me out, i dont wanna reinstall all my ubuntu again :'(
"
5108,Neutral,
5109,Neutral,"What would you guys think of the idea of adding a clone option for crouton? E.g. If I have a Gnome chroot and I want a KDE chroot with the software I already installed. 

It seems like this would be relatively simple to implement, given that a workaround for it exists (backup chroot, restore chroot to new name). If I were to write up a pull request for this, would it be merged? 
"
5110,Neutral,"I know this is a bit of an edge case but I was wondering if someone with a bit more knowledge of the underlying systems of Crouton could help me with this.

`croutonversion` output:

```
Entering /mnt/stateful_partition/crouton/chroots/trusty...
crouton: version 1-20150604154515~master:91b3e350
release: trusty
architecture: amd64
xmethod: xorg
targets: xorg,xiwi,xfce
host: version 6812.88.0 (Official Build) stable-channel squawks 
kernel: Linux localhost 3.10.18 #1 SMP Fri May 8 14:24:14 PDT 2015 x86_64 x86_64 x86_64 GNU/Linux
freon: no
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...
```

In a nutshell, My ASUS Chromebook will boot into XFCE4 fine and dandy, however loading the ""Dustforce"" game from steam will cause the game to boot up fine, then crash the entire system after about 20 seconds. While the game is playing there is a smooth framerate, but the audio will cut out and the display will switch off entirely. I know that the computer is still running, because I can switch back into ChromeOS and lock the computer, then unlock it using Smart Lock and my phone vibrates and tells me the Chromebook has been unlocked.

What would help me is if there were logs of the command line kept somewhere while I am in the XFCE enviroment, as I'm not able to look at them while the computers screen is off. Does anyone know where they might be kept?  
"
5111,Neutral,"Hi, I'm a new user so I do not know if this is a known issue.

I installed Trusty + Xfce on Asus C201.

When the autocorrect service is on in Chrome OS, the keyboard does not input anything in Xubuntu.
As soon as one disables it, everything goes back to normal.

Using `xev` one can see that the ""normal"" keys (alphanumerical characters) are not received by ""X"" in this case.
"
5112,Neutral,maybe it is possible to support this project to use it in crouton / on chromebooks
5113,Neutral,"**I tried to install Xenial today and got this error message**

_Package gnome-session-fallback is not available, but is referred to
by another package._

_This may mean that the package is missing, has been obsoleted, or_
_is only available from another source_

_However the following packages replace it:_
_gnome-session-flashback_

_E: Package 'gnome-session-fallback' has no installation candidate_

_Failed to complete chroot setup._

How would I change gnome-session-fallback to gnome-session-flashback, I'm new to GitHub. Could you make a new repository or a branch of the origanal with that small change?
"
5114,Neutral,"I'm not sure if it is intentional or not but the following packages which are normally included in Ubuntu are not in my chroot by default (Target: unity):

```
bash-completion
dnsutils
```
"
5115,Positive,"Crouton was working fine on my computer until a week or so ago.  Now whenever I try to open it (sudo startxfce4) or update (sudo sh -e ~/Downloads/crouton -n precise -u) it starts to update various things and then I get this:

Loading extension GLX
(EE) 
Fatal server error:
(EE) xf86OpenConsole: Cannot open /dev/tty0 (No such file or directory)
(EE) 
(EE) 
Please consult the The X.Org Foundation support 
         at http://wiki.x.org
 for help. 
(EE) Please also check the log file at ""/tmp/Xorg.crouton.1.log"" for additional information.
(EE) 
(EE) Server terminated with error (1). Closing log file.
/usr/bin/xinit: giving up
/usr/bin/xinit: unable to connect to X server: Connection refused
/usr/bin/xinit: server error
Unmounting /mnt/stateful_partition/crouton/chroots/precise...

What can I do to fix this?

Thank You
"
5116,Neutral,"I'm updating my chroots with the option -t keyboard
my chroot is just a xiwi chroots

![screenshot 2016-02-24 at 12 03 28 pm](https://cloud.githubusercontent.com/assets/5434752/13283583/c2064564-daee-11e5-95f4-4c90ebca1a2e.png)
"
5117,Neutral,"I have crouton/trusty installed internally , how does adding an external sd card help, storage, memory, or both, as I noticed much of my file system is used up. Would it be better to just move the chroot to the sd drive completely. This is related to possibly another, similar question I asked here. 
"
5118,Neutral,"Was just wondering if you had thought about including something like that in the debian prepare script (I think that's where it should go?)... it's a less intrusive way of giving a visual indicator of chroot name than hacking PS1 (not that crouton does that!).
"
5119,Negative,"Some time ago when the Pixel 2015 was released an issue was logged noting numerous performance issues in 14.04 including but not limited to graphical glitches on the mouse cursor when swapping between Chrome OS and Ubuntu, and a variety of other problems. I personally experienced poor performance, constant crashes in XFCE, games with sound errors and poor performance not present in 13.04 and 14.04 on 2995U-powered Chromebooks, hanging and crashing when logged out/rebooting/powering off via Ubuntu, and more.

In that issue (see link below) a solution was posted referencing the updating of the Intel graphics drivers. The good news is that for the Intel HD5500 and up (Broadwell i3, i5 and i7) this solves the issues. In fact on my Pixel after using this, Unity 14.04 is ridiculously great and everything I've tried has worked incredibly well.

Sadly, it looks like this driver update does NOT update the 3205U ""Intel HD Graphics"" for the Broadwell Celeron. These systems are still not working well at all in Crouton. 

Those of us who are mere mortals over on Reddit have not been able to figure out a solution to this and I found it odd that it didn't seem to be covered here, thus I figured I'd post it in the event that a) this wasn't a known problem, or b) it was a known problem with a solution (fingers crossed).

Referenced issue, which is open but not quite in reference to what I've described, above:
https://github.com/dnschneid/crouton/issues/1519
"
5120,Positive,"Hey,

Sorry to be vague in my question title, basicly I need some clarification.
I understand that when using Xephyr (Which is what we use on ARM chromebooks); there can be no acceleration.

Say I get the lib's (libgl etc ...) bundled with the driver.
My questions are as follows : 
- If it were possible to run a second X Session, would that session be 3d accelerated ?
- If that is not possible, would it be possible to use a console (tty) to kill the main X server, then chroot and launch a replacement ?
- Could that have 3d acceleration ?

I really appreciate the efforts of the developers who put this together, currently my XFCE chroot is brilliant, but deep down I yearn for Gnome Shell ;)

Thanks to anyone who can respond :)
"
5121,Neutral,"Is it possible to install more than 1 chroot at a time? 
"
5122,Neutral,"Hi - I am running specs described and trying to get redshift to work. When I run xgamma, it returns values as if it were working, but nothing changes: (debian)me@localhost:~$ xgamma -gamma .5 -> Red 1.000, Green 1.000, Blue 1.000 <- Red 0.500, Green 0.500, Blue 0.500
A 1->.5 change in gamma is pretty meaningful and should show up, but no change in output. What do?

```
(debian)mdw@localhost:/usr/share/sounds/alsa$ croutonversion 
crouton: version 1-20141118113718~master:0708c122
release: wheezy
architecture: amd64
targets: xfce
host: version 6310.48.0 (Official Build) stable-channel squawks 
```
"
5123,Neutral,"
```
name: kali-rolling
encrypted: no
Entering /mnt/stateful_partition/crouton/chroots/kali-rolling...
crouton: version 1-20161129162558~master:5f2f11f9
release: kali-rolling
architecture: amd64
xmethod: xorg
targets: xfce,keyboard,extension
host: version 8872.73.0 (Official Build) stable-channel cyan 
kernel: Linux localhost 3.18.0-13436-g8b496ef #1 SMP PREEMPT Sat Dec 17 11:06:39 PST 2016 x86_64 GNU/Linux
freon: yes
Unmounting /mnt/stateful_partition/crouton/chroots/kali-rolling...
name: sid
encrypted: no
Entering /mnt/stateful_partition/crouton/chroots/sid...
crouton: version 1-20161129162558~master:5f2f11f9
release: sid
architecture: amd64
xmethod: xorg
targets: xfce,extension,keyboard
host: version 8872.73.0 (Official Build) stable-channel cyan 
kernel: Linux localhost 3.18.0-13436-g8b496ef #1 SMP PREEMPT Sat Dec 17 11:06:39 PST 2016 x86_64 GNU/Linux
freon: yes
Unmounting /mnt/stateful_partition/crouton/chroots/sid...
```

#### Please describe your issue:
I've tried creating several Jessie, Stretch, Sid, and Kali-Rolling chroots since getting my Acer R11 over Christmas. In maybe half of the instances, once the install is finished, I have been able to successfully boot into xfce. The other half of the time, Xorg will hang on startup, and will give the appearance of my machine locking up. Using the shortcut to switch between ChromeOS and the chroot will allow me to regain control, though Xorg will then fail and exit.

In the instances where I've been able to at least enter the chroots when starting them up for the first time, after two or three starts, Xorg will hang in the same way it does for the chroots that I was never to enter xfce in in the first place.

Strangely enough, I've had zero issues of this sort when using Xenial. I haven't tried other Ubuntu releases, though.

Apologies if I'm not describing this well. If I can clarify anything or provide logs, let me know. I have found bug reports involving black screens, but nothing that seems to match this exactly. I did try the uxa fix in #2923 in my latest Kali-rolling chroot, but to no avail. 

#### If known, describe the steps to reproduce the issue:
1) Create Jessie, Stretch, Sid, or Kali-rolling chroots with xfce, keyboard, and extension targets.
2) Attempt to enter xfce, either with sudo enter-chroot, followed by startxfce4 inside the chroot, or sudo startxfce4 from crosh.
3) If able to enter the DE, wait awhile and try starting xfce later."
5124,Neutral,"Can't download crouton from http://goo.gl/fd3zc . 
""Sorry, you can't view or download this file at this time.

Too many users have viewed or downloaded this file recently. Please try accessing the file again later. If the file you are trying to access is particularly large or is shared with many people, it may take up to 24 hours to be able to view or download the file. If you still can't access a file after 24 hours, contact your domain administrator.""
"
5125,Neutral,"I started seeing logs with problem on the touchscreen. Luckily it is not associated with the double cursors. 

Here's my details:
crouton: version 0-20131113142501~master:e69bf07a
release: precise
architecture: amd64
host: version 4731.62.0 (Official Build) beta-channel link 

This is the beginning of the log. It is followed by a few more backtraces and lots of error lines related to Atmel.

---

Entering /usr/local/chroots/precise...
Unknown username ""dnsmasq"" in message bus configuration file

X.Org X Server 1.11.3
Release Date: 2011-12-16
X Protocol Version 11, Revision 0
Build Operating System: Linux 2.6.42-37-generic x86_64 Ubuntu
Current Operating System: Linux localhost 3.8.11 #1 SMP Sat Nov 9 03:43:32 PST 2013 x86_64
Kernel command line: cros_secure  console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2097152 verity payload=PARTUUID=5573dcb4-8079-7640-9021-a47b07f602c8/PARTNROFF=1 hashtree=PARTUUID=5573dcb4-8079-7640-9021-a47b07f602c8/PARTNROFF=1 hashstart=2097152 alg=sha1 root_hexdigest=51738106875d60dee48e7f36737c5208fbd30406 salt=8c5bd6fc924fd1efb6f6f0dbcf977ffe023b4023823a548e425d468e206bd821"" noinitrd vt.global_cursor_default=0 kern_guid=5573dcb4-8079-7640-9021-a47b07f602c8 add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic gpt 
Build Date: 16 October 2013  04:41:23PM
xorg-server 2:1.11.4-0ubuntu10.14 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.24.4
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: ""/var/log/Xorg.1.log"", Time: Tue Nov 19 07:11:12 2013
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
[dix] Atmel maXTouch Touchpad: unable to find touch point 0
BUG: triggered 'if (!(event->device_event.flags & (1 << 5)))'
BUG: ../../dix/touch.c:642 in TouchConvertToPointerEvent()
Non-emulating touch event

Backtrace:
0: /usr/bin/X (xorg_backtrace+0x26) [0x7fbaead62a86]
1: /usr/bin/X (0x7fbaeabda000+0x767b1) [0x7fbaeac507b1]
2: /usr/bin/X (0x7fbaeabda000+0x11c42b) [0x7fbaeacf642b]
3: /usr/bin/X (0x7fbaeabda000+0x11bdc5) [0x7fbaeacf5dc5]
4: /usr/bin/X (0x7fbaeabda000+0x11f143) [0x7fbaeacf9143]
5: /usr/bin/X (0x7fbaeabda000+0x14278a) [0x7fbaead1c78a]
6: /usr/bin/X (mieqProcessDeviceEvent+0x204) [0x7fbaead435d4]
7: /usr/bin/X (mieqProcessInputEvents+0x84) [0x7fbaead43664]
8: /usr/bin/X (ProcessInputEvents+0x9) [0x7fbaeac64fc9]
9: /usr/bin/X (0x7fbaeabda000+0x4e5e3) [0x7fbaeac285e3]
10: /usr/bin/X (0x7fbaeabda000+0x3d7ba) [0x7fbaeac177ba]
11: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xed) [0x7fbae8d9076d]
12: /usr/bin/X (0x7fbaeabda000+0x3daad) [0x7fbaeac17aad]
BUG: triggered 'if (!(event->device_event.flags & (1 << 5)))'
BUG: ../../dix/touch.c:642 in TouchConvertToPointerEvent()
Non-emulating touch event

Backtrace:
0: /usr/bin/X (xorg_backtrace+0x26) [0x7fbaead62a86]
1: /usr/bin/X (0x7fbaeabda000+0x767b1) [0x7fbaeac507b1]
2: /usr/bin/X (0x7fbaeabda000+0x11c42b) [0x7fbaeacf642b]
"
5126,Neutral,"I am trying to install a LAMP stack on my Toshiba Chromebook 2 (CB35-B3340) but am having trouble installing mysql. My machine has been running Ubuntu 14.04 and Unity for about 6 months (and did Ruby on Rails dev without major issues) and I created a new chroot with Ubuntu 12.04 and XFCE after running into a lot of issues with mysql on my other install.

Every time I run mysql on either chroot, it gives me the following error: 

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)
```

I have checked the my.cnf file and created a folder at the location it expects for mysqld.sock to appear. I have mysql-server installed. I tried running commands like /etc/init.d/mysql start, and also tried various commands to get mysqld to start. The mysqld file was very difficult to find in the 14.04 system, and entire folders of the install seemed to be missing. 

How should I deal with this? I just want to do local wordpress theme development. 
"
5127,Neutral,"```
Please paste the output of the following command here: sudo edit-chroot -all
```

name: trusty
encrypted: yes, locked
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...
#### Please describe your issue:

Err https://raw.github.com 3.14.0/main amd64 Packages  
  Bad header line
Err https://raw.github.com 3.14.0/main i386 Packages  
  Bad header line
W: There is no public key available for the following key IDs:  
1397BC53640DB551
W: Failed to fetch https://raw.github.com/divx118/crouton-packages/master/dists/3.14.0/main/binary-amd64/Packages  Bad header line

W: Failed to fetch https://raw.github.com/divx118/crouton-packages/master/dists/3.14.0/main/binary-i386/Packages  Bad header line

E: Some index files failed to download. They have been ignored, or old ones used instead.
#### If known, describe the steps to reproduce the issue:

sudo sh ...crouton -u -n trusty
"
5128,Neutral,"```
name: artful
encrypted: no
Entering /mnt/stateful_partition/crouton/chroots/artful...
crouton: version 1-20170901092920~master:0216f9d1
release: artful
architecture: amd64
xmethod: xorg
targets: unity,touch
host: version 9901.54.0 (Official Build) stable-channel eve 
kernel: Linux localhost 4.4.79-11650-ge987f76b729a #1 SMP PREEMPT Tue Oct 24 23:57:37 PDT 2017 x86_64 x86_64 x86_64 GNU/Linux
freon: yes
Unmounting /mnt/stateful_partition/crouton/chroots/artful...
```

#### Please describe your issue:

Every time I try to startunity I get this error.

_XSERVTransmkdir: ERROR: euid != 0,directory /tmp/.X11-unix will not be created.

#### If known, describe the steps to reproduce the issue:
sudo startunity"
5129,Neutral,"_many things work here_
...
I: Validating gcc-4.6-base
I: Retrieving gnupg
I: Validating gnupg
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/pool/main/g/gnupg/gnupg_1.4.11-3ubuntu2_i386.deb.
_retries a few times_
_more things work here_
...
I: Validating zlib1g
## E: Couldn't download packages: gnupg

_quits_
"
5130,Neutral,"```
Please paste the output of the following command here: sudo edit-chroot -all
```
chronos@localhost ~ $ sudo edit-chroot -all
name: xenial
encrypted: yes, locked
Unmounting /mnt/stateful_partition/crouton/chroots/xenial...

I distinctly remember this being more helpful last time and don't know what I did differently. My old readout can be found at #3363.

#### Please describe your issue:

The fix to my last problem (#3363) had me install target xiwi. The process results in one package failing to install due to unmet dependencies.

Installing target xiwi...
xserver-xorg-video-dummy was already not hold.
Reading package lists... Done
Building dependency tree       
Reading state information... Done
xorg is already the newest version (1:7.7+13ubuntu3).
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 xserver-xorg-video-dummy : Depends: xorg-video-abi-20
                            Depends: xserver-xorg-core (>= 2:1.17.99.902)
E: Unable to correct problems, you have held broken packages.
Failed to complete chroot setup.
Unmounting /mnt/stateful_partition/crouton/chroots/xenial...

#### If known, describe the steps to reproduce the issue:
I ran ""sudo sh ~/Downloads/crouton -n xenial -t xiwi -u"" as suggested for the problem in #3234.
"
5131,Positive,"I did all of the update steps on the guidelines and have looked at other issues, no errors with the updating. 

I'm running precise with xfce on a samsung chromebook. Every time I enter crosh and launch the environment, it initially allows me to switch back and forth with the ctrl-alt-shift-back/forward command, but if I close the crosh shell, I can't switch. 

**Exact command I ran in shell:** `sudo startxfce4`

**Exact output:**
`Entering /mnt/stateful_partition/crouton/chroots/precise...
/usr/bin/startxfce4: Starting X server

X.Org X Server 1.13.0
Release Date: 2012-09-05
X Protocol Version 11, Revision 0
Build Operating System: Linux 2.6.42-54-highbank armv7l Ubuntu
Current Operating System: Linux localhost 3.8.11 #1 SMP Sun Jan 24 10:55:46 PST 2016 armv7l
Kernel command line: cros_secure console= console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=ea5979c7-9715-374d-8546-19b0b66c0399/PARTNROFF=1 hashtree=PARTUUID=ea5979c7-9715-374d-8546-19b0b66c0399/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=b04af99a3f831eb997600d3725c6b55e83b60fed salt=85da75cabbb12fbd22c707fe5b5f4063f4af2380360c9576d5b096c581c65c63"" noinitrd vt.global_cursor_default=0 kern_guid=ea5979c7-9715-374d-8546-19b0b66c0399  
Build Date: 05 November 2013  03:23:26PM
xorg-server 2:1.13.0-0ubuntu6.5~precise1 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(++) Log file: ""/tmp/Xorg.crouton.1.log"", Time: Sun Feb  7 13:34:47 2016
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
setversion 1.4 failed
Initializing built-in extension Generic Event Extension
Initializing built-in extension SHAPE
Initializing built-in extension MIT-SHM
Initializing built-in extension XInputExtension
Initializing built-in extension XTEST
Initializing built-in extension BIG-REQUESTS
Initializing built-in extension SYNC
Initializing built-in extension XKEYBOARD
Initializing built-in extension XC-MISC
Initializing built-in extension SECURITY
Initializing built-in extension XINERAMA
Initializing built-in extension XFIXES
Initializing built-in extension RENDER
Initializing built-in extension RANDR
Initializing built-in extension COMPOSITE
Initializing built-in extension DAMAGE
Initializing built-in extension MIT-SCREEN-SAVER
Initializing built-in extension DOUBLE-BUFFER
Initializing built-in extension RECORD
Initializing built-in extension DPMS
Initializing built-in extension X-Resource
Initializing built-in extension XVideo
Initializing built-in extension XVideo-MotionCompensation
Initializing built-in extension XFree86-VidModeExtension
Initializing built-in extension XFree86-DGA
Initializing built-in extension XFree86-DRI
Initializing built-in extension DRI2
Loading extension GLX
setversion 1.4 failed
crouton: version 1-20160206234800~master:daa872a0
release: precise
architecture: armhf
xmethod: xorg
targets: xfce
host: version 7647.73.0 (Official Build) stable-channel daisy 
kernel: Linux localhost 3.8.11 #1 SMP Sun Jan 24 10:55:46 PST 2016 armv7l armv7l armv7l GNU/Linux
freon: yes
No Chromium OS X server is available.
/etc/xdg/xfce4/xinitrc: 1: /etc/xdg/xfce4/xinitrc: ssh-agent: not found
xfdesktop[30332]: starting up

(polkit-gnome-authentication-agent-1:30342): GLib-CRITICAL **: g_variant_new_string: assertion `string != NULL' failed

(polkit-gnome-authentication-agent-1:30342): polkit-gnome-1-WARNING **: Failed to register client: GDBus.Error:org.freedesktop.DBus.Error.ServiceUnknown: The name org.gnome.SessionManager was not provided by any .service files

(xfce4-settings-helper:30347): xfce4-settings-helper-WARNING **: Failed to get the _NET_NUMBER_OF_DESKTOPS property.`

**The output of `sudo enter-chroot -n precise croutonversion`**

`Entering /mnt/stateful_partition/crouton/chroots/precise...
crouton: version 1-20160206234800~master:daa872a0
release: precise
architecture: armhf
xmethod: xorg
targets: xfce
host: version 7647.73.0 (Official Build) stable-channel daisy 
kernel: Linux localhost 3.8.11 #1 SMP Sun Jan 24 10:55:46 PST 2016 armv7l armv7l armv7l GNU/Linux
freon: yes
Unmounting /mnt/stateful_partition/crouton/chroots/precise...`

Thanks
"
5132,Neutral,"Once #234 merges, `crouton -u -n $chroot` should be very safe; it will update all targets, maintaining the release and mirror setting.  This means we could conceivably update crouton in an automated fashion.

A few questions I'd like to open up:
1. Is this a good idea?  Chromium OS does auto-updates very well, but it was designed from the ground-up to support it.  Updates downloaded but only applied atomically upon reboot.  The Linux userspace, on the other hand was never really designed for auto-updates.  Things aren't updated atomically, although open file semantics tend to keep running software working fine.  crouton itself should be fine with auto-updates, as flag semantics don't change.  People may not like the idea of their Linux install auto-updating, others may never update crouton or their chroot unless we do so for them.  Some sort of auto-updating may be necessary for the cras (#343) target, as updates to Chromium OS do not guarantee protocol compatibility for cras.  Perhaps auto-updates could be optionally disabled via a file in /etc/crouton
2. Should auto-updates happen in the background?  If we do it in the background, updates to things like xephyr and touch will not apply until the next time crouton is started.  cras (#343) updates should apply for all newly-opened audio applications.  This isn't that far off of Chromium OS's behavior (requiring reboot), and we may be able to use zenity or the like to make a ""restart crouton"" icon once the update is complete.  Doing updates in the foreground would introduce an annoying delay when launching crouton, but you'd immediately get the updates.
3. When should auto-update be triggered?  Checking each time enter-chroot is called is excessive.  We could limit it to once a week, or only auto-update when we detect that Chromium OS has auto-updated (via differences in /etc/lsb-release), which would have the benefit of updating more frequently for dev users.  Updates require a sizable chunk of data (crouton is small, but it triggers an upgrade of the underlying package manager as well), so should it avoid updating over mobile connections?
4. Feedback.  How to provide feedback to the user that crouton is checking for updates, updating, and done updating?  zenity systray icons for desktop environments works, but what about for cli-only users?
"
5133,Neutral,"If you use the -e flag when setting up crouton, when it prompts you to set up the root password, if you fail to give the same password twice or Ctrl-C out of the process before it succeeds, it never asks again.  Restarting ""crouton -e"" doesn't ask you for this again, even though it didn't succeed in setting it the last time it tried.

I tried running ""passwd"" and ""sudo passwd"" to try and set up a password manually, but I keep getting errors about the password DB being locked.  Obviously the crouton scripts are doing something else, but it's not clear to me what.
"
5134,Neutral,"I was trying to write an image to an SD card for my Raspberry Pi when I came across what looks to be a bug which results in a crash and subsequent reboot.

Machine : ARM Chromebook
Target : cli-extra

I confirmed the issue by running through the same command:

`sudo dd bs=4M if=~/Downloads/rasbian.img of=/dev/mmcblk1`

It works for a while but then crashes before finishing. This results in a partially written image.

Not really sure how to debug this or any logs that might need to be included...
"
5135,Neutral,"**Commands with `ralt` have no effect**

My current set up is to start my chroot with `sudo enter-chroot xinit`, reading from the following `.xinitrc` file:

```
setxkbmap -rules evdev -model evdev -layout us -variant intl
exec i3
```

As you can see I've set it up to use the US international keyboard layout. Under ChromeOS having this layout works the following way: If I want the letter `ü` I type `Shift + '` followed by `u`. By replacing u with a or o I get ä or ö. Yet the letter ß works differently, I have to type `ralt + s`. So far so good.

Before using xiwi I remember it working just the same way under my chroot. Yet now, probably due to it being windowed, the behaviour has changed: in order to get ä, ö or ü I have to press `Shift + '` twice in order for it to work, which isn't too much of an inconvenience. But trying to get the letter ß has proven to be impossible. When I try the default command all I get is `s`. 

Any ideas?
"
5136,Neutral,"Running crouton with **-t xephyr,xfce,keyboard -r saucy**, on Pixel.

dpi was adjusted to 239 via editing xserverrc, as explained on the Chromebook Pixel page.

The pointer arrow is presented as two distinct pieces, right next to each other. On the desktop it is as though a normal arrow were cut in two, and the two pieces displayed next to each other. In a terminal it looks like two misshapen square brackets.

This happens only in a xephyr chroot.

I tried to take a screenshot with Xfce's Screenshot tool, but the image came out with the arrow looking normal!

croutonversion output:
crouton: version 0-20131113142501~master:e69bf07a
release: saucy
architecture: amd64
host: version 4731.73.0 (Official Build) stable-channel link
"
5137,Neutral,"My primary use case for crouton is the terminal environment. Sometimes, I'd like to take advantage of `croutonurlhandler` to open links from Mutt (by setting `export BROWSER=""croutonurlhandler -n""` in my `.zshrc`. To do this, `croutonwebsocket` needs to run as a background process.

If I put `croutonwebsocket &` in `/etc/rc.local`, it is (obviously) run as root -- consequently, only `sudo croutonurlhandler` works as expected. Without it, the following error happens:

```
$ croutonurlhandler http://www.google.com/
/usr/local/bin/croutonurlhandler: 207: /usr/local/bin/croutonurlhandler: cannot create /tmp/crouton-ext/lock: Permission denied
Error timeout
```

If I run `croutonwebsocket &` in terminal as current user, it does not have an available pipe: `checkfifo: /tmp/crouton-ext/in exists, but not readable and writable.`

Is there an expected setup that I'm missing here? Should I be running `croutonwebsocket` with `upstart`?

```
$ croutonversion
crouton: version 1-20150730171703~master:f8fdfb0c
release: trusty
architecture: amd64
xmethod: xorg
targets: xfce,extension,audio,keyboard,cli-extra,core
host: version 7390.48.0 (Official Build) beta-channel swanky
kernel: Linux localhost 3.10.18 #1 SMP Wed Sep 30 18:28:58 PDT 2015 x86_64 x86_64 x86_64 GNU/Linux
freon: yes
```
"
5138,Neutral,"I was reading around and saw mentions of 'Kiwi'.

Is this different to Xiwi or are they both the same thing but just variants of the same name? 
"
5139,Neutral,"```
1 Ubuntu
```
#### The problem

after updating to xenial from precise 'sudo startunity' only starts nautilus
update script is also broken trying to install unity-2d and the old kde desktop pakage
#### To reproduce

install chroot with `-t unity,kde,xorg,xiwi,audio,touch,extension` added to the installer script
possibly install KDE5
update from precise to xenial
update all packages
set default xserver as xorg
then start unity with `sudo startunity`
"
5140,Neutral,"I have a trusty chroot installed with lxde, xorg, and xiwi. Running with xiwi fails, another issue, but running with xorg lets me use lxde in its own screen until I page back to ChromeOS, when attempting to page back will drop me into the developer console. The following is the output that the crosh window I ran it from gave before I terminated it:

X.Org X Server 1.15.1
Release Date: 2014-04-13
X Protocol Version 11, Revision 0
Build Operating System: Linux 3.2.0-67-highbank armv7l Ubuntu
Current Operating System: Linux localhost 3.10.18 #1 SMP Tue Jul 14 23:44:39 PDT 2015 armv7l
Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=a47bac0c-0d25-064d-aab7-12d0e61b30bb/PARTNROFF=1 hashtree=PARTUUID=a47bac0c-0d25-064d-aab7-12d0e61b30bb/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=5b555294b7e577d41c7de4fc52a0910623ba3769 salt=cadb7c2b91f1de700dbccb20c599894313edf982ca48c597bf7226c320694daf"" noinitrd vt.global_cursor_default=0 kern_guid=a47bac0c-0d25-064d-aab7-12d0e61b30bb  
Build Date: 12 February 2015  02:55:07PM
xorg-server 2:1.15.1-0ubuntu2.7 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (*_) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: ""/var/log/Xorg.1.log"", Time: Wed Jul 29 20:32:47 2015
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
Initializing built-in extension Generic Event Extension
Initializing built-in extension SHAPE
Initializing built-in extension MIT-SHM
Initializing built-in extension XInputExtension
Initializing built-in extension XTEST
Initializing built-in extension BIG-REQUESTS
Initializing built-in extension SYNC
Initializing built-in extension XKEYBOARD
Initializing built-in extension XC-MISC
Initializing built-in extension SECURITY
Initializing built-in extension XINERAMA
Initializing built-in extension XFIXES
Initializing built-in extension RENDER
Initializing built-in extension RANDR
Initializing built-in extension COMPOSITE
Initializing built-in extension DAMAGE
Initializing built-in extension MIT-SCREEN-SAVER
Initializing built-in extension DOUBLE-BUFFER
Initializing built-in extension RECORD
Initializing built-in extension DPMS
Initializing built-in extension Present
Initializing built-in extension DRI3
Initializing built-in extension X-Resource
Initializing built-in extension XVideo
Initializing built-in extension XVideo-MotionCompensation
Initializing built-in extension SELinux
Initializing built-in extension XFree86-VidModeExtension
Initializing built-in extension XFree86-DGA
Initializing built-in extension XFree86-DRI
Initializing built-in extension DRI2
Loading extension GLX
crouton: version 1-20150716185530~master:aba2c948
release: trusty
architecture: armhf
xmethod: xorg
targets: xorg,lxde,xiwi
host: version 7077.95.0 (Official Build) stable-channel nyan_big 
kernel: Linux localhost 3.10.18 #1 SMP Tue Jul 14 23:44:39 PDT 2015 armv7l armv7l armv7l GNU/Linux
freon: no
Agent pid 27163
*_ Message: main.vala:99: Session is LXDE
*\* Message: main.vala:100: DE is LXDE
*\* Message: main.vala:131: log directory: /home/jack/.cache/lxsession/LXDE
*\* Message: main.vala:132: log path: /home/jack/.cache/lxsession/LXDE/run.log
croutonwebsocket error: Error timeout
Error: target STRING not available
Error: target STRING not available

The following is the output from running sudo enter-chroot -n trusty croutonversion

Entering /mnt/stateful_partition/crouton/chroots/trusty...
crouton: version 1-20150716185530~master:aba2c948
release: trusty
architecture: armhf
xmethod: xorg
targets: xorg,lxde,xiwi
host: version 7077.95.0 (Official Build) stable-channel nyan_big 
kernel: Linux localhost 3.10.18 #1 SMP Tue Jul 14 23:44:39 PDT 2015 armv7l armv7l armv7l GNU/Linux
freon: no
Not unmounting /mnt/stateful_partition/crouton/chroots/trusty as another instance is using it.
"
5141,Negative,"Hi, my ubuntu broke :( It first worked well in both dev and crosh but then it broke in dev but still worked on crosh but now it's complaining the same in both dev and crosh. I updated the crouton installer and everything but no... My machine is Acer C720. Did I do something or is this some bug?

Build Operating System: Linux 2.6.42-61-generic x86_64 Ubuntu
Current Operating System: Linux localhost 3.8.11 #1 SMP Thu Sep 11 20:10:04 PDT 2014 x86_64
Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=84de0146-4580-ca4f-823c-989c25105b57/PARTNROFF=1 hashtree=PARTUUID=84de0146-4580-ca4f-823c-989c25105b57/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=231aad244a53232318e6dd2700235d492c3d1b50 salt=f771778be72dfac136bb5d4f99f1ab01b0cc66c30ae02a8b87c4b7ab0cfa7a97"" noinitrd vt.global_cursor_default=0 kern_guid=84de0146-4580-ca4f-823c-989c25105b57 add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic iTCO_vendor_support.vendorsupport=3 
Build Date: 07 August 2014  11:49:36AM
xorg-server 2:1.15.1-0ubuntu2~precise2 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(==) Log file: ""/var/log/Xorg.1.log"", Time: Mon Sep 22 23:41:30 2014
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
Parse error on line 49 of section InputClass in file /usr/share/X11/xorg.conf.d/50-synaptics.conf
        ""Option"" is not a valid keyword in this section.
(EE) 
Fatal server error:
(EE) no screens found(EE) 
(EE) 
Please consult the The X.Org Foundation support 
         at http://wiki.x.org
 for help. 
(EE) Please also check the log file at ""/var/log/Xorg.1.log"" for additional information.
(EE) 
(EE) Server terminated with error (1). Closing log file.
/usr/bin/xinit: giving up
/usr/bin/xinit: unable to connect to X server: No such file or directory
/usr/bin/xinit: server error
Not unmounting /mnt/stateful_partition/crouton/chroots/precise as another instance is using it.
chronos@localhost / $
"
5142,Neutral,"I was able to log what was happening after I start xfce. When I go back into chrome OS, it's a black screen but the buttons still work so it's clearly running (I can raise or lower my volume on the black screen).

I can easily switch back into xfce and I can also restart the machine to get back to chrome OS, but I effectively can't switch screens without restarting.

chronos@localhost / $ sudo startxfce4
Password: 
Entering /mnt/stateful_partition/crouton/chroots/trusty...
/usr/bin/startxfce4: Starting X server

_XSERVTransmkdir: ERROR: euid != 0,directory /tmp/.X11-unix will not be created.

X.Org X Server 1.15.1
Release Date: 2014-04-13
X Protocol Version 11, Revision 0
Build Operating System: Linux 3.2.0-76-generic x86_64 Ubuntu
Current Operating System: Linux localhost 3.14.0 #1 SMP Fri Mar 20 15:41:09 PDT 2015 x86_64
Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=cdff06a0-ad87-f246-8505-4b0b37336cdf/PARTNROFF=1 hashtree=PARTUUID=cdff06a0-ad87-f246-8505-4b0b37336cdf/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=5d5557b5b04108e7ce8162c9f15eb3149ec4163a salt=a9343ded2666b5870d2398f860f7ef9c75986bb11576ba379b0941335289303f"" noinitrd vt.global_cursor_default=0 kern_guid=cdff06a0-ad87-f246-8505-4b0b37336cdf add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic i915.enable_psr=1  
Build Date: 12 February 2015  02:49:29PM
xorg-server 2:1.15.1-0ubuntu2.7 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
    Before reporting problems, check http://wiki.x.org
    to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
    (++) from command line, (!!) notice, (II) informational,
    (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(++) Log file: ""/tmp/Xorg.crouton.1.log"", Time: Sun Apr 12 23:04:46 2015
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
Initializing built-in extension Generic Event Extension
Initializing built-in extension SHAPE
Initializing built-in extension MIT-SHM
Initializing built-in extension XInputExtension
Initializing built-in extension XTEST
Initializing built-in extension BIG-REQUESTS
Initializing built-in extension SYNC
Initializing built-in extension XKEYBOARD
Initializing built-in extension XC-MISC
Initializing built-in extension SECURITY
Initializing built-in extension XINERAMA
Initializing built-in extension XFIXES
Initializing built-in extension RENDER
Initializing built-in extension RANDR
Initializing built-in extension COMPOSITE
Initializing built-in extension DAMAGE
Initializing built-in extension MIT-SCREEN-SAVER
Initializing built-in extension DOUBLE-BUFFER
Initializing built-in extension RECORD
Initializing built-in extension DPMS
Initializing built-in extension Present
Initializing built-in extension DRI3
Initializing built-in extension X-Resource
Initializing built-in extension XVideo
Initializing built-in extension XVideo-MotionCompensation
Initializing built-in extension SELinux
Initializing built-in extension XFree86-VidModeExtension
Initializing built-in extension XFree86-DGA
Initializing built-in extension XFree86-DRI
Initializing built-in extension DRI2
Loading extension GLX
xf86EnableIOPorts: failed to set IOPL for I/O (Operation not permitted)
crouton: version 1-20150411190710~master:7adac7a1
release: trusty
architecture: amd64
xmethod: xorg
targets: xfce
host: version 6680.78.0 (Official Build) stable-channel samus 
kernel: Linux localhost 3.14.0 #1 SMP Fri Mar 20 15:41:09 PDT 2015 x86_64 x86_64 x86_64 GNU/Linux
freon: yes
No Chromium OS X server is available.
_IceTransmkdir: ERROR: euid != 0,directory /tmp/.ICE-unix will not be created.
xfce4-session: No gpg or ssh authentication agent found
/usr/bin/xbindkeys_autostart: line 24: CONF: unbound variable

(polkit-gnome-authentication-agent-1:16033): GLib-CRITICAL **: g_variant_new_string: assertion 'string != NULL' failed

(polkit-gnome-authentication-agent-1:16033): polkit-gnome-1-WARNING **: Failed to register client: 
"
5143,Neutral,"I am trying to download crouton but it is failing due to error downloading binary-amd packages. The output is below 

chronos@localhost / $ sudo sh ~/Downloads/crouton -t unity
Downloading latest crouton installer...
###### ################################################################## 100.0%

Installing precise-amd64 chroot to /usr/local/chroots/precise
Downloading latest debootstrap...
2015-01-11 04:12:51 URL:http://anonscm.debian.org/gitweb/?p=d-i/debootstrap.git;a=snapshot;h=HEAD;sf=tgz [61112/61112] -> ""-"" [1]
Patching debootstrap...
Downloading bootstrap files...
W: Cannot check Release signature; keyring file not available /usr/share/keyrings/ubuntu-archive-keyring.gpg
I: Retrieving Release 
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2
W: http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.bz2 was corrupt
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
I: Retrieving Packages 
I: Validating Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz
W: http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages.gz was corrupt
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
I: Retrieving Packages 
W: Retrying failed download of http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages
W: http://archive.ubuntu.com/ubuntu/dists/precise/main/binary-amd64/Packages was corrupt
E: Couldn't download dists/precise/main/binary-amd64/Packages

When I try to wget the package, i get the following output 

chronos@localhost / $: wget http://archive.ubuntu.com/ubuntu/dists/trusty/main/binary-amd64/Packages
--2015-01-11 04:41:34--  http://archive.ubuntu.com/ubuntu/dists/trusty/main/binary-amd64/Packages
Resolving archive.ubuntu.com... 91.189.88.149, 91.189.91.13, 91.189.91.15, ...
Connecting to archive.ubuntu.com|91.189.88.149|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
2015-01-11 04:41:35 ERROR 404: Not Found. 
"
5144,Positive,"Thanks for all of your hard work on Crouton!  I still can't believe how well this all works together, giving me a lighweight and inexpensive, yet fully functional laptop with fantastic battery life!

I decided I wanted to do something with Audacity this morning, so I went through the typical ""apt-get install audacity"".  But when I tried to start audacity, my Chromebook rebooted.  When I try to launch it from a terminal window, I can see something about a jack server just before the reboot.  I'm not terribly familiar with the state of audio on Linux, but I have a feeling the chroot and Chrome OS are probably fighting over the sound device.  Issue #111 sounded similar.

Any ideas what could be going on?  My crouton chroot is raring running xfce4.

Thanks!
"
5145,Neutral,"Try adding users using `adduser` or `useradd`:

Run `sudo enter-chroot` to enter a shell then type `sudo adduser [USER]`, replacing [USER] with the name of the user you want to add. After answering the prompts, type `exit`.

You can now start unity for the new user with `sudo startunity -u  [USER]`."
5146,Neutral,"It looks like ARM may get 3.8 soon, I see kernel 3.8.11 being built in the Chromium OS builders:
http://build.chromium.org/p/chromiumos/builders/daisy%20full/builds/6104/steps/BuildPackages/logs/stdio
So it looks like it's just a matter of time until 3.8 appears on the dev channel (if it's not already there).
"
5147,Negative,"Feel your pain, very annoying with xiwi emacs.

I have found the repeating space to kick in with two or more input methods on the chromeos side. Still, ctrl+shift+space or ctrl+@ will work and give null char, debug with `xev`.

As a workaround for xiwi I kind of add a shift with xbindkeys.
Add `(xbindkey '(control space) ""xset r off; xte 'keyup space'; xte 'keydown Shift_L' 'key space' 'keyup Shift_L'; xset r on"" )` to [~/.xbindkeysrc.scm](https://github.com/nxtr/dotfiles/blob/ae6dc4fee6ced6a6e55d932c80131ffe41456b26/.xbindkeysrc.scm#L66-L67)  
Start `xbindkeys` manually or with [~/.xiwirc](https://github.com/nxtr/dotfiles/blob/ae6dc4fee6ced6a6e55d932c80131ffe41456b26/.xiwirc#L3)

"
5148,Positive,"Thanks.
"
5149,Negative,"Well, I appreciate the help, but while trying to get this to work I updated crouton, and am now suffering from issue #2194. So I can still open my primary terminal, but from there, I cannot run xiwi guake or xiwi xfce4-terminal. It would seem I've shot myself in the foot while trying to fix something that wasn't broken :( "
5150,Neutral,"Audio Debug Stats:
-------------devices------------
output dev: HDA Intel PCH: ALC283 Analog:1,0
16384 0 0
input dev: HDA Intel PCH: ALC283 Analog:1,0
0 0 0
-------------stream_dump------------
stream: 30000
0 2048 1024 48000 1 0
-1 -1 -1 -1 0 -1 -1 -1 -1 -1 -1 
Audio Thread Event Log:
start at 5336
DEV_STREAM_MIX: 1287.122110804 written 1024 read 1024
WRITE_STREAMS_MIXED: 1287.122111185 write_limit 1024
FILL_AUDIO_DONE: 1287.122449045 total_written 1024
SET_DEV_WAKE: 1287.122450518 devidx:6 adj:0 cbth:0
STREAM_SLEEP_TIME: 1287.122450779 id:30000 wake:000001287.143172479
SLEEP: 1287.122451050 000000000.020721790 long:000742246
WAKE: 1287.143256781
WRITE_STREAMS_FETCH_STREAM: 1287.143268162 id 30000 cbth 1024
FILL_AUDIO: 1287.143282498 dev 6 hw_level 1024
WRITE_STREAMS_STREAM: 1287.143284508 id 30000 shm_frames 0 cb_pending 1
WRITE_STREAMS_MIX: 1287.143284585 wlimit 0 max_offset 0
WRITE_STREAMS_MIXED: 1287.143285035 write_limit 0
FILL_AUDIO_DONE: 1287.143286693 total_written 0
SET_DEV_WAKE: 1287.143287713 devidx:6 adj:0 cbth:0
STREAM_SLEEP_TIME: 1287.143288114 id:30000 wake:000001287.164505812
SLEEP: 1287.143288775 000000000.021217842 long:000742246
WAKE: 1287.143376913

The repeats over and over again hundreds of times. I may have discovered this is a Chrome OS problem. 

https://code.google.com/p/chromium/issues/detail?id=424271

Seems like the coders at Google are aware that CRAS is eating more CPU then it should. They say Os version 40 will resolve this but they may not fix it for 39..... I'll keep you posted.
"
5151,Neutral,"That gets inlined as part of the install process.
"
5152,Neutral,"No. Mounted internally. I just did a very standard install.
"
5153,Neutral,"hi @divx118, et al.,

the [common issues and reporting doc](https://github.com/dnschneid/crouton/wiki/Common-issues-and-reporting) here did not work for me - did all it said that i could, still get the same error loading drivers at start up and it exits out of crouton, never gets even to a terminal where i could play around with stuff. really wish someone could tell me where the GLX and video intel hd controller config. files for X11, or the reference configs for xbmc, are located so i could maybe edit them and get out of this problem. i tried doing `find` and `grep` to search for *.conf files or driver phrases in files, and can't find _any_, or find so many references to something like ""GLX"" that its unusable and i don't know where to narrow the search. i looked in `/usr/share/X11/xorg.conf.d` directory and there were only input drivers there: keyboard, mouse & trackpad, no video driver *.conf files. again, i have also posted this here as a separate issue, #1118.

best,

--  faddah wolf
    portland,oregon, u.s.a.
    github.com/faddah

/cc  @dnschneid 
"
5154,Neutral,"@planckm,

> In the debug file the crouton bin and chroot directory is still the default one.

Sounds like that's the problem. 
Make sure `/etc/init/crouton.conf` has the saved changes I listed above with the correct path to your external media.

*Hope this helps,*
-**DennisL**"
5155,Neutral,"@air: Is there a way to get LXC to run without another instance of `/dev/pts`?

I understand this is desired for additional separation between the host and the container, but it is possible to start containers without it.
"
5156,Neutral,"I notice the line 

> xfce4-settings-helper: Another instance is already running. Leaving...

This makes me wonder if perhaps you should turn off and restart your machine. This might also be a good time to try the often-easy-solution of updating with

> sudo sh ~/Downloads/crouton -u -n chrootname

and pay careful attention to whether or not you get any errors. 

Supposing that doesn't do anything. What happens if you do ctrl+alt+shift forward/back?

Further, can you do ctrl+alt forward followed by ctrl+alt+refresh and see if that behaves differently? I've had incomplete installs/updates in the past where I used this temporary workaround before resolving my problems.
"
5157,Positive,"Hi guys - I'm happy to help here with testing and dev if you could point me into the right direction. 

@dnschneid I can see that X on Mali on Samsung Chromebook 3 has some form of acceleration but then you've mentioned Mali drivers don't support multiple X servers.  Is it possible to use the same trick with Tegra or is it purely up to the drivers?

@alextnewman It looks like the Tegra graphics drivers for TK1 have more functionality built in when browsing through the source code.  Have you tried to compile new chromium kernel? Issue #979 lists relevant kernel source code.

Thanks! 
"
5158,Neutral,"Keep in mind that on the ARM chromebook, you won't have any video acceleration when playing in crouton (since it isn't directly accessing the video hardware).  That means you lose the hardware decode, and you'll get graphical tearing when it plays back.

That having been said, you should be able to get audio over HDMI.  It may be a matter of just changing the default alsa device, or installing and using PulseAudio.
"
5159,Neutral,"Please re-open if it's still an issue with the latest Firefox/crouton/Chromium OS.
"
5160,Neutral,"Hello, as weird as it may seem, Ctrl+Alt+Shift+F2/Right-Arrow is not working.
This is a Toshiba Chromebook 2, maybe that's related to that. I tried both with the original key settings, and the modified ones that I normally use (swapping Search and Ctrl_L). I find it curious that even with the ChromeOS layout changed, I still have to press the Ctrl key, instead of the Search key.

In my case, I have to move from ChromeOS to teminal (pressing Ctrl+Alt+F2/Right Arrow) and from there, Ctrl+Alt+F3/Refresh if I want to go to Crouton, at least this is what I've been doing.

I have just tried Ctrl+Alt+Left-Arrow in ChromeOS, and it doesn't work here. It DOES work from Crouton back to ChromeOS, by pressing Ctrl_R, and Alt_R.

Any ideas?
"
5161,Neutral,"`enter-chroot -u 0` will allow you to enter the chroot as root.
Now I'm wondering why you are having so many unusual problems...
"
5162,Negative,"Sorry but I recently got a new HP Chromebook 14, my Acer C710 died, and I haven't loaded any VM's on it yet.
"
5163,Neutral,"@raphael 

> you have to enter the chroot and edit the file /prepare.sh as indicated in the ticket

Yes, if you have already setup the chroot.
The link I sent is talking about tweaking the target itself.
"
5164,Positive,"Very frustrating till I found this thread. Thanks for all your help and patience explaining!
"
5165,Neutral,"(actually, let's leave this open...)
"
5166,Neutral,"Crouton looks updated. Did you update your chroot? crouton -u -n saucy looks like it should do the trick.
"
5167,Positive,Sorry I probably went too fast while trying to triage old issues. Looks like it can be closed indeed. Thanks!
5168,Neutral,"*Just throwing this out there in hopes that it might be of help.*

Some withe the same or similar issue have resolved it using this method: https://github.com/dnschneid/crouton/issues/2917#issuecomment-267411158

*Hope this helps,*
-**DennisL**"
5169,Neutral,"You will have to built and replace the kernel which has VT-x enabled. IIRC there was some issue here, about how to replace the kernel and enable VT-x. 
Try using 32bit xp.
"
5170,Neutral,"@ibukanov you need to add xiwi as the first target at this time per open issues #1198 and #1274 (duplicate/closed)

so did you add xiwi first like:

sudo sh ~/Downloads/crouton -t xiwi,unity -u -r trusty

the `extension` target is not needed on the above line as xiwi pulls it in, but the Chrome Store App Crouton Extension v2 does need to be retrieved and installed.
"
5171,Positive,"That's a good point.  Documentation should be updated for that (pie).

Taken a step further, there should be an option for edit-chroot to backup and restore the /etc/crouton/shares directories as well, probably as a separate tarball (not necessarily pie).
"
5172,Neutral,@farmerbb could you make a release so we can edit `crouton` to get your version at least?
5173,Neutral,"Try using 'Ctrl-Alt-Shift-F2(right-arrow)' or 'Ctrl-Alt-F3(refresh)'.
"
5174,Neutral,"@John277,

It looks like you've posted this *same* [issue](https://github.com/Unidata/netcdf4-python/issues/634) on the 'netcdf4-python' site. 
Since it's not a 'crouton' problem per say, I suggest you track it there.

*Hope this helps,*
-**DennisL**"
5175,Neutral,"Looks like dev channel is on R32.  I presume two-finger scrolling worked fine in Chromium OS?
"
5176,Neutral,"@c00w Here’s how I installed and ran Rocket
Create a folder in /usr/local/ for rocket, the same directory that crouton uses 
`sudo mkdir /usr/local/rocket` 
Download the current tar.gz into the new folder 
`sudo wget https://github.com/coreos/rocket/releases/download/v0.3.1/rocket-v0.3.1.tar.gz` 
Unpack
`sudo tar xzvf rocket-v0.3.1.tar.gz` 
Check permissions and correct to `root:root`; verify that `rkt` is executable 
`cd` into `rocket-v0.3.1` 
`sudo ./rkt help`
This verifies that `rkt` is executable, and it gives you the switches and options
Create a folder in rock to save your ACIs 
`sudo mkdir /usr/local/rocket/aci` 

**Now, for the blastoff!**  
In the same folder as `rkt`, run this 
`sudo ./rkt --dir=/usr/local/rocket/aci --debug=true --insecure-skip-verify=true run https://github.com/coreos/etcd/releases/download/v2.0.0/etcd-v2.0.0-linux-amd64.aci`  
To kill the Container press Ctrl ] three times 
"
5177,Neutral,"No problems with saving data, or data integrity of the card, but after changing directories and using the removable card in Chromium OS, my xfce session which had a shell and editor opened on the card, had crashed.

I'll install the extension today. 
"
5178,Neutral,"I believe the 'xbmc' target just uses the xbmc version available for the linux release your using, the one available in the 'Software Center'. Here's a page that shows some of the later Ubuntu versions and lists the '[XBMC Media Center](https://apps.ubuntu.com/cat/applications/xbmc/)' versions they provide.

You can install the '[team-xbmc/ppa](http://kodi.wiki/view/HOW-TO:Install_XBMC_for_Linux)' and get the standard, unstable, or even nightly builds if you like.

I guess this is all going to change soon (again) with the the new '[Kodi 14.0 “Helix” nearing beta release](http://kodi.tv/)' coming out...
"
5179,Positive,"@divx118 presto! That works. Now you know why I wanted a cheat sheet in the wiki. Thanks so much
"
5180,Neutral,"@greghendershott you're missing <kbd>Shift</kbd>
"
5181,Positive,"Hey again Zane (and others),

I have to say I got everything set up -- thanks to you -- and I'm really starting to get the hang of linux. All of those programs you recommended are great. And I even found some more from the ubuntu software center.

Except now I came across this unexpected problem. When I launch through crouton integration, it gives me this error: 

![screenshot 2015-06-27 at 12 22 21 pm](https://cloud.githubusercontent.com/assets/11172428/8392934/1eb109ec-1cc8-11e5-89d2-f968d522649f.png)

The first time getting this, I was able to still get in after some time, and a little luck, but now I'm out of luck.

I think I understand the problem. With crouton integration I have a general issue with screen resolution. For example, my firefox browser is huge and not enjoyable to use. I've messed around with the screen resolution settings a bunch and even after selecting the smallest setting everything is larger than life. I tried a few times to launch gnome the normal way [In other words - not through a window on chrome os], and it just won't launch. Maybe I can fix this issue if I can get back into it that way?

--Mike
"
5182,Positive,"@DennisLfromGA tried this, (copying and without copying to /usr/share/X11/xorg.conf.d/) and didn't work. The bug changed though, now I get the black screen with a cursor, and if I go to chrome os and switch back to xubuntu the gui shows up but freezed.

Thanks :)"
5183,Neutral,"You could also use edit-chroot to rename your precise chroot to something like ""alpha""--that's what I do for my primary chroot.
"
5184,Neutral,"I'm really not too well versed on ppa's and such, someone else might be a
better source.

On Sun, Apr 26, 2015 at 6:56 PM, tedm notifications@github.com wrote:

> @DennisLfromGA https://github.com/DennisLfromGA What about keeping a
> known good backup copy of /etc/apt/sources.list and if something is broken,
> prompt the user to revert to the default, but that they will have to add
> their package back again after they restore to a known good install?
> 
> http://askubuntu.com/questions/496495/can-a-ppa-repository-be-added-to-etc-apt-source-list
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/dnschneid/crouton/issues/1365#issuecomment-96443972.

## 

_DennyL@GMail_
"
5185,Positive,"thanks
"
5186,Positive,"@PastyPilgrim,

Means ""disabling IPv6 _during crouton install_""?
OK. those would work on crosh shell as well.

Regards.
"
5187,Neutral,"Not sure, might be....
"
5188,Neutral,"@belzecue can you sudo enter-chroot and run:

sudo apt-get install --reinstall xserver-xorg-core

from a crosh shell terminal without bringing up a graphical desktop of your chroot?
"
5189,Negative,"Oh,sorry.
"
5190,Neutral,"@trusktr,

Maybe.
Perhaps running `dpkg-reconfigure locales` on more releases or even on all of them wouldn't harm anything and may just help to avoid this issue.

The devs can take a look at this maybe when they get a free cycle or two.

-**DennisL**"
5191,Neutral,"1. Put it at the end of that command.
2. Yes, the chroot will shut down as well.  You should probably get that fixed.
3. Yes, but it does not actively write over it on the physical media, so theoretically you could recover the data via a forensic command like `foremost` (unless Chromium OS uses TRIM, which might make it more difficult).  If you're worried about sensitive deleted data being recoverable, encrypt your chroot using `-e`.
"
5192,Neutral,"I am having the same issue.  Not sure what hardware the OP is using, but I'm on an Asus Flip running ChromeOS dev v53.
"
5193,Positive,"Yes, the CRAS updates are fine, at least for what I do, which is launch audio in Chromium OS, and it plays fine when in the chroot or even toggling back and forth.
"
5194,Neutral,"@Herran have you recently rebooted?  If you previously unmounted selinux or something, you'll get errors until you reboot.
"
5195,Neutral,"Confirmed that xiwi works OK... reinstalling -t xorg after that does not fix xorg mode.
"
5196,Neutral,"Try to follow #1715 as well because that is a similar problem and if that gets solved, then maybe you could get the chroot.
"
5197,Neutral,"@DennisLfromGA Can you clarify about how you get crosh / shell terminal windows? The only way I know of is the ctrl alt T way, and I often have several up simultaneously, but the one I""m referring to would be the crosh / shell window that I started the chroot up in, and receives debug info. in. I'm not sure I remember any other ways to get a terminal other than ctrl alt T ?
"
5198,Neutral,"@DennisLfromGA  

I am comfortable trying to edit the script. However what I am unsure about is it a physical file that I am editing on my chromebook? Would that be the crouton file I downloaded and what program do I use to open that up and edit it. or do I edit a command when I type it into shell?
"
5199,Neutral,"Update and answer to myself: No, `/proc/sys/kernel/chromiumos/module_locking` does not even exist with a verified RO rootfs, So, unfortunately, making the rootfs r/w-able seems to be the only way to get this hack done.
"
5200,Neutral,"I have this problem sometimes too. Not sure what causes it, but I just keep retrying until it works.
"
5201,Neutral,Another way to do the same thing without having to go into the alternate terminal (where copy and paste doesn't work) is to just run `ssh root@localhost` use the root password you set and then run `chromeos-setdevpasswd` to set the sudo password.
5202,Neutral,"@tedm,

> Is there a list showing which user selected targets will bring in which dependencies?

Yes, when you run crouton with the '-t list' option, it shows the targets/DEs and their prerequisites (Requires:).
"
5203,Positive,"I appreciate the help.  Thanks.  But as a non-technical person who's trying very hard to follow along and teach myself ... what exactly do I type into the developer shell?  And do I need to have a USB drive to receive the tarball file?  Or I just need to re-download it onto each Chromebook and restore from there ... which I'm not sure how to type that in either. =)
"
5204,Neutral,"Yeah, it looks like you removed way more than just xscreensaver.
"
5205,Negative,"I can't understand the result since a native mode which has 1920x1080 is named `kiwi_1920x1080_60`, and the others are 4:3 aspects mixed... :(

So give it a try:

```
xrandr --output default --scale 1x1 --mode kiwi_1920x1080_60
```

Regards.
"
5206,Neutral,"Not really; that's actually quite a lot of margin.  Unlike other OSes, Chromium OS updates don't necessarily increase the size of the image.
"
5207,Neutral,"@dnschneid, you can close this issue.

For anyone else with this problem, it's been fixed in the latest versions of crouton. Simply re-download the installer and run `sudo sh -e ~/Downloads/crouton -u -t CHROOTNAME`. All your files will be kept.
"
5208,Positive,"Great! I get lucky every now and then...
"
5209,Negative,"I rebooted and it is there now. Odd. mount from crosh/shell after reboot, and before entering startxfce4 chroot is below. Not sure if this is relevant, but thunar in the GUI pane for /home/ted/ shows /home/ted/Download (note: no 's'), but in shell, chromeos contents are [post reboot] now in /home/ted/Downloads (correct, with 's').

btw, there is no sd card in the slot, let me know if you want that written up separately, but the chroots seem to keep a memory of them. Let me know if you want a new issue opened for that.

rootfs on / type rootfs (rw)
/dev/root on / type ext2 (ro,relatime,user_xattr,acl)
devtmpfs on /dev type devtmpfs (rw,nosuid,noexec,relatime,size=1033668k,nr_inodes=258417,mode=755)
none on /proc type proc (rw,nosuid,nodev,noexec,relatime)
none on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)
tmp on /tmp type tmpfs (rw,nosuid,nodev,noexec,relatime)
debugfs on /sys/kernel/debug type debugfs (rw,nosuid,nodev,noexec,relatime)
shmfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec,relatime)
devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620)
/dev/mmcblk0p1 on /mnt/stateful_partition type ext4 (rw,nosuid,nodev,noexec,relatime,commit=600,data=ordered)
/dev/mmcblk0p1 on /home type ext4 (rw,nosuid,nodev,noexec,relatime,commit=600,data=ordered)
/dev/mapper/encstateful on /mnt/stateful_partition/encrypted type ext4 (rw,nosuid,nodev,noexec,relatime,discard,commit=600,data=ordered)
/dev/mapper/encstateful on /var type ext4 (rw,nosuid,nodev,noexec,relatime,discard,commit=600,data=ordered)
/dev/mapper/encstateful on /home/chronos type ext4 (rw,nosuid,nodev,noexec,relatime,discard,commit=600,data=ordered)
varrun on /var/run type tmpfs (rw,nosuid,nodev,noexec,relatime,mode=755)
varlock on /var/lock type tmpfs (rw,nosuid,nodev,noexec,relatime)
media on /media type tmpfs (rw,nosuid,nodev,noexec,relatime)
/dev/mmcblk0p1 on /usr/local type ext4 (rw,nodev,relatime,commit=600,data=ordered)
none on /dev/pstore type pstore (rw,nosuid,nodev,noexec,relatime)
none on /sys/fs/cgroup type tmpfs (rw,nosuid,nodev,noexec,relatime,mode=755)
cgroup on /sys/fs/cgroup/cpu type cgroup (rw,nosuid,nodev,noexec,relatime,cpu)
fusectl on /sys/fs/fuse/connections type fusectl (rw,relatime)
/home/.shadow/a80205362b4f4c31526f8bf092de0978c7e43233/vault on /home/.shadow/a80205362b4f4c31526f8bf092de0978c7e43233/mount type ecryptfs (rw,nosuid,nodev,noexec,relatime,ecryptfs_sig=84d9b4e3cf50f0ff,ecryptfs_fnek_sig=d63db0c16a4f6be1,ecryptfs_cipher=aes,ecryptfs_key_bytes=16,ecryptfs_unlink_sigs)
/home/.shadow/a80205362b4f4c31526f8bf092de0978c7e43233/vault on /home/chronos/user type ecryptfs (rw,nosuid,nodev,noexec,relatime,ecryptfs_sig=84d9b4e3cf50f0ff,ecryptfs_fnek_sig=d63db0c16a4f6be1,ecryptfs_cipher=aes,ecryptfs_key_bytes=16,ecryptfs_unlink_sigs)
/home/.shadow/a80205362b4f4c31526f8bf092de0978c7e43233/vault on /home/user/A80205362B4F4C31526F8BF092DE0978C7E43233 type ecryptfs (rw,nosuid,nodev,noexec,relatime,ecryptfs_sig=84d9b4e3cf50f0ff,ecryptfs_fnek_sig=d63db0c16a4f6be1,ecryptfs_cipher=aes,ecryptfs_key_bytes=16,ecryptfs_unlink_sigs)
/home/.shadow/a80205362b4f4c31526f8bf092de0978c7e43233/vault on /home/root/A80205362B4F4C31526F8BF092DE0978C7E43233 type ecryptfs (rw,nosuid,nodev,noexec,relatime,ecryptfs_sig=84d9b4e3cf50f0ff,ecryptfs_fnek_sig=d63db0c16a4f6be1,ecryptfs_cipher=aes,ecryptfs_key_bytes=16,ecryptfs_unlink_sigs)
"
5210,Neutral,"This is now in the latest crouton.
"
5211,Neutral,"@WastingAway1 wily is a bit outdated version, have you tried xenial? 
"
5212,Positive,"Huh!  That's a good find.  We should add something like that by default.
"
5213,Neutral,"Does this still happen on wolf?
"
5214,Neutral,"I have a question relating to this. After updating to Chrome 53, I'm experiencing exactly the same problem as in [#2787](https://github.com/dnschneid/crouton/issues/2787). (I have an encrypted _precise_ chroot installed locally and want file access, so the powerwashing solution won't help me any.)

Are there any plans to update the crouton installer to work with _precise_ and Chrome 53, or is this a lost cause?
"
5215,Neutral,"Yes, without make_dev_ssd. Insmodding modules just works as said above. No need to change chromeos rootfs to rw.

Edit: Hmm I looked at the code and am now wondering if the sysfs path should even exist. They have some code in there to create the above mentioned /proc/sys/kernel/chromiumos/module_locking when rootfs is not readonly. However line 224 exposes the parameter to /sys. Not that I am complaining I like having the ability to load my own modules on the readonly system I also don't see any harm in that. Or am I incorrect?

Here is the link to lsm.c source.
https://chromium.googlesource.com/chromiumos/third_party/kernel-next/+/chromeos-3.8/security/chromiumos/lsm.c
"
5216,Neutral,"@DennisLfromGA Dennis, I think frederick may be referring to command line utils that were removed from crouton DEs, (and even cli-extra), things like nano, ssh, lspci, gcc, that have been part of even the thinnest xfce distros. 
"
5217,Neutral,"`Alt+Shift` is a LOT less crowded.  `Alt+Shift+Q` and `Alt+Shift+W`, or `A+S+9` and `A+S+0` (i.e., parentheses on the US keyboard), or `Alt+Shift+C` for crouton/chroot/Chromium....clearly I should have chosen a name starting with a different letter of the alphabet.
"
5218,Neutral,"Yes, like @tonyxue mentioned, it's a 'browser extension' named 'crouton integration' that's installed from the Chrome Web Store. It can be a little confusing because crouton has a _target_ named 'extension' but these are two completely different things. They are however related in that both are required for the 'xiwi' xmethod.
"
5219,Positive,"Sure, happy to. I'm using the latest Chrome OS, so I don't know when the next time will be, but I would guess in 1 - 2 months it's likely.
"
5220,Neutral,"I tried updating the chroot as you said and had this returned:

sudo sh ~/Downloads/crouton -u -n
Downloading latest crouton installer...
######################################################################## 100.0%
No arg for -n option
crouton [options] -t targets
crouton [options] -f backup_tarball
crouton [options] -d -f bootstrap_tarball

Constructs a chroot for running a more standard userspace alongside Chromium OS.

If run with -f, where the tarball is a backup previously made using edit-chroot,
the chroot is restored and relevant scripts installed.

If run with -d, a bootstrap tarball is created to speed up chroot creation in
the future. You can use bootstrap tarballs generated this way by passing them
to -f the next time you create a chroot with the same architecture and release.

crouton must be run as root unless -d is specified AND fakeroot is
installed AND /tmp is mounted exec and dev.

It is highly recommended to run this from a crosh shell (Ctrl+Alt+T), not VT2.

Options:
    -a ARCH     The architecture to prepare a new chroot or bootstrap for.
                Default: autodetected for the current chroot or system.
    -b          Restore crouton scripts in PREFIX/bin, as required by the
                chroots currently installed in PREFIX/chroots.
    -d          Downloads the bootstrap tarball but does not prepare the chroot.
    -e          Encrypt the chroot with ecryptfs using a passphrase.
                If specified twice, prompt to change the encryption passphrase.
    -f TARBALL  The bootstrap or backup tarball to use, or to download to (-d).
                When using an existing tarball, -a and -r are ignored.
    -k KEYFILE  File or directory to store the (encrypted) encryption keys in.
                If unspecified, the keys will be stored in the chroot if doing a
                first encryption, or auto-detected on existing chroots.
    -m MIRROR   Mirror to use for bootstrapping and package installation.
                Default depends on the release chosen.
                Can only be specified during chroot creation and forced updates
                (-u -u). After installation, the mirror can be modified using
                the distribution's recommended way.
    -M MIRROR2  A secondary mirror, often used for security updates.
                Can only be specified alongside -m.
    -n NAME     Name of the chroot. Default is the release name.
                Cannot contain any slash (/).
    -p PREFIX   The root directory in which to install the bin and chroot
                subdirectories and data.
                Default: /usr/local, with /usr/local/chroots linked to
                /mnt/stateful_partition/crouton/chroots.
    -P PROXY    Set an HTTP proxy for the chroot; effectively sets http_proxy.
                Specify an empty string to remove a proxy when updating.
    -r RELEASE  Name of the distribution release. Default: precise,
                or auto-detected if upgrading a chroot and -n is specified.
                Specify 'help' or 'list' to print out recognized releases.
    -t TARGETS  Comma-separated list of environment targets to install.
                Specify 'help' or 'list' to print out potential targets.
    -T TARGETFILE  Path to a custom target definition file that gets applied to
                the chroot as if it were a target in the crouton bundle.
    -u          If the chroot exists, runs the preparation step again.
                You can use this to install new targets or update old ones.
                Passing this parameter twice will force an update even if the
                specified release does not match the one already installed.
    -V          Prints the version of the installer to stdout.

Be aware that dev mode is inherently insecure, even if you have a strong
password in your chroot! Anyone can simply switch VTs and gain root access
unless you've permanently assigned a Chromium OS root password. Encrypted
chroots require you to set a Chromium OS root password, but are still only as
secure as the passphrases you assign to them.

What am I supposed to do at this point?
"
5221,Neutral,"Ok, so lxde is a bit broken, probably something to do with policykit, and first starts as black string. Pressing any key, then clicking Ok on the ""no session for pid xyz"" then leads to a functional lxde."
5222,Neutral,"I have an Intel Samsung Chromebook.
"
5223,Neutral,"My Acer C720P was experiencing the same issue.  Since switching to the beta I've only had a similar issue once: Version 51.0.2704.55 beta (64-bit), Platform 8172.39.0 (Official Build) beta-channel peppy, Firmware Google_Peppy.4389.93.0
"
5224,Neutral,"Once that's done, unplug it and then plug it in again and see what 'name' it's given.
"
5225,Neutral,"First, what's the output of: `sudo edit-chroot -al`
"
5226,Neutral,"#262 
"
5227,Neutral,"Do you still hit this with the latest crouton/chromium OS?
"
5228,Neutral,"btw since your problem has been solved you should close the issue
"
5229,Positive,Awesome 🥇 
5230,Neutral,"@rogue417 CHROOTNAME should be replaced with your chroot name. Also don't forget `sudo sh` So an example of the complete command could be `sudo sh ~/Downloads/crouton -n precise -u` See https://github.com/dnschneid/crouton/wiki/Common-issues-and-reporting on how to retrieve your chroot name and other usefull tips on updating.
"
5231,Neutral,"I had tried using xiwi with the extension, no luck
what fixed the issue for me was found here

https://github.com/dnschneid/crouton/issues/1265

specifically i used the command

sudo CROUTON_BRANCH=x11_freon sh ~/Downloads/crouton -t xfce -n trusty -u

this switched the branch and updated my chroot and works with chrome os Version 41.0.2272.89 (64-bit)

That is the current fix for the issue I was having.
"
5232,Negative,"Basically, I'm not switching between chrome os and linux, instead, chrome os keeps on flashing onto my screen while I'm on linux. Make sense? It's also gets really annoying and irritating cause I'm trying to log out, (you know, get out of linux). Should I just try the crouton integration thingy? (not a big fan of crouton in  tab).
"
5233,Positive,"hi @Watney, @smibarber & @divx118 —

@Watney's command line suggestion is what did it for me, though i needed to make an adjustment, it should actually be:

`sudo sh ~/Downloads/crouton -p /media/removable/USB\ Drive -n trusty -u`

it does not need `.../chroots/` to show where the chroot directory is, because it adds that on to the script itself, it just needs the path to the directory one level above that.

@smibarber — i am the only one on my Chromebook, no other profiles.

thanks for the help, all. it's o.k. to close this one out, i got my ubuntu linux install on my USB stick recovered and working again. thank you very much!

best,

—  faddah
     portland, oregon, u.s.a.
"
5234,Neutral,"It is the systemd matter. Systemd requires its PID to be 1 but we cannot do that for a chroot as we have Chrome OS already started with its init process occupying PID1.

The foreseeable support is when Chrome OS update all stable version kernels to 3.8. Only unstable channel of some hardware is on 3.8 right now. 3.8 provides PID Namespace and we can create a separate PID namespace which everything starts with PID 1 for the chroot. Then systemd would work.

However, if that's happening , we probably don't even need chroot anymore.

If you are interested in PID namespace, see the pull request: https://marc.info/?l=linux-kernel&m=135526066121436&w=2
"
5235,Positive,"@Hunter115,

Glad you figured it out 'cause I was stumped, especially after the message:

> Chroots can only be moved to ext filesystems.

That didn't make any sense to me.

I've seen others use the link to external media before successfully but I hadn't thought of suggesting it.
I'll definitely offer that solution the if/when this issue crops up again.

Thanx,
-**DennisL**"
5236,Neutral,"```
Entering /usr/local/chroots/precise...
crouton: version 1-20131231051633~master:796cb422
release: precise
architecture: amd64
targets: xfce
host: version 5116.0.0 (Official Build) dev-channel parrot 
Unmounting /usr/local/chroots/precise...
```

It appears I'm on the dev channel- how do I get to stable? I just grabbed the link from the github repo description.
"
5237,Negative,"Whoops, that was actually a stupid question (you already said it was crosh).  It looks to me like crosh doesn't properly handle unicode ([see](http://crbug.com/212705) [bugs](http://crbug.com/212558); I'm sure there are others as well).  Does this seem to match what you're seeing?  You'll probably need to install a DE (xfce, for instance) and use a terminal from inside there in order to get things displaying properly.
"
5238,Neutral,"No, it's in the foreground.  With it in the STOP state, I've also
tried ^Z, fg, kill -CONT, etc.  I believe it's also entered this state
when started in the background.

I wonder if there's an issue with the crosh pty?

On Tue, Sep 10, 2013 at 10:24 AM, David Schneider
notifications@github.com wrote:

> That's odd. You're not backgrounding the process in crosh with Ctrl-Z, are you?
> 
> —
> Reply to this email directly or view it on GitHub.
"
5239,Neutral,"@x3qt out of curiosity, I see that LC_ALL is set in crosh (outside the chroot); does it actually match the user's locale setting?
"
5240,Neutral,"@Timvrakas - Maybe we should take this off-line or do it in your or @drinkcat's branch.

I ran - 
`sudo sh ~/Downloads/crouton-drinkcat-separate_partition/installer/main.sh -S -s 10000`
a couple of times and it bombed out and rebooted.

I then ran -
`sudo sh -x ~/Downloads/crouton-drinkcat-separate_partition/installer/main.sh -S -s 10000 2>&1 | tee -a ~/Downloads/crispy.log`
another couple of times and it did the same.

The last, pertinent part of the logs were -

```
+ [ 2 -gt 0 ]
+ printf \rYou have %2d seconds to press Ctrl-C to abort... 2
You have  2 seconds to press Ctrl-C to abort...+ sleep 1
+ time=1
+ [ 1 -gt 0 ]
+ printf \rYou have %2d seconds to press Ctrl-C to abort... 1
You have  1 seconds to press Ctrl-C to abort...+ sleep 1
+ time=0
+ [ 0 -gt 0 ]
+ echo

+ set -x
+ [ -n  -o -n  ]
+ wait
+ error 1 Cannot start subshell.
+ local ecode=1
+ shift
+ echo Cannot start subshell.
Cannot start subshell.
+ exit 1
```

I even added a `set -x` but still can't figure out where it's failing.

Have you run it successfully?

My Chromebook is:

```
Version 42.0.2311.67 beta (64-bit)
Platform 6812.59.0 (Official Build) beta-channel falco
Firmware Google_Falco.4389.92.0
```

Thanx,
-DennisL
"
5241,Positive,"after reboot I still get

Kernel driver not installed (rc=-1908)

The VirtualBox Linux kernel driver (vboxdrv) is either not loaded or there
is a permission problem with /dev/vboxdrv. Please reinstall the kernel
module by executing

for $ sudo ls -al /etc/init.d/vboxdrv

i get

-rwxr-xr-x 1 root root 12629 May 30 10:03 /etc/init.d/vboxdrv

from your script I put in as requested...:)
now what?:)

On Thu, May 29, 2014 at 2:36 PM, divx118 notifications@github.com wrote:

> Oops sorry overlooked
> 
> (trusty)micber@localhost:~$ sudo /etc/init.d/vboxdrv setupsudo: /etc/init.d/vboxdrv: command not found
> 
> It seems you don't have the vboxdrv script in /etc/init.d it should be
> installed when installing virtualbox.
> 
> $ ls -al /etc/init.d/vboxdrv
> 
> Should give you something like
> 
> -rwxr-xr-x 1 root root 12629 Sep  6  2013 /etc/init.d/vboxdrv
> 
> If it is there and has not the execute bits set. Note if the x's are there
> or not.
> 
> then
> 
> $ sudo chmod +x /etc/init.d/vboxdrv
> 
> If it isn't there then create it and copy the contents from
> http://pastebin.com/raw.php?i=YdpdYKbi in the file.
> 
> After that you need to set the execution bit with
> 
> $ sudo chmod +x /etc/init.d/vboxdrv
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/dnschneid/crouton/issues/824#issuecomment-44567625.
"
5242,Positive,"@tedm, Yeah, I found alt-tab works (on utopic) from chrome to the chroot but not back; the 3-finger swipe works very well though - yay!
"
5243,Neutral,"Just to be sure: Did you install the virtualbox extension pack
https://www.virtualbox.org/wiki/Downloads

On Tue, Nov 17, 2015 at 6:47 PM, wb0gaz notifications@github.com wrote:

> I'm trying to use Crouton (on Acer C720) with Virtualbox to make an
> external USB device available to the Virtualbox guest (which is windows XP
> in this case.) I had not tried this before, but when I did, Virtualbox sees
> no USB devices, even though there is an external mouse and the other (USB
> modem) device attached. lsusb (done within the crouton environment) shows
> the mouse, USB modem, and a few other (internal to C720) devices present.
> 
> Is there something I need to do in crouton to expose USB devices to
> virtualbox?
> 
> Thank you!
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/dnschneid/crouton/issues/2245.
"
5244,Neutral,"@marcino239 There is quite a bit of functionality built into the driver stack on the chromebook, but it appears to be a reduced feature set (embedded maybe?) from the Jetson TK1 (there is no OpenGL 4.4 renderer as far as I can tell; only OpenGL 2.1 and GLES 3.x). I checked out the chromium sources using the release tag I was currently running but the kernel I built did not boot (I suspect my minimalistic boot configuration was missing _vital magic_. 

However, I was able to jam the ChromeOS X drivers into a Wheezy rootfs. I also ported Doom 3 to it for illustrative purposes:

http://youtu.be/2-wkdqZg8mM
"
5245,Neutral,"Oh, and if you install the extension and the extension target, you can switch via the extension's popup menu.
"
5246,Neutral,"Mint is Ubuntu based.....
"
5247,Neutral,"Try `sudo sh ~/Downloads/crouton -t,unity -u -n trusty`
"
5248,Neutral,"after
```
chronos@localhost / $ sudo enter-chroot
Entering /mnt/stateful_partition/crouton/chroots/xenial...
(xenial)andrew@localhost:~$ sudo chmod 666 /dev/tty0
[sudo] password for andrew: 
(xenial)andrew@localhost:~$ ls /dev/tty0 -lah
crw-rw-rw-. 1 root tty 4, 0 Jul 11 14:44 /dev/tty0
```
i get this: (EE) parse_vt_settings: Cannot open /dev/tty0 **(No such device or address)**
`sudo usermod -a -G tty andrew` also doesn't help"
5249,Neutral,"@EnderNightLord-ChromeBook .

Please try the methods mentioned here: [Common issues and reporting](https://github.com/dnschneid/crouton/wiki/Common-issues-and-reporting)
If that doesn't help then show us the output of: `sudo edit-chroot -all`
And provide more detail about your issue if possible.

-**DennisL**"
5250,Neutral,Also i have an Acer C720 Chromebook.
5251,Neutral,"@Fatal1ty93RUS it's weird issue that seems to affect certain chromebooks. You might able to use virtual keyboard to bypass this issues also if your touchpad didn't get effected.
"
5252,Neutral,"Try updating your chroot and using the `volume` command to adjust audio.  Installing pulseaudio may also help with some software that doesn't support alsa.
"
5253,Neutral,"Could be your ISP's IPv6 support. Depending, you can turn that off on your router and force apt-get to pull packages over v4. Had to do that for the initial install here (or switch to a v6 connection where Ubuntu's mirror was reachable), then configure apt afterward to only pull packages over v4. Which ISP are you on at home?"
5254,Positive,"XBMC will be tricky to get working with hardware acceleration on the Samsung ARM, but it should be doable as some people as using it on the Raspberry Pi...

I just tried to start it on `precise`, and it fails on startup (it says it needs OpenGL hardware acceleration), how did you even get it to start?

As far as I can tell, XBMC packaged with Ubuntu (and Arch) only comes with OpenGL support (`--enable-gl`), but the Samsung ARM does not have OpenGL support, only OpenGL ES. So you'd need to recompile it with `--enable-gles` (which apparently can take a very long time and a lot of memory).

You could try some prebuilt packages (maybe this one: http://michael.gorven.za.net/raspberrypi/xbmc, but it's a bit outdated now). Then copy over the OpenGL ES libraries from Chrome OS to the chroot (`/usr/lib/libEGL*.so*` and `/usr/lib/libGLES*.so*`, and maybe something in `/usr/lib/xorg/modules/`, I can help with more detailled instructions if you want to try this).

Not for the faint of heart I'm afraid ,-)

@dnschneid : We may want to disable XBMC by default on ARM... Same problem as gnome & cinnamon...
"
5255,Neutral,"Media devices by default are mounted noexec; try running `sudo mount -o remount,exec /media/your/sd/card`.
"
5256,Negative,"Unfortunately, mount-chroot results in the same ""mount: mount(2) failed:..."" error as before"
5257,Positive,"@Snowflake6,

[Vivid](https://wiki.ubuntu.com/Releases#line-76), a non-LTS release, was end-of-life'd on February 4, 2016

The [wiki](https://github.com/dnschneid/crouton/wiki/Upgrade-chroot-release) also mentioned using the ['Ubuntu's update manager'](https://www.ubuntu.com/download/desktop/upgrade). Maybe that method will still work for you.

_Hope this helps,_
-**DennisL**
"
5258,Neutral,"Ah i see, opinion wise stay on dev or go to stable? 
"
5259,Neutral,"What do you mean by ""messes up""?  Please post the output of `sude edit-chroot -al`
"
5260,Neutral,"Along those lines, maybe some of the targets (e.g.) core, x11, audio, gtk-extra, etc., that are required by certain others (e.g.) xfce, unity, xiwi, etc., could be excluded from the '-t list/help' output so not to confuse people when trying to choose targets/DEs.

Also, the removal of targets is a request that is being considered (https://github.com/dnschneid/crouton/issues/717) but is just a lower priority right now - I believe.
"
5261,Positive,"@cactuar I'm not sure what you want to do for display resolution though, try this inside the chroot:

```
xrandr --output eDP1 --scale 1x1 --fb 1920x1080 --panning 1920x1080
```

But I don't use Xiwi, so it might be different from X11/freon in various options.

In general, Modern Desktop Environments like Gnome, Unity, Kdesktop, and so, we won't suggest such X11 server-side-scaling for the purpose of ""font-scaling"". since these DEs have client-side ""font-scaling"" and ""HiDPI-scaling"" techniques already. So you should use them to get better readability on High resolution displays.

Regards.
"
5262,Neutral,"After running for a while, my X session fails and I see continuous errors in the console that I used with startxfce4:

find_shm: Error running helper.
write_image: Cannot find shm, moving on...
popen2: Failed to create pipe. (Too many open files)

Looking at the /proc filesystem, I see that croutonfbserver has over 2000 file descriptors in use, with nearly all being used for pipes
"
5263,Positive,"i wrote `-r sid -t gnome` because OP was using sid, but i really used `-r stretch -t gnome` because thats the release i wanted... I wonder now why it didnt work with sid... :)

and yeah, gnome crashes with a useless error... I dont know if this is debian's or crouton's fault...

in doubt i will blame gnome for such a useless error screen... I mean, you dont get whats wrong and you cant recover from it (they could use some basic templates and defaults to recover for whatever is failing)

im using semi successfully kde instead now :P
"
5264,Neutral,"Doesn't look like this is a real hot topic but I did manage to kludge together a script that does what I described above - I apologize in advance for my poor scripting... It's called 'startcr' and is available at http://pastebin.com/1qypUbNn
Check it out and see if it's anything like what we're after.
"
5265,Positive,"Hey, appreciate the input! Just curious, even if I enable the PC to be awake through the extension, does the screen at least turn off when I close the lid? As in, when I close the lid, I shouldn't see the light emitting from the screen in a dark room. 
"
5266,Positive,"Ooh, exciting.  Yes, this may very well be worth it.
"
5267,Positive,"When I try to mount the Windows 10 share I get:

```
mount: mount //192.168.0.110/Michel on /media/removable/Michel_32GB/sambamounts failed: Connection refused
```

Might be because of an SMB3 issue. Win 10 uses the SMB version 3.1.1 protocol, new versions of Samba support that (SMB is the protocol from Microsoft, Samba is the software/protocol in *NIX to access it).

Giving up for now. I can connect just fine w/ Linux shares. To connect from Crouton to Windows I think I'll just run ye' ol' insecure FTP server from Win 10.

Thanks everybody for the help! :-)
"
5268,Neutral,"i have a chromebook flip
"
5269,Neutral,"Ah, which line in particular?

The framedropping may actually be due to Chromium OS's compositor more than the extension/framebuffer...

If you could look at `top` while playing a video fullscreen it would be useful to know where the CPU is going.
"
5270,Positive,"Or just leave another comment--wasn't sure if it would stop any more comments once closed ;D
"
5271,Neutral,"this is off topic of this but similar, anyone know the full size of the chroot download?
"
5272,Positive,"Turns out it was my .profile something went wrong in there what i did to fix it was copy the default profile from skel inside the chroot to the home folder of my chroot! I was messing around with paths trying to get familiar with linux, I had no idea when I had quit my last session that it was broken.  What led me to think it was the .profile is when i ran ""enter-chroot"" stated something was wrong with .profile. I appreciate you helping me diagnose this."
5273,Neutral,"Could you please try the following:

```
sudo enter-chroot -u root sed -i '/AutoAddDevices/aOption ""AutoAddGPU"" ""false""' /etc/crouton/xorg-dummy.conf
```

and try xiwi again?
"
5274,Neutral,"@DennisLfromGA: crouton doesn't let you mount an encrypted chroot without setting a dev password.

@clodben: it sounds like your Chromium OS root password isn't what you think it is; had your friend set one earlier?  Can you run `sudo -i` from crosh?  If you cannot, and your friend doesn't know what the password might be, then I'm afraid there's no way to get root on the system to run chroot stuff.  You'll need to wipe the machine to get root access again (either powerwash from advanced settings, or switch into verified mode and back).
"
5275,Neutral,"I think you posted in the wrong issue tracker this is for crouton on chromebooks. please close this one thanks.
"
5276,Negative,"Hi,

I know both of those, however, I think you misunderstood what I am asking unless I am missing something.

The VT2 relates to Chromium and not to the installed via crouton linuxes. If it does work for the latter I have no idea how to log in on the specific machine without X.
"
5277,Positive,"It's a good idea to update crouton and your chroot after a Chrome OS update.
Follow this guide: https://github.com/dnschneid/crouton/wiki/Common-issues-and-reporting
"
5278,Neutral,"@blydro I have the same issue as you:

> Problem is, sudo xinit unitygives me an xterm full of errors.
"
5279,Neutral,"@SnarkBoojum This should work for everything, as xfsettingsd manually sets the keyboard layout for your X Session. It isn't defined per app.
It should work with emacs, trying now
"
5280,Positive,"Will do!!
"
5281,Neutral,"Ok. So you did set a password in Chrome OS. crouton only asks you to set one _if_ you enable encryption (`-e` at install time).

Pressing Ctrl-C when asked to set the password, or setting it to an empty string, will prevent you from login as root again (the Ctrl-C bug was fixed in Chromium OS build >=5875 (current beta/dev channel)).

I'm sorry but the only way to recover from that is a powerwash. You will not be able to backup your chroot using `edit-chroot`, however you should be able to recover files in your chroot home directory (`/usr/local/chroots/yourchrootname/home/yourusername`).
"
5282,Neutral,"If i update with sudo sh -e ~/Downloads/crouton -u -n precise i got this message:

""The following packages have unmet dependencies:
 libsbc-dev : Depends: libsbc1 (= 1.1-1) but 1.1-2 is to be installed
E: Unable to correct problems, you have held broken packages.
Failed to complete chroot setup.
Unmounting /usr/local/chroots/precise...""
"
5283,Positive,"@mark-hahn I just tried this and it's beautiful! Might even tempt me away from my current setup (which is basically like yours, except using vim in a crosh shell instead of Atom).

Out of curiosity are you setting `require('web-frame').setZoomFactor(2)` in your `.atom/init.coffee` file? For me it's a big visual improvement and now the only minor annoyance is the mouse cursor in the xiwi window looks fuzzy in comparison to the crisp text!
"
5284,Neutral,"I use objectivefs which provides a FUSE file system to the cloud.  It is
great for large storage since it is backed by AWS or other cloud storage.
There is no local directory like dropbox and many other cloud solutions.

The only drawback is that it costs money, $7/mount/month.  You could back
up crouton and everything else for $7/mo.

On Thu, Oct 8, 2015 at 8:08 AM, brmbrmcar notifications@github.com wrote:

> I know it would be hard, but sometimes there is not enough room on the
> computer for a backup.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/dnschneid/crouton/issues/2173.
"
5285,Negative,"I ran `12-edit-chroot` again with the 'editfix` branch changes this time and it was successful.

```
394 [t] Expecting 'grep ^release: wheezy' to succeed
394 [t] LAUNCHING: edit-chroot -al
394 [e] Entering /usr/local/test-20141010144049 prefix/12-edit-chroot.oFT/chroots/wheezy...
395 [e] Unmounting /usr/local/test-20141010144049 prefix/12-edit-chroot.oFT/chroots/wheezy...
396 [t] PASS: edit-chroot -al
396 [i] release: wheezy
396 [t] PASS: 'grep ^release: wheezy' succeeded
```

Just wondering if it fails for you every time or if it was a one-off error possibly???
"
5286,Positive,Ok i powerwashed it again (even though i have done it multipule times) and finally it works!!!! Thanks for the help!!
5287,Neutral,"You can check if you have the same problem by entering the following command in cross shell.

`chronos@localhost / $ cat /sbin/session_manager_setup.sh | grep USER`

You get something like:

```
XUSER=root
xstart.sh ${XUSER} ${XTTY} ${XAUTH_FILE} &
export USER=chronos
export DATA_DIR=/home/${USER}
export LOGNAME=${USER}
""$(sudo -u ${USER} /bin/mktemp -d /tmp/.ibus-socket-XXXXXXXXXX)\
mkdir -p ${DATA_DIR} && chown ${USER}:${USER} ${DATA_DIR}
mkdir -p ${HOME} && chown ${USER}:${USER} ${HOME}
chown ${USER}:${USER} ${LOGIN_PROFILE_DIR}
USER_ID=$(id -u ${USER})
  CONSENT_USER_GROUP=$(stat -c %U:%G ""$CONSENT_FILE"")
  if [ ""$CONSENT_USER_GROUP"" = ""root:root"" ]; then
# Create the XAUTHORITY file so ${USER} can access the X server.
cp -f ${XAUTH_FILE} ${XAUTHORITY} && chown ${USER}:${USER} ${XAUTHORITY}
exec /sbin/session_manager --uid=${USER_ID} ${KILL_TIMEOUT_FLAG} \
```

If you get ""XUSER=xorg"" instead of ""XUSER=root"" then they start the X server as a normal user and you would have the same issue.
On my Falco they still start it as root with the newest update from 9 jan 2014.

```
Version 32.0.1700.95 beta
Platform 4920.71.0 (Official Build) beta-channel falco
Firmware Google_Falco.4389.78.0
```
"
5288,Neutral,"Don't select it from within Chrome or the Files app, it has to be invoked in a terminal like I detailed above.
It might be a good idea to first review the README, especially the part about '[Usage](https://github.com/dnschneid/crouton#usage)'.
"
5289,Neutral,"i didn't put the quotes there
"
5290,Positive,"Running 'crouton' or something like it in a container has been discussed somewhat here: LXC containers? #364.
It is indeed a _very_ interesting concept and one I believe could be done but it would probably take a lot of time and effort.
"
5291,Positive,"@artemkolotilkin, thanks for offering to help.  As far as I can tell, the main remaining, perplexing issue is that gconf seems to be behaving differently when indirectly launched via a DM (be it lightdm or gdm) than it does when launched via xinit, which transitively makes gnome-session behave strangely.  gconf is not properly pulling in the systemwide default values for items.  Here's what I think the next things to try would be:
1. Grab the crouton-desktops build from #61.  Be aware that the crouton used in there is quite old, so when you use it, specify a different prefix (i.e. `-p /usr/local/desktops` or something).
2. Install the ubuntu target to a chroot: `sudo sh -e crouton-desktop -p /usr/local/desktops -t ubuntu`.
3. Use `sudo sh -e /usr/local/desktops/startdm` to start lightdm, and log into a unity session.
4. Use ps and /proc/pid/environ and whatnot to check the gnome-session and gconfd (is that right?) processes, in particular launch command line and environment variables.
5. Do the exact same thing but using the latest crouton creating a unity chroot and launching with startunity.  There won't be a gnome-session process, but there will be a gconfd process (I think).
6. Report back on differences and we can see what to try from there.
"
5292,Neutral,"No, it seems like you're OK on that front.  Can you launch chrome from the applications menu?
"
5293,Neutral,"'`xmethod: xorg`' looks strange to me, I thought ARMs were now using '`xiwi`' but I may be wrong.
"
5294,Neutral,"You also need to specify your chroot name when doing the upgrade.  So for Trusty, this would be:

sudo sh ~/Downloads/crouton -u -n trusty
"
5295,Negative,"BTW, I learned that running ""sudo initctl stop update-engine"" within Crosh -> shell (i.e., the Chrome OS bash shell) will stop Google from updating Chrome OS.  This seems like useful information that ought might be helpful if put on the website or wiki somewhere, if not already.  My setup was just fine, and Google breaking my Crouton and keyboard setup took quite some time to resolve (hours), time that I really did not have.

I'm very tired of the ""update rat race"" on nearly all the platforms I use (i.e., primarily Ubuntu, iOS, Android, and ChromeOS [only in service of Crouton]).  I suspect others are, too, so knowing how to stop Google from forcing ChromeOS updates that might break their Crouton is something other users may well want to know how to do.
"
5296,Negative,"PLEASE HELP!!!!!! So i downloaded crouton xfce onto my acer c720 last night and it worked perfect. i shut my device off and went to bed. When i woke uo my computer was as it was before i did everything. So i did the key pad entry CTRL+ALT+FRWD and it sent me to a black screen. I remember it was CTRL+ALT+REFRESH instead. So that is what i did. Now it is asking me for my local host login. i put in what i thought it was pressed enter and it is now asking for my password. i typed in a possible password but it keeps saying login incorrect. i tried all possible passwords but it is not working. WHAT NOW?????? 
https://github.com/dnschneid please help
"
5297,Neutral,"@rubanunes,

If you're referring to updating the chroot on external media, then, yes, it needs a path.
You can do that with crouton's '-p' option:

`-p PREFIX   The root directory in which to install the bin and chroot
                subdirectories and data.
                Default: /usr/local, with /usr/local/chroots linked to
                /mnt/stateful_partition/crouton/chroots.`

Something like:

`sudo sh ~/Downloads/crouton -p /path/to/external/media -t xorg -n trusty -u`

---

If you're talking about launching a target/DE, I believe if you don't specify the chrootname, it will launch the alphabetically first chroot it finds with the specified target. You can also use the '-c' option to help find it:

`-c CHROOTS  Directory the chroots are in. Default: /mnt/stateful_partition/crouton/chroots`

So for unity, for example, you would use:

`sudo startunity -c /path/to/external/media/chroots`

Another way to start unity, for example, is to give it the full path:

`sudo /path/to/external/media/bin/startunity`

Then it will find the chroot automagically.

---

BTW, the 'x11_freon' branch mentioned above is already merged so you're good to go.
"
5298,Positive,"keyboardsurfer/crouton appears to related to context sensitive notifications for android...are you perhaps replying to the wrong message? :)
"
5299,Neutral,"Understood. We have a fallback mechanism for this case (I have no idea why @tedm and myself are not having that problem), but the fallback is currently broken.

#742 will fix the problem once it's merged.
"
5300,Neutral,"Any idea what it's supposed to be with an Apple wired keyboard plugged in?
"
5301,Neutral,"powerd stop/waiting
/usr/bin/startxfce4: Starting X server

Xephyr cannot open host display. Is DISPLAY set?
XIO:  fatal IO error 2 (No such file or directory) on X server "":0""
      after 39 requests (39 known processed) with 0 events remaining.
"
5302,Neutral,"Hey firestar what do you mean when you say copy this one all together I really want to get Minecraft on my chrome book and I want to know how thanks
"
5303,Positive,"I was having the same exact problem. danielpyon's post fixed it for me. Thank you so much. 
"
5304,Negative,"Really sorry about that (I've screwed the trackpad/mouse heuristic up once before as well).  I've just pushed a fix that should be solid; please try it out.
"
5305,Positive,"@hylkevdveen,

> I enter the exact same code I did before, and get this message:

> Before that line of code I wrote this line, does it have anything to do with it?

Maybe not quite the *exact* same code, you're missing the '**sudo**' prefix -

**`sudo`**`sh ~/Downloads/crouton -t kde`

*Hope this helps,*
-**DennisL**"
5306,Neutral,"More folks reported the same issue here:
https://plus.sandbox.google.com/communities/109120069102230291151/stream/ce07a950-06cb-457e-bf34-de090784cba5

Some reported that running another crouton update has fixed their issues.
So I ran the crouton update again:
sudo sh ~/Downloads/crouton -u -n jessie
but I am still having the same issue. Switching into xfce4+jessie I don't get a desktop and also makes ChromeOS unresponsive when switching back.

Somehow I got out of the hanging X session without rebooting and was able to extract my latest Xorg logs:

[    69.953] _XSERVTransmkdir: ERROR: euid != 0,directory /tmp/.X11-unix will not be created.
[    69.955] 
X.Org X Server 1.16.4
Release Date: 2014-12-20
[    69.955] X Protocol Version 11, Revision 0
[    69.955] Build Operating System: Linux 3.16.0-4-amd64 x86_64 Debian
[    69.955] Current Operating System: Linux localhost 3.14.0 #1 SMP Mon Apr 27 10:23:56 PDT 2015 x86_64
[    69.955] Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=af73701b-eb65-e048-9d50-c9064af03b17/PARTNROFF=1 hashtree=PARTUUID=af73701b-eb65-e048-9d50-c9064af03b17/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=e63d47dc85c3a8cb79fbff98ae60210b419c2c44 salt=6b7cb30189f066f23ca83e3191b8f51633a53af345c25900794647ca001c6da6"" noinitrd vt.global_cursor_default=0 kern_guid=af73701b-eb65-e048-9d50-c9064af03b17 add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic  
[    69.955] Build Date: 11 February 2015  12:32:02AM
[    69.955] xorg-server 2:1.16.4-1 (http://www.debian.org/support) 
[    69.955] Current version of pixman: 0.32.6
[    69.955]    Before reporting problems, check http://wiki.x.org
    to make sure that you have the latest version.
[    69.955] Markers: (--) probed, (**) from config file, (==) default setting,
    (++) from command line, (!!) notice, (II) informational,
    (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
[    69.955](++) Log file: ""/tmp/Xorg.crouton.1.log"", Time: Thu Apr 30 09:02:11 2015
[    69.961](==) Using system config directory ""/usr/share/X11/xorg.conf.d""
[    69.964](==) No Layout section.  Using the first Screen section.
[    69.964](==) No screen section available. Using defaults.
[    69.964](**) |-->Screen ""Default Screen Section"" (0)
[    69.964](**) |   |-->Monitor ""<default monitor>""
[    69.965](==) No device specified for screen ""Default Screen Section"".
    Using the first device section listed.
[    69.965](**) |   |-->Device ""Intel Graphics SNA+TearFree""
[    69.965](==) No monitor specified for screen ""Default Screen Section"".
    Using a default monitor configuration.
[    69.965](==) Automatically adding devices
[    69.965](==) Automatically enabling devices
[    69.965](==) Automatically adding GPU devices
[    69.967](WW) The directory ""/usr/share/fonts/X11/cyrillic"" does not exist.
[    69.967]    Entry deleted from font path.
[    69.969](==) FontPath set to:
    /usr/share/fonts/X11/misc,
    /usr/share/fonts/X11/100dpi/:unscaled,
    /usr/share/fonts/X11/75dpi/:unscaled,
    /usr/share/fonts/X11/Type1,
    /usr/share/fonts/X11/100dpi,
    /usr/share/fonts/X11/75dpi,
    built-ins
[    69.969](==) ModulePath set to ""/usr/lib/xorg/modules""
[    69.969](II) The server relies on udev to provide the list of input devices.
    If no devices become available, reconfigure udev or disable AutoAddDevices.
[    69.969](II) Loader magic: 0x7fe559f92d80
[    69.969](II) Module ABI versions:
[    69.969]    X.Org ANSI C Emulation: 0.4
[    69.969]    X.Org Video Driver: 18.0
[    69.969]    X.Org XInput driver : 21.0
[    69.969]    X.Org Server Extension : 8.0
[    69.970](--) PCI:x(0:0:2:0) 8086:1616:8086:1616 rev 9, Mem @ 0xe0000000/16777216, 0xd0000000/268435456, I/O @ 0x00001800/64
[    69.970](II) LoadModule: ""glx""
[    69.971](II) Loading /usr/lib/xorg/modules/extensions/libglx.so
[    69.979](II) Module glx: vendor=""X.Org Foundation""
[    69.979]    compiled for 1.16.4, module version = 1.0.0
[    69.979]    ABI class: X.Org Server Extension, version 8.0
[    69.979](==) AIGLX enabled
[    69.979](II) LoadModule: ""intel""
[    69.980](II) Loading /usr/lib/xorg/modules/drivers/intel_drv.so
[    69.983](II) Module intel: vendor=""X.Org Foundation""
[    69.983]    compiled for 1.15.99.904, module version = 2.21.15
[    69.983]    Module class: X.Org Video Driver
[    69.983]    ABI class: X.Org Video Driver, version 18.0
[    69.983](II) intel: Driver for Intel(R) Integrated Graphics Chipsets:
    i810, i810-dc100, i810e, i815, i830M, 845G, 854, 852GM/855GM, 865G,
    915G, E7221 (i915), 915GM, 945G, 945GM, 945GME, Pineview GM,
    Pineview G, 965G, G35, 965Q, 946GZ, 965GM, 965GME/GLE, G33, Q35, Q33,
    GM45, 4 Series, G45/G43, Q45/Q43, G41, B43, HD Graphics,
    HD Graphics 2000, HD Graphics 3000, HD Graphics 2500,
    HD Graphics 4000, HD Graphics P4000, HD Graphics 4600,
    HD Graphics 5000, HD Graphics P4600/P4700, Iris(TM) Graphics 5100,
    HD Graphics 4400, HD Graphics 4200, Iris(TM) Pro Graphics 5200
[    69.983](--) using VT number 7

[    69.989] xf86EnableIOPorts: failed to set IOPL for I/O (Operation not permitted)
[    69.990](II) intel(0): SNA compiled: xserver-xorg-video-intel 2:2.21.15-2+b2 (amd64 Build Daemon (binet) buildd-binet@buildd.debian.org)
[    69.991](WW) VGA arbiter: cannot open kernel arbiter, no multi-card support
[    69.991](II) intel(0): Creating default Display subsection in Screen section
    ""Default Screen Section"" for depth/fbbpp 24/32
[    69.991](==) intel(0): Depth 24, (--) framebuffer bpp 32
[    69.991](==) intel(0): RGB weight 888
[    69.991](==) intel(0): Default visual is TrueColor
[    69.991](**) intel(0): Option ""AccelMethod"" ""sna""
[    69.991](**) intel(0): Option ""TearFree"" ""true""
[    69.991](WW) intel(0): Unknown chipset
[    69.991](--) intel(0): CPU: x86-64, sse2, sse3, ssse3, sse4.1, sse4.2, avx, avx2
[    69.991](**) intel(0): Framebuffer tiled
[    69.991](**) intel(0): Pixmaps tiled
[    69.991](**) intel(0): ""Tear free"" enabled
[    69.991](**) intel(0): Forcing per-crtc-pixmaps? no
[    69.992](II) intel(0): Output eDP1 has no monitor section
[    69.993](--) intel(0): found backlight control interface intel_backlight (type 'raw')
[    69.993](II) intel(0): Output HDMI1 has no monitor section
[    69.993](--) intel(0): Output eDP1 using initial mode 1366x768 on pipe 0
[    69.993](==) intel(0): DPI set to (96, 96)
[    69.993](II) Loading sub module ""dri2""
[    69.993](II) LoadModule: ""dri2""
[    69.993](II) Module ""dri2"" already built-in
[    69.993](==) Depth 24 pixmap format is 32 bpp
[    69.994](II) intel(0): SNA initialized with generic backend
[    69.994](==) intel(0): Backing store enabled
[    69.994](==) intel(0): Silken mouse enabled
[    69.995](II) intel(0): HW Cursor enabled
[    69.995](II) intel(0): RandR 1.2 enabled, ignore the following RandR disabled message.
[    69.996](EE) intel(0): failed to open /sys/class/backlight/intel_backlight/brightness for backlight control: Permission denied
[    69.996](EE) intel(0): failed to open /sys/class/backlight/intel_backlight/brightness for backlight control: Permission denied
[    69.996](==) intel(0): DPMS enabled
[    69.996](II) intel(0): Textured video not supported on this hardware
[    69.996](II) intel(0): [DRI2] Setup complete
[    69.996](II) intel(0): [DRI2]   DRI driver: i965
[    69.996](II) intel(0): direct rendering: DRI2 Enabled
[    69.996](==) intel(0): hotplug detection: ""enabled""
[    69.997](--) RandR disabled
[    70.005](II) SELinux: Disabled on system
[    70.036](II) AIGLX: enabled GLX_MESA_copy_sub_buffer
[    70.036](II) AIGLX: enabled GLX_ARB_create_context
[    70.036](II) AIGLX: enabled GLX_ARB_create_context_profile
[    70.036](II) AIGLX: enabled GLX_EXT_create_context_es2_profile
[    70.036](II) AIGLX: enabled GLX_INTEL_swap_event
[    70.036](II) AIGLX: enabled GLX_SGI_swap_control and GLX_MESA_swap_control
[    70.036](II) AIGLX: enabled GLX_EXT_framebuffer_sRGB
[    70.036](II) AIGLX: enabled GLX_ARB_fbconfig_float
[    70.036](II) AIGLX: GLX_EXT_texture_from_pixmap backed by buffer objects
[    70.036](II) AIGLX: enabled GLX_ARB_create_context_robustness
[    70.036](II) AIGLX: Loaded and initialized i965
[    70.036](II) GLX: Initialized DRI2 GL provider for screen 0
[    70.037](II) intel(0): switch to mode 1366x768@60.0 on pipe 0 using eDP1, position (0, 0), rotation normal
[    75.721](II) intel(0): Setting screen physical size to 361 x 203
[    75.798](II) config/udev: Adding input device Power Button (/dev/input/event2)
[    75.798](**) Power Button: Applying InputClass ""evdev keyboard catchall""
[    75.798](II) LoadModule: ""evdev""
[    75.798](II) Loading /usr/lib/xorg/modules/input/evdev_drv.so
[    75.800](II) Module evdev: vendor=""X.Org Foundation""
[    75.800]    compiled for 1.16.0, module version = 2.9.0
[    75.800]    Module class: X.Org XInput Driver
[    75.800]    ABI class: X.Org XInput driver, version 21.0
[    75.800](II) Using input driver 'evdev' for 'Power Button'
[    75.800](**) Power Button: always reports core events
[    75.800](**) evdev: Power Button: Device: ""/dev/input/event2""
[    75.800](--) evdev: Power Button: Vendor 0 Product 0x1
[    75.800](--) evdev: Power Button: Found keys
[    75.800](II) evdev: Power Button: Configuring as keyboard
[    75.800](**) Option ""config_info"" ""udev:/sys/devices/LNXSYSTM:00/LNXPWRBN:00/input/input2/event2""
[    75.800](II) XINPUT: Adding extended input device ""Power Button"" (type: KEYBOARD, id 6)
[    75.800](**) Option ""xkb_rules"" ""evdev""
[    75.800](**) Option ""xkb_model"" ""pc104""
[    75.800](**) Option ""xkb_layout"" ""us""
[    75.817](II) config/udev: Adding input device Power Button (/dev/input/event1)
[    75.817](**) Power Button: Applying InputClass ""evdev keyboard catchall""
[    75.817](II) Using input driver 'evdev' for 'Power Button'
[    75.817](**) Power Button: always reports core events
[    75.818](**) evdev: Power Button: Device: ""/dev/input/event1""
[    75.818](--) evdev: Power Button: Vendor 0 Product 0x1
[    75.818](--) evdev: Power Button: Found keys
[    75.818](II) evdev: Power Button: Configuring as keyboard
[    75.818](**) Option ""config_info"" ""udev:/sys/devices/LNXSYSTM:00/device:00/PNP0C0C:00/input/input1/event1""
[    75.818](II) XINPUT: Adding extended input device ""Power Button"" (type: KEYBOARD, id 7)
[    75.818](**) Option ""xkb_rules"" ""evdev""
[    75.818](**) Option ""xkb_model"" ""pc104""
[    75.818](**) Option ""xkb_layout"" ""us""
[    75.818](II) config/udev: Adding input device Lid Switch (/dev/input/event0)
[    75.818](II) No input driver specified, ignoring this device.
[    75.818](II) This device may have been added with another device file.
[    75.818](II) config/udev: Adding drm device (/dev/dri/card0)
[    75.818](II) xfree86: Adding drm device (/dev/dri/card0)
[    75.818](EE) /dev/dri/card0: failed to set DRM interface version 1.4: Permission denied
[    75.818](II) config/udev: Adding input device HDA Intel HDMI HDMI/DP,pcm=3 (/dev/input/event7)
[    75.818](II) No input driver specified, ignoring this device.
[    75.818](II) This device may have been added with another device file.
[    75.818](II) config/udev: Adding input device HDA Intel HDMI HDMI/DP,pcm=7 (/dev/input/event6)
[    75.818](II) No input driver specified, ignoring this device.
[    75.818](II) This device may have been added with another device file.
[    75.819](II) config/udev: Adding input device HDA Intel HDMI HDMI/DP,pcm=8 (/dev/input/event5)
[    75.819](II) No input driver specified, ignoring this device.
[    75.819](II) This device may have been added with another device file.
[    75.819](II) config/udev: Adding input device HDA Intel PCH Mic (/dev/input/event9)
[    75.819](II) No input driver specified, ignoring this device.
[    75.819](II) This device may have been added with another device file.
[    75.819](II) config/udev: Adding input device HDA Intel PCH Headphone (/dev/input/event8)
[    75.819](II) No input driver specified, ignoring this device.
[    75.819](II) This device may have been added with another device file.
[    75.819](II) config/udev: Adding input device Elan Touchpad (/dev/input/event4)
[    75.819](**) Elan Touchpad: Applying InputClass ""evdev touchpad catchall""
[    75.819](**) Elan Touchpad: Applying InputClass ""touchpad catchall""
[    75.819](**) Elan Touchpad: Applying InputClass ""Default clickpad buttons""
[    75.819](II) LoadModule: ""synaptics""
[    75.819](II) Loading /usr/lib/xorg/modules/input/synaptics_drv.so
[    75.820](II) Module synaptics: vendor=""X.Org Foundation""
[    75.820]    compiled for 1.16.0.901, module version = 1.8.99
[    75.820]    Module class: X.Org XInput Driver
[    75.820]    ABI class: X.Org XInput driver, version 21.0
[    75.820](II) Using input driver 'synaptics' for 'Elan Touchpad'
[    75.820](**) Elan Touchpad: always reports core events
[    75.820](**) Option ""Device"" ""/dev/input/event4""
[    75.930](II) synaptics: Elan Touchpad: found clickpad property
[    75.930](--) synaptics: Elan Touchpad: x-axis range 0 - 2758 (res 31)
[    75.930](--) synaptics: Elan Touchpad: y-axis range 0 - 1500 (res 31)
[    75.930](--) synaptics: Elan Touchpad: pressure range 0 - 255
[    75.930](--) synaptics: Elan Touchpad: finger width range 0 - 15
[    75.930](--) synaptics: Elan Touchpad: buttons: left double triple
[    75.930](--) synaptics: Elan Touchpad: Vendor 0 Product 0
[    75.930](**) Option ""SoftButtonAreas"" ""50% 0 82% 0 0 0 0 0""
[    75.930](--) synaptics: Elan Touchpad: touchpad found
[    75.930](**) Elan Touchpad: always reports core events
[    75.999](**) Option ""config_info"" ""udev:/sys/devices/pci0000:00/INT3432:00/i2c-0/i2c-ELAN0000:00/input/input4/event4""
[    75.999](II) XINPUT: Adding extended input device ""Elan Touchpad"" (type: TOUCHPAD, id 8)
[    75.999](**) synaptics: Elan Touchpad: (accel) MinSpeed is now constant deceleration 2.5
[    75.999](**) synaptics: Elan Touchpad: (accel) MaxSpeed is now 1.75
[    75.999](**) synaptics: Elan Touchpad: (accel) AccelFactor is now 0.064
[    75.999](**) Elan Touchpad: (accel) keeping acceleration scheme 1
[    75.999](**) Elan Touchpad: (accel) acceleration profile 1
[    75.999](**) Elan Touchpad: (accel) acceleration factor: 2.000
[    75.999](**) Elan Touchpad: (accel) acceleration threshold: 4
[    75.999](--) synaptics: Elan Touchpad: touchpad found
[    75.999](II) config/udev: Adding input device AT Translated Set 2 keyboard (/dev/input/event3)
[    75.999](**) AT Translated Set 2 keyboard: Applying InputClass ""evdev keyboard catchall""
[    75.999](II) Using input driver 'evdev' for 'AT Translated Set 2 keyboard'
[    75.999](**) AT Translated Set 2 keyboard: always reports core events
[    75.999](**) evdev: AT Translated Set 2 keyboard: Device: ""/dev/input/event3""
[    75.999](--) evdev: AT Translated Set 2 keyboard: Vendor 0x1 Product 0x1
[    75.999](--) evdev: AT Translated Set 2 keyboard: Found keys
[    75.999](II) evdev: AT Translated Set 2 keyboard: Configuring as keyboard
[    75.999](**) Option ""config_info"" ""udev:/sys/devices/platform/i8042/serio0/input/input3/event3""
[    75.999](II) XINPUT: Adding extended input device ""AT Translated Set 2 keyboard"" (type: KEYBOARD, id 9)
[    75.999](**) Option ""xkb_rules"" ""evdev""
[    75.999](**) Option ""xkb_model"" ""pc104""
[    75.999](**) Option ""xkb_layout"" ""us""
[    76.000](II) config/udev: Adding drm device (/dev/dri/card1)
[    76.000](II) xfree86: Adding drm device (/dev/dri/card1)
[    76.000](II) LoadModule: ""modesetting""
[    76.000](WW) Warning, couldn't open module modesetting
[    76.000](II) UnloadModule: ""modesetting""
[    76.000](II) Unloading modesetting
[    76.000](EE) Failed to load module ""modesetting"" (module does not exist, 0)
[    76.000] xf86: found device 0
[    76.409](II) intel(0): EDID vendor ""CMN"", prod id 4402
[    76.409](II) intel(0): Printing DDC gathered Modelines:
[    76.409](II) intel(0): Modeline ""1366x768""x0.0   76.42  1366 1502 1532 1592  768 776 788 800 -hsync -vsync (48.0 kHz eP)
[    76.577](II) intel(0): EDID vendor ""CMN"", prod id 4402
[    76.577](II) intel(0): Printing DDC gathered Modelines:
[    76.577](II) intel(0): Modeline ""1366x768""x0.0   76.42  1366 1502 1532 1592  768 776 788 800 -hsync -vsync (48.0 kHz eP)
[    76.578](II) intel(0): EDID vendor ""CMN"", prod id 4402
[    76.578](II) intel(0): Printing DDC gathered Modelines:
[    76.578](II) intel(0): Modeline ""1366x768""x0.0   76.42  1366 1502 1532 1592  768 776 788 800 -hsync -vsync (48.0 kHz eP)
(EE) [mi] EQ overflowing.  Additional events will be discarded until existing events are processed.
(EE) 
(EE) Backtrace:
(EE) 0: /usr/bin/Xorg (xorg_backtrace+0x56) [0x7fe559d0bd46](EE) 1: /usr/bin/Xorg (mieqEnqueue+0x24b) [0x7fe559cecc9b](EE) 2: /usr/bin/Xorg (QueuePointerEvents+0x52) [0x7fe559bc3e12](EE) 3: /usr/bin/Xorg (xf86PostMotionEvent+0xd6) [0x7fe559bfadc6](EE) 4: /usr/lib/xorg/modules/input/synaptics_drv.so (0x7fe551184000+0x5338) [0x7fe551189338](EE) 5: /usr/lib/xorg/modules/input/synaptics_drv.so (0x7fe551184000+0x74b2) [0x7fe55118b4b2](EE) 6: /usr/bin/Xorg (0x7fe559b55000+0x95918) [0x7fe559bea918](EE) 7: /usr/bin/Xorg (0x7fe559b55000+0xbfbe9) [0x7fe559c14be9](EE) 8: /lib/x86_64-linux-gnu/libc.so.6 (0x7fe557647000+0x35180) [0x7fe55767c180](EE) 9: /lib/x86_64-linux-gnu/libc.so.6 (ioctl+0x7) [0x7fe557725be7](EE) 10: /usr/local/lib/croutonfreon.so (ioctl+0x153) [0x7fe559730d4a](EE) 11: /usr/lib/x86_64-linux-gnu/libdrm.so.2 (drmIoctl+0x28) [0x7fe558a02768](EE) 12: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x264b9) [0x7fe553a774b9](EE) 13: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x347d3) [0x7fe553a857d3](EE) 14: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x59d3f) [0x7fe553aaad3f](EE) 15: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x487df) [0x7fe553a997df](EE) 16: /usr/bin/Xorg (BlockHandler+0x4a) [0x7fe559bb0f2a](EE) 17: /usr/bin/Xorg (WaitForSomething+0x132) [0x7fe559d08f62](EE) 18: /usr/bin/Xorg (0x7fe559b55000+0x57211) [0x7fe559bac211](EE) 19: /usr/bin/Xorg (0x7fe559b55000+0x5b596) [0x7fe559bb0596](EE) 20: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xf5) [0x7fe557668b45](EE) 21: /usr/bin/Xorg (0x7fe559b55000+0x4590e) [0x7fe559b9a90e](EE) 
(EE) [mi] These backtraces from mieqEnqueue may point to a culprit higher up the stack.
(EE) [mi] mieq is _NOT_ the cause.  It is a victim.
(EE) [mi] EQ overflow continuing.  100 events have been dropped.
(EE) 
(EE) Backtrace:
(EE) 0: /usr/bin/Xorg (xorg_backtrace+0x56) [0x7fe559d0bd46](EE) 1: /usr/bin/Xorg (QueuePointerEvents+0x52) [0x7fe559bc3e12](EE) 2: /usr/bin/Xorg (xf86PostMotionEvent+0xd6) [0x7fe559bfadc6](EE) 3: /usr/lib/xorg/modules/input/synaptics_drv.so (0x7fe551184000+0x5338) [0x7fe551189338](EE) 4: /usr/lib/xorg/modules/input/synaptics_drv.so (0x7fe551184000+0x74b2) [0x7fe55118b4b2](EE) 5: /usr/bin/Xorg (0x7fe559b55000+0x95918) [0x7fe559bea918](EE) 6: /usr/bin/Xorg (0x7fe559b55000+0xbfbe9) [0x7fe559c14be9](EE) 7: /lib/x86_64-linux-gnu/libc.so.6 (0x7fe557647000+0x35180) [0x7fe55767c180](EE) 8: /lib/x86_64-linux-gnu/libc.so.6 (ioctl+0x7) [0x7fe557725be7](EE) 9: /usr/local/lib/croutonfreon.so (ioctl+0x153) [0x7fe559730d4a](EE) 10: /usr/lib/x86_64-linux-gnu/libdrm.so.2 (drmIoctl+0x28) [0x7fe558a02768](EE) 11: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x264b9) [0x7fe553a774b9](EE) 12: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x347d3) [0x7fe553a857d3](EE) 13: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x59d3f) [0x7fe553aaad3f](EE) 14: /usr/lib/xorg/modules/drivers/intel_drv.so (0x7fe553a51000+0x487df) [0x7fe553a997df](EE) 15: /usr/bin/Xorg (BlockHandler+0x4a) [0x7fe559bb0f2a](EE) 16: /usr/bin/Xorg (WaitForSomething+0x132) [0x7fe559d08f62](EE) 17: /usr/bin/Xorg (0x7fe559b55000+0x57211) [0x7fe559bac211](EE) 18: /usr/bin/Xorg (0x7fe559b55000+0x5b596) [0x7fe559bb0596](EE) 19: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xf5) [0x7fe557668b45](EE) 20: /usr/bin/Xorg (0x7fe559b55000+0x4590e) [0x7fe559b9a90e](EE) 
[   110.704] [mi] Increasing EQ size to 1024 to prevent dropped events.
[   110.705] [mi] EQ processing has resumed after 185 dropped events.
[   110.705] [mi] This may be caused my a misbehaving driver monopolizing the server's resources.
[   170.107](II) AIGLX: Suspending AIGLX clients for VT switch
[   176.746](II) evdev: AT Translated Set 2 keyboard: Close
[   176.746](II) UnloadModule: ""evdev""
[   176.746](II) UnloadModule: ""synaptics""
[   176.746](II) evdev: Power Button: Close
[   176.746](II) UnloadModule: ""evdev""
[   176.746](II) evdev: Power Button: Close
[   176.746](II) UnloadModule: ""evdev""
[   176.757](EE) Server terminated successfully (0). Closing log file.
"
5307,Positive,"thanks dude i really dont know what im douing
"
5308,Neutral,"Have you updated crouton and your chroot recently?
"
5309,Neutral,"so is it not possible to upgrade a chroot without it breaking?
"
5310,Neutral,"sudo sh -e ~/Downloads/crouton -r kali -t xfce
"
5311,Positive,"Awesome!

I've tried to gather some info...

Looks like the udev rule for vmmouse change invokes /bin/vmmouse_detect.

http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/wily/xserver-xorg-input-vmmouse/wily/view/head:/tools/69-xorg-vmmouse.rules.in

http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/wily/xserver-xorg-input-vmmouse/wily/view/head:/tools/hal-probe-vmmouse.in

So I tried invoking /bin/vmmouse_detect inside a debian stretch chroot. -- and it did not lock up the console (it had no readily apparent effect at all).

So maybe it's one of the other rules that is causing the lockup.
I dumped all the udev rules on my pixel, and it looks like there are 22 rules for 'input' subsystem.
I'll can continue trying some of these to see whether there's a specific rule that causes the lockup.

The link below is the output of 'udevadm info -e' on a chromebook pixel, filtered for only those entries with SUBSYSTEM=input'.  I think this is 22 separate rules.

[udevadm-info-output-for-input-subsystem.txt](https://github.com/dnschneid/crouton/files/230940/udevadm-info-output-for-input-subsystem.txt)
"
5312,Positive,"Yep! Make sure the SD card is formatted with some form of ext, then use the `-p` (prefix) parameter to point crouton to the SD card (usually /media/removable/$label); it will install the chroots to $prefix/chroots and the launch scripts to $prefix/bin.  You can then enter chroot either by explicitly using the $prefix/bin scripts, or use the `-c` parameter to explicitly specify the $prefix/chroots directory when using scripts installed to /usr/local/bin.
"
5313,Positive,"Close but no cigar. After creating the delta.conf file it complains about GLIBC_2.17 -

```
sudo lxc-start -n delta-saucy-x64 -f ~/delta-saucy-x64.conf -d
lxc-start: /lib64/libc.so.6: version `GLIBC_2.17' not found (required by /usr/local/lib/liblxc.so.0)

sudo lxc-attach -n delta-saucy-x64 /bin/bash
lxc-attach: /lib64/libc.so.6: version `GLIBC_2.17' not found (required by /usr/local/lib/liblxc.so.0)
```

I checked and I do have the files mentioned -

```
ll /usr/local/lib/libxc*
lrwxrwxrwx  1 root root   11 Feb 18 18:21 liblxc.so -> liblxc.so.0*
lrwxrwxrwx  1 root root   15 Feb 18 18:21 liblxc.so.0 -> liblxc.so.0.9.0*
```

But I guess GLIBC_2.17 isn't a part of this 3.4.0 OS. Here's what I'm using -

```
Installed  : Sat Feb 15 19:10:11 EST 2014
Node name  : localhost
Machine    : x86_64
Rel. name  : Chrome OS
OS Track   : beta-channel
OS Release : Linux 3.4.0
CROS Root  : ROOT-B (/dev/sda5)
OS Board   : parrot-signed-mp-v3keys
OS Coder   : Googler
OS Vers.   : 5116.80.0
Browser Ver: Google Chrome 33.0.1750.93
```

The 'croutonversion' output of my saucy chroot is -

```
(saucy-x64-unity-desktop)user@localhost:~$ croutonversion
crouton: version 1-20131220111353~desktops:63b0426f
release: saucy
architecture: amd64
targets: unity-desktop,unity
host: version 5116.80.0 (Official Build) beta-channel parrot 
```

This is no biggy for me, I'll place this on hold for now and wait 'til it's a little more ready-for-prime-time or at least testing.

Thanx all,
-DennisL
"
5314,Positive,"@emanuensis,

This issue might be related to #2047...
So when you quit, you did ""logout"" the desktop environment properly?

Regards.
"
5315,Neutral,"I think /media is the default mount for /dev/[removable devices] and like power management and networking, the host OS can tell if something is plugged in or removed, but since the chroot can as well, or even shut down, the host thinks it may not be in a safe state to eject.

Can unmounting the chroot force an eject of /media devices? Also, how will usb and sdcards work with multiple chrome users logged in at the same time, with first desktop user also having a chroot? Who is owner, and what are perms?
"
5316,Positive,"Ahh, yes I see. I just re-installed Crouton this morning, So I'd assume I was using the latest as it was retrieved from GitHub.. I'm installing via the x11_Freon, as we speak. I'll keep this updated until I find the best available solution.

I guess What I don't understand Is how the Tegra4Linux drivers can be compiled on Chrubuntu what stops us from installing them on Crouton?

Chrubuntu install script refferences tegra:
http://pastebin.com/raw.php?i=hJWrR5Jh

Oh my goodness, I just finished the install with Xfce on Trusty Tahr.. Huge improvement. I'd honestly say this is the best i've speed i've gotten so far. Probably 3-4x better than standard Xephyr.

Basically what I did was Untar the Freon branch refferenced above (No unzip on Chomeos) so you will need a USB and unzip it on another machine. Then, I just went into the install folder and ran the Main.sh as:

chronos@localhost ~/Downloads/crouton-freonarm/installer $ sudo sh main.sh -r trusty -t xfce-desktop

Perfect so far. I will still update this as I try more work arounds.
Thanks.
"
5317,Negative,"Same issue here on an Acer Chromebook 14. Trusty and Xenial worked for five days whether using xiwi to launch a single app in a browser tab, xiwi to launch XFCE in a browser tab, or launching XFCE in a new window without xiwi.

Two days ago, launching of single apps as well as XFCE in a browser tab stopped working with a black screen and ""Press F11 to Exit Full Screen"" message as described above. Launching XFCE in new window still works for both Trusty and Xenial. 

After updating all targets in both Trusty and Xenial, I still get black screens when trying to launch in a browser tab.
"
5318,Neutral,"just rebooted and remounted my SD card and tried again with the following ; 

sudo enter-chroot -c /media/removable/SD\ Card/chroots/ startxfce4
Entering /media/removable/SD Card/chroots/kali-rolling...
/usr/bin/startxfce4: Starting X server

(EE) 
Fatal server error:
(EE) The '-logfile' option cannot be used with elevated privileges.
(EE) 
(EE) 
Please consult the The X.Org Foundation support 
         at http://wiki.x.org
 for help. 
(EE) 
/usr/bin/xinit: giving up
/usr/bin/xinit: unable to connect to X server: Connection refused
/usr/bin/xinit: server error
"
5319,Positive,"I sorted it out. recovered the data without the phassphrase. : )
"
5320,Positive,"@jakegee,

The 'precise' release has reached end-of-life and is no longer supported.
You could try upgrading your chroot to the 'xenial' release following the wiki guide: [Upgrade chroot release](https://github.com/dnschneid/crouton/wiki/Upgrade-chroot-release).
I want to warn you though to be sure to first back up your chroot before attempting the upgrade since it has been troublesome, for me at least, when going from 'precise' to anything newer.
In fact, you may be better off installing a fresh new 'xenial' chroot.

There is a current PR (pull request) for the 'elementary' target, it's not been reviewed and merged yet but I've gotten it to work, see [this comment](https://github.com/dnschneid/crouton/pull/2973#issuecomment-274998342) for details.

*Hope this helps,*
-**DennisL**"
5321,Neutral,"@smibarber gotcha, so to do a PR for this, do I need to fork the branch here:

https://github.com/dnschneid/crouton/blob/b0a8c8d61e1d367ef9c625835c2e7067ee8e747f/installer/ubuntu/releases

(which would be a first for me)

and then add vivid\* ??
"
5322,Negative,"Sorry no solution yet. This is a duplicate of #2642 please close this one and continue discussion at #2642. Thanks.
"
5323,Neutral,"I followed your intstructions, and I think it worked (see below) . Just wondering how to properly use it.
I guess I have to remount the drive after I reboot in developers mode (??), then enter-chroot, then startxfce4?  Is there a command in linux I should use before removing the flash drive.

sudo sh ~/Downloads/crouton -f ~/Downloads/trusty-2015*.tar.gz -p /media/removable/'USB Drive'
Downloading latest crouton installer...
######################################################################## 100.0%
Finished restoring /home/chronos/user/Downloads/trusty-20150320-2015.tar.gz to /media/removable/USB Drive/chroots/trusty
Installing startxfce4 into the host...
Installing enter-chroot into the host...
Installing delete-chroot into the host...
Installing edit-chroot into the host...
Installing mount-chroot into the host...
Installing unmount-chroot into the host...
Installing crash_reporter_wrapper into the host...
Done! You can enter the chroot using enter-chroot.
"
5324,Negative,"I am using window 8.1 64 bit. and i have tried my scripts on it using selenium 3.0 and FireFox 50, used gecko driver too. nut no luck
i too tried with selenium version 2.53 with Google chrome 54 on same OS but getting error like
Invalid port. Exiting...
????? ??, ???? ??:??:?? ??????? org.openqa.selenium.os.UnixProcess checkForError
SEVERE: org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)


"
5325,Positive,"I am unable to update my chroot with either the latest version of crouton or the .zip one.
The update is interrupted with an error due to skypeforlinux (which had stopped working with a Microsoft message that it is no longer supported) but I never removed the package.

Had been using trusty OK but now am unable to mount and start xfce4 with the same problem first reported here. It would appear to me that my chroot is not fixed due to the skype error?

If this is the culprit how can I get past it? I can't use apt-get since chroot is not mounted.
Any help is greatly appreciated.

thanks,
Frank

crosh> shell
chronos@localhost / $ ls /usr/local/chroots
trusty
chronos@localhost / $ sudo sh ~/Downloads/crouton -u -n trusty
/usr/local/chroots/trusty already exists; updating it...
Preparing chroot environment...
Installing brightness into the chroot...
Installing croutonpowerd into the chroot...
Installing croutonversion into the chroot...
Installing host-dbus into the chroot...
Installing host-wayland into the chroot...
Installing volume into the chroot...
Installing pulseaudio-default.pa into the chroot...
Installing croutoncycle into the chroot...
Installing croutontriggerd into the chroot...
Installing croutonxinitrc-wrapper into the chroot...
Installing setres into the chroot...
Installing xinit into the chroot...
Installing xbindkeysrc.scm into the chroot...
Installing xorg-intel-sna.conf into

.....

 libxslt1.1:i386 linux-libc-dev login logrotate multiarch-support
  mysql-common ntpdate openssl passwd poppler-utils python-libxml2
  python-samba python3-apport python3-problem-report
  python3-software-properties python3-update-manager remmina remmina-common
  remmina-plugin-rdp remmina-plugin-vnc rsyslog samba-common samba-common-bin
  samba-libs skypeforlinux smbclient software-properties-common
  software-properties-gtk sudo systemd-services tzdata udev
  unattended-upgrades update-manager update-manager-core update-notifier
  update-notifier-common vlc vlc-data vlc-nox vlc-plugin-notify
  vlc-plugin-pulse wget xserver-common xserver-xorg-core xul-ext-ubufox
176 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Need to get 253 MB of archives.
After this operation, 124 MB of additional disk space will be used.
WARNING: The following packages cannot be authenticated!
  skypeforlinux
E: There are problems and -y was used without --force-yes
Failed to complete chroot setup.
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...

chronos@localhost / $ sudo startxfce4
Entering /mnt/stateful_partition/crouton/chroots/trusty...
A chroot setup script still exists inside the chroot.
The chroot may not be fully set up.
Would you like to finish the setup? [Y/n/d] y
Preparing chroot environment...
Installing target core...
Preparing environment...
Preparing software sources...

.....

Ign http://ppa.launchpad.net trusty/main i386 Packages/DiffIndex               
Ign http://ppa.launchpad.net trusty/main Translation-en                        
Ign http://ppa.launchpad.net trusty/main Translation-en                        
Err http://ppa.launchpad.net trusty/main amd64 Packages                        
  403  Forbidden
Err http://ppa.launchpad.net trusty/main i386 Packages                         
  403  Forbidden
Fetched 4486 B in 10s (416 B/s)                                                
W: GPG error: https://repo.skype.com stable InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 1F3045A5DF7587C3
W: Failed to fetch http://ppa.launchpad.net/xubuntu-dev/xfce-4.12/ubuntu/dists/trusty/main/binary-amd64/Packages  403  Forbidden

W: Failed to fetch http://ppa.launchpad.net/xubuntu-dev/xfce-4.12/ubuntu/dists/trusty/main/binary-i386/Packages  403  Forbidden

......

Initializing built-in extension XFree86-DGA
Initializing built-in extension XFree86-DRI
Initializing built-in extension DRI2
Loading extension GLX
Error org.freedesktop.DBus.Error.UnknownMethod: Method ""ReleaseDisplayOwnership"" with signature """" on interface ""org.chromium.LibCrosServiceInterface"" doesn't exist

xf86EnableIOPorts: failed to set IOPL for I/O (Operation not permitted)
Error org.freedesktop.DBus.Error.UnknownMethod: Method ""ReleaseDisplayOwnership"" with signature """" on interface ""org.chromium.LibCrosServiceInterface"" doesn't exist

xf86EnableIOPorts: failed to set IOPL for I/O (Operation not permitted)
Unable to set master
(EE) 
Fatal server error:
(EE) AddScreen/ScreenInit failed for driver 0
(EE) 
(EE) 

Noticed now this issue was closed - please let me know if I should have opened a new issue. 
thank you again - stuck in the mud."
5326,Neutral,"Please try the latest version of crouton and re-open if this is still an issue.
"
5327,Neutral,"Honestly, I've made no progress on this other than to determine that I have quite a bit to learn.  The idea of running the x-server inside a sandbox without emulating the kernel just won't work.  At least I don't think so.  I am looking at other open source emulators that run inside Googles native client, and researching how to build an new emulator from the ground up.
"
5328,Positive,"Oops, so _that's_ what it does... :)
"
5329,Neutral,"Okay, we're seeing massive issues with the Intel video driver in dev channel.
"
5330,Neutral,"For reference, the Debian bug above was marked as fixed, and xbindkeys 1.8.6 is now in sid. Hopefully, it will make its way to jessie in the near future.

In the mean time, we can stick with manually downloading 1.8.5 in jessie (users are not likely to hit the bug).
"
5331,Positive,"@spafindoople,

Please try the 'trusty' or 'xenial' release by using the '-r [RELEASE]' option when installing.
'precise' is quite old and will soon be replaced by 'xenial' once some issues have been worked out.

*Hope this helps,*
-**DennisL**"
5332,Positive,"Thanks for the command to enter chroot.

Tried to remove xserver xorg legacy but not installed.

Only xserver-xorg newest versio 17718. How to downgrade?

x server unable to start due to xinit:
https://github.com/dnschneid/crouton/issues/3510"
5333,Neutral,"Almost sounds like you've configured your VM without the no execute bit enabled.
"
5334,Positive,"A hacky workaround is to install cpulimit and run the command:
sudo cpulimit -b -l 10 -p PID_OF_CRAS

it limits the cpu to 10%. Your audio will sometimes hang, make weird noises, and repeat a few times. It will recover eventually, but at least it won't kill my battery or make it run very hot. Youtube videos try to sync audio so the video will keep stuttering. strangely enough ChromeOS will run just fine with cras limited.

Thanks for your information, I saw post #37 that also complained about the patch not being merged into update 39 and talking about the c720's specifically. I really hope update 40 comes out soon.
"
5335,Neutral,"I guess if it turns out to be too difficult you could install ChrUbuntu either internally or on an external drive and do it there.
"
5336,Neutral,"Does it also happen if you hit left or right on an empty line?
"
5337,Neutral,"The issue as I currently see this:
**Intel Celeron Chromebooks** (tested Acer 720p/Samsung Chromebook 3/Acer Chromebook 14) work (probably without acceleration) with changes in comment [#2926](https://github.com/dnschneid/crouton/issues/2926#issuecomment-268414152). See [#2917](https://github.com/dnschneid/crouton/issues/2917#issuecomment-267411158) for a longer discussion. 
**ARM Chromebooks** (tested by @AntiochInteractiveMedia on CB Acer R13, see [#2926 comment](https://github.com/dnschneid/crouton/issues/2926#issuecomment-269165182) )

There are exceptions listed to this (as I read them in this thread). A partial list of exceptions that need to be investigated further:
Acer CB R11 [(1 instance)](https://github.com/dnschneid/crouton/issues/2926#issuecomment-269460712)
Toshiba CB 2 [(1 instance)](https://github.com/dnschneid/crouton/issues/2917#issuecomment-267742510) - This case has an ambiguity between i3/Celeron
Asus C300 [(1 instance)](https://github.com/dnschneid/crouton/issues/2926#issuecomment-269787889) - Ambiguity between Atom/Celeron and probably uses [#2926 comment](https://github.com/dnschneid/crouton/issues/2926#issuecomment-269165182) as the fix.

**Also a great suggestion for** [**Celeron HW Acceleration**](https://github.com/dnschneid/crouton/issues/2917#issuecomment-269906678) from @pmarkkula. I have tested this on both Acer 720p and Samsung CB 3."
5338,Negative,"What I am gather is that I need to edit a file within Crouton to use modesetting user-space driver instead of fbdev. Although, I am very new to this and I'm not exactly sure what to do. Could you walk me through the moving parts of the system. I'm just getting into Ubuntu, Crouton... well everything. 
"
5339,Neutral,"ps. I‘m in CLI（using enter-chroot )，when I use startxfce4，in the terminal emulator, it's fine.
"
5340,Neutral,"After reporting my issue, I saw that this one had been closed earlier today: #3010 . I hadn't noticed the solution another R11 user posted there:

`Section ""Device""
Identifier ""Intel Graphics""
Driver ""intel""
EndSection`

Tried editing my `/etc/crouton/xorg-intel-sna.conf` this way in my Kali-rolling chroot, and have been able to get back in so far. I'll keep using it and see if that holds. [UPDATE: Rebooted after toting my machine home, and the problem is back, so the edit I used is apparently not a solution in my case.]"
5341,Negative,"It succeeds to get the tty :(

I run pycharm.sh from the file explorer directly, so I guess it uses xfce-terminal (or whatever is default), no terminal is displayed. I can try running it through a visible terminal if that might help diagnose this?

To be honest its not that annoying, I don't really need to use getpass.getpass so the hang is avoidable, but I am really interested to know the cause behind this.
"
5342,Negative,"@tedm You're right, after putting xscreensaver back on and playing around a bit I am still having the horrible glitches in chromeos after using Luna for a while in a session.
"
5343,Neutral,"@brownburr - sorry, just seeing this now. sure, i'd love to help, but perhaps not relevant to this thread. and [the instructions here on crouton under the README.md](http://github.com/dnschneid/crouton/) are pretty explicit and good. if you want, click on my icon, go to my [github profile page](http://github.com/faddah/) and see my e-mail there and please e-mail me directly, and we can take it from there. 

by the way, everyone else - i now have a full ubuntu linux 14.04 LTS with unity running off a class 10/ufs 1 SD Card in my Chromebook. i basically did an entire new re-install of pretty much the same stuff using the `-p` option to install it to the SD Card, but i left off xbmc. xbmc, from what i can see in the issues here (i did a search back) seems to have massive issues that bork your linux install nearly every time xorg upgrades. there are plenty of other media players for linux, so i'd say just avoid xbmc, for now, until someone get wind they've managed to resolve this. also, the 8.1 GB limitation was my mistake - that was a linux drive that gets installed when you do a linux install, but the rest of the drive gets used as linux too. so there you go.

so i'm closing this all out — though i do recommend adding somewhere in the crouton README.md that people add xbmc into the mix in a crouton install at their own risk, due the the fact that every time xorg updates, xbmc can bork your linux install and you're not able to get back in.

closing this out.

best,

—  faddah wolf
     portland, oregon, u.s.a.
     github.com/faddah
"
5344,Neutral,"It also works fine on 1920x1080. Maybe it's something related to XFCE not supporting 1536x864?
"
5345,Neutral,"I think we need to use the chrome.tabs API instead of the generic window one to open the URL.  In particular, if you special-case an empty URL, you can pass nothing to [tabs.create](https://developer.chrome.com/extensions/tabs#method-create) (literally, an empty object) and it will open the appropriate new tab page for you.
"
5346,Positive,"Also, what is the danger of running `sudo` inside a chroot? I did not entirely get that part. Thanks for the quick reply, as well."
5347,Negative,"I have the exact same issue as David here, and is there any way to make the flicker stop when you come cack to out  of sleep mode? It's been kind of tedious to reboot over and over again. I'm not a very good fan of crouton integration, since my linux gets laggy. Running trusty xfce. 
"
5348,Positive,"@air Are you using docker inside crouton? I don't think docker can work inside a chroot environment.

There are pre-built docker binary [here](https://docs.docker.com/installation/binaries/), you can copy it to /usr/local/bin and have fun!
"
5349,Neutral,"From crosh, either run:
- `sudo startxfce4`
- OR `sudo enter-chroot`, followed by `startxfce4` (no sudo here)
"
5350,Neutral,"i get the message

AIGLX: Suspending AIGLX clients for VT switch

at the ctrl-alt-f2 screen before the ctrl-alt-f3 (flashed) screen
"
5351,Positive,"See [this issue/topic](https://github.com/dnschneid/crouton/issues/1920) by me. You might try to **stop** your Linux chroot to (auto)mount removable devices by: 
1. sudo dconf-editor
2. Browse to org.gnome.desktop.media-handling and disable automount (and automount-open)
3. Do that both as root and ""yourself"".

Worked for getting write accress to the SD card for me. :)
"
5352,Neutral,"chomp chomp
"
5353,Positive,"@seitensei 
Thank, but I used the command without -c, then the version was not updated :<

chronos@localhost / $ sudo enter-chroot croutonversion -u -d
Entering /usr/local/chroots/saucy...
WARNING: /etc/rc.local failed with code 1
crouton: version 1-20140114112909~master:7874dc04
Retreiving latest version of crouton
latest: version 1-20140129115028~master:caadc6ce
Saving latest version to /home/xxxxxx/Downloads/crouton
Unmounting /usr/local/chroots/saucy...
Sending SIGTERM to processes under /usr/local/chroots/saucy...
chronos@localhost / $ sudo enter-chroot croutonversion -u -d
Entering /usr/local/chroots/saucy...
WARNING: /etc/rc.local failed with code 1
crouton: version 1-20140114112909~master:7874dc04
Retreiving latest version of crouton
latest: version 1-20140129115028~master:caadc6ce
Saving latest version to /home/xxxxxx/Downloads/crouton
Unmounting /usr/local/chroots/saucy...

Nevertheless, THANK YOU everyone for tolerating me because I am very new at this.. ( Linux X Chrome OS).
"
5354,Neutral,"@PastyPilgrim,

Run those with `sudo` inside the chroot (but it's temporal way so reboot could reset this).

Regards.
"
5355,Neutral,"Should I just kill myself?

chronos@localhost / $ sudo sh ~/Downloads/crouton -n trusty -u
Downloading latest crouton installer...
######################################################################## 100.0%
/usr/local/chroots/trusty already exists; updating it...
Preparing chroot environment...
Installing brightness into the chroot...
Installing croutonpowerd into the chroot...
Installing croutonversion into the chroot...
Installing host-dbus into the chroot...
Installing host-x11 into the chroot...
Installing pulseaudio-default.pa into the chroot...
Installing croutoncycle into the chroot...
Installing croutontriggerd into the chroot...
Installing croutonxinitrc-wrapper into the chroot...
Installing setres into the chroot...
Installing xinit into the chroot...
Installing xbindkeysrc.scm into the chroot...
Installing xorg-intel-sna.conf into the chroot...
Installing xserverrc into the chroot...
Installing xserverrc-xorg into the chroot...
Installing xserverrc-local.example into the chroot...
Installing startunity into the host...
Installing crouton-noroot into the chroot...
Installing startunity into the chroot...
Installing gnome-session-wrapper into the chroot...
Installing crouton-unity-autostart into the chroot...
Installing unity-autostart.desktop into the chroot...
Installing unity-profiled into the chroot...
Installing enter-chroot into the host...
Installing delete-chroot into the host...
Installing edit-chroot into the host...
Installing mount-chroot into the host...
Installing unmount-chroot into the host...
Installing crash_reporter_wrapper into the host...
Installing target core...
Preparing environment...
Preparing software sources...
Ign http://archive.ubuntu.com trusty InRelease
Ign http://dl.google.com stable InRelease
Hit http://archive.ubuntu.com trusty Release.gpg
Hit http://dl.google.com stable Release.gpg
Hit http://archive.ubuntu.com trusty Release
Hit http://dl.google.com stable Release  
Hit http://archive.ubuntu.com trusty/main Sources
Hit http://dl.google.com stable/main amd64 Packages
Hit http://archive.ubuntu.com trusty/restricted Sources  
Hit http://dl.google.com stable/main i386 Packages  
Hit http://archive.ubuntu.com trusty/universe Sources  
Hit http://archive.ubuntu.com trusty/multiverse Sources  
Hit http://archive.ubuntu.com trusty/main amd64 Packages  
Hit http://archive.ubuntu.com trusty/restricted amd64 Packages  
Hit http://archive.ubuntu.com trusty/universe amd64 Packages  
Ign http://dl.google.com stable/main Translation-en  
Hit http://archive.ubuntu.com trusty/multiverse amd64 Packages
Hit http://archive.ubuntu.com trusty/main i386 Packages
Hit http://archive.ubuntu.com trusty/restricted i386 Packages
Hit http://archive.ubuntu.com trusty/universe i386 Packages
Hit http://archive.ubuntu.com trusty/multiverse i386 Packages
Hit http://archive.ubuntu.com trusty/main Translation-en
Hit http://archive.ubuntu.com trusty/multiverse Translation-en
Hit http://archive.ubuntu.com trusty/restricted Translation-en
Hit http://archive.ubuntu.com trusty/universe Translation-en
Reading package lists... Done  
Ensuring system is up-to-date...
Reading package lists... Done
Building dependency tree  
Reading state information... Done
Calculating upgrade... Done
The following packages were automatically installed and are no longer required:
  lib32asan0 lib32atomic1 lib32gcc-4.8-dev lib32gcc1 lib32gomp1 lib32itm1
  lib32quadmath0 libc-dev-bin libc6-i386 libc6-x32 libx32asan0 libx32atomic1
  libx32gcc-4.8-dev libx32gcc1 libx32gomp1 libx32itm1 libx32quadmath0
  linux-libc-dev
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Reading package lists... Done
Building dependency tree  
Reading state information... Done
ca-certificates is already the newest version.
sudo is already the newest version.
apt-transport-https is already the newest version.
wget is already the newest version.
The following packages were automatically installed and are no longer required:
  lib32asan0 lib32atomic1 lib32gcc-4.8-dev lib32gcc1 lib32gomp1 lib32itm1
  lib32quadmath0 libc-dev-bin libc6-i386 libc6-x32 libx32asan0 libx32atomic1
  libx32gcc-4.8-dev libx32gcc1 libx32gomp1 libx32itm1 libx32quadmath0
  linux-libc-dev
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Generating locales...
  en_US.UTF-8... up-to-date
Generation complete.
Generating locales...
  en_US.UTF-8... up-to-date
Generation complete.
Syncing timezone...
Installing target audio...
Fetching CRAS (branch 1483a0020b2104a1f63351d364b8c75cb0a135f6)...
--2015-04-30 17:06:06--  https://chromium.googlesource.com/chromiumos/third_party/adhd/+archive/1483a0020b2104a1f63351d364b8c75cb0a135f6.tar.gz
Resolving chromium.googlesource.com (chromium.googlesource.com)... 74.125.207.82, 2607:f8b0:4001:c02::52
Connecting to chromium.googlesource.com (chromium.googlesource.com)|74.125.207.82|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [application/x-gzip]
Saving to: '/tmp/crouton-cras.HXTlh9/adhd.tar.gz'

```
 0K .......... .......... .......... .......... .......... 1.06M
50K .......... .......... .......... .......... .......... 2.13M
```

   100K .......... .......... .......... .......... .......... 1.32M
   150K .......... .......... .......... .......... .......... 2.12M
   200K .......... .......... .......... .......... .......... 1.03M
   250K .......... .......... .......... .......... .......... 1.26M
   300K .......... .......... .......... .......... .......... 1.07M
   350K .......... .......... .......... .......... .......... 2.45M
   400K .......... .......... .......... .......... .          2.53M=0.3s

2015-04-30 17:06:07 (1.45 MB/s) - '/tmp/crouton-cras.HXTlh9/adhd.tar.gz' saved [452218]

Reading package lists... Done
Building dependency tree  
Reading state information... Done
alsa-utils is already the newest version.
libasound2:i386 is already the newest version.
libspeexdsp1:i386 is already the newest version.
The following packages were automatically installed and are no longer required:
  lib32asan0 lib32atomic1 lib32gcc-4.8-dev lib32gcc1 lib32gomp1 lib32itm1
  lib32quadmath0 libc-dev-bin libc6-i386 libc6-x32 libx32asan0 libx32atomic1
  libx32gcc-4.8-dev libx32gcc1 libx32gomp1 libx32itm1 libx32quadmath0
  linux-libc-dev
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Reading package lists... Done
Building dependency tree  
Reading state information... Done
gcc is already the newest version.
pkg-config is already the newest version.
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 gcc-multilib : Depends: gcc-4.8-multilib (>= 4.8.2-5~) but it is not going to be installed
 libc6-dev:i386 : Depends: libc6:i386 (= 2.19-0ubuntu6) but 2.19-0ubuntu6.4 is to be installed
                  Depends: linux-libc-dev:i386 but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
Failed to complete chroot setup.
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...
"
5356,Neutral,"Ok I just did that and same issue.  Extension is not connecting:

chronos@localhost / $ sudo startlxde
Entering /mnt/stateful_partition/crouton/chroots/enochwel...

_XSERVTransmkdir: Owner of /tmp/.X11-unix should be set to root

X.Org X Server 1.15.1
Release Date: 2014-04-13
X Protocol Version 11, Revision 0
Build Operating System: Linux 3.2.0-76-generic x86_64 Ubuntu
Current Operating System: Linux localhost 3.18.0-13492-g308c6f5 #1 SMP PREEMPT Thu Dec 1 22:00:14 PST 2016 x86_64
Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 3584000 verity payload=PARTUUID=f1751b30-f733-f94d-84a8-750cc70265d5/PARTNROFF=1 hashtree=PARTUUID=f1751b30-f733-f94d-84a8-750cc70265d5/PARTNROFF=1 hashstart=3584000 alg=sha1 root_hexdigest=f347a9d09058c7eedfd7c1f3107694b30987ae12 salt=8c6ad1ba734bd2e21866665e37978ee7ac9959a1cb3cb64b278f97fb8936b44c"" noinitrd vt.global_cursor_default=0 kern_guid=f1751b30-f733-f94d-84a8-750cc70265d5 add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic  
Build Date: 12 February 2015  02:49:29PM
xorg-server 2:1.15.1-0ubuntu2.7 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(++) Log file: ""/tmp/Xorg.crouton.1.log"", Time: Mon Dec 12 11:45:20 2016
(++) Using config file: ""/etc/X11/xorg-dummy.conf""
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
Initializing built-in extension Generic Event Extension
Initializing built-in extension SHAPE
Initializing built-in extension MIT-SHM
Initializing built-in extension XInputExtension
Initializing built-in extension XTEST
Initializing built-in extension BIG-REQUESTS
Initializing built-in extension SYNC
Initializing built-in extension XKEYBOARD
Initializing built-in extension XC-MISC
Initializing built-in extension SECURITY
Initializing built-in extension XINERAMA
Initializing built-in extension XFIXES
Initializing built-in extension RENDER
Initializing built-in extension RANDR
Initializing built-in extension COMPOSITE
Initializing built-in extension DAMAGE
Initializing built-in extension MIT-SCREEN-SAVER
Initializing built-in extension DOUBLE-BUFFER
Initializing built-in extension RECORD
Initializing built-in extension DPMS
Initializing built-in extension Present
Initializing built-in extension DRI3
Initializing built-in extension X-Resource
Initializing built-in extension XVideo
Initializing built-in extension XVideo-MotionCompensation
Initializing built-in extension SELinux
Initializing built-in extension XFree86-VidModeExtension
Initializing built-in extension XFree86-DGA
Initializing built-in extension XFree86-DRI
Initializing built-in extension DRI2
Loading extension GLX
/usr/bin/xinit: XFree86_VT property unexpectedly has 0 items instead of 1
crouton: version 1-20161129162558~master:5f2f11f9
release: trusty
architecture: amd64
xmethod: xiwi
targets: lxde,xiwi
host: version 9000.15.0 (Official Build) dev-channel reks 
kernel: Linux localhost 3.18.0-13492-g308c6f5 #1 SMP PREEMPT Thu Dec 1 22:00:14 PST 2016 x86_64 x86_64 x86_64 GNU/Linux
freon: yes
Error: not connected.
Cannot connect to extension, retrying...
Error: not connected.
Cannot connect to extension, retrying...
Error: not connected.
Cannot connect to extension, retrying...
Error: not connected.
Cannot connect to extension, retrying...
Error: not connected.
Cannot connect to extension, retrying...
Connected to extension, launched crouton in a window.
Agent pid 10895
** Message: main.vala:99: Session is LXDE
** Message: main.vala:100: DE is LXDE
** Message: main.vala:131: log directory: /home/enochwel/.cache/lxsession/LXDE
** Message: main.vala:132: log path: /home/enochwel/.cache/lxsession/LXDE/run.log
Error: target STRING not available
Terminated
Running exit commands...
/usr/bin/xinit: connection to X server lost

waiting for X server to shut down Hangup
Hangup
(EE) Server terminated successfully (0). Closing log file.

Not unmounting /mnt/stateful_partition/crouton/chroots/enochwel as another instance is using it.
chronos@localhost / $ ^C"
5357,Neutral,"I also came across this issue, and for me it was due to locale settings (my language was set to ""C"" after setting up xenial). If you run `sudo locale` and get output anything like this:
```
$ sudo locale
LANG=C
LANGUAGE=
LC_CTYPE=fi_FI.UTF-8
LC_NUMERIC=""C""
LC_TIME=""C""
LC_COLLATE=fi_FI.UTF-8
LC_MONETARY=""C""
LC_MESSAGES=fi_FI.UTF-8
LC_PAPER=""C""
LC_NAME=""C""
LC_ADDRESS=""C""
LC_TELEPHONE=""C""
LC_MEASUREMENT=""C""
LC_IDENTIFICATION=""C""
LC_ALL=
```

Here's the fix:
```
$ sudo locale-gen ""en_US.UTF-8""
Generating locales...
  en_US.UTF-8... done
Generation complete.
$ sudo dpkg-reconfigure locales
Generating locales...
  en_US.UTF-8... up-to-date
Generation complete.
```

Follow this up by appending this to `/etc/default/locale` and `/etc/environment`
```
LC_ALL=en_US.UTF-8
LANG=en_US.UTF-8
```

And adding these lines to `~/.bashrc`
```
export LC_ALL=""en_US.UTF-8""
export LANG=""en_US.UTF-8""
```

Obviously, sub in your language region settings.
Credit to the folks at https://askubuntu.com/questions/162391/how-do-i-fix-my-locale-issue"
5358,Positive,"@wycats : Thank you for the post!  I can't believe the fix was so easy!!!!   
"
5359,Positive,"...follow-up....
croagh install took a while but went fine and targets kde & xfce did well, unity was kind of bare and, of course didn't log out but all went well, even did a croagh update and no problems. I'm sure there's differences underneath but it behaved just like crouton to me so I think that's a good thing. 
"
5360,Neutral,Compiling [ncurses](https://www.gnu.org/software/ncurses/ncurses.html) from source should fix this issue.
5361,Neutral,"hello everyone, i have this issue too, today i upgraded my chromeos, and i can do ""sudo enter-chroot -n xenial"" from terminal but i can't start X, i mean im giving sudo startxfce4 but blackscreen is comming and then chromebook(samsung chromebookplus) is rebooting. Please help me, i like my ubuntu on chromebook. "
5362,Neutral,"It seems to work now by running this command:

$ xinput set-button-map 4 1 2 3 5 4 6 7 8 9 10
"
5363,Positive,"Oh wait..
1 command line needs 1 ""enter"" (or line-feed). can you understand this meaning?
Type `cd ~/Downloads` and hit Enter key.
Then type `mv 20-armsoc{.txt,.conf}` and hit Enter key.
....

Regards.
"
5364,Neutral,"@dnschneid,

p/o [installer/main.sh]

```
# Check against the minimum version of Chromium OS
if ! awk -F= '/_RELEASE_VERSION=/ { exit int($2) < '""${CROS_MIN_VERS:-0}""' }' \
        '/etc/lsb-release' 2>/dev/null; then
    error 2 ""Your version of Chromium OS is extraordinarily old.
    ...
fi
```

I'm sure I'm missing it somewhere but I searched all of 'crouton.unbundled' and couldn't find where CROS_MIN_VERS is getting set.
"
5365,Neutral,"Implemented in the multiuser branch.
"
5366,Neutral,"Updating the chroot should fix it.
"
5367,Neutral,"Mostly likely duplicate of: https://github.com/headmelted/code-builds/issues/12, https://github.com/dnschneid/crouton/issues/3098 & https://github.com/dnschneid/crouton/issues/3083"
5368,Neutral,"@theadamgreen1 : Basically, audio that is routed straight to Chrome Audio Server (CRAS) is working fine, but there is a problem when it is routed through pulseaudio first. I have not been able to reproduce on Acer C720, dev channel (5764.0.0). I'll try beta channel.

What you can try (in this order):
- Reboot the Chromebook and try again (but I suspect you did that already...)
- Try out `precise` or `trusty` instead of `saucy` (it looks like you also tried that)
- Switch back to Chrome OS stable channel (that'll require a powerwash: backup your data), or dev channel.
"
5369,Neutral,"Roll-out is ongoing; should be fixed within a few hours.
"
5370,Neutral,"Hm. So, in the last failure I posted, https://github.com/dnschneid/crouton/issues/2688#issuecomment-250607576, I received this error:

```
E: Method http has died unexpectedly!
E: Sub-process http received signal 4.
```

instead of the usual

```
E: Method http has died unexpectedly!
E: Sub-process http received a segmentation fault.
```

A `signal 4`, if you run `kill -l` in your terminal, refers to a `SIGILL` being sent to a process to terminate it. `SIGILL` is a signal that means the process performed an ""illegal instruction,"" as you can see if you read `man signal`. It seems that, most often, this signal is triggered when a process attempts to perform an operation that is specific to a processor architecture different from/not supported by your machine's processor.

Another possibility could be that pieces of the executable code are being overwritten in memory with some other mess of data, or that a function pointer in the program points to similar unintelligible data.

Disclaimer: I literally know next to nothing about this stuff, and I mostly just read about it for a couple hours this morning, so I might be totally wrong. 

If the first case is true, and the sub-process `http` is attempting a processor-specific optimization that is not supported by the processor in the R11, I guess the solution would be to manually compile apt-get (?) on your own machine.

If the second case is true, and since there's a decent amount of evidence it's related to memory usage, maybe some RAM is being overwritten when `http` still needs to access it? Does that make sense? Or maybe some area of memory is being overwritten or altered or compressed that the `http` process wants to access? The swap functionality on Chromebooks, being enabled by default, does not write to a swap partition on the SSD. Instead, it uses [zram](https://en.wikipedia.org/wiki/Zram), which writes to compressed [block device](https://en.wikipedia.org/wiki/Device_file#BLOCKDEV) in RAM, which takes up less memory overall (?) than the normal [paging](https://en.wikipedia.org/wiki/Paging) in virtual memory.

So maybe at high memory usage, zram unknowingly swaps some memory at addresses that the `http` sub-process still needs to access, making it read what seems like garbage data instead, and triggering either an _illegal instruction_ signal (if it thinks the bytes it reads signify an incompatible instruction) or a _segmentation fault_ (because it's accessing/pointing to memory that it's not allowed to access). Maybe disabling swap on the machine will help?

I will try, at some point, to disable swap and see if that helps, and also try recompiling the apt-get binaries (not sure how to do this, but I'm sure I can figure that out) to see if that will work.

Again, disclaimer, I don't know if what I'm saying makes sense. I'm a chemist, not a computer scientist. I'm sure as hell not a C programmer, and the extent of my knowledge on operating systems reaches only to the Wikipedia pages, Stack Overflow questions, and various forums that I come across when following a Wild Google Chase.

Does anyone have a better understanding of this?
"
5371,Neutral,"> Running sudo sh ~/Downloads/crouton -u -t unity -n precise fixed my issues. Huzzah!

Did it reset? I really would like to keep my files."
5372,Neutral,"@tedm you're missing the -u for the first command as well.

@D3dou try `sudo sh -e ~/Downloads/crouton -u -t xiwi`, and if that fails, please post the output of `sudo edit-chroot -al`
"
5373,Neutral,"Using a recovery disk: https://support.google.com/chromebook/answer/1080595?hl=en
"
5374,Neutral,"The trick was `openbox --replace`.
"
5375,Neutral,"@chrisofCCL - I think divx118 is correct (we're experiencing different issues), but all I mean by 'real' terminal is not a shell in a terminal emulator (either in the chroot or crosh as a chrome tab).

According to (https://plus.google.com/+FrancoisBeaufort/posts/L3zmATV8BW5), you still should have a (virtual) terminal iff in developer mode with freon, but I've held off on upgrading, so I'm not sure if that would work for you or not.
"
5376,Neutral,"The only thing that page says to do is to run an update. As I wrote above, the output is what I get _after_ running the update. I ran it again and here is the full output:

```
chronos@localhost /tmp $ sudo sh ~/Downloads/crouton -n trusty -u
/usr/local/chroots/trusty already exists; updating it...
Preparing chroot environment...
Installing croutonversion into the chroot...
Installing host-dbus into the chroot...
Installing host-x11 into the chroot...
Installing pulseaudio-default.pa into the chroot...
Installing brightness into the chroot...
Installing croutoncycle into the chroot...
Installing croutonpowerd into the chroot...
Installing croutonxinitrc-wrapper into the chroot...
Installing setres into the chroot...
Installing xinit into the chroot...
Installing xbindkeysrc.scm into the chroot...
Installing xserverrc-x11 into the chroot...
Installing xserverrc-local.example into the chroot...
Installing startlxde into the host...
Installing enter-chroot into the host...
Installing delete-chroot into the host...
Installing edit-chroot into the host...
Installing mount-chroot into the host...
Installing unmount-chroot into the host...
Installing crash_reporter_wrapper into the host...
/tmp/crouton.CiJ/host-bin/enter-chroot: 338: readlink: Argument list too long
/tmp/crouton.CiJ/host-bin/enter-chroot: 338: mountpoint: Argument list too long
/tmp/crouton.CiJ/host-bin/enter-chroot: 340: readlink: Argument list too long
/tmp/crouton.CiJ/host-bin/enter-chroot: 340: mountpoint: Argument list too long
/tmp/crouton.CiJ/host-bin/enter-chroot: 340: mkdir: Argument list too long
Unmounting /usr/local/chroots/trusty...
/tmp/crouton.CiJ/host-bin/unmount-chroot: 319: readlink: Argument list too long
/tmp/crouton.CiJ/host-bin/unmount-chroot: 319: mountpoint: Argument list too long
```
"
5377,Neutral,"Did the remove of lib6c. Rebooted.

chronos@localhost / $ sudo startunity
Entering /mnt/stateful_partition/crouton/chroots/trusty...

ERROR: ld.so: object '/usr/local/lib/croutonfreon.so' from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.
_XSERVTransmkdir: ERROR: euid != 0,directory /tmp/.X11-unix will not be created.

X.Org X Server 1.15.1
Release Date: 2014-04-13
X Protocol Version 11, Revision 0
Build Operating System: Linux 3.2.0-70-generic x86_64 Ubuntu
Current Operating System: Linux localhost 3.10.18 #1 SMP Mon Apr 20 23:02:49 PDT 2015 x86_64
Kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure oops=panic panic=-1 root=/dev/dm-0 rootwait ro dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=1 dm=""1 vroot none ro 1,0 2506752 verity payload=PARTUUID=56e7c3fd-b7a5-0642-b07c-c282ade67fe5/PARTNROFF=1 hashtree=PARTUUID=56e7c3fd-b7a5-0642-b07c-c282ade67fe5/PARTNROFF=1 hashstart=2506752 alg=sha1 root_hexdigest=79b560c9ba07f23022e8b31c3ef240b7e7582d98 salt=e0d9a9d98d87b1c9f3984c5dd496e49f0c84f8975c4125665affb3688120993f"" noinitrd vt.global_cursor_default=0 kern_guid=56e7c3fd-b7a5-0642-b07c-c282ade67fe5 add_efi_memmap boot=local noresume noswap i915.modeset=1 tpm_tis.force=1 tpm_tis.interrupts=0 nmi_watchdog=panic,lapic  
Build Date: 10 December 2014  06:15:52PM
xorg-server 2:1.15.1-0ubuntu2.6 (For technical support please see http://www.ubuntu.com/support) 
Current version of pixman: 0.30.2
        Before reporting problems, check http://wiki.x.org
        to make sure that you have the latest version.
Markers: (--) probed, (**) from config file, (==) default setting,
        (++) from command line, (!!) notice, (II) informational,
        (WW) warning, (EE) error, (NI) not implemented, (??) unknown.
(++) Log file: ""/tmp/Xorg.crouton.1.log"", Time: Thu Apr 30 16:59:03 2015
(==) Using system config directory ""/usr/share/X11/xorg.conf.d""
(EE) 
(EE) Backtrace:
(EE) 0: /usr/bin/Xorg (xorg_backtrace+0x48) [0x7f837c4b1798](EE) 1: /usr/bin/Xorg (0x7f837c308000+0x1ad489) [0x7f837c4b5489](EE) 2: /lib/x86_64-linux-gnu/libpthread.so.0 (0x7f837b405000+0x10340) [0x7f837b415340](EE) 3: /usr/bin/Xorg (0x7f837c308000+0xb54a6) [0x7f837c3bd4a6](EE) 4: /usr/bin/Xorg (xf86BusProbe+0x9) [0x7f837c390d99](EE) 5: /usr/bin/Xorg (InitOutput+0x74d) [0x7f837c39f3fd](EE) 6: /usr/bin/Xorg (0x7f837c308000+0x598ab) [0x7f837c3618ab](EE) 7: /lib/x86_64-linux-gnu/libc.so.6 (__libc_start_main+0xf5) [0x7f8379e44ec5](EE) 8: /usr/bin/Xorg (0x7f837c308000+0x44efe) [0x7f837c34cefe](EE) 
(EE) Segmentation fault at address 0x0
(EE) 
Fatal server error:
(EE) Caught signal 11 (Segmentation fault). Server aborting
(EE) 
(EE) 
Please consult the The X.Org Foundation support 
         at http://wiki.x.org
 for help. 
(EE) Please also check the log file at ""/tmp/Xorg.crouton.1.log"" for additional information.
(EE) 
(EE) Server terminated with error (1). Closing log file.
/usr/bin/xinit: giving up
/usr/bin/xinit: unable to connect to X server: Connection refused
/usr/bin/xinit: server error
Unmounting /mnt/stateful_partition/crouton/chroots/trusty...
chronos@localhost / $ shell
bash: shell: command not found
chronos@localhost / $ sudo enter-chroot -n trusty
Entering /mnt/stateful_partition/crouton/chroots/trusty...
(trusty)robby@localhost:~$ sudo apt-get update && sudo apt-get upgrade
[sudo] password for robby: 
Ign http://archive.ubuntu.com trusty InRelease
Hit http://archive.ubuntu.com trusty Release.gpg 
Ign http://dl.google.com stable InRelease  
Hit http://archive.ubuntu.com trusty Release
Hit http://dl.google.com stable Release.gpg  
Hit http://dl.google.com stable Release  
Hit http://archive.ubuntu.com trusty/main Sources
Hit http://dl.google.com stable/main amd64 Packages  
Hit http://archive.ubuntu.com trusty/restricted Sources  
Hit http://dl.google.com stable/main i386 Packages  
Hit http://archive.ubuntu.com trusty/universe Sources  
Hit http://archive.ubuntu.com trusty/multiverse Sources  
Hit http://archive.ubuntu.com trusty/main amd64 Packages  
Hit http://archive.ubuntu.com trusty/restricted amd64 Packages  
Hit http://archive.ubuntu.com trusty/universe amd64 Packages  
Hit http://archive.ubuntu.com trusty/multiverse amd64 Packages  
Ign http://dl.google.com stable/main Translation-en  
Hit http://archive.ubuntu.com trusty/main i386 Packages  
Hit http://archive.ubuntu.com trusty/restricted i386 Packages
Hit http://archive.ubuntu.com trusty/universe i386 Packages
Hit http://archive.ubuntu.com trusty/multiverse i386 Packages
Hit http://archive.ubuntu.com trusty/main Translation-en
Hit http://archive.ubuntu.com trusty/multiverse Translation-en
Hit http://archive.ubuntu.com trusty/restricted Translation-en
Hit http://archive.ubuntu.com trusty/universe Translation-en
Reading package lists... Done  
Reading package lists... Done
Building dependency tree  
Reading state information... Done
Calculating upgrade... Done
The following packages were automatically installed and are no longer required:
  lib32asan0 lib32atomic1 lib32gcc-4.8-dev lib32gcc1 lib32gomp1 lib32itm1
  lib32quadmath0 libc-dev-bin libc6-i386 libc6-x32 libx32asan0 libx32atomic1
  libx32gcc-4.8-dev libx32gcc1 libx32gomp1 libx32itm1 libx32quadmath0
  linux-libc-dev
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
"
5378,Neutral,"Ok. Can you try this one `sudo sh -x enter-chroot -n precise croutonversion`?

We've had a case recently where we had to wait quite a long time to get some error output, so you might want to wait (5-10 minutes I'd say)
"
5379,Positive,"Hi!, just made it, thanks a lot for your help and the original tutorial, also the PPA. Works great, now I have Chrome OS and Linux and XP. Is there a way to automate everything?, like turning on the laptop and it runs  the shell, calls Crouton and runs VM, etc by itself.?
"
5380,Neutral,"@Dyndase: `croutonversion` needs to be run from inside the chroot, so, first run:
`sudo enter-chroot croutonversion -u -d -c`, then:
`sudo sh -e ~/Downloads/crouton -u -n chrootname`
(if you installed the default release, `chrootname` is `precise`)
"
5381,Neutral,"Don't launch graphical chroots from VT2.  Launch them from crosh shells (ctrl+alt+t).
"
5382,Neutral,"Sure, if Manjaro has an ARM build and someone wants to get it working in the crouton installer architecture.
"
5383,Negative,"I remembered too late that it could be different (so ive deleted my comment, for everyone else reading it later: I wondered if this was possibly a wrong keyboard shortcut, my fault).

On my HP Chromebook, I've running Steam in Saucy without issues. Even light gaming is possible :dancers: ..Maybe you are no seeing your host computer due some dns - ""discovery"" issues (not all packages of regular Ubuntu seems to be installed(?)). I don't know if there is a possibility, but did you tried using an IP to connect with the host?
"
5384,Neutral,"The ARM Chromebook's X server has some hacks to improve performance.  crouton has a hack of its own to get around this, using ratpoison.  Install crouton with `-t xephyr` at a minimum (xfce, unity, etc, all include this by default on ARM), then enter the chroot and run croutonwm to enable the hack (running xinit or starting xfce/unity/etc runs this by default as well).
"
5385,Positive,"For reference wiki page is here: https://github.com/dnschneid/crouton/wiki/VirtualBox-udev-integration . I haven't tested it, but it looks sound.

@Timvrakas : Thanks for the wiki page.
"
5386,Positive,"@wgustlin,

```
Fatal server error:
no screens found
```

So what did `/tmp/Xorg.crouton.1.log` say?

Regards.
"
5387,Neutral,"The particular problem you're having is due to Minecraft's dependency on some libraries that are built for x86 (`liblwjgl64.so`). But even getting past that, there won't be any 3D acceleration on ARM (at least with Mali graphics) so the game itself will be unplayable.
"
5388,Positive,"Ah ok nice it works for you. BTW I think the newest virtualbox version should also work.  
To avoid confusion you don't build the kernel headers, they were build by me. You just installed them by running the script setup-headers.sh.
This script will: 
- add my signing key with which the packages are signed.
- add the ppa to the sources.list.d (/etc/apt/sources.list.d/crouton-packages.list)
- install linux-headers-
- install linux-image-
- add a rc.local script to load vboxdrv modules on entering the chroot if they are available.

Seems there is an issue then when building the kernel-headers with recent source. I will see if I can replicate and if something significant has changed in the kernel config.
"
5389,Positive,"that did it! thank you sir!
"
5390,Positive,"Sorry for my delayed response...

Sounds you could run that game on Trusty. Then if you had other issues, please post it as new another topic.

Finally I'm glad and hope you could close this issue (Because developers have to watch a lot of ""opened"" isses every day). :-)

Regards.
"
5391,Neutral,"I've gotten webex working in my various chroots, precise through trusty.
Not being able to see video is due to some packages (silently) missing.
You can see what's missing by doing `ldd ~/.webex/1324/*.so | grep 'not found'` and see what comes up.

I haven't tried it on ARM, but my notes say you need at least libxmu6, libgcj12-awt, and libxv1 installed.

Edit: and possibly libpangoxft-1.0-0 and libpangox-1.0-0
"
5392,Positive,@joseph-palmer I don't really see any other option so far. It has worked for me and I haven't had any other problems...Good luck though!
5393,Neutral,"Okay.  Updating GVFS to [this](https://launchpad.net/~langdalepl/+archive/gvfs-mtp/) might help, but closing anyway.
"
5394,Positive,"@DavidMcLaughlin29,

This issue was closed nearly two years ago.
Please open a [new issue](https://github.com/dnschneid/crouton/issues/new) and give us all the details that you can.

*Hope this helps,*
-**DennisL**"
5395,Neutral,"@pigeonflight Did you mean to post this on #1294 ? or is it related to the above content?
"
5396,Neutral,"I have the same problem
"
5397,Neutral,"@caffeineaddiction -

> also tried with CHROOT=precise

You have a 'precise' chroot so that line shouldn't be needed, but it can't hurt either.
It should **not** be set to trusty though.

> still no love

Cute, but I'd like to see the output of your DEBUG log that's created in `/tmp/`.
You should have a file in /tmp named crouton-$PID.log (the $PID will be whatever process number started it) that will show you where it failed.
"
5398,Neutral,"Getting the same on 59.0.3071.134 64-bit, 9460.73.0 stable-channel cave.
"
5399,Neutral,"@dnschneid To get crouton play well with PID 1, I suggest to refactor enter-chroot into separate parts:
1. Arguments and environment variables parsing, including $USER/$BACKGROUND/$NOLOGIN...
2. Changes need for the host, including disablehungtask/Allow X server running as normal user, and so on.
3. bindmount/tmpfsmount. Minijail can do all the bindmount atomically together with chroot. We could collect all the need task in bindmount{}, and delay the mount until chroot is to be called, so it behaves more similar to minijail.
4. job after chroot. This include launching system dbus. I expect that we will do less and less work in this part, but delegate the work to PID 1(sysvinit/upstart/openrc at the moment, and hopefully systemd eventually). 
  I hope the last part will be more declarative in style, maybe similar to inittab.

This refactoring will be very helpful for all kinds of experiments. Currently my minijail/unshare tricks only deal with 3, so I can not integrate part 1,2,4,   thus not able to start dbus/X11 for further experiments.

Should I open a separate issue for this?

Update: I'm not familiar with bash scripts, so the [-n $var}/[ -z $var]/${2:-""$1""} thing really drive me crazy. Chromeos already include python, so why not use python for enter-chroot?

Update 2: tmpfsmount and ""ln -sfT"" should be done inside chroot
"
5400,Positive,"I have no internet connection besides my phone, so im not able to test the chroot please say something if it starts working again thanks!
"
5401,Neutral,"Reported in #scrapy IRC channel, if parent url contains an unquoted ""|"" the final url is quoted including its scheme.

``` pycon
>>> from scrapy.http import FormRequest, HtmlResponse
>>> response = HtmlResponse(body='<html><body><form></form></body></html>',
...                                         url='http://foo.com/?a=|')
>>> FormRequest.from_response(response)
None
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-3-b87bf46cf4c1> in <module>()
----> 1 FormRequest.from_response(response)

/home/daniel/src/scrapy/scrapy/http/request/form.pyc in from_response(cls, response, formname, formnumber, formdata, clickdata, dont_click, formxpath, **kwargs)
     38         url = _get_form_url(form, kwargs.pop('url', None))
     39         method = kwargs.pop('method', form.method)
---> 40         return cls(url=url, method=method, formdata=formdata, **kwargs)
     41 
     42 def _get_form_url(form, url):

/home/daniel/src/scrapy/scrapy/http/request/form.pyc in __init__(self, *args, **kwargs)
     19             kwargs['method'] = 'POST'
     20 
---> 21         super(FormRequest, self).__init__(*args, **kwargs)
     22 
     23         if formdata:

/home/daniel/src/scrapy/scrapy/http/request/__init__.pyc in __init__(self, url, callback, method, headers, body, cookies, meta, encoding, priority, dont_filter, errback)
     24         self._encoding = encoding  # this one has to be set first
     25         self.method = str(method).upper()
---> 26         self._set_url(url)
     27         self._set_body(body)
     28         assert isinstance(priority, int), ""Request priority not an integer: %r"" % priority

/home/daniel/src/scrapy/scrapy/http/request/__init__.pyc in _set_url(self, url)
     55                 raise TypeError('Cannot convert unicode url - %s has no encoding' %
     56                     type(self).__name__)
---> 57             self._set_url(url.encode(self.encoding))
     58         else:
     59             raise TypeError('Request url must be str or unicode, got %s:' % type(url).__name__)

/home/daniel/src/scrapy/scrapy/http/request/__init__.pyc in _set_url(self, url)
     59             raise TypeError('Request url must be str or unicode, got %s:' % type(url).__name__)
     60         if ':' not in self._url:
---> 61             raise ValueError('Missing scheme in request url: %s' % self._url)
     62 
     63     url = property(_get_url, obsolete_setter(_set_url, 'url'))

ValueError: Missing scheme in request url: http%3A//foo.com/%3Fa=%257C
>>> 
```
"
5402,Neutral,"Though the wisdom of this functionality is unclear,
it would make sense if setting `DOWNLOAD_TIMEOUT` to zero, or `None` would in fact mean 'infinite' in accordance with other settings such as `CLOSESPIDER_TIMEOUT`, `CLOSESPIDER_ITEMCOUNT` et cetera.

The current `ScrapyAgent` source reads

``` python
timeout = request.meta.get('download_timeout') or self._connectTimeout
```

where zero and `None` are false and invoke `self._connectTimeout` instead.
Aside from this, `reactor.callLater(0, ...)` would mean ""asap"" instead of ""never"", so this would need a different codepath.
"
5403,Neutral,"Note: Originally reported on StackOverflow:https://stackoverflow.com/questions/39477662/scrapy-csv-file-has-uniform-empty-rows

here is the spider:

```
import scrapy
from danmurphys.items import DanmurphysItem

class MySpider(scrapy.Spider):
    name = 'danmurphys'
    allowed_domains = ['danmurphys.com.au']
    start_urls = ['https://www.danmurphys.com.au/dm/navigation/navigation_results_gallery.jsp?params=fh_location%3D%2F%2Fcatalog01%2Fen_AU%2Fcategories%3C%7Bcatalog01_2534374302084767_2534374302027742%7D%26fh_view_size%3D120%26fh_sort%3D-sales_value_30_days%26fh_modification%3D&resetnav=false&storeExclusivePage=false']


    def parse(self, response):        
        urls = response.xpath('//h2/a/@href').extract()
        for url in urls:            
            request = scrapy.Request(url , callback=self.parse_page)      
            yield request

    def parse_page(self , response):
        item = DanmurphysItem()
        item['brand'] = response.xpath('//span[@itemprop=""brand""]/text()').extract_first().strip()
        item['name'] = response.xpath('//span[@itemprop=""name""]/text()').extract_first().strip()
        item['url'] = response.url     
        return item
```

and here is the items :

```
import scrapy
class DanmurphysItem(scrapy.Item):  
    brand = scrapy.Field()
    name = scrapy.Field()
    url = scrapy.Field()
```

when I run the spider with this command :
`scrapy crawl danmurphys -o output.csv`
the output is like this : 
![p2aal](https://cloud.githubusercontent.com/assets/21281149/18508864/b664d196-7a7e-11e6-9b24-f4da044b9cb0.png)

How can I avoid  these uniform empty rows , (by the way when I save to json there are no empty values) .
"
5404,Neutral,"`2017-07-04 16:25:43 [scrapy.core.scraper] ERROR: Error downloading <GET http://wodnik_forum.orq.pl/>
Traceback (most recent call last):
  File ""c:\users\bukowa\vritualenv2\lib\site-packages\twisted\internet\defer.py"", line 1384, in _inlineCallbacks
    result = result.throwExceptionIntoGenerator(g)
  File ""c:\users\bukowa\vritualenv2\lib\site-packages\twisted\python\failure.py"", line 393, in throwExceptionIntoGenerator
    return g.throw(self.type, self.value, self.tb)
  File ""c:\users\bukowa\vritualenv2\lib\site-packages\scrapy\core\downloader\middleware.py"", line 43, in process_request
    defer.returnValue((yield download_func(request=request,spider=spider)))
ValueError: invalid hostname: www.bg_2014.team360.pl`

ValueError: invalid hostname: www.bg_2014.team360.pl
ValueError: invalid hostname: www.wolfs_rain.wxv.pl
ValueError: invalid hostname: wodnik_forum.orq.pl
ValueError: invalid hostname: kolo_pzw_miejskie_konskie.wedkuje.pl
ValueError: invalid hostname: bieganie_swiebo.e-fora.pl
ValueError: invalid hostname: rzymskie_koloseum.lovetotravel.pl
ValueError: invalid hostname: zbuntowana_anielica.story.gala.pl
ValueError: invalid hostname: forum_origami.bo.pl
ValueError: invalid hostname: dfk_forum.gbbsoft.pl
ValueError: invalid hostname: wodnik_forum.orq.pl



"
5405,Neutral,"Current behavior of Scrapy when finding links like: 
  /fclick.php?variable

is to canonicalize them to:
  /fclick.php?variable=

This however makes Scrapy follow an incorrect link and cause an error page to load. This is really fault of web script programmers really who use variables without value. But for the sake of robustness Scrapy should follow the correct links.

I made a small patch for this. All it does really is that when it faces variables with 0 length value it crops out the =.

see http://dev.scrapy.org/ticket/133 for more info
"
5406,Neutral,"I previously reported this on Trac: http://dev.scrapy.org/ticket/310

The Link object now has a 'nofollow' attribute. This needs support in the link extractors
"
5407,Neutral,"Pages which have duplicate values in their query string are treated as different pages:
- http://www.example.com/?q=
- http://www.example.com/?q=&q=
- http://www.example.com/?q=&q=&q=
- ...

If the first page has a link to the second and the second a link to the third, `scrapy` enters an infinite loop, requesting each page in succession. I've put a simple page [here](http://fcoelho.alwaysdata.net/scrapy/page.php) to test the issue. Using a CrawlSpider with a rule like `Rule(SgmlLinkExtractor(), callback='parse_page', follow=True)` will cause this infinite recursion. Here is a sample spider:

``` python
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

class LoopingSpider(CrawlSpider):
    name = ""loop""
    start_urls = [""http://fcoelho.alwaysdata.net/scrapy/page.php""]
    allowed_domains = [""fcoelho.alwaysdata.net""]
    rules = (
        Rule(SgmlLinkExtractor(), callback='parse_page', follow=True),
    )

    def parse_page(self, response):
        print ""Page: %s"" % response.url
        return []
```

It seems like in the end the problem ""arises"" because `scrapy.utils.url.canonicalize_url` only sorts the query string keys, but don't remove duplicates. As far as I can tell, duplicates are ""wrong"", and shouldn't be counted as normal web page behavior. Would it be sane to remove arguments from the query string if their key is repeated?
"
5408,Positive,"As @plafl said: ""Scrapy is very extensible but that has a cost too. There are too many concepts: spiders, items, middlewares, pipelines, exporters, extensions, signals, settings. As a newcomer I would like to know which problem they solve.""

+1 :) I think we should add a page which will explain all this in a single place - what are these concepts, when and why to use them. 
"
5409,Neutral,"hi,

     When a document is png pp but the suffix is how to generate png pss thumbnail, and now he unified generated jpg how can I set up to generate png"
5410,Positive,"I'm want limit a number of item scraped . I Enabled success this extensions ""scrapy.extensions.closespider.CloseSpider"" And SETTINGS Like this

settings.py
`EXTENSIONS = {
    'scrapy.extensions.closespider.CloseSpider': 1
}`

my spiders
`custom_settings = {
        ""CLOSESPIDER_ITEMCOUNT"" : 1
    }`

but not working and and logging ...

> {'data': 'abc'}
2017-05-18 09:40:31 [scrapy.core.engine] INFO: Closing spider (closespider_itemcount)
2017-05-18 09:40:31 [scrapy.core.scraper] DEBUG: Scraped from <200 http://tinbatdongsan.com/>
{'data': 'abc'}
2017-05-18 09:40:31 [scrapy.core.scraper] DEBUG: Scraped from <200 http://tinbatdongsan.com/>
{'data': 'abc'}

Help me ! Thank you so much !"
5411,Neutral,"Hey,

I think that @redapple is right in https://github.com/scrapy/scrapy/issues/488 that base spider template needs more imports by default, but IMHO introducing more code generation is not a solution.

Scrapy top-level namespace is a bit funky now: 

```
>>> import scrapy
>>> dir(scrapy)
['__builtins__',
 '__doc__',
 '__file__',
 '__name__',
 '__package__',
 '__path__',
 '__version__',
 '_txv',
 'boto',
 'django',
 'optional_features',
 'os',
 'pkgutil',
 'print_function',
 'sys',
 'twisted_version',
 'urlparse_monkeypatches',
 'version_info',
 'warnings',
 'xlib']
```

it contains boto and django, but doesn't contain shortcuts like Request, Selector and BaseSpider. What do you think about making them available as `scrapy.Request` etc and removing unintended exports? 

Currently to write a basic spider user has to remember a lot of import locations. Scrapy docs omit imports sometimes (see #493), this also doesn't help.

My current list is BaseSpider (why isn't it named Spider, by the way?), Request, FormRequest and Selector, but I don't see much downsides in being more generous (Item? Field?). 
"
5412,Neutral,"To reproduce:
Open scrapy shell
fetch('http://utdirect.utexas.edu/ctl/ecis/results/index.WBX?s_in_page_isn=648311&s_in_page_query=Quesada+Gonzalez%2C+Carlos+20139MUS201M&s_in_max_nbr_return=0&s_in_search_query=Q&s_in_search_type_sw=N&s_in_page_direction=B&s_in_action_sw=P&s_in_search_name=Q')
scrapy.http.FormRequest.from_response(response, formxpath='//div[@class=""page-forward""]/form[1]')

Compare get url to that produced when clicking the button in a browser.
"
5413,Neutral,"I need to configure several custom loggers of the following type:
-writing both to a file and console
-writing to console only
-writing to file only
I use logging.fileConfig() which works fine without scrapy. I set rootLogger to write to /dev/null, so that I can setup every child logger individually.

I've tried the following options:
-Running a spider with CrawlerProcess()
-Running a spider with CrawlerRunner() with:
  a) configure_logging(install_root_handler=True)  
  b) configure_logging(install_root_handler=False)
  c) configure_logging(install_root_handler=False) and manually calling logging.getLogger(""scrapy"").addHandler(...)

I neither case it worked meaning all loggers write to intended location ONLY, AND I see all scrapy messages.
The last case c) was the closest to be correct, by I could see only a PART of scrapy messages (not depending on logging level).
"
5414,Neutral,"version: 1.1.0dev1

scrapy/spiders/**init**.py 
79      def update_settings(cls, settings):
80          settings.setdict(cls.custom_settings or {}, priority='spider')

arg 'settings' is not used in func 'update_settings', is that right or wrong?
"
5415,Neutral,"I needed to download some autogenerated datasheets (in PDF format), and I decided to go with the FilesPipeline provided within Scrapy.

However, the URL structure didn't follow the assumption of the `file_path` method in the `FilesPipeline` class (a well structured filename, i.e. `example.pdf`):

Here is a snippet of my spider:

``` python
item['file_urls'] = []
item['file_urls'].append(""https://www.domain.name/path/path/DatasheetService?control=%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E%3Cpdf_generator_control%3E%3Cmode%3EPDF%3C%2Fmode%3E%3Cpdmsystem%3EPMD%3C%2Fpdmsystem%3E%3Ctemplate_selection+mlfb%3D%22{}%22+system%3D%22PRODIS%22%2F%3E%3Clanguage%3Ees%3C%2Flanguage%3E%3Ccaller%3EMall%3C%2Fcaller%3E%3C%2Fpdf_generator_control%3E"".format(item['code']))
```

This is the code that extracts the media extension from the URL ( in scrapy.contrib.pipeline.files.FilesPipeline):

``` python
media_ext = os.path.splitext(url)[1]  # change to request.url after deprecation
```

Now, the value of `media_ext` for my URL is

``` txt
.0%22+encoding%3D%22UTF-8%22%3F%3E%3Cpdf_generator_control%3E%3Cmode%3EPDF%3C%2Fmode%3E%3Cpdmsystem%3EPMD%3C%2Fpdmsystem%3E%3Ctemplate_selection+mlfb%3D%22CODE%22+system%3D%22PRODIS%22%2F%3E%3Clanguage%3Ees%3C%2Flanguage%3E%3Ccaller%3EMall%3C%2Fcaller%3E%3C%2Fpdf_generator_control%3E
```

Which is not only an incorrect extension type, but also results (in this particular case) in an IOException (filename too long).

One quick way to fix this is appending something like `&type=.pdf` to the URL while constructing the `file_urls` list:

``` python
item['file_urls'] = []
item['file_urls'].append(""https://www.domain.name/path/path/DatasheetService?control=%3C%3Fxml+version%3D%221.0%22+encoding%3D%22UTF-8%22%3F%3E%3Cpdf_generator_control%3E%3Cmode%3EPDF%3C%2Fmode%3E%3Cpdmsystem%3EPMD%3C%2Fpdmsystem%3E%3Ctemplate_selection+mlfb%3D%22{}%22+system%3D%22PRODIS%22%2F%3E%3Clanguage%3Ees%3C%2Flanguage%3E%3Ccaller%3EMall%3C%2Fcaller%3E%3C%2Fpdf_generator_control%3E&type=.pdf"".format(item['code']))
```

However, I think it would be helpful to introduce some code that (optionally) guesses the extension out of the response headers:
- First, it checks the `Content-Type` header and uses the `mimetypes` module to guess the extension. 
- Second, if the previous step fails it checks the `Content-Disposition` header.
- Third, if the previous step fails it uses the standard implementation.

This would be useful in the case that the crawler gets a list of URLs by some other means (i.e. using an XPath query).

[Here](https://github.com/ldgarcia/scrapy/commit/a01f24900b3a454f4b09f594a6d529da14394367) is my approach, and I'd be happy to open a PR if you like the idea and the implementation.
"
5416,Positive,"Web servers [should use encoded URLs in their ""Location"" headers](http://stackoverflow.com/questions/7654207/what-charset-should-be-used-for-a-location-header-in-a-301-response), but [they don't always do](http://stackoverflow.com/questions/4400678/what-character-encoding-should-i-use-for-a-http-header/4410331#4410331).

This website for example, for this URL http://www.yjc.ir/fa/news/1815565/
redirects to www.yjc.ir/fa/news/1815565/اعزام-كوهنوردان-ايراني-به-كيليمانجارو

but the bytes received are UTF-8 encoded, and not percent-escaped:

```
'Location': ['/fa/news/1815565/\xd8\xa7\xd8\xb9\xd8\xb2\xd8\xa7\xd9\x85-\xd9\x83\xd9\x88\xd9\x87\xd9\x86\xd9\x88\xd8\xb1\xd8\xaf\xd8\xa7\xd9\x86-\xd8\xa7\xd9\x8a\xd8\xb1\xd8\xa7\xd9\x86\xd9\x8a-\xd8\xa8\xd9\x87-\xd9\x83\xd9\x8a\xd9\x84\xd9\x8a\xd9\x85\xd8\xa7\xd9\x86\xd8\xac\xd8\xa7\xd8\xb1\xd9\x88']
```

`RedirectMiddleware` decodes the header as ""latin1"" ([this is new in Scrapy 1.1](https://github.com/scrapy/scrapy/pull/1488)) and issues a request to http://www.yjc.ir/fa/news/1815565/%C3%98%C2%A7%C3%98%C2%B9%C3%98%C2%B2%C3%98%C2%A7%C3%99%C2%85-%C3%99%C2%83%C3%99%C2%88%C3%99%C2%87%C3%99%C2%86%C3%99%C2%88%C3%98%C2%B1%C3%98%C2%AF%C3%98%C2%A7%C3%99%C2%86-%C3%98%C2%A7%C3%99%C2%8A%C3%98%C2%B1%C3%98%C2%A7%C3%99%C2%86%C3%99%C2%8A-%C3%98%C2%A8%C3%99%C2%87-%C3%99%C2%83%C3%99%C2%8A%C3%99%C2%84%C3%99%C2%8A%C3%99%C2%85%C3%98%C2%A7%C3%99%C2%86%C3%98%C2%AC%C3%98%C2%A7%C3%98%C2%B1%C3%99%C2%88

which is not correct.

`curl -i ""http://www.yjc.ir/fa/news/1815565/""` and `wget http://www.yjc.ir/fa/news/1815565/` handle it just fine and correctly follow http://www.yjc.ir/fa/news/1815565/%D8%A7%D8%B9%D8%B2%D8%A7%D9%85-%D9%83%D9%88%D9%87%D9%86%D9%88%D8%B1%D8%AF%D8%A7%D9%86-%D8%A7%D9%8A%D8%B1%D8%A7%D9%86%D9%8A-%D8%A8%D9%87-%D9%83%D9%8A%D9%84%D9%8A%D9%85%D8%A7%D9%86%D8%AC%D8%A7%D8%B1%D9%88

(curl [fixed the issue not too long ago](https://github.com/curl/curl/issues/473) )

Thanks @stav for reporting!
"
5417,Neutral,"Support for socks5 proxy 

http://www.ietf.org/rfc/rfc1928.txt 

maybe we can use https://github.com/habnabit/txsocksx 's SOCKS5Agent 
"
5418,Neutral,"OS: Ubuntu 14.04.2
Python: 2.7.6, 2.7.8, 2.7.9, 2.7.10 (same result on each)
After updating Scrapy from 0.24 to 1.0 today, I can no longer get anything to run.  Everything I run, even for the tutorial, throws the error:
ImportError:cryptography.hazmat.bindings.openssl.binding
"
5419,Neutral,"telnet localhost 6023

Trying 127.0.0.1...

Connected to localhost.

Escape character is '^]'.

?
"
5420,Neutral,"StackOverflow is missing in http://doc.scrapy.org/en/latest/index.html#getting-help
"
5421,Negative,"The [Exporters section of the docs](https://doc.scrapy.org/en/latest/topics/exporters.html#using-item-exporters) give an example pipeline class called `XmlExportPipeline`. It defines methods `spider_opened` and `spider_closed`.

I found this confusing because the [pipeline docs](https://doc.scrapy.org/en/latest/topics/item-pipeline.html#writing-your-own-item-pipeline) describe methods called `open_spider` and `close_spider`, with seemingly the same semantics. At first I thought the example methods were typo'd, until I saw that they were explicitly connected to the corresponding signals in `from_crawler`.

I'm guessing this is the ""old way"" of doing it, and the example predates the existence of the `open_spider` and `close_spider` methods?

Unless there's a reason to do it this way, I think the example would be clearer (and shorter) if it used the built-in names."
5422,Positive,"Previously reported by michaelvmata on Trac http://dev.scrapy.org/ticket/299

If a crawl spider is redirected to an already visited page, it will still crawl it.

From the mailing list  http://groups.google.com/group/scrapy-users/browse_thread/thread/ee9ad68f5dbacc6d:

""...the dupe filter only catches requests after they leave the spider, so redirected pages are ignored by the dupe filter.

Since the dupefilter and the redirect middleware components are decoupled now, it would be awkward to implement what you suggest, but nevertheless I think it would be useful""
"
5423,Neutral,"Reported by @dangra

This issue manifests when mixing old paths and new ones for extensions and middlewares (this can happen for example while using a newer version of Scrapy in a project that hasn't updated to the new paths yet). Since paths aren't normalized, the same component can be loaded twice.

Take these settings for example:

``` python
# scrapy/settings/default_settings.py
EXTENSIONS_BASE = {
    'scrapy.extensions.debug.StackTraceDump': 100,  # new path
} 
```

``` python
# myproject/settings.py
EXTENSIONS = {
    'scrapy.contrib.debug.StackTraceDump': 200,  # old path
}
```

While merging both dictionaries to build the list of components, the same StackTraceDump class is going to be loaded twice since it appears in two different keys. 
"
5424,Positive,"Hello :)

I've recently working with scrapy, and I got the idea to automatically dump the body of a gotten response to a file when an exception was raised inside a callback. A log would be printed saying where to find the file and the user can inspect what maybe has gone wrong :)

As I implemented an own little ""crash dump system"" (which works completely manually, meaning you need to catch and dump everything yourself), I thought of an integrated version.

Let me know what you think about this idea :)
Thanks in advance :+1:
"
5425,Neutral,"In Downloader class, slots are only created, but never deleted. When scrapy visits many different domains, during crawl, it can take a good amount of memory, storing all those empty slots.
"
5426,Positive,"This is a feature request.

I understand that it's possible to add custom extensions. I am proposing extension(s) to scrape semantic data. To my knowledge, many web pages use one of these:
- Microdata
- Opengraph
- Parsley

Typically, the data extracted will include date of publishing, author name, site name, title, main image URL, etc. Since not all pages on the web are using semantic markup, the extension can also have a feature to create custom mapping: css/xpath selection mapped to relevant data.

What do you think? Any pointers on how to create a custom extension? Thx.
"
5427,Neutral,"https://github.com/scrapy/scrapy/pull/1794 should make TLS/SSL connections work better in most cases, but there are 2 main points to be aware of:
- default method is now `OpenSSL.SSL.SSLv23_METHOD` instead of `OpenSSL.SSL.TLSv1_METHOD`: it allows protocol negotiation (from TLS 1.2 -- when supported by platform -- to SSLv3) ;
- custom DOWNLOADER_CLIENTCONTEXTFACTORY setting classes should accept an OpenSSL.SSL `method` param at init ; HTTP11 downloader handler instantiates the factory in backward compatible way though
"
5428,Neutral,"Hi,

On the ""Stats collection"", there's a little mistake, probably due to a copy/paste. In the part ""Common Stats Collector uses"" [ http://doc.scrapy.org/en/latest/topics/stats.html#common-stats-collector-uses ], the last method shown is `stats.get_stats(spider=None)`. But the example given is this one :

`>>> stats.get_stats('pages_crawled', spider=some_spider)
{'pages_crawled': 1238, 'start_time': datetime.datetime(2009, 7, 14, 21, 47, 28, 977139)}`

The first argument 'pages_crawled' shouldn't be here, the method is just `stats.get_stats(spider=some_spider)` ;)
"
5429,Neutral,"In browser, the response headers is
`Server:nginx`
`Set-Cookie:_m_h5_tk=f8baf9999427b2eb4ffa13bc2b5c04b7_1476178540157; Domain=taobao.com; Expires=Tue, 18-Oct-2016 08:14:40 GMT; Path=/`
`Set-Cookie:_m_h5_tk_enc=84ac09db726b4c8fabd07de36ac46cb8; Domain=taobao.com; Expires=Tue, 18-Oct-2016 08:14:40 GMT; Path=/`
There are two 'Set-Cookie'

In scrapy, when I crawled this page, the response.headers is
`'Server': 'nginx',`
`'Set-Cookie': '_m_h5_tk_enc=6e7808eac6473ca8e15df0442824097a; Domain=taobao.com; Expires=Tue, 18-Oct-2016 08:17:45 GMT; Path=/',`
There is only one 'Set-Cookie'

How can  I get all the 'Set-Cookie'?

`url = 'https://api.m.taobao.com/h5/mtop.taobao.ocean.quest.list.pc/1.0/?appKey=12574478&t=14761675779&sign=41a5e059e35832b3e815ae8b537617cc&api=mtop.taobao.ocean.quest.list.pc&v=1.0&type=jsonp&dataType=jsonp&callback=mtopjsonp1&data=%7B%22itemId%22%3A%22536016491947%22%7D'`
"
5430,Neutral,"Scrapy shell doesn't follow redirects when you do `fetch('http://google.com')`, but it does if you do ` `fetch(scrapy.Request('http://google.com'))`.

I realize this is a historic behavior, but I'd argue that it breaks the expectations for most users, since the most common expectation is that Scrapy would try to do what a browser would do, so I think we should change it.

In my opinion, not following the redirect should be the exceptional behavior, and so that's what should require the user to build a `scrapy.Request` object.

I think ideally, we would be able to pass a keyword argument to `fetch`, like:

```
fetch('http://google.com', redirect=False)
```

And only for that case it would set handle_httpstatus_all to True as explained by @redapple here: https://github.com/scrapy/scrapy/issues/2177#issuecomment-239430163"
5431,Neutral,"an error import at line 16 is  that 
""from twisted.web.client import Agent, ProxyAgent, ResponseDone, \
    HTTPConnectionPool""
there's none class or method in twisted.web.client named  HTTPConnectionPool,is it ""HTTP11ClientProtocol"" in ""twisted.web._newclient"" or ""HTTPConnectionPool"" in ""urllib3"""
5432,Neutral,"I have to crawl an website that enforces a certain download rate limit for all its URLs, for example, 800 KBytes/sec.
Since my internet connection is faster than that, accessing the website using my plain web browser and scrapy causes severe delay penalty by the server software. (Using 800 KB/s limit, the download should finish within 30 secs, but if I use unlimited download rates, the server sometimes does not return anything at all, or after a significant artificial delay of 150 secs more or less.)

Before using scrapy, I was using my home-made crawler with rate limiting.

After migrating to scrapy, I have realized that I have to re-implement `scrapy.core.downloader.webclient` stuffs and I need to learn twisted APIs.
(My first lookup was downloader middlewares, but they seem to be executed _after_ receiving the whole body, unfortunately.)
There is an _undocumented_ setting called `DOWNLOADER_HTTPCLIENTFACTORY`, so I could copy & paste the existing classes, extend them, and override this setting.
I think we can override `rawDataReceived()` in `ScrapyHTTPPageGetter` by inserting calculated delays to limit the receiving rate of the response body traffic, but I think I need more inspection.

Could scrapy be shipped with its native rate limiting feature?
"
5433,Neutral,"As discussed here http://stackoverflow.com/questions/21177090/scrapy-gets-stuck-with-iis-5-1-page , having almost identical applications but being served with different versions of IIS makes scrapy unable to scrap the one served with IIS 5.1.

Why I think as this is related with IIS 5.1 servers: as discussed here http://code.google.com/p/go/issues/detail?id=2184 , IIS 5.1 returns HTTP 100 after every POST request, breaking some automated HTTP clients. It might be the case for scrapy also.

Long story short, how to reproduce the issue:
- Find a webpage with a form being served with IIS 5.1
- Create a spider that makes a FormRequest to the form
- Run the spider
- Scrapy will keep getting timeouts after sending the POST request

But forcing HTTP 1.0 by adding

```
DOWNLOAD_HANDLERS = {
    'http': 'scrapy.core.downloader.handlers.http10.HTTP10DownloadHandler',
    'https': 'scrapy.core.downloader.handlers.http10.HTTP10DownloadHandler',
}
```

to settings.py seems to solve the problem.

Shouldn't the spider work with the default (HTTP 1.1) handler?

P.S: Using Scrapy 0.20.2 (pip-installed)
"
5434,Neutral,"A comment in the code of RetryMiddleware says

```
    # IOError is raised by the HttpCompression middleware when trying to
    # decompress an empty response
```

when including IOError in the exceptions to retry.

But IOError would be raised in HttpCompressionMiddleware's `process_response()`, errors from which are not handled by `process_exception()` in downloader middlewares.
"
5435,Positive,"Hi,

I know there is a feature to resume Scrapy job, but it turns out, if I force close the spider by clicking Ctrl+C twice, it fails to resume. To be honest that makes the resume feature not that useful.

What I want to ask is, can Scrapy survive a crash and resume the last batch? 

Thanks,
Ami"
5436,Positive,"1. Scrapy-redis framework, redis stored xxx: requests have been crawled finished, but the program is still running, how to automatically stop the program, rather than has been running?

```
2017-08-07 09:17:06 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2017-08-07 09:18:06 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
```
2. Please help me.Ths!"
5437,Neutral,"`_extract_links()` either returns all extracted links (can be an empty list) or fails;

It would be nice to wrap a `try/except` and return what could be extracted and skip bogus links.

Example session:

``` python
paul@desktop:~$ scrapy shell
2014-09-29 13:45:58+0200 [scrapy] INFO: Scrapy 0.24.4 started (bot: scrapybot)
2014-09-29 13:45:58+0200 [scrapy] INFO: Optional features available: ssl, http11, boto
2014-09-29 13:45:58+0200 [scrapy] INFO: Overridden settings: {'LOGSTATS_INTERVAL': 0}
2014-09-29 13:45:58+0200 [scrapy] INFO: Enabled extensions: TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState
2014-09-29 13:45:58+0200 [scrapy] INFO: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, MetaRefreshMiddleware, HttpCompressionMiddleware, RedirectMiddleware, CookiesMiddleware, ChunkedTransferMiddleware, DownloaderStats
2014-09-29 13:45:58+0200 [scrapy] INFO: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2014-09-29 13:45:58+0200 [scrapy] INFO: Enabled item pipelines: 
2014-09-29 13:45:58+0200 [scrapy] DEBUG: Telnet console listening on 127.0.0.1:6023
2014-09-29 13:45:58+0200 [scrapy] DEBUG: Web service listening on 127.0.0.1:6080
[s] Available Scrapy objects:
[s]   crawler    <scrapy.crawler.Crawler object at 0x7fab4bcd6fd0>
[s]   item       {}
[s]   settings   <scrapy.settings.Settings object at 0x7fab51714450>
[s] Useful shortcuts:
[s]   shelp()           Shell help (print this help)
[s]   fetch(req_or_url) Fetch request (or URL) and update local objects
[s]   view(response)    View response in a browser

In [1]: from scrapy.http import HtmlResponse

In [2]: r = HtmlResponse(body=
'<html><body><a href=""http://www.example.com/1"">link1</a><a href=""http://www.example.com/2"">link2</a></body></html>', status=200, url=""http://www.example.com"")

In [3]: from scrapy.contrib.linkextractors import LinkExtractor

In [4]: lx = LinkExtractor()

In [5]: lx.extract_links(r)
Out[5]: 
[Link(url='http://www.example.com/1', text='link1', fragment='', nofollow=False),
 Link(url='http://www.example.com/2', text='link2', fragment='', nofollow=False)]

In [6]: r = HtmlResponse(body=
'<html><body><a href=""http://www.example.com/1"">link1</a><a href=""http://[www.example.com/2"">link2</a></body></html>', status=200, url=""http://www.example.com"")

In [7]: lx.extract_links(r)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-7-297e7bca14b8> in <module>()
----> 1 lx.extract_links(r)

/usr/local/lib/python2.7/dist-packages/scrapy/contrib/linkextractors/lxmlhtml.pyc in extract_links(self, response)
    105         all_links = []
    106         for doc in docs:
--> 107             links = self._extract_links(doc, response.url, response.encoding, base_url)
    108             all_links.extend(self._process_links(links))
    109         return unique_list(all_links)

/usr/local/lib/python2.7/dist-packages/scrapy/linkextractor.pyc in _extract_links(self, *args, **kwargs)
     92 
     93     def _extract_links(self, *args, **kwargs):
---> 94         return self.link_extractor._extract_links(*args, **kwargs)

/usr/local/lib/python2.7/dist-packages/scrapy/contrib/linkextractors/lxmlhtml.pyc in _extract_links(self, selector, response_url, response_encoding, base_url)
     50         for el, attr, attr_val in self._iter_links(selector._root):
     51             # pseudo lxml.html.HtmlElement.make_links_absolute(base_url)
---> 52             attr_val = urljoin(base_url, attr_val)
     53             url = self.process_attr(attr_val)
     54             if url is None:

/usr/lib/python2.7/urlparse.pyc in urljoin(base, url, allow_fragments)
    259             urlparse(base, '', allow_fragments)
    260     scheme, netloc, path, params, query, fragment = \
--> 261             urlparse(url, bscheme, allow_fragments)
    262     if scheme != bscheme or scheme not in uses_relative:
    263         return url

/usr/lib/python2.7/urlparse.pyc in urlparse(url, scheme, allow_fragments)
    141     Note that we don't break the components up in smaller bits
    142     (e.g. netloc is a single string) and we don't expand % escapes.""""""
--> 143     tuple = urlsplit(url, scheme, allow_fragments)
    144     scheme, netloc, url, query, fragment = tuple
    145     if scheme in uses_params and ';' in url:

/usr/lib/python2.7/urlparse.pyc in urlsplit(url, scheme, allow_fragments)
    189                 if (('[' in netloc and ']' not in netloc) or
    190                         (']' in netloc and '[' not in netloc)):
--> 191                     raise ValueError(""Invalid IPv6 URL"")
    192             if allow_fragments and '#' in url:
    193                 url, fragment = url.split('#', 1)

ValueError: Invalid IPv6 URL

In [8]: 

```
"
5438,Neutral,"Scrapy 0.16.4 using. This doctest illustrates problem:

``` python
>>> from scrapy.item import Item, Field
>>> from scrapy.contrib.loader import ItemLoader
>>> class Product(Item):
...     seller = Field()
>>> class Seller(Item):
...     name = Field()
>>> pl, sl = ItemLoader(Product()), ItemLoader(Seller())
>>> sl.add_value('name', 'Seller name')
>>> pl.add_value('seller', sl.load_item())
>>> pl.load_item()
{'seller': [{'name': 'Seller name'}]}
```

With result:

```
Failure
**********************************************************************
Failed example:
    pl.load_item()
Expected:
    {'seller': [{'name': 'Seller name'}]}
Got:
    {'seller': ['name']}
```
"
5439,Negative,"Hi,everyone
I need scrapy a website,and It used aspx,
at first ,I used selenium,and it works fine,but too slow
,so  I analysis the request head in chrome dev,
and I found how to structure the head to get the content I need,but it need post both data and cookies,
I used requests and it works fine,but I need to do it in scrapy
I googled before,but it seems if you use Request(...),it can't post data, on the other hand ,if you use Formrequest,it can't have cookies
Now,I'm confused,and don't know what to do
Is that I misunderstood the meaning of these two method?
Help please!
"
5440,Neutral,"I have lot of errors with SSL websites.
For exemple, when I call : `scrapy shell https://subscribe.wsj.com/printpack/`

I have this error : 

```
2016-10-06 22:15:40 [scrapy] DEBUG: Telnet console listening on 127.0.0.1:6043
2016-10-06 22:15:40 [scrapy] INFO: Spider opened
2016-10-06 22:15:40 [scrapy] DEBUG: Retrying <GET https://subscribe.wsj.com/printpack/> (failed 1 times): [<twisted.python.failure.Failure OpenSSL.SSL.Error: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'sslv3 alert handshake failure')]>]
2016-10-06 22:15:40 [scrapy] DEBUG: Retrying <GET https://subscribe.wsj.com/printpack/> (failed 2 times): [<twisted.python.failure.Failure OpenSSL.SSL.Error: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'sslv3 alert handshake failure')]>]
2016-10-06 22:15:40 [scrapy] DEBUG: Gave up retrying <GET https://subscribe.wsj.com/printpack/> (failed 3 times): [<twisted.python.failure.Failure OpenSSL.SSL.Error: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'sslv3 alert handshake failure')]>]
Traceback (most recent call last):
  File ""/usr/local/bin/scrapy"", line 11, in <module>
    sys.exit(execute())
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py"", line 142, in execute
    _run_print_help(parser, _run_command, cmd, args, opts)
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py"", line 88, in _run_print_help
    func(*a, **kw)
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/cmdline.py"", line 149, in _run_command
    cmd.run(args, opts)
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/commands/shell.py"", line 71, in run
    shell.start(url=url)
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/shell.py"", line 47, in start
    self.fetch(url, spider)
  File ""/usr/local/lib/python2.7/dist-packages/scrapy/shell.py"", line 112, in fetch
    reactor, self._schedule, request, spider)
  File ""/usr/local/lib/python2.7/dist-packages/twisted/internet/threads.py"", line 122, in blockingCallFromThread
    result.raiseException()
  File ""<string>"", line 2, in raiseException
twisted.web._newclient.ResponseNeverReceived: [<twisted.python.failure.Failure OpenSSL.SSL.Error: [('SSL routines', 'SSL23_GET_SERVER_HELLO', 'sslv3 alert handshake failure')]>]
```

How fix that ?
"
5441,Neutral,"This line raises an exception because overrides became a property: https://github.com/scrapy/scrapy/blob/master/scrapy/settings/__init__.py#L135
"
5442,Neutral,"[vmprof](https://github.com/vmprof/vmprof-python) is a great tool for profiling the spider and the results can be uploaded to it's server (using `--web` option). 

Users would be able to submit performance issues using the results obtained, and we could check if some parts are taking unexpectedly long time. 

Examples : [Benchmark Spider Result](https://vmprof.com/#/af9672fb-5bb0-4aaf-9214-b1bc496287ea)

This could be implemented like the `--profile` option.

cc @lopuhin "
5443,Neutral,"Travis CI sometimes fails builds because of a `ImagesPipeline` test failure.

Example failed build: https://travis-ci.org/scrapy/scrapy/jobs/169472958

```
=================================== FAILURES ===================================
___ ImagesPipelineTestCaseCustomSettings.test_custom_settings_for_subclasses ___
self = <tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings testMethod=test_custom_settings_for_subclasses>
    def test_custom_settings_for_subclasses(self):
        """"""
            If there are custom settings for subclass and NO class attributes, pipeline should use custom
            settings.
            """"""
        class UserDefinedImagePipeline(ImagesPipeline):
            pass

        prefix = UserDefinedImagePipeline.__name__.upper()
        settings = self._generate_fake_settings(prefix=prefix)
        user_pipeline = UserDefinedImagePipeline.from_settings(Settings(settings))
        for pipe_attr, settings_attr in self.img_cls_attribute_names:
            # Values from settings for custom pipeline should be set on pipeline instance.
            custom_value = settings.get(prefix + ""_"" + settings_attr)
>           self.assertNotEqual(custom_value, self.default_pipeline_settings[pipe_attr])
/home/travis/build/scrapy/scrapy/tests/test_pipeline_images.py:354: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
self = <tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings testMethod=test_custom_settings_for_subclasses>
first = 90, second = 90, msg = None
    def assertNotEqual(self, first, second, msg=None):
        """"""
            Fail the test if C{first} == C{second}.

            @param msg: if msg is None, then the failure message will be
            '%r == %r' % (first, second)
            """"""
        if not first != second:
>           raise self.failureException(msg or '%r == %r' % (first, second))
E           twisted.trial.unittest.FailTest: 90 == 90
/home/travis/build/scrapy/scrapy/.tox/py35/lib/python3.5/site-packages/twisted/trial/_synctest.py:468: FailTest
== 1 failed, 1396 passed, 15 skipped, 12 xfailed, 1 xpassed in 423.24 seconds ==
ERROR: InvocationError: '/home/travis/build/scrapy/scrapy/.tox/py35/bin/py.test --cov=scrapy --cov-report= scrapy tests'
___________________________________ summary ____________________________________
ERROR:   py35: commands failed
```
"
5444,Neutral,"There is an issue in XPathSelector, on _selector.select('xpath')_ we have a list of selectors without _response_ in them.

test:

``` python
selectors = hxs.select('//body')
assert(selectors[0].response, 'response is undefined')
```

fix: to add **response=self.response** as argument

``` python
#XPathSelector.select#line 52
        result = [self.__class__(_root=x, _expr=xpath, namespaces=self.namespaces, response=self.response)
                  for x in result]
```
"
5445,Negative,"I am having the damndest time trying to unquote the URL in some requests. Any plans to add that an as option? It seems like I have to monkeypatch to fix it as middleware won't work but monkeypatching it involves going like 3 libraries deep and I'm not sure how to do that.
"
5446,Neutral,"RetryMiddleware should be _AFTER_ HttpCacheMiddleware (thus retry.process_response called before cache)

because a response that should be retried should NOT be cached.

```
DOWNLOADER_MIDDLEWARES_BASE = {
    # Engine side
    'scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware': 100,
    'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware': 300,
    'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware': 350,
    'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware': 400,
    'scrapy.downloadermiddlewares.retry.RetryMiddleware': 500,
    'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware': 550,
    'scrapy.downloadermiddlewares.ajaxcrawl.AjaxCrawlMiddleware': 560,
    'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware': 580,
    'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware': 590,
    'scrapy.downloadermiddlewares.redirect.RedirectMiddleware': 600,
    'scrapy.downloadermiddlewares.cookies.CookiesMiddleware': 700,
    'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware': 750,
    'scrapy.downloadermiddlewares.chunked.ChunkedTransferMiddleware': 830,
    'scrapy.downloadermiddlewares.stats.DownloaderStats': 850,
    'scrapy.downloadermiddlewares.httpcache.HttpCacheMiddleware': 900,
    # Downloader side
}
```
"
5447,Neutral,"Looks like you guys might have only tested 3.3 for now, i can't even run that one because of a Django 1.9 dependency, running 3.4.4 and 3.5.1 results in the following:

```
Traceback (most recent call last):
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/scrapy/commands/crawl.py"", line 57, in run
    self.crawler_process.crawl(spname, **opts.spargs)
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/scrapy/crawler.py"", line 152, in crawl
    return self._crawl(crawler, *args, **kwargs)
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/scrapy/crawler.py"", line 156, in _crawl
    d = crawler.crawl(*args, **kwargs)
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/twisted/internet/defer.py"", line 1274, in unwindGenerator
    return _inlineCallbacks(None, gen, Deferred())
--- <exception caught here> ---
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/twisted/internet/defer.py"", line 1126, in _inlineCallbacks
    result = result.throwExceptionIntoGenerator(g)
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/twisted/python/failure.py"", line 389, in throwExceptionIntoGenerator
    return g.throw(self.type, self.value, self.tb)
  File ""/home/user/.pyenv/versions/3.4.4/lib/python3.4/site-packages/scrapy/crawler.py"", line 80, in crawl
    yield exc
builtins.SyntaxError: invalid syntax (context_managers.py, line 535)
2016-02-04 11:45:07 [twisted] CRITICAL: 
```
"
5448,Positive,"how to execute ""Running multiple spiders in the same process with 'CrawlerRunner'"" linked by http://doc.scrapy.org/en/latest/topics/practices.html#running-multiple-spiders-in-the-same-process. thanks.
"
5449,Neutral,"`MapCompose` class uses `arg_to_iter` function ([link](https://github.com/scrapy/scrapy/blob/343f997ed6a20241480316c6d24490f071a3b524/scrapy/contrib/loader/processor.py#L27)) with processed values.
`arg_to_iter` check if value is container or not [with such method](https://github.com/scrapy/scrapy/blob/343f997ed6a20241480316c6d24490f071a3b524/scrapy/utils/misc.py#L21):

```
hasattr(arg, '__iter__')
```

Im oftenly pass `lxml.html.HtmlElement` instances through processors and use `MapCompose` with them. But instances of this class have attribute `__iter__`, and they are not being wrapped into `list`, so they are treated as iterables, and `MapCompose` iterates over children of an `HtmlElement` breaking inteded low.

One workaround comes to mind - is to use facilitating processor that would wrap all `HtmlElements` into lists.

But I think, it is better to replace check in `arg_to_iter` to

```
isinstance(arg, (list, tuple))
```

Because it is more explicit, and would ensure, that such things as I described will never happen.
"
5450,Neutral,"This is from a quick brain dump in another PR, I'm putting it here for some discuss-ability.

In effect we only have `Response` and`TextResponse` any longer. `HTMLResponse` and `XMLResponse` classes are only leftover faces, their functionality merged into `TextResponse`.
Instancing Text, Html or XmlResponse is the same thing by a different name.
It could make more sense to use a `mime` property on the response for such type inferral.

We could turn Response into `BinaryResponse` (still being a superclass for `TextResponse`), and create a new `Response` class with the logic to build either Text- or BinaryResponse instances.
This is essentially what `ResponseTypes` currently does, and we might rename that (and clean up the types), with it's `from_args` method as default behavior.

Then somebody can ""feel lucky"" and instance a `Response`, probably getting back the correct type, or they can pick either `TextResponse` or `BinaryResponse` directly.
Additionally we would have `Response.from_content_type()` and other methods directly in the Response class (maybe rename to `Response.type_from_...()` ).

I think that might be nice because the detection logic of `ResponseTypes` seems under-used and appreciated, it's used by the system but not much advertised for custom Spider development.
"
5451,Neutral,"Currently File/Image pipelines populate `files`/`images` fields with dicts containing information about the downloaded files (the downloaded path, the original scraped url, and the file checksum). It would be useful to have downloaded/uptodate status in this dict ([motivation](https://stackoverflow.com/questions/45823196/scrapy-how-to-get-status-of-file-download)).

It goes along with other features requests such as having width/height of images also in the dict output."
5452,Neutral,"Currently, Scrapy forces the user to define a spider in order to start scraping any site, but given all execution is centered around requests and callbacks, I think there should be an option to use Scrapy without defining a spider explicitly.

For instance, below is a subclass of `CrawlerProcess` which allows to start crawling with only an URL and a callback function:

``` python
from scrapy.crawler import CrawlerProcess as _CrawlerProcess
from scrapy.http import Request


class CrawlerProcess(_CrawlerProcess):
    """"""This class allows to crawl an URL with a given callback without explictly creating a spider class.""""""

    def crawl(self, request_or_url, callback=None, crawler_or_spidercls=DefaultSpider,
              *spider_args, **spider_kwargs):
        if isinstance(request_or_url, basestring):
            request_or_url = Request(request_or_url, callback=callback, dont_filter=True)
        spider_kwargs['start_requests'] = lambda: [request_or_url]
        super(CrawlerProcess, self).crawl(crawler_or_spidercls, *spider_args, **spider_kwargs)
```

Then, the example given in www.scrapy.org front page could be written as:

``` python
import scrapy

def parse_blog(response):
    for url in response.css('ul li a::attr(""href"")').re(r'/\d\d\d\d/\d\d/$'):
        yield scrapy.Request(response.urljoin(url), parse_titles)

def parse_titles(response):
    for post_title in response.css('div.entries > ul > li a::text').extract():
        yield {'title': post_title}

crawler = CrawlerProcess()
crawler.crawl('http://blog.scrapinghub.com', callback=parse_blog)
crawler.start()
```

However, this approach misses all the options the `scrapy` command provides, for instance, storing the output of the spider in a file with `-o output.jl`.  And, if the user needs more advanced features, a proper spider class is required in order to take advantage of all the Scrapy features, specially the features that require a specific spider method or attribute.

PD: If anyone likes this idea and wants to contribute, please feel free to provide a PR.
"
5453,Neutral,"This is a [web page](https://www.ncbi.nlm.nih.gov/pubmed/15721472) for a paper. There're some useful information to extract.

I want to extract title, author and abstract of this paper. So I wrote following code:

```
class PublicationSpider(scrapy.Spider):
    name = ""publications""
    start_urls = [
        'https://www.ncbi.nlm.nih.gov/pubmed/15721472',
    ]

    def parse(self, response):
        for publication in response.css('div.rprt.abstract'):
            yield {
                'title': publication.css('h1::text').extract_first(),
                'author': publication.css('div.auths > a::text').extract(),
                'abstract': publication.css('div.abstr abstracttext::text').extract(),
                'doi': publication.css('div.aux a::text').extract_first(),
            }
```

Unfortunately, the code above could not return the right content. It seems that the `abstracttext` element cannot be recognized by Scrapy.

I tried to replace `abstracttext` with `h4`, and the script went well.

So how can I extract the content in `abstracttext`?

See more: http://stackoverflow.com/questions/40241637/extracting-text-in-custom-tags-use-scrapy/
"
5454,Positive,"When I ran a simple spider on my virtualenv with boto installed, although I don't use any S3 related middlewares, Scrapy raised this exception:

Traceback (most recent call last):
  File ""/.../lib/python2.7/site-packages/boto/utils.py"", line 210, in retry_url
    r = opener.open(req, timeout=timeout)
  File ""/usr/local/Cellar/python/2.7.10/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"", line 431, in open
    response = self._open(req, data)
  File ""/usr/local/Cellar/python/2.7.10/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"", line 449, in _open
    '_open', req)
  File ""/usr/local/Cellar/python/2.7.10/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"", line 409, in _call_chain
    result = func(*args)
  File ""/usr/local/Cellar/python/2.7.10/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"", line 1227, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File ""/usr/local/Cellar/python/2.7.10/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py"", line 1197, in do_open
    raise URLError(err)
URLError: <urlopen error timed out>
2015-07-07 09:20:26 [boto] ERROR: Unable to read instance data, giving up

environment:
- OS X Yosemite 10.10.4
- python 2.7.10
- scrapy 1.0.1
- boto 2.38.0

Any helps?

Thanks in advance,
Canh
"
5455,Neutral,"I want to pass along some meta information that belongs to the original start_url's request. I can not find a way to reference that original request from within process_request.

I'm currently doing this by overriding _requests_to_follow in my CrawlSpider sub-class and passing meta=response.meta into Request (example below).

Is there a better way? If not, is a better way (like a parameter in the Rule constructor) wanted?

```
    def _requests_to_follow(self, response):
        self.f.write('REQUESTS RESPONSE META: %s' % response.meta)
        if not isinstance(response, HtmlResponse):
            return
        seen = set()
        for n, rule in enumerate(self._rules):
            links = [l for l in rule.link_extractor.extract_links(response) if l not in seen]
            if links and rule.process_links:
                links = rule.process_links(links)
            for link in links:
                seen.add(link)
                r = Request(url=link.url, callback=self._response_downloaded, meta=response.meta)
                r.meta.update(rule=n, link_text=link.text)
                yield rule.process_request(r)
```
"
5456,Positive,"Hello, 

I run scrapy v1.1.0

I need some parts of the url to create some ids. Lately I have been noticing that response.request.url is returning a different url that the one that is used to scrape. 

In my code I use the item['LINK'] = response.request.url but that is putting in the wrong link on some scrapers like 2/10 approximately. 

Is there a better way to fetch the url? The one that is displayed in the debug scrapy output is correct. 

Thank you. 

This one outputted in the debug window is correct: 
2016-07-12 13:25:34 [scrapy] DEBUG: Scraped from <200 XXX >

The one I fetch with response.request.url is different and wrong. 
"
5457,Neutral,"Hi there, I'm not sure if this is an issue or a design change. I just updated to the latest scrapy and my project has failed because it doesn't find the module scrapy.xlib.pydispatch. It was working fine some days ago and it looks like the code was removed from the release.
"
5458,Neutral,"I used to access settings in my custom exporter using ""from scrapy.conf import settings"" which is now depreciated. 'from_settings' and 'from_crawler' don't work there what should i do?

```
class CustomCsvItemExporter(CsvItemExporter):
    def __init__(self, *args, **kwargs):
        super(CustomCsvItemExporter, self).__init__(*args, **kwargs)
    @classmethod
    def from_settings(cls, settings):
        print ('from_settings ran')
        return cls(settings)
```
"
5459,Positive,"Refactor signal handling similar how [Django did for 1.0](http://code.djangoproject.com/wiki/BackwardsIncompatibleChanges#Signalrefactoring).

According to them, the new approach brings up to 90% speed improvements"
5460,Neutral,"Just like using Extention Class connectted spider_error signal. 

How to handle exception in pipeline with signal?
"
5461,Neutral,"Yes, I think we should mention it, but I'm not sure I like that meta is used for so many things. I still think we should fix at least https://github.com/scrapy/scrapy/issues/1138
"
5462,Neutral,"@vionemc , I'm closing this issue. I assume you found @Digenis link useful."
5463,Neutral,"hi @robsonpeixoto, indeed there's only a wheel distribution. 
there was a problem uploading the source distribution from Travis CI.
Recent pip version should be able to use the wheel version.
`pip install scrapy` should be fine, that's what I use.
Otherwise, you could use https://github.com/scrapy/scrapy/archive/1.1.0.tar.gz
"
5464,Positive,"+1 to replace SgmlLinkExtractor with an implementation based on LxmlDocument.

I also like the idea of hdding the LinkExtractor class in CrawlSpider rules, removing an extra import and the nesting in rules attribute.   
"
5465,Positive,"I was so stupid --- using global proxy and ran out of amount。
At last, all thing go ok
thank you~again.
Tony
"
5466,Neutral,"Extend or fix twisted HTTPClientParser so it doesn't discard the response  
"
5467,Neutral,"I'm leaving it open because of the generic ubuntu repo task, but it's probably more useful to open another ticket with a better description and close this one.

as per this ticket, there is an alias repo for Saucy (and Trusty) available like:

```
deb http://archive.scrapy.org/ubuntu saucy main
```
"
5468,Neutral,"Sure.
"
5469,Neutral,"Have you profiled your spiders?
"
5470,Neutral,"Guys how this history looks like? :sunglasses: https://github.com/umrashrf/selectors/commits/selectors-20150329

FYI Added two custom references (ROOT for selectors and SCRAPY_HEAD for scrapy commit from where it was detached). There are instructions in root commit as how to bring back full history.

Edit 1: Here are the steps I took to create it https://gist.github.com/umrashrf/3538a4394561007a753d
"
5471,Neutral,"@toolking By default we use TLSv1, but you can change it by extending `ContextFactory`.
[`ContextFactory`](https://github.com/scrapy/scrapy/blob/master/scrapy/core/downloader/contextfactory.py#L13)
[`ContextFactorySetting`](https://github.com/scrapy/scrapy/blob/master/scrapy/settings/default_settings.py#L75)
"
5472,Neutral,"close...
"
5473,Neutral,"`parse` is called for start_urls:

```
from scrapy.contrib.spiders.crawl import CrawlSpider

class MySpider(CrawlSpider):
    name = 'testspider'
    start_urls = ['http://scrapinghub.com/']

    def parse(self, response):
        print(response.url)
```

You need to call `super()` to make rules work, but that is expected - if you override something it is reasonable to call super. 

Can't comment about `parse` being default callback for Rules, I haven't used rules much. Also, I'm not sure I like that `parse` is a default callback for Request - it makes sense for requests issued in `start_requests`, but for other requests it kind-of suggests to put all code in a single callback, while usually you have multiple callbacks.
"
5474,Neutral,"If we do include the `response.json` then could we also include a method for JmesQuery. Something like this `response.jmes('[::].urls').extract()`. Although, I don't think we will need `extract_first()` and just a simple `extract()` will do."
5475,Positive,"> But talking semantics, I'd take Request.from_response() over response.newrequest(), wherever I might get that request from in the first place.

I tend to prefer `Request.from_response()` too, it is an already used idiom and it doesn't interfere with your other idea about using selectors as scope filter in link extraction. 

> Or make that Request(url_or_response) resp. FormRequest(url_or_response)?

hmm... I don't get it.

> Maybe self.request(response) could also work instead of scrapy.Request(), because a request factory on response looks somehow wrong to me.

I don't see how `self.request()` could help with the absolute url problem.

> response.request is already the request that generated this response. 
> So response.newrequest is confusing and is ""flowing"" in the wrong direction, if that makes sense.
> I don't feel like responses should generate anything. Sorry dangra.

No hard feelings, this is about getting into discussions to reach a good end :)
"
5476,Positive,"[Scrapy 1.1.0](https://pypi.python.org/pypi/Scrapy/1.1.0) is on PyPI, with Python 3 support (finally).

> What took you so long?

See [release notes](http://doc.scrapy.org/en/1.1/news.html).

Have fun!
"
5477,Neutral,Fixed via #2865 
5478,Neutral,"But it also accept `None`, so it should be `none_or_bytes_or_unicode_to_unicode`/`none_or_bytes_or_to_bytes`.
I think `to_unicode` and `to_bytes` is ok. If you use a not valid input you will get an exception, if the input worth adding the support somebody will create a ticket and we can work on it.
"
5479,Positive,Ok. Have solution.  Start Scrapy Shell from your Spider Code. Here is the full intro - [https://blog.scrapinghub.com/2016/05/18/scrapy-tips-from-the-pros-may-2016-edition/](url)
5480,Neutral,"fyi, I've sent a message on Twisted Web mailing list: https://twistedmatrix.com/pipermail/twisted-web/2017-April/005293.html"
5481,Neutral,"Hey @deanq, you cannot update the settings from within `Spider.__init__()`. They are marked 'immutable' long before it is called.

For per-spider settings, you can use [the Spider's `custom_settings` attribute](http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.custom_settings).

However, given that you want to read from the keyword arguments given on Spider instantiation, that won't really help you either. You could try three things:
1. **(Best)** avoid giving `maxpages` as Spider keyword argument. Maybe it is enough to provide `CLOSESPIDER_PAGECOUNT` through the command line?
2. Write your own modified CloseSpider extension by subclassing [`scrapy.extensions.closespider`](https://github.com/scrapy/scrapy/blob/master/scrapy/extensions/closespider.py), then overwrite the [`page_count()` method](https://github.com/scrapy/scrapy/blob/master/scrapy/extensions/closespider.py#L47) so that it checks against `spider.maxpages` (or similar) instead of against `self.close_on['pagecount']`.
3. ""Hack"" your keyword argument `maxpages` into the existing CloseSpider extension by circumventing the settings, e.g.:
   
   ``` python
   # in your spider
   def __init__(self, **kw):
       # You might have to change the 0 to another index depending on your enabled extensions,
       # check by printing self.crawler.extensions.middlewares somewhere
       self.crawler.extensions.middlewares[0].close_on['pagecount'] = kw.get('maxpages', 100)
   ```
"
5482,Neutral,"@redapple You are right, I checked on Debian Wheezy with python 2.7 & Scrapy 1.1.0rc3 and it works fine. It's only on OSX that it does not work with https://revonsunpeu.net. I don't know if anyone else can confirm this?
"
5483,Positive,"Thanks @werdlv .
So it appears that https://www.skelbiu.lt/ and https://www.cvbankas.lt/ are [served by the same machines](https://www.ssllabs.com/ssltest/analyze.html?d=www.cvbankas.lt&s=92.62.130.22&hideResults=on&latest) 92.62.130.22 and 92.62.130.23.
https://www.skelbiu.lt/ is the host in this very issue (https://github.com/scrapy/scrapy/issues/2717#issue-224196154)"
5484,Neutral,"+1 to provide a built-in way to do this. 

But I'm not sure it should be all just put into canonicalize_url - some of this logic looks task-specific (e.g. you may want to take session ids in account if you're using multiple sessions/cooke jars). 

API ideas are welcome.
"
5485,Neutral,"@kmike I think I don't disallowed network access, when I install twisted independence, the error
```
(ENV) [luoc@study ~ ]$ pip install Twisted
Collecting Twisted
  Could not find a version that satisfies the requirement Twisted (from versions: )
No matching distribution found for Twisted
```"
5486,Neutral,"Fixed by #661.
"
5487,Neutral,"@bhagatsajan0073 , have you tried in a virtualenv?
Otherwise I can only suggest using something like tcpdump or wireshark to understand why the handshake fails
"
5488,Neutral,"@rafallo do you mind submitting a PR so we review and merge?
"
5489,Neutral,"If I paste your item content into a file,

```
$ cat test.json 
{""title"": ""Docker \u5b9e\u6218\u7cfb\u5217 \u2014 \u8fd0\u884c\u7b2c\u4e00\u4e2a\u5bb9\u5668"", ""short_desc"": ""\u5f53\u4f60\u5bf9\u4e00\u4e9b\u6982\u5ff5\u7406\u89e3\u4e0d\u6df1\u7684\u65f6\u5019\uff0c\u5b9e\u8df5\u662f\u6700\u597d\u7684\u89e3\u51b3\u529e\u6cd5\n\n"", ""time"": ""07 Apr 2015""}

```

and use `jq` to display it, it works fine:

```
$ cat test.json | jq .
{
  ""title"": ""Docker 实战系列 — 运行第一个容器"",
  ""short_desc"": ""当你对一些概念理解不深的时候，实践是最好的解决办法\n\n"",
  ""time"": ""07 Apr 2015""
}
```

`\u5217` escape sequences is one way to represent Unicode characters in JSON
"
5490,Neutral,"`response` is not a documented attribute as far as I can see (check selectors doc), which means it could have been private/protected. Could you explain how you are using it and why it's useful to you to decide if we should support it properly?
"
5491,Positive,"@redapple yep
"
5492,Neutral,"@eLRuLL , `DEPTH_PRIORITY` is a setting [read by  `DepthMiddleware`](https://github.com/scrapy/scrapy/blob/ebef6d7c6dd8922210db8a4a44f48fe27ee0cd16/scrapy/spidermiddlewares/depth.py#L27), not specifically for `CrawlSpider`.
In `DepthMiddleware`, `DEPTH_PRIORITY` affects Requests priority [but with a _minus_ sign](https://github.com/scrapy/scrapy/blob/ebef6d7c6dd8922210db8a4a44f48fe27ee0cd16/scrapy/spidermiddlewares/depth.py#L36), so the documentation is correct. But I admit it can be confusing.
"
5493,Neutral,"It seems that the docs do not mention this at all. I'll create an issue for this.
"
5494,Neutral,"> Sometimes I feel like scrapy is missing per request delays. Any reasons why they weren't implemented?

so far nobody took the work to design, argue and implement a solution.

I think the scheduler is the component that must handle per-request delays, but it doesn't look like a simple task.
"
5495,Neutral,"This worked for me:
- [force TLS 1.0](https://docs.scrapy.org/en/latest/topics/settings.html#downloader-client-tls-method)
- use `cryptography<2` (e.g. 1.9 in my case, before OpenSSL 1.1)

```
$ scrapy version -v
Scrapy    : 1.4.0
lxml      : 3.8.0.0
libxml2   : 2.9.3
cssselect : 1.0.1
parsel    : 1.2.0
w3lib     : 1.18.0
Twisted   : 17.5.0
Python    : 3.6.2 (default, Aug 24 2017, 10:48:24) - [GCC 6.3.0 20170406]
pyOpenSSL : 17.2.0 (OpenSSL 1.0.2g  1 Mar 2016)


$ pip freeze
asn1crypto==0.22.0
attrs==17.2.0
Automat==0.6.0
cffi==1.10.0
constantly==15.1.0
cryptography==1.9
cssselect==1.0.1
hyperlink==17.3.1
idna==2.6
incremental==17.5.0
lxml==3.8.0
parsel==1.2.0
pyasn1==0.3.3
pyasn1-modules==0.1.1
pycparser==2.18
PyDispatcher==2.0.5
pyOpenSSL==17.2.0
queuelib==1.4.2
Scrapy==1.4.0
service-identity==17.0.0
six==1.10.0
Twisted==17.5.0
w3lib==1.18.0
zope.interface==4.4.2

$ scrapy shell ""https://wwwnet1.state.nj.us/"" -s DOWNLOADER_CLIENT_TLS_METHOD=TLSv1.0
2017-09-07 17:45:49 [scrapy.utils.log] INFO: Scrapy 1.4.0 started (bot: scrapybot)
2017-09-07 17:45:49 [scrapy.utils.log] INFO: Overridden settings: {'DOWNLOADER_CLIENT_TLS_METHOD': 'TLSv1.0', 'DUPEFILTER_CLASS': 'scrapy.dupefilters.BaseDupeFilter', 'LOGSTATS_INTERVAL': 0}
2017-09-07 17:45:49 [scrapy.middleware] INFO: Enabled extensions:
['scrapy.extensions.corestats.CoreStats',
 'scrapy.extensions.telnet.TelnetConsole',
 'scrapy.extensions.memusage.MemoryUsage']
2017-09-07 17:45:49 [scrapy.middleware] INFO: Enabled downloader middlewares:
['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',
 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',
 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',
 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',
 'scrapy.downloadermiddlewares.retry.RetryMiddleware',
 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',
 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',
 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',
 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',
 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',
 'scrapy.downloadermiddlewares.stats.DownloaderStats']
2017-09-07 17:45:49 [scrapy.middleware] INFO: Enabled spider middlewares:
['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',
 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',
 'scrapy.spidermiddlewares.referer.RefererMiddleware',
 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',
 'scrapy.spidermiddlewares.depth.DepthMiddleware']
2017-09-07 17:45:49 [scrapy.middleware] INFO: Enabled item pipelines:
[]
2017-09-07 17:45:49 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023
2017-09-07 17:45:49 [scrapy.core.engine] INFO: Spider opened
2017-09-07 17:45:49 [scrapy.core.engine] DEBUG: Crawled (200) <GET https://wwwnet1.state.nj.us/> (referer: None)
[s] Available Scrapy objects:
[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)
[s]   crawler    <scrapy.crawler.Crawler object at 0x7f24fb802ac8>
[s]   item       {}
[s]   request    <GET https://wwwnet1.state.nj.us/>
[s]   response   <200 https://wwwnet1.state.nj.us/>
[s]   settings   <scrapy.settings.Settings object at 0x7f24f314d9e8>
[s]   spider     <DefaultSpider 'default' at 0x7f24f24ba7b8>
[s] Useful shortcuts:
[s]   fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redirects are followed)
[s]   fetch(req)                  Fetch a scrapy.Request and update local objects 
[s]   shelp()           Shell help (print this help)
[s]   view(response)    View response in a browser
>>> 

```

Using OpenSSL 1.1.0f (with `cryptography==2.0.3`), did not work for me, even when forcing TLS1.0"
5496,Neutral,"/usr/local/bin:/usr/bin/:/bin:/usr/sbin:/sbin

On 23/02/2013, at 12:31 AM, ""Andrés Moreira"" notifications@github.com
wrote:

@mcooganj https://github.com/mcooganj Can you try ""hash -r"" in bash - it
will re-read you $PATH dirs too?

—
Reply to this email directly or view it on
GitHubhttps://github.com/scrapy/scrapy/issues/253#issuecomment-13943261.
"
5497,Positive,"@redapple ok,thanks
In fact , my code is the definition of download middleware, when httpcode=403 , the router automatically reconnect short net
[mycode](https://github.com/kimg1234/zhihuCollec/blob/master/zhihu/middlewares.py)
"
5498,Neutral,"@bamdadd could you please show an example - how will [partialmethod](https://docs.python.org/3.5/library/functools.html#functools.partialmethod) help?
"
5499,Positive,"I don't remember what it does, that's why there is still no PR :) 
"
5500,Neutral,"also with `--no-cache-dir`
"
5501,Positive,"Thank you @Curita 

Should I close this issue and keep discussion about setting the crawler in **init** in #873 ?
"
5502,Neutral,"Scrapy has a contribution policy as @umrashrf pointed out.

So far the developers' community has seen no undesired behaviour
so nobody had to devote a different section in the documentation for this.

I think github already adopted the ""Open code of conduct""
and also has its own TOS that applies to all hosted projects.
Points 7 and 8 in the ""General Conditions"" do cover most abusive behaviour:
https://help.github.com/articles/github-terms-of-service/#g-general-conditions
"
5503,Positive,"@redapple FINALLY!
thanks @ all 

btw, the ""PY3 95%"" label is now out of date?
![image](https://cloud.githubusercontent.com/assets/8147261/15284790/1f83da08-1b86-11e6-9c9e-e657838406e8.png)
"
5504,Neutral,"@kmike Any service that scrapes content and outputs near-raw data could be targeted by an attacker. Examples, but not limited to:
- Services that generate image or pdf from a given URL, i.e. http://snapito.com/ ;
- Services that calculate a website SEO's score (not so common these day);
- Services that provide extensive search for third parties. SaaS that does website indexing and offers custom search competing with Google's Custom Search Engine);

Any of these services could be powered by Scrapy, and an attacker could exploit them by creating traps such as `<a href=""file:///etc/passwd"">foo</a>` so that once the service iterates a sitemap or downloads whatever page where that trap is deployed to, the target spits out the data scraped.

Just to clarify, the initial point I raised:
A. HTTP redirects and html meta refresh, should only work with http[s]. So far, looks like we all agree with this one.
B. Some kind of master switch could be introduced to the settings file, making it clear that allowing requests to `file://` may result in unwanted results if `OffsiteMiddleware` is not defined or disabled or open to any domains.
"
5505,Positive,"OK , it's now working just fine with the python 2.7 interpreter (scrapy 1.1.2)
and thanks to you , since I couldn't notice that it was using conda version .
"
5506,Neutral,Fixed in https://github.com/scrapy/scrapy/pull/2558
5507,Negative,"I'm not wild about the idea, but maybe I just haven't encountered problems which are solved by django-configurations, or maybe I don't quite get the use case. 

Cons:
- there is already Settings class in Scrapy;
- depending on django-configurations looks weird; does it require django as well?

Other opinions are welcome :) 
"
5508,Positive,"hi @kirankoduru , thanks for stepping in!
keep in mind that `basestring` is not in Python 3.
You may want to look at something like [`arg_to_iter`](https://github.com/scrapy/scrapy/blob/b6375d3701b72ca1ce28c32fd90741b0864db05f/scrapy/utils/misc.py#L17) which does tests for single valued arguments in a Python2/Python3 compatible way.
"
5509,Positive,"A good question. Likely it picks latest numeric branch on github (origin/1.1). It is possible to override that. But I'm not sure what version to choose.
"
5510,Neutral,@kingname can you workaround it by using dont_filter=True?
5511,Positive,"i pull the lastest master and delay works fine for my spider.

thanks
"
5512,Positive,"@kmike 

> and there are (1), (2) and (3) to solve.

(1), (2). I think `make_links_absolute` should not be a separate method from the beginning - because of the reasons you've guys already mentioned :)

> The biggest disadvantage of links() is that it is a new API, but it dosn't have the problems that make_links_absolute has.

hm, ok, you almost convinced me, maybe `.links()` would be better solution. 
"
5513,Neutral,"@dangra @kmike @eliasdorneles @lopuhin @pawelmhm , what do you think?
Should we plan on supporting this?
"
5514,Positive,"Hey @kmike got it, thanks for your help. I know this is out of scope, but I am new to Scrapy, so if you could assist, I would be hugely appreciative: In terms of the structure of scrapy scripts, is there anyway to wrap this up in a function so the request is not executed every time I do anything else in my project?

```
import scrapy
from urlparse import urljoin
import re
import json
import requests
import math
from scrapy.conf import settings

from fancy.items import FancyItem

def roundup(x):
  return int(math.ceil(x / 10.0)) * 10

class FancyUpdateSpider(scrapy.Spider):

  name = 'fancy_update'
  allowed_domains = ['foo.com']

def get_urls():
    # Get URLS
    url = 'https://www.foo.co/api/v1/product_urls?q%5Bcompany_in%5D%5B%5D=bar'
    headers = {'X-Api-Key': settings['API_KEY'], 'Content-Type': 'application/json'}
    r = requests.get(url, headers=headers)
    # Get initial data
    start_urls_data = json.loads(r.content)
    # Grab the total number of products and round up to nearest 10
    count = roundup(int(r.headers['count']))
    pages = (count / 10) + 1

    for i in range (2, pages):
      pg_url = 'https://www.foo.co/api/v1/product_urls?q%5Bcompany_in%5D%5B%5D=bar&page={0}'.format(i)
      pg_r = requests.get(pg_url, headers=headers)
      # Add remaining data to the JSON
      additional_start_urls_data = json.loads(pg_r.content)
      start_urls_data.extend(additional_start_urls_data)

  get_urls()
  start_urls = [x[""link""] for x in start_urls_data]

  def parse(self, response):
    item = FancyItem()
    item['link'] = response.url
    new_body = re.sub(r'<a href=""#"" class=""fancyd_list ""/>', '<a href=""#"" class=""fancyd_list "">', response.body)
    response = response.replace(body=new_body)
    likes = response.xpath(""//div[@class='frm']/div[@class='figure-button']/a[contains(@class, 'fancyd_list')]/text()"").extract_first()
    # Check if likes exist and then strip if so. If no likes, then set to 0
    if likes:
      item['interest'] = likes.strip().replace("","", """")
    else:
      item['interest'] = 0
    return item
```
"
5515,Neutral,"> Instead of handing off relative links and hoping some middleware will fix it , I'd prefer getting an absolute URL back from the selector.

Although, I don't think selectors deserves this task, mostly because linkextractors (#559) are designed to deal with it instead, I will take a step toward this idea in the spirit of #494 and #554 and combine linkextractors into selectors API like this:

``` python
import scrapy

class Spider(scrapy.Spider):

    def parse(response):
        for lnk in response.sel.xpath('//span[@class=""breadcrumb""]').links():
            yield scrapy.Request(lnk.url)

```

here `.links()` takes the usual link extractor arguments except for restrict_xpaths.
"
5516,Positive,"Thanks @nramirezuy . I see what you meant now.
I agree and actually, only the command line option makes sense. Changing it at the project setting does not make sense either.
"
5517,Negative,"Yeah, I don't like it either. 

First idea:

``` python
>>> il = Itemloader(response=response)
>>> with il.xpath('//div') as sel: 
...    il.add_xpath('title', './/h1', selector=sel, context={'foo': 'endoftitle'}, lambda x, loader_context: x[0] + loader_context['foo'])
```

So selector and context gets overridden for that call. Then I thought people is going to bother because they have they have to type selector and stuff, so I start doing crazy stuff to workaround it in a way you can type:

``` python
>>> il = Itemloader(response=response)
>>> with il.xpath('//div'): 
...    il.add_xpath('title', './/h1', context={'foo': 'endoftitle'}, lambda x, loader_context: x[0] + loader_context['foo'])
```

The main problem is that I want `xpath` to return a `Selector` and not a `ContextManager`.
"
5518,Neutral,"Hm, I think it still makes sense to use it by default; Google deprecated this scheme because its crawlers can handle JavaScript now, but Scrapy can't do that, and so relying on `_escaped_fragment_` is better than nothing.
"
5519,Neutral,"Could you try enabling DEBUG log level? Often this happens when there is a non-responding website, and Scrapy makes a lot of retries. It is also helpful to use MonitorDownloads extension from https://github.com/scrapy/scrapy/issues/2173 to see how many files are there in progress."
5520,Neutral,https://github.com/kjd/idna/issues/50#issuecomment-312908539
5521,Neutral,"Summary for Chrome vs. [canonicalize_url](url):

```
>>> from w3lib.url import canonicalize_url
>>> 
>>> chrome_normalized = '''%10,%11,%12,%13,%14,%15,%16,%17,%18,%19,%1A,%1B,%1C,%1D,%1E,%1F
... %20,%21,%22,%23,%24,%25,%26,%27,%28,%29,%2A,%2B,%2C,-,.,%2F
... 0,1,2,3,4,5,6,7,8,9,%3A,%3B,%3C,%3D,%3E,%3F
... %40,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O
... P,Q,R,S,T,U,V,W,X,Y,Z,%5B,%5C,%5D,%5E,_
... %60,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o
... p,q,r,s,t,u,v,w,x,y,z,%7B,%7C,%7D,~,%7F'''
>>> 
>>> raw_in_html = '''%10,%11,%12,%13,%14,%15,%16,%17,%18,%19,%1A,%1B,%1C,%1D,%1E,%1F
... %20,%21,%22,%23,%24,%25,%26,%27,%28,%29,%2A,%2B,%2C,%2D,%2E,%2F
... %30,%31,%32,%33,%34,%35,%36,%37,%38,%39,%3A,%3B,%3C,%3D,%3E,%3F
... %40,%41,%42,%43,%44,%45,%46,%47,%48,%49,%4A,%4B,%4C,%4D,%4E,%4F
... %50,%51,%52,%53,%54,%55,%56,%57,%58,%59,%5A,%5B,%5C,%5D,%5E,%5F
... %60,%61,%62,%63,%64,%65,%66,%67,%68,%69,%6A,%6B,%6C,%6D,%6E,%6F
... %70,%71,%72,%73,%74,%75,%76,%77,%78,%79,%7A,%7B,%7C,%7D,%7E,%7F'''
>>> 
>>> raw_lines = raw_in_html.splitlines()
>>> norm_lines = chrome_normalized.splitlines()
>>> 
>>> for i, line in enumerate(raw_lines):
...     raw_chars = line.split(',')
...     norm_chars = norm_lines[i].split(',')
...     for pos, c in enumerate(raw_chars):
...         canonicalized = canonicalize_url(c)
...         if c == norm_chars[pos]:
...             if c != canonicalized:
...                 print('{0} was preserved by Chrome, but canonicalize_url(""{0}"") unquoted it to {1}'.format(c, canonicalized))
...         
... 
%21 was preserved by Chrome, but canonicalize_url(""%21"") unquoted it to !
%23 was preserved by Chrome, but canonicalize_url(""%23"") unquoted it to #
%24 was preserved by Chrome, but canonicalize_url(""%24"") unquoted it to $
%25 was preserved by Chrome, but canonicalize_url(""%25"") unquoted it to %
%26 was preserved by Chrome, but canonicalize_url(""%26"") unquoted it to &
%27 was preserved by Chrome, but canonicalize_url(""%27"") unquoted it to '
%28 was preserved by Chrome, but canonicalize_url(""%28"") unquoted it to (
%29 was preserved by Chrome, but canonicalize_url(""%29"") unquoted it to )
%2A was preserved by Chrome, but canonicalize_url(""%2A"") unquoted it to *
%2B was preserved by Chrome, but canonicalize_url(""%2B"") unquoted it to +
%2C was preserved by Chrome, but canonicalize_url(""%2C"") unquoted it to ,
%3A was preserved by Chrome, but canonicalize_url(""%3A"") unquoted it to :
%3B was preserved by Chrome, but canonicalize_url(""%3B"") unquoted it to ;
%3D was preserved by Chrome, but canonicalize_url(""%3D"") unquoted it to =
%40 was preserved by Chrome, but canonicalize_url(""%40"") unquoted it to @
%7C was preserved by Chrome, but canonicalize_url(""%7C"") unquoted it to |
```
"
5522,Negative,"I was able to emulate a similar issue touching some settings, I couldn't reproduce it otherwise in the attached project.

Problem here seems unrelated to the system locale. Both log calls, the one in utils/log.py and the one in core/engine.py, try to log an unicode message. By doing that all attributes in the log record are decoded to unicode using the ascii encoding, and that breaks with the reported traceback if there are any non-ascii characters.

The values in the broken line are roughly:

``` python
>>> _fmt = '%(asctime)s [%(name)s] %(levelname)s: %(message)s'
>>> record = {
    'asctime': '2015-06-02 12:17:01+0000',
    'created': 1433258457.911135,
    'exc_info': None,
    'exc_text': None,
    'filename': 'log.py',
    'funcName': 'log_scrapy_info',
    'levelname': 'INFO',
    'levelno': 20,
    'lineno': 108,
    'module': log,
    'msecs': 911.1349582672119,
    'message': u'Scrapy 1.1.0rc1 started (bot: imzx)',
    'name': 'scrapy',
    'pathname': 'scrapy/utils/log.py',
    'process': 19931,
    'processName': 'MainProcess',
    'relativeCreated': 66988981.72998428,
    'thread': 139932245554944,
    'threadName': 'MainThread'}
}
>>> s = _fmt % record
```

Since `'message'` is unicode, all `'asctime'`, `'name'` and `'levelname'` (and only those) in the record dictionary are going to be casted to unicode using the ascii encoding while formatting them into `_fmt`, which is going to be casted to unicode too. If any of those has non-ascii chars, the conversion is going to break with the UnicodeDecodeError.

Problem is, I don't know how any of those could hold non-ascii characters. The default `'asctime'` format is `'%Y-%m-%d %H:%M:%S%z'`, those placeholders format into numbers regardless locale. All these values are bytestrings handled by us, which are encoded by the default file encoding (ascii in python2) unless stated otherwise at the beginning of the file.

Something that I tested to trigger these errors was to install scrapy in a path with non-ascii characters, and then change the default format with the LOG_FORMAT setting to `'[%(pathname)s] %(message)s'`. Doing this the logging breaks every time a unicode message is logged, but this is something expected of the python logging since it's using bytestrings internally to store the pathname.

@binbibi, can I ask you to run the following commands (notice the leading `u` in both messages, both calls are logging unicode) and see if any of these calls throws errors? I'm really sorry for the troubles. 

``` python
>>> import logging
>>> logging.basicConfig(format='%(asctime)s [%(name)s] %(levelname)s: %(message)s')
>>> logging.warning(u'First log message')
```

``` python
>>> import logging
>>> from scrapy.utils.log import configure_logging
>>> configure_logging({})
>>> logger = logging.getLogger('scrapy')
>>> logger.debug(u'Second message')
```
"
5523,Neutral,"Closing as duplicate of https://github.com/scrapy/scrapy/issues/2004
"
5524,Neutral,"@pablohoffman created here: https://github.com/scrapy/scrapyd/issues/85
"
5525,Neutral,"@kmike , as long as we keep `MEMUSAGE_LIMIT_MB` default to 0, I like the idea.
I'm sensing this is related to https://github.com/scrapy/scrapy/issues/2173 , or?
By the way, `MEMUSAGE_REPORT` [doesn't seem to do anything](https://github.com/scrapy/scrapy/blob/ebef6d7c6dd8922210db8a4a44f48fe27ee0cd16/scrapy/extensions/memusage.py#L38).

As a side note, we need to do a better job at reporting memory usage when limit is reached, it seems the extension only prints the engine status when email notificaations are on.
"
5526,Positive,"@chekunkov What do you think of adding this feature as an idea for this year's GSoC? Don't know if you've already started implementing it, but seems like a really fun and challenging project for a student, and provided of good mentoring (I'd love to have you as a mentor if you're interested) seems feasible on GSoC's timeframe.
"
5527,Neutral,"I second @Digenis on this, I splitted several repositories in the past and it never was in a single pass so I found the best way is to write a script (bash) to rerun on each debug iteration.

Once you wrote the script it is simple to make it public.
"
5528,Positive,"@nyov I think they are okay with history provided by git-filter-branch. They need the script for historical reasons. The script will be outdated for sure but at any point in future they can see how was it brought into existence.

After writing script, I found that it's indeed better approach to split the repo as you don't need to keep tabs on everything in your head :)
"
5529,Neutral,"@kmike - ah, ok. I'm working on an inherited codebase that doesn't use the `LinkExtractors` directly, so this was obviously just a misunderstanding of the API/using something non-public. I'll close this issue - agree with backwards incompatible change reasons.
"
5530,Positive,"Hey @kmike I guess it's fine to close this issue for now. The problem is probably solved and was in a previous release. If it occurs again we can reopen this issue. :+1: 
"
5531,Neutral,"Do you have an example of a page where it could happen?
"
5532,Neutral,"@busla , I just submitted a PR for this, using your document as a test sample:
https://github.com/scrapy/scrapy/pull/1671

I was able to make your spider work with this minor change to your code:

```
    itertag = u'þingflokkur'
```

using a Unicode string and using the repeating element tag, not the parent element.

Are you able to check your spider with this suggested fix?
"
5533,Negative,"I was able to fix this issue. Unfortunately in my personal crawling I found PyPy to be twice as slow as CPython. I think this is caused by lxml being twice as slow in PyPy vs CPython.
"
5534,Positive,"there was w3lib and scrapyd but now they are using my username/token.

we need to add travis.yml for slybot and scrapely, let me know if you add it and I'll configure the hook.

thanks @kmike for looking at this!
"
5535,Neutral,It looks the same as https://github.com/scrapy/scrapy/issues/1770. Which was fixed in 1.1.0rc2
5536,Neutral,"`lxml/libxml2` has trouble with this input, but `html5lib` and `beautifulsoup` can cope (although with some specificities on the XPath expression to use)

Plain lxml:

```
$ ipython
Python 2.7.9 (default, Apr  2 2015, 15:33:21) 

In [1]: t = '''<html><body><img src=""http://www1.pcbaby.com.cn/images/blank.gif"" #src=""http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg"" /></body></html>'''

In [2]: import lxml.html

In [3]: lxml_doc = lxml.html.fromstring(t)

In [4]: lxml_doc.xpath('//img/@*')
Out[4]: ['http://www1.pcbaby.com.cn/images/blank.gif']

```

Let's try with `html5lib`

```
In [6]: from lxml.html import tostring, html5parser

In [7]: html5_doc = html5parser.document_fromstring(t)
/home/paul/.virtualenvs/scrapy10/local/lib/python2.7/site-packages/html5lib/ihatexml.py:254: DataLossWarning: Coercing non-XML name
  warnings.warn(""Coercing non-XML name"", DataLossWarning)

In [8]: html5_doc.xpath('//img/@*')
Out[8]: []

In [9]: html5_doc.xpath('//@*')
Out[9]: 
['http://www1.pcbaby.com.cn/images/blank.gif',
 'http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg']

In [15]: tostring(html5_doc)
Out[15]: '<html:html xmlns:html=""http://www.w3.org/1999/xhtml""><html:head></html:head><html:body><html:img src=""http://www1.pcbaby.com.cn/images/blank.gif"" U00023src=""http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg""></html:img></html:body></html:html>'

```

It seems `html5lib` has the attribute accessible using ""U00023src"", not ""#src"".
And you need to pass namespace

```
In [16]: html5_doc.xpath('//html:img/@*', namespaces={""html"": ""http://www.w3.org/1999/xhtml""})
Out[16]: 
['http://www1.pcbaby.com.cn/images/blank.gif',
 'http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg']

In [17]: html5_doc.xpath('//html:img/@U00023src', namespaces={""html"": ""http://www.w3.org/1999/xhtml""})
Out[17]: ['http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg']
```

Let's try with beautifulsoup parser

```
In [18]: from lxml.html import soupparser

In [19]: bs_doc = soupparser.fromstring(t)
/home/paul/.virtualenvs/scrapy10/local/lib/python2.7/site-packages/bs4/__init__.py:166: UserWarning: No parser was explicitly specified, so I'm using the best available HTML parser for this system (""html.parser""). This usually isn't a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.

To get rid of this warning, change this:

 BeautifulSoup([your markup])

to this:

 BeautifulSoup([your markup], ""html.parser"")

  markup_type=markup_type))

In [20]: bs_doc.xpath('//img/@*')
Out[20]: 
['http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg',
 'http://www1.pcbaby.com.cn/images/blank.gif']

In [21]: bs_doc.xpath('//img/@#src')
---------------------------------------------------------------------------
XPathEvalError                            Traceback (most recent call last)
<ipython-input-21-2d48dd3d4138> in <module>()
----> 1 bs_doc.xpath('//img/@#src')

src/lxml/lxml.etree.pyx in lxml.etree._Element.xpath (src/lxml/lxml.etree.c:61854)()

src/lxml/xpath.pxi in lxml.etree.XPathElementEvaluator.__call__ (src/lxml/lxml.etree.c:178516)()

src/lxml/xpath.pxi in lxml.etree._XPathEvaluatorBase._handle_result (src/lxml/lxml.etree.c:177421)()

XPathEvalError: Invalid expression

In [22]: bs_doc.xpath('//img/@*[name()=""#src""]')
Out[22]: ['http://img0.pcbaby.com.cn/pcbaby/1603/10/2799244_yunzaoqi0310-11.jpg']
```
"
5537,Positive,"Me and @dangra wanted to create this package quite a long time ago; the idea was indeed to move scrapy deprecation utilities to a separate package, likely with a different API. We never found time to do that, but it is still in plans :)
"
5538,Neutral,"What do you mean by how to fill this?. It's just a regular setting. What should it say?
"
5539,Neutral,"I belive we can close this issue as the consensus is to recommend using spider middlewares for this.
I've opened https://github.com/scrapy/scrapy/issues/2240 to add a blob about this in the docs or FAQ.
"
5540,Neutral,"That is because it is an internal API, isn't meant to be documented. Can I ask how are you using this `ExtensionManager`?
"
5541,Positive,"Interesting idea @Parth-Vader .
I'm not familiar with the various profiling tools out there, but it looks like we could have a `--profiler <profilername>` option to select the one you want.
I don't know how generic this can be nor if we'll not end up with hardcoded things like the Python shell-handling code: https://doc.scrapy.org/en/latest/topics/shell.html#configuring-the-shell + https://github.com/scrapy/scrapy/blob/2086ff4065a43fa40d909f81e62623e265df5759/scrapy/utils/console.py#L49
But +1 to have something more configurable than cProfile"
5542,Neutral,"This was fixed by #307 (already merged)
"
5543,Neutral,"ScrapyHTTPClientFactory is only used for the old and deprecated download handler, what twisted version are you using?
"
5544,Neutral,"Ouch. I suppose this means reviewing #1103 and doing a more elaborate dance with SSL connections here.
"
5545,Positive,"@redapple  yeah, it worked
"
5546,Neutral,"Hi @dangra , I managed to understand where the error came from.
I was trying to use the new Django 1.7 setup() function to import my settings from within scrapy settings.

```
import django
django.setup()
```

It created some conflicts (like an infinite loop or something like this) and the solution was for me to use django.setup() outside scrapy's settings.py.
"
5547,Neutral,"@juanriaza instead of `(element, attribute, link, pos)` tuple it may be better to yield Link objects which contain similar information and extra methods. They are already used in Scrapy.
"
5548,Neutral,"I'd suggest to include `conda` (either through anaconda or miniconda distributions) as the recommended method to install scrapy instead of messing with system-wide packages in OS X. 
"
5549,Neutral,"This issue is about the suggestion of importing `spiders` form `scrapy.project` no longer working or something else?
"
5550,Neutral,"@dolohow , does this work for you?
"
5551,Neutral,"I'm not reporting the boto error, thats already reported on #1099. I'm reporting the missing traceback from the spider.
"
5552,Positive,"Thanks for checking @rolando 
"
5553,Neutral,"@sunnysideprodcorp Scrapy 0.9 is a very very old version, latest stable is 1.0.0 and previous is 0.24.6. 

ScrapyClientContextFactory can be found at https://github.com/scrapy/scrapy/blob/master/scrapy/core/downloader/contextfactory.py
"
5554,Positive,"This fixed it, thank you very much.

On Ubuntu 14.04, I was using the standard tox package, version 1.6.0.
`pip install --upgrade tox` installed a more recent version. `tox --version` gives now 

> 2.1.1 imported from /usr/local/lib/python2.7/dist-packages/tox/**init**.pyc

Now tox runs successfully with none failing 

> ================== 1127 passed, 13 skipped in 298.90 seconds ===================

So, this seems to be a tox issue and not scrapy's fault.
"
5555,Negative,"Indeed. Weird.
"
5556,Neutral,"@palego I get this failure:

```
scrapy git:(pr/1657) ✗ nosetests tests/test_commands.py
...................F..
======================================================================
FAIL: test_startproject_template_override
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""/Users/rolando/miniconda/envs/orchardmile-spiders/lib/python2.7/site-packages/twisted/internet/defer.py"", line 150, in maybeDeferred
    result = f(*args, **kw)
  File ""/Users/rolando/miniconda/envs/orchardmile-spiders/lib/python2.7/site-packages/twisted/internet/utils.py"", line 201, in runWithWarningsSuppressed
    reraise(exc_info[1], exc_info[2])
  File ""/Users/rolando/miniconda/envs/orchardmile-spiders/lib/python2.7/site-packages/twisted/internet/utils.py"", line 197, in runWithWarningsSuppressed
    result = f(*a, **kw)
  File ""/Users/rolando/Projects/gh/scrapy/tests/test_commands.py"", line 94, in test_startproject_template_override
    (self.project_name, join(self.tmpl, 'project')), out)
  File ""/Users/rolando/miniconda/envs/orchardmile-spiders/lib/python2.7/site-packages/twisted/trial/_synctest.py"", line 497, in assertIn
    % (containee, container))
FailTest: ""New Scrapy project 'testproject', using template directory '/var/folders/55/nbg15c6j4k3cg06tjfhqypd40000gn/T/tmpl2NVJx/templates/project', created in:"" not in ""New Scrapy project 'testproject' created in:\n    /private/var/folders/55/nbg15c6j4k3cg06tjfhqypd40000gn/T/tmpl2NVJx/testproject\n\nYou can start your first spider with:\n    cd testproject\n    scrapy genspider example example.com\n""

----------------------------------------------------------------------
Ran 22 tests in 28.886s

FAILED (failures=1)
```
"
5557,Neutral,"Alright, this fixed the issue, I got another issue after this which was fixed by appending the private key to the cert.pem

Now however, the bench command just terminates without doing anything, do I have to open any specific ports for it to work?

```
2014-07-18 12:24:29+0100 [scrapy] DEBUG: Web service listening on 127.0.0.1:6080
2014-07-18 12:24:29+0100 [follow] DEBUG: Retrying <GET http://localhost:8998/follow?total=100000&order=rand&maxlatency=0.0&show=20> (failed 1 times): 504 Gateway Time-out
2014-07-18 12:24:29+0100 [follow] DEBUG: Retrying <GET http://localhost:8998/follow?total=100000&order=rand&maxlatency=0.0&show=20> (failed 2 times): 504 Gateway Time-out
2014-07-18 12:24:29+0100 [follow] DEBUG: Gave up retrying <GET http://localhost:8998/follow?total=100000&order=rand&maxlatency=0.0&show=20> (failed 3 times): 504 Gateway Time-out
2014-07-18 12:24:29+0100 [follow] DEBUG: Crawled (504) <GET http://localhost:8998/follow?total=100000&order=rand&maxlatency=0.0&show=20> (referer: None)
2014-07-18 12:24:29+0100 [follow] DEBUG: Ignoring response <504 http://localhost:8998/follow?total=100000&order=rand&maxlatency=0.0&show=20>: HTTP status code is not handled or not allowed
2014-07-18 12:24:29+0100 [follow] INFO: Closing spider (finished)
2014-07-18 12:24:29+0100 [follow] INFO: Dumping Scrapy stats:
```
"
5558,Positive,"@redapple , I pulled the changes you made and I was doing some testing. So far I haven't seen any issues and that change actually fixed the issue. Thanks for the quick response and the fix. Now I see clear messages in the logs too which is very helpful.
"
5559,Neutral,"Here's a gist with my modified `HttpCompressionMiddleware.process_response`: https://gist.github.com/295df3142597fd1e2aa594b8f7bed75a

I'm not proud of it, since it's an ugly hack. But i guess it points to `responsetypes.from_args` as the bug source.
"
5560,Neutral,"do you mean `/usr/local/bin/scrapy` exists after installing with pip?

If so, add `/usr/local/bin` to PATH environment variable or create symlink from /usr/bin/ like:

```
ln -s /usr/local/bin/scrapy /usr/bin/
```
"
5561,Neutral,"please, route question like this to Scrapy mailing list http://groups.google.com/group/scrapy-users/ 
"
5562,Neutral,"@Digenis I think there is no need for aggressive removals of deprecated code. IMHO we definitely shouldn't remove code and modules deprecated in 0.24 during 1.1 release.
"
5563,Neutral,"Do you mean, how to contribute? 

May be this? http://doc.scrapy.org/en/master/contributing.html
"
5564,Neutral,"Hey @Anlight,

Please use http://stackoverflow.com (with tag [scrapy](http://stackoverflow.com/questions/tagged/scrapy)) or scrapy-users Google group (less popular) for support questions.
"
5565,Neutral,Fixed by #2590 
5566,Neutral,"Currently, when the crawling doesn't even start (say, because of an exception in some `__init__` or `__new__` method) the exit code is set to 1, allowing for `scrapy crawl stuff || handle error` expressions in the shell.
"
5567,Neutral,"Hi, Phil, i already implemented the functionality, but in order to include in scrapy i have to implement tests too. The code is published in my copy of scrapy repository, here https://github.com/kalessin/scrapy/commits/ftphandler I just pushed it, so it is available for anyone while tests are not implemented. I plan to add it in short time, but i am open to colaboration for that.
"
5568,Neutral,"Based on the gist it seems you don't need to change anything on Scrapy side to use this feature. Could you check if it is true?
"
5569,Neutral,"For now you can use `Autothrottle`. You just need to override [`_response_downloaded`](https://github.com/scrapy/scrapy/blob/master/scrapy/extensions/throttle.py#L40) and do something [like](https://github.com/scrapy/scrapy/blob/master/scrapy/downloadermiddlewares/httpcache.py#L41).

I'll encourage you to make a PR with this feature, it might be useful for someone else.
"
5570,Negative,"I think we can do nothing in Scrapy to fix it; it looks like a gevent bug or gevent incompatibility with Twisted.
"
5571,Neutral,"Aside of referencing your findings from a FAQ entry, the only long term solution I can think is in the lines of #1435.
"
5572,Negative,"Hey @jorenham,

There are no required methods in scrapy pipelines, middlewares and extensions, all methods are optional. So the tricky part is to figure out what should these base classes contain. We also need to make sure pipelines/middleware/extensions which are not subclasses of these base classes still work.

The current solution to documentation problem is to generate extension/middleware/pipeline templates, with all these methods - each new Scrapy project has them.

But I also find myself looking at docs each time I'm implementing a middleware or a pipeline, I feel the pain. Also, sometimes you have a middlewares.py file with a middleware and it is not immediately clear if it is a downloader or a spider middleware; inheriting from a certain class could help with readability."
5573,Neutral,"@lagenar , we added #1629 to 1.1 milestone, so hopefully the core devs will agree on a good solution for most cases.
By the way, the custom context factory works for https://www.buyagift.co.uk/, so one more point for #1629
"
5574,Neutral,"I'm pretty sure the issue is `pip` installed your scrapy executable to a path that is not within your $PATH.
"
5575,Positive,"Thanks for reporting @starrify
Is it the same as https://github.com/scrapy/scrapy/issues/2304 ?
Does https://github.com/scrapy/w3lib/pull/75 fix it?

Le 12 oct. 2016 7:11 PM, ""Pengyu CHEN"" notifications@github.com a écrit :

> _Affected version:_
> dc1f9ad
> https://github.com/scrapy/scrapy/commit/dc1f9ad211669e6a89774c69fed01567960b9a3f
> 
> _Affected Python version:_
> Python 2 only
> 
> _Steps to reproduce:_
> 
> > > > import scrapy.http>>> response = scrapy.http.TextResponse(url='http://foo.com', body=u'<a href=""http://foo\u263a"">', encoding='utf8')>>> response.css('a::attr(href)').extract()
> > > > [u'http://foo\u263a']>>> import scrapy.linkextractors>>> extractor = scrapy.linkextractors.LinkExtractor()>>> extractor.extract_links(response)
> > > > Traceback (most recent call last):
> > > >   File ""<stdin>"", line 1, in <module>
> > > >   File ""/tmp/virtualenv/src/scrapy/scrapy/linkextractors/lxmlhtml.py"", line 111, in extract_links
> > > >     all_links.extend(self._process_links(links))
> > > >   File ""/tmp/virtualenv/src/scrapy/scrapy/linkextractors/__init__.py"", line 104, in _process_links
> > > >     link.url = canonicalize_url(urlparse(link.url))
> > > >   File ""/tmp/virtualenv/lib/python2.7/site-packages/w3lib/url.py"", line 354, in canonicalize_url
> > > >     parse_url(url), encoding=encoding)
> > > >   File ""/tmp/virtualenv/lib/python2.7/site-packages/w3lib/url.py"", line 298, in _safe_ParseResult
> > > >     netloc = parts.netloc.encode('idna')
> > > >   File ""/tmp/virtualenv/lib/python2.7/encodings/idna.py"", line 164, in encode
> > > >     result.append(ToASCII(label))
> > > >   File ""/tmp/virtualenv/lib/python2.7/encodings/idna.py"", line 76, in ToASCII
> > > >     label = nameprep(label)
> > > >   File ""/tmp/virtualenv/lib/python2.7/encodings/idna.py"", line 21, in nameprep
> > > >     newlabel.append(stringprep.map_table_b2(c))
> > > >   File ""/usr/lib64/python2.7/stringprep.py"", line 197, in map_table_b2
> > > >     b = unicodedata.normalize(""NFKC"", al)TypeError: normalize() argument 2 must be unicode, not str
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/scrapy/scrapy/issues/2323, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AA2GGD4my6g33KGKtIgbtoRKnZChO4ipks5qzRSmgaJpZM4KU_lv
> .
"
5576,Negative,"Also having the same problem, the site I am scraping requires that the commas do not get encoded, i.e. http://url/1,2,3.html, which through the safe_url encoding gets changed.  Having a hard time getting it to work, even with senarvi and DanMcInerney's workarounds.

Would be great to have an option to disable safe_url for certain spiders. 
"
5577,Neutral,"See also: https://github.com/scrapy/scrapy/issues/482.

Pipeline doesn't bypass website concurrency limits, but requests are sent directly to Downloader, without putting them to Scheduler - this indeed means they are all in-memory."
5578,Neutral,"In that case the docs are a little misleading.
http://doc.scrapy.org/en/latest/topics/logging.html

Logging from spiders is 'recommended' to be done using the spiders' log() method. But the docs don't disregard using the log module normally, in fact it is mentioned right after how to do it.

In any case, pipelines are modules where a lot data output occurs, they typical usage scenario for logging. How do I log from a pipeline without calling the log constructor? Is it not possible by design?

Is the log module intended to be used only scrapy's core? If so, I suggest to moving that part of the documentation to the right section as it is clearly misplaced/misleading.
"
5579,Neutral,"You need to render javascript. One solution is [scrapy-splash - it integrates Scrapy spiders with headless browser - Splash](https://github.com/scrapy-plugins/scrapy-splash). [Here is nice tutorial](https://blog.scrapinghub.com/2015/03/02/handling-javascript-in-scrapy-with-splash/) about using it.

Sometimes you don't really need to render Javascript. If these vue templates are filled with some data fetched with ajax request it is often enough to just make proper api call get JSON and parse it. this is often easier than rendering full page."
5580,Neutral,"Can you explain how it makes sub classing slightly easier? Just by avoiding the import? or there is something else I'm missing.
"
5581,Neutral,"@redapple: yes, that would be nice to have that kind of functionality.
For the record, the workaround I use in the meantime is to force the timezone with a `TZ=UTC` environment variable and with `LOG_DATEFORMAT = '%Y-%m-%dT%H:%M:%SZ'` where `Z` is hardcoded."
5582,Neutral,"Tracing this error,I find that 'msg' is:
'2015-07-01 17:17:31 [scrapy] DEBUG: Retrying <GET http://search.10jqka.com.cn/s
tockpick/search?id=stockpick&w=%E5%AE%9E%E9%99%85%E6%8E%A7%E5%88%B6%E4%BA%BA+601
666&offset=3&limit=0&source=data&callback=conceptSearch> (failed 1 times): TCP c
onnection timed out: 10060: \xd3\xc9\xd3\xda\xc1\xac\xbd\xd3\xb7\xbd\xd4\xda\xd2
\xbb\xb6\xce\xca\xb1\xbc\xe4\xba\xf3\xc3\xbb\xd3\xd0\xd5\xfd\xc8\xb7\xb4\xf0\xb8
\xb4\xbb\xf2\xc1\xac\xbd\xd3\xb5\xc4\xd6\xf7\xbb\xfa\xc3\xbb\xd3\xd0\xb7\xb4\xd3
\xa6\xa3\xac\xc1\xac\xbd\xd3\xb3\xa2\xca\xd4\xca\xa7\xb0\xdc\xa1\xa3.'
"
5583,Neutral,"@mvsantos: I understand the issue but must say Scrapy defaults are set to ease development, and tuned in production in a per case basis. 

As a general rule It's recommended to run spiders in constrained environments, limited in memory, CPU and filesystem access, and this environments makes access to local files a derisory issue.

Disabling `file://` by default will become a common gotcha for local development. 
What about adding a ""Recommendation for running spiders in production"" page to docs? 
"
5584,Neutral,"Also if you are calling this [`log.start()`](https://github.com/scrapy/scrapy/blob/master/scrapy/log.py#L122) you are overriding the settings, the `Crawler` works because it calls it [from](https://github.com/scrapy/scrapy/blob/master/scrapy/log.py#L160)
"
5585,Positive,"Well thats a job for scrapyd :)
"
5586,Neutral,"@felixonmars do you have an idea for better names?
"
5587,Neutral,"Resolved by myself:

## 1 Prepare docker

### 1.1 Install DockerToolBox

See：
http://www.oschina.net/translate/installing-docker-on-mac-os-x
https://github.com/boot2docker/osx-installer/releases

### 1.2 Pull a ubuntu image for docker

<pre>
$docker pull daocloud.io/ubuntu:14.04
</pre>

### 1.3 Run docker entry the ubuntu14.04

<pre>
$docker run -it ubuntu:14.04
</pre>

## 2 Install tools in docker

### 2.1 update apt-get

<pre>
  #apt-get update
</pre>

### 2.2 install python

<pre>
  #sudo apt-get install python
</pre>
  

### 2.3 Install wget so you can download file in consol

<pre>
  #apt-get install wget
</pre>

### 2.4 Goto tmp dir for download files

<pre>
  #cd tmp
</pre>

### 2.5 Download get-pip and install pip

<pre>
 #wget https://bootstrap.pypa.io/get-pip.py
 #python get-pip.py
</pre>

---------------- base end -----------------

### 2.6 Install make

<pre>
 #apt-get install make
</pre>

### 2.7 Install gcc

<pre>
 #apt-get install  build-depgcc
 #apt-get  install  build-essential
</pre>

--------- gcc end ------------

### 2.8 Install dependent libs

<pre>
 #apt-get install libxml2-dev libxslt1-dev
 #apt-get install libgsl0-dev
 #apt-get install python-dev
 #apt-get install libffi-dev
 #apt-get install libssl-dev
</pre>

--------- dep end ------------

### 2.9 Install scrapy

<pre>
 #pip install scrapy
</pre>

## 3 Save the install state to docker image

### 3.1 exit from docker terminal

<pre>
 #exit
</pre>

### 3.2 Findout the containerId

<pre>
$docker ps -a -q
cc4072aadb13
</pre>

### 3.3 Save image

<pre>
$ docker commit cc40 ubuntu/spider
02db509cb269710f8f80b2a35f12995c59c668b3e3ba2e7148987bc55d713fa5
</pre>

### 3.4 Review the image we saved

<pre>
$ docker images
REPOSITORY          TAG                 IMAGE ID            CREATED              VIRTUAL SIZE
ubuntu/spider       latest              138b6860da02        About a minute ago   228.2 MB
ubuntu              latest              6cc0fc2a5ee3        3 days ago           187.9 MB
ubuntu              14.04               6cc0fc2a5ee3        3 days ago           187.9 MB
honeydeiMac:~ caojianfeng$ 
</pre>
"
5588,Positive,"Hello All... 
Thanks for the reply... Yeah I manage to get it to work.. the reason is that I had 2 version of python install.  Just had to run alias to default my python command to the latest version of Python. 

Again thank you for the help.. :)
"
5589,Neutral,"I think we can close this. I don't recall seeing this issue lately.
"
5590,Neutral,"I just realized it must not be a problem because if git-diff can do it so can git-replace. If it was the other way around (""removed"" and ""added"") then git-blame would be affected.
"
5591,Positive,"Of cousre mate, great idea, sorry should of included that, really appreciate your help. Please find it below:

```
^CTraceback (most recent call last):
  File ""/home/nitrous/code/trendomine/bin/scrapy"", line 11, in <module>
    sys.exit(execute())
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/cmdline.py"", line 142, in execute
    cmd.crawler_process = CrawlerProcess(settings)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/crawler.py"", line 209, in __init__
    super(CrawlerProcess, self).__init__(settings)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/crawler.py"", line 115, in __init__
    self.spider_loader = _get_spider_loader(settings)
      File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/crawler.py"", line 296, in _get_spider_loader
    return loader_cls.from_settings(settings.frozencopy())
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/spiderloader.py"", line 30, in from_settings
    return cls(settings)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/spiderloader.py"", line 21, in __init__
    for module in walk_modules(name):
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/scrapy/utils/misc.py"", line 71, in walk_modules
    submod = import_module(fullpath)
  File ""/usr/lib/python2.7/importlib/__init__.py"", line 37, in import_module
    __import__(name)
  File ""/home/nitrous/code/trendomine/fancy/fancy/spiders/fancy_update_spider.py"", line 11, in <module>
    class FancyUpdateSpider(scrapy.Spider):
  File ""/home/nitrous/code/trendomine/fancy/fancy/spiders/fancy_update_spider.py"", line 28, in FancyUpdateSpider
    pg_r = requests.get(url, headers=headers)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/api.py"", line 69, in get
    return request('get', url, params=params, **kwargs)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/api.py"", line 50, in request
    response = session.request(method=method, url=url, **kwargs)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/sessions.py"", line 468, in request
    resp = self.send(prep, **send_kwargs)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/sessions.py"", line 576, in send
    r = adapter.send(request, **kwargs)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/adapters.py"", line 370, in send
    timeout=timeout
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py"", line 559, in urlopen
    body=body, headers=headers)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/packages/urllib3/connectionpool.py"", line 376, in _make_request
    httplib_response = conn.getresponse(buffering=True)
  File ""/usr/lib/python2.7/httplib.py"", line 1051, in getresponse
    response.begin()
  File ""/usr/lib/python2.7/httplib.py"", line 415, in begin
    version, status, reason = self._read_status()
  File ""/usr/lib/python2.7/httplib.py"", line 371, in _read_status
    line = self.fp.readline(_MAXLINE + 1)
  File ""/usr/lib/python2.7/socket.py"", line 476, in readline
    data = self._sock.recv(self._rbufsize)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/requests/packages/urllib3/contrib/pyopenssl.py"", line 179, in recv
    data = self.connection.recv(*args, **kwargs)
  File ""/home/nitrous/code/trendomine/local/lib/python2.7/site-packages/OpenSSL/SSL.py"", line 1319, in recv
    result = _lib.SSL_read(self._ssl, buf, bufsiz)
KeyboardInterrupt
```
"
5592,Positive,"thanks @nyov, it makes sense. My concern was if git-replace will handle the moves like `scrapy/selector/ -> selectors/` and `scrapy/utils -> selectors/utils` without having parent commit. I need to test this and will update the repo shortly.
"
5593,Neutral,"Merged #804
"
5594,Neutral,"@jschilling1 ,
I answered your question at http://stackoverflow.com/questions/34887730
"
5595,Positive,"That's interesting. If `""` is more universal, we'll update the tutorial. Thanks for reporting @LancelotHolmes 
"
5596,Negative,"This is still broken.
"
5597,Negative,"I can confirm that 1.1.0rc3 does not work on OSX (it no longer throws an exception so at least there's progress). I'm almost positive that the issue is with the openssl version as it's 0.9.8zg and on linux it's using a newer 1.0.2 version. I've updated openssl via homebrew and tried to reinstall pyopenssl via:

``` bash
rm -rf ~/Library/Caches/pip
pip uninstall cryptography
ARCHFLAGS=""-arch x86_64"" LDFLAGS=""-L$(brew --prefix openssl)/lib"" CFLAGS=""-I$(brew --prefix openssl)/include"" pip install cryptography
```

but it didn't seem to use the newer homebrew version. I may have done something else stupid though.
"
5598,Positive,"@Digenis that's a good question. Our options:
1. Release Scrapy 1.1 without these backwards incompatible changes, follow semver (create a branch, cherry-pick commits);
2. Declare 1.1 'unstable' (but I don't see a point of doing such release, compared to just using master);
3. Decide that these incompatibilities are in fact bug fixes and release 1.1 as-is (maybe without #1149).

What do you think?

""scrapy hasn't reached 1.0"" is outdated (see https://github.com/scrapy/scrapy/pull/1541)
"
5599,Neutral,"@redapple: maybe I'm overlooking something, but do we need something more complex than just adding

```
if not re.match('https?://', url):
    url = response.urljoin(url)
```

or even

```
if not url.startswith('http'):
    url = response.urljoin(url)
```

right before https://github.com/scrapy/scrapy/blob/master/scrapy/spiders/sitemap.py#L36?
"
5600,Neutral,"Hi,

Sorry for (may off-the-topic?) interruption.
I've noticed that ftp links are not recognized either. 

E.g., the following code prints no links (an empty list `[]`).

```python
from scrapy.http import HtmlResponse
from scrapy.linkextractors import LinkExtractor
hrsp = HtmlResponse(body=b""""""<html>
<body>
<a href=""ftp://www.external.com/"">another site</a>
</body>
</html>
"""""", url=""http://www.example.com/index.html"")
print(LinkExtractor().extract_links(hrsp))
```

The root cause seems a line of module `linkextractor`s (`/scrapy/linkextractors/__init__.py:44`):
```
_is_valid_url = lambda url: url.split('://', 1)[0] in {'http', 'https', 'file'}
```

I hope this will help.


"
5601,Negative,"Oh sorry, you've already covered that.
So LevelDB concurrency is limited, and DBM is susceptible to corruption?
"
5602,Neutral,and is there an easy way in settings.py to let every spider within one project write log to disk with the file name like '%spidername%.log' instead of adding a custom setting for every spider?
5603,Neutral,"@Pat-Lemonde , I'm closing this for now until you provide more info.
"
5604,Neutral,"@preetis19 you're right, this overview should have used `scrapy runspider`. It also had other issues; @eliasdorneles has rewritten the overview, so this is not a problem in scrapy master. The release is not too far away, but I'm fine with merging a PR which fixes an error 0.24 overview.

In readthedocs ""latest"" (somewhat confusingly) means ""latest released version"", so it doesn't correspond to the latest code.
"
5605,Neutral,"Or figure out what AJAX calls are being made to get the data you're interested in, then just scrape that instead."
5606,Neutral,"same results for python2 and python3

``` python
>>> ig = itemgetter(0)
>>> [(n, f(ig), f(ig.__call__)) for n, f in vars(inspect).items() if n.startswith('is')]
[('isgenerator', False, False),
 ('isdatadescriptor', False, False),
 ('isframe', False, False),
 ('ismemberdescriptor', False, False),
 ('isabstract', False, False),
 ('isbuiltin', False, False),
 ('isfunction', False, False),
 ('istraceback', False, False),
 ('isgeneratorfunction', False, False),
 ('ismethod', False, False),
 ('iscode', False, False),
 ('isclass', False, False),
 ('ismethoddescriptor', False, False),
 ('isroutine', False, False),
 ('ismodule', False, False),
 ('isgetsetdescriptor', False, False)]
```
"
5607,Neutral,"> @kmike , you mean Headers should store keys as-is and still allow case-insensitive lookups?

I am not sure, the change is backwards incompatible and likely less performant than current implementation.

Unless well argued I don't think we should cahnge it, instead we provide the flexibility to use a different implementation in Request class without requiring to reimplement its methods, a class level attribute that defaults to current Headers class should be enough.
 "
5608,Neutral,"I'm trying to download a page that claims to be iso-8859-1, but contains characters that are not 8859-1 characters. scrapy tries to encode it as win1252, judging from the stacktrace, and crashes immediately. I believe the page actually uses utf-8 and want to force downloading and decoding as utf-8 in order for the LinkExtractor not to crash and the CrawlSpider to work successfully.

```
  File ""python2/lib/python2.7/site-packages/scrapy/utils/defer.py"", line 102, in iter_errback
    yield next(it)
  File ""python2/lib/python2.7/site-packages/scrapy/spidermiddlewares/offsite.py"", line 28, in process_spider_output
    for x in result:
  File ""python2/lib/python2.7/site-packages/scrapy/spidermiddlewares/referer.py"", line 22, in <genexpr>
    return (_set_referer(r) for r in result or ())
  File ""python2/lib/python2.7/site-packages/scrapy/spidermiddlewares/urllength.py"", line 37, in <genexpr>
    return (r for r in result or () if _filter(r))
  File ""python2/lib/python2.7/site-packages/scrapy/spidermiddlewares/depth.py"", line 54, in <genexpr>
    return (r for r in result or () if _filter(r))
  File ""python2/lib/python2.7/site-packages/scrapy/spiders/crawl.py"", line 73, in _parse_response
    for request_or_item in self._requests_to_follow(response):
  File ""python2/lib/python2.7/site-packages/scrapy/spiders/crawl.py"", line 52, in _requests_to_follow
    links = [l for l in rule.link_extractor.extract_links(response) if l not in seen]
  File ""/Users/pfahler/anaconda3/envs/python2/lib/python2.7/site-packages/scrapy/linkextractors/lxmlhtml.py"", line 108, in extract_links
    links = self._extract_links(doc, response.url, response.encoding, base_url)
  File ""python2/lib/python2.7/site-packages/scrapy/linkextractors/__init__.py"", line 103, in _extract_links
    return self.link_extractor._extract_links(*args, **kwargs)
  File ""python2/lib/python2.7/site-packages/scrapy/linkextractors/lxmlhtml.py"", line 57, in _extract_links
    url = url.encode(response_encoding)
  File ""python2/lib/python2.7/encodings/cp1252.py"", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_table)
```
"
5609,Positive,"the problem has been resolved as your suggest,it,s reason is python path. Thank you!!!"
5610,Neutral,"Simply use mongoDB to store data directly into the database. Once stored , you can have access to the same in any way. It'll be in JSON format. MongoDB represents JSON documents in binary-encoded format called BSON behind the scenes. Make use of BSON. Basically BSON just extends your JSON model"
5611,Neutral,"i use scrapy shell 'https://doc.scrapy.org/en/latest/_static/selectors-
sample1.html'
it doesn't work:

>  File ""<string>"", line 2, in raiseException
> 
> wisted.internet.error.DNSLookupError: DNS lookup failed: address ""'https""
> 
> > not f
> 
> und: [Errno 11004] getaddrinfo failed.
> 
> 2016-11-23 21:49 GMT+08:00 Mikhail Korobov notifications@github.com:
> 
> For now you can either follow redirect yourselves:
> 
> fetch(response.headers['Location'].decode('latin1'))
> 
> or open a page after a redirect (it redirects from http to https):
> 
> $ scrapy shell 'https://doc.scrapy.org/en/latest/_static/selectors-
> sample1.html'
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/scrapy/scrapy/issues/2408#issuecomment-262516933, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AWfNzgQzmBSGLYt7YhYY4wnBGkfUyCxiks5rBEROgaJpZM4K6lDI
> .
"
5612,Positive,"I think that @darkrho suggestions are useful. Both look fine for me:

> Scrapy, a fast high-level web crawling and screen scraping framework.
> Scrapy, a fast and scalable web crawling and screen scraping framework.

+1 to change.

There is a problem with existing tutorial: it doesn't really show ""web crawling"" part of Scrapy. It only demonstrates how to scrape a static list of URLs - curl can also do that. But that's another issue :)
"
5613,Positive,"@dangra We've updated the code based on your recommendations. Also, we've introduced curl-like command line flags, as well as one to set the content-type. Thanks for reviewing.
"
5614,Positive,"I like this change, can you provide a proper pull request for it?
"
5615,Neutral,"@nramirezuy the note about dynamic items creation is removed in https://github.com/scrapy/scrapy/pull/1081
"
5616,Negative,"I'm sorry but there is no such `scrapy.downloadermiddlewares.DownloaderMiddleware`.
May I ask where and why you'd need `scrapy.downloadermiddlewares.DownloaderMiddleware`?

To access a specific downloader middleware, please check https://github.com/scrapy/scrapy/tree/master/scrapy/downloadermiddlewares for the available ones, e.g.
```
>>> import scrapy.downloadermiddlewares.cookies
>>> scrapy.downloadermiddlewares.cookies.CookiesMiddleware
<class 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware'>
```

Or if you want to write your own downloader middleware, just subclass from `object`. See also: https://doc.scrapy.org/en/latest/topics/downloader-middleware.html

Could you please try asking in English in the future? Cuz currently we're not supporting other languages on this issue tracker.

### Chinese Version

你好, 目前并不存在这个 `scrapy.downloadermiddlewares.DownloaderMiddleware`
请问你是在什么地方需要用到它呢?

如果你需要使用现有的下载器中间件(downloader middleware), 请访问 https://github.com/scrapy/scrapy/tree/master/scrapy/downloadermiddlewares 来获取内置的下载器中间件列表并直接使用它们的路径, 例如:
```
>>> import scrapy.downloadermiddlewares.cookies
>>> scrapy.downloadermiddlewares.cookies.CookiesMiddleware
<class 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware'>
```

或者如果你希望编写你自己的下载器中间件, 请注意目前它们不需要有指定的公共父类, 请直接从 `object` 继承就可以了. 参见 https://doc.scrapy.org/en/latest/topics/downloader-middleware.html (中文版本文档: http://scrapy-chs.readthedocs.io/zh_CN/latest/topics/downloader-middleware.html)

另外, 我们目前并不在GitHub提供其他语言的帮助. 请尽量使用英语交流."
5617,Neutral,"I think what you're looking for is the [`start_requests`](https://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.spiders.Spider.start_requests) method.

```python
from scrapy.http import Request

class JPSpider(scrapy.Spider):
   name = ""jp""

   def start_requests(self):
       for x in range (12174467750,12174467759):
           yield Request('https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q' + str(x))
```

or you could use a list comprehension
```python
start_urls = [
'https://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q' + str(x)
for x in range (12174467750,12174467759)
]
```"
5618,Neutral,@redapple I'm not using any proxies and it's been happening consistently for a while. I'll see if I can reproduce it in an isolated environment.
5619,Negative,"right, this isn't javascript (but sad).
"
5620,Positive,"Yeah, no problem I'm glad you got it working."
5621,Neutral,"There's ticket for porting manhole in Twisted issue tracker, latest update says there is something in progress. Worth tracking this related ticket to see how it goes https://twistedmatrix.com/trac/ticket/8327 
"
5622,Neutral,"There are many ways to trigger this issue; one is to have an exception in start_requests:

``` py
class Bad(scrapy.Spider):
    name = 'bad'
    def start_requests(self):
        raise Exception('oops')
```

Exceptions in `spider.from_crawler` and `spider.__init__` also got worse.
"
5623,Neutral,"Scrapy seems to process and export each item as it gets generated within the system, so there isn't really a way to compare one item against all the other items until the spider is finished running. It should be pretty easy, although not as convenient, to sort after all the items are finished being exported to a file. 
"
5624,Neutral,"yeah have that

class HTMLCrawler(Spider):
    name = ""htmlcrawler""

```
def __init__(self, crawler=None, *args, **kwargs):
    super(HTMLCrawler, self).__init__(*args, **kwargs)
```

Just in case I am missing something here is beginning of my **init**
"
5625,Neutral,"Web Scraping is a better term than Screen Scraping for what Scrapy does. However, I think with ""web crawling and data extraction"" we also have it covered.
"
5626,Neutral,"Hint: Don't delete `__init__.py` from any place in your project directory. Just because it's empty doesn't mean you don't need it.
"
5627,Positive,"+1 to put something like this into Scrapy. it's nice to see example code on how users are tackling this problem.
"
5628,Negative,"Oh, sorry, it was my fault. Fixed.

Also, you can get the key from a public keyserver:

`apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 90E2741A`

Good luck!
"
5629,Positive,"Your modifications to the scheduler are exactly what I had done as well. I'll see if I can come up with a general and flexible enough default queue that could work.  I saw such an increase in performance for a generic broad crawl without any added complexity from making it distributed that I definitely think it could be worth it.  If you want to check out the queue I'm currently using and maybe offer some advice that would be great! You can find it at https://github.com/chamilto/tnscraper/blob/master/tnscraper/queues/queue.py
"
5630,Positive,"Alright, sounds good. I might try to make it into a PyPi package. Feel free to close. Keep up the great work!
"
5631,Neutral,"Item (b) is wrong. It just looked like it had crashed it because it was waiting for the timeout.

Item (a) is still valid. You can replicate it with any request to a service that you control and suspend that service (suspend the ""process"") so it times out."
5632,Positive,"That one is the right behavior, `get_output_value` isn't supposed to access the item. 
"
5633,Neutral,"Supposedly your server does not accept POSTing that form and you should create your `FormRequest` with `method=GET` in the first place?

The only issue I see would be if you have RedirectMiddleware enabled and it doesn't stop redirecting after the set redirect limit.
"
5634,Negative,"This document insinuates that potential contributors are unethical, unprofessional, and immoral, and that they must be told to suppress their antisocial behavior before contributing to this project. This is now the first thing people are greeted with when they first roll up their sleeves to get started with this project, and it translates to a fairly negative experience. I'll probably still fork and make the changes I need, but I'm much less inclined to engage further. And while I actually agree with everything in this document, it states nothing that is not already expected of every individual.  I'm left to think that its purpose is purely political, and I'm disappointed to see politics creep its way into a technical project in guise of a contribution.
@kmike @dangra @eliasdorneles "
5635,Neutral,"This change could be backwards incompatible; code may rely on presence of these attributes. I'm using `if hasattr(response, 'text')` sometimes to check for response type without having to import scrapy.http.TextResponse.
"
5636,Positive,"Yes, indeed. It's being worked on. See #2085.
"
5637,Neutral,"I think this issue can be closed as part of work for #82

see 2840865746a207afe7e98c3139032df0242c2dda
"
5638,Neutral,"Hi @johncadigan,

I think that the code in sciscrapy is too specific to be included in Scrapy itself. As it doesn't require changes to Scrapy it can be maintained as a separate project. This has many advantages, e.g. releases won't be tied to Scrapy release schedule (so you can make them faster), Scrapy developers will have less code to support, and Scrapy won't become dependent on numpy/scipy/scikit-learn.

Some feedback (after a quick look):
- there are temporary `.py~` files, I think they shouldn't be in a repo;
- I believe a lot of code from classifier.py and features.py can be replaced with scikit-learn utilities - have you checked FeatureUnion, DictVectorizer and scoring/cross-validation utilities?
"
5639,Neutral,"BTW, I've encountered problem when using ""scrapy"" command in CMD.
System Infos: Win10 Py35(32bit)
![image](https://cloud.githubusercontent.com/assets/1845937/13601982/db05a6d8-e587-11e5-8fb5-fa040800d8ba.png)

System variable set as below:
![image](https://cloud.githubusercontent.com/assets/1845937/13602018/0da2436c-e588-11e5-8d0f-24884c588591.png)
"
5640,Neutral,"`FEED_EXPORT_FIELDS` option was added for 2 main reasons:
1. It is not possible to know all possible fields in advance (because items are processed on-by-one), but we need to know it to write a CSV header. With a single Item class a set of its defined fields can be used. But whith several item classes this doesn't work, and `FEED_EXPORT_FIELDS` allows to specify which fields should be in result. 
2. In Scrapy master it is possible to yield raw dicts instead of Item instances; FEED_EXPORT_FIELDS allows to define fields to export for the cases dicts have different keys (e.g. when keys for empty values are omitted).

(1) won't work if you define `FEED_EXPORT_FIELDS` per Item class. 

A set of fields defined in Item is essentially a per-item `FEED_EXPORT_FIELDS`. 
Do you want to skip some fields on export time even if they are defined?
"
5641,Neutral,"I never used that command neither xD
"
5642,Neutral,@redapple does opening xn----7sbb4ac0ad0be6cf.xn--p1ai work for you?
5643,Negative,"Hi Everyone, first of all sorry for creating this distraction, I'm sure you all have plenty of real work to do.  Also @kmike and @redapple, thank you for your productive approach on this, I'll do my best to match your tone.  My main point is to simply make you aware of my experience when I tried to on-board as a contributor.  I ran into a roadblock due to the language of this document, and I wanted to make you aware that using it as a greeting may be having some unintended consequences.  And as I mentioned above, I agree with the high-level goal of encouraging contributors to treat each other with respect, but I'm finding this particular implementation to be a bit buggy.

The first problem I encountered is that it unnecessarily focuses on lots of negative behavior.  The document provides a list of antisocial activities and a list of classes which should be protected from these activities.  In doing so the document splits the pool of potential contributors into aggressors and victims, and it's up to the reader to figure out where they fit in.  The document also implicitly paints the reader as someone who needs to be warned against engaging in this type of behavior, otherwise it would not be required reading.  This is a fairly pessimistic perspective, and it's somewhat demeaning if you happen to believe that people are innately good.  A more productive approach would be to assume benevolence on the part of all participants, and instead focus on the qualities which make up the ideal contributor.  You will find that the tone of this document becomes much more productive if you take every negative activity that it describes and replace it with its positive counterpart.

The second problem is that all of this negativity is placed at the beginning of the on-boarding pipeline.  Imagine for a second that you're invited to a friend's house to bake a pie.  And you love pie, so you're really looking forward to helping them improve their recipes.  But when you show up at their house, they greet you with a lecture on politics and morality instead of anything regarding pies.  Then they take you around the house and say things like ""do not kick the cat, do not break the windows, do not make advances toward my grandmother, do not relieve yourself on the floor"".  This language is not appropriate for the situation, it's not a pleasant way to greet someone, and pretty soon you're going to change your mind about the pie.

The third problem is how it handles conflict resolution between the reporter and the accused.  Many of the problems described in this document will depend on how the reporter perceives the intentions of the accused.  The difference between perception and intent may be due to a misunderstanding, cultural differences, or some other external factor.  Productive conflict resolution would bring both parties to the table and go over the experience of each participant in an effort to bridge their differences.  However, this document prescribes that reporter of an incident should remain anonymous, which is counter to how these things are handled in the real world.

@kmike - You make a fair point regarding the BSD license.  Every project has some amount of boilerplate which serves its purpose in 1-in-1000000 scenarios.  However, the language of the CoC is much less user-friendly than the text you quoted.  If we had to transform one text into the other, then the CoC would read something along the lines of ""We expect all contributors to behave professionally, and treat each other with respect"".  While the BSD text would first describe a list of undesirable products, then a host of unethical activities, and then finally make the point that the contributors do not endorse any of those things. 

@redapple - It sounds like you handled those situations appropriately.  I can certainly see how it's useful to have a document that explicitly states the course of action that will be taken in those cases.  Again, my experience is only from the perspective of on-boarding.  Also, the bulk of my response was meant to answer the questions you asked, let me know if you think I'm misinterpreting anything."
5644,Positive,"hi @kirankoduru, I'm with @lfmattossch. I'm already running the unit tests on a fix. Thanks for updating us.
"
5645,Neutral,"For everyone following this issue, it's recommended to upgrade to Scrapy 0.22 ([Release Notes](http://doc.scrapy.org/en/0.22/news.html)) 

@HoldenCaulfieldRye : `python-scrapy` debian package is maintained by debian developers, Scrapy team doesn't control it. If you follow the [Ubuntu installation guide](http://doc.scrapy.org/en/0.22/topics/ubuntu.html) and want to install latest stable package, do: `apt-get install scrapy-0.22`. To be clear, the package is not named `python-scrapy`.

Ubuntu Trusty should be fine, your source.list entry should be:

```
deb http://archive.scrapy.org/ubuntu trusty main
```
"
5646,Neutral,Please go on with a pull request! 👍 
5647,Neutral,"@wzpan what is your pyOpenSSL version?

Twisted dropped support for pyOpenSSL < 16.0.0 in Twisted 16.4.0 release (see http://twistedmatrix.com/trac/ticket/8441); in fact it worked for some time, but they recently removed some of the supporting code as well. Is upgrading it an option? You can check pyOpenSSL version by running `python -c 'import OpenSSL; print(OpenSSL.version.__version__)'`"
5648,Neutral,"@esegal : your headers summary suggest you are not using twisted>=11.1.0 because http client is using HTTP/1.0 protocol.   
"
5649,Positive,"I think the fixed slot is reasonable. Though it is not perfect, safer than the current implementation in terms of server load.
"
5650,Neutral,"@foromer4 Scrapy has two request queues - in Scheduler and in Downloader. Downloader uses a small in-memory buffer for requests (its size is equal to CONCURRENT_REQUESTS); it is the component which ensures concurrency limits and download timeouts are respected. Scheduler stores all requests; it can store them either in memory or on disk (see https://doc.scrapy.org/en/latest/topics/jobs.html). So request is first retrieved from Scheduler queue, put to Downloader queue, and then Downloader downloads it.

""Graceful stop"" (a single Ctrl-C) means that a spider stops retrieving requests form Scheduler and waits for Downloader queue to become empty. Double Ctrl-C means spider is stopped immediately - currently it means that all requests in Downloader queue are dropped."
5651,Positive,"@redapple, thanks for pointing me. I've already tried it. Details are the below.
@kmike, glad to hear that you found it's useful.

I spent several days diving deeper into twisted and scrapy source to understand how it works and I didn't manage to get TTFB value that is near browser or curl values. As I understand it's not enough just patch self._cb_latency. Real TTFB might be got only from twisted.web.client. I've tried change [_newclient.py](https://github.com/twisted/twisted/blob/trunk/src/twisted/web/_newclient.py#L347) but unsuccessful.
But I'm not very good at python so I might miss something simple. Anyway I decided to stop experiments for some time as I a bit tired of unsuccessful coding."
5652,Neutral,"Fixed via #1662 
"
5653,Neutral,"Items-as-dicts PR is merged, and ""Dynamic Creation of Item Classes"" section is removed from docs.
Do you think we should fix 0.24.x docs?
"
5654,Neutral,"For such large regexes with lots of ORs https://github.com/axiak/pyre2 library works much better than stdlib re. 
"
5655,Neutral,"It's useful too, but it don't solve problem when user wants to override internal spider args, for example `start_urls` or `allowed_domains`.
"
5656,Neutral,"Hmm, I'm new to linking issues and pull requests.  The pull request submitted can be found here: https://github.com/scrapy/scrapy/pull/350
"
5657,Neutral,"@MaGuiSen , can you share the whole traceback and a sample spider using the ImagesPipeline?
The payload seems to load fine for `PIL.Image`, and detected as JPEG

```
$ scrapy shell 'https://mmbiz.qpic.cn/mmbiz_png/NmpHEAE5bXl1WYvWBOQBhDeB7Dar8JhIr4tHxouT9AbhZJO7wF1lv2bCUU1UX0YPtU70OUF7RRfnMQpubRJYpA/0?wx_fmt=png'
2017-07-26 18:57:38 [scrapy.utils.log] INFO: Scrapy 1.4.0 started (bot: scrapybot)
(...)
2017-07-26 18:57:38 [scrapy.core.engine] DEBUG: Crawled (200) <GET https://mmbiz.qpic.cn/mmbiz_png/NmpHEAE5bXl1WYvWBOQBhDeB7Dar8JhIr4tHxouT9AbhZJO7wF1lv2bCUU1UX0YPtU70OUF7RRfnMQpubRJYpA/0?wx_fmt=png> (referer: None)
(...)
In [1]: from PIL import Image
In [2]: from cStringIO import StringIO as BytesIO
In [3]: orig_image = Image.open(BytesIO(response.body))
In [4]: orig_image
Out[4]: <PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=960x1280 at 0x7F0CA5D6F680>
```"
5658,Neutral,"Hey @starrify, 

I think the reason is that you're using Scrapy 1.0.x; it was a known limitation of robots.txt middleware - see Scrapy 1.0 [docs](http://doc.scrapy.org/en/1.0/topics/downloader-middleware.html#module-scrapy.downloadermiddlewares.robotstxt). The issue is fixed in Scrapy 1.1 by https://github.com/scrapy/scrapy/pull/1473, so there is no warning in 1.1 [docs](http://doc.scrapy.org/en/1.1/topics/downloader-middleware.html#module-scrapy.downloadermiddlewares.robotstxt).
"
5659,Positive,"@ianozsvald I know your pain; Scrapy is the only reason I'm using Python 2 now :) At EuroPython me and @dangra tried to unblock the further porting - the bottleneck was in Request and Response objects, and they are ported now in https://github.com/scrapy/scrapy/pull/1384. It is still a long road to full Python 3 support, but we're in a much better shape now - ~~480~~ 507 tests are passing in Python 3, compared to 248 before the sprint. Working Request and Response objects open a gate for other's contributions, so I expect Python 3 Scrapy support to get more love soon.
"
5660,Neutral,"@vionemc , I believe using Scrapy 1.3.3 or the newly released Scrapy 1.4.0 will do what you want by default.
I'm closing this issue. Please re-open if it does not work with scrapy 1.3.3+"
5661,Neutral,This could happen when your default encoding isn't `utf-8`. Try adding ` # -*- coding: utf-8 -*-` on top of your spider program and running again.
5662,Positive,"Yes, I think we can check if the file exists first. There are though several ways the logic can be implemented here - for instance, we may check if there is a protocol in the beginning of the argument and interpret the argument as a URL..or handle url parsing errors and fall back to interpreting it as a local file..sort of the EAFP approach..just thoughts. Thanks.
"
5663,Positive,"@Curita Yes, seems like a good idea, I haven't started working on it so it's okay to give this to someone as a GSoC project. Concerning your proposal to make me a mentor for this project - I need some time to think on this, not sure if I'll have enough time and energy to help students :)
"
5664,Positive,"I haven't thought about extensions @kmike. It sounds like a better idea since it would provide additional flexibility i.e. connecting to signals. For instance, one would want to flush the file and push it as a part to S3 once the spider idle.
"
5665,Negative,"I can't see the advantage over the current implementation, besides the new way of calculation (key:value update). Also if `I don't see use cases when a global change is needed` why implement it.
"
5666,Neutral,"> You could use the Response.replace method to replace the body of an existing Response instance

...or build a custom new response

``` py
from scrapy.http import HtmlResponse

response = HtmlResponse(response.url,
    encoding='utf-8',
    body=body.decode('utf-8'),
)
```

Agree with @starrify, please don't abuse the issue tracker for support questions.
"
5667,Neutral,"I think they meant the delay between the scheduler and downloader. So you schedule a request with delay and then it is downloaded after that delay.
"
5668,Neutral,"It shouldn't return canonicalized URLs even if unique=True though, but it should use canonicalized URLs for deduplication when unique is True."
5669,Neutral,"When you write attachs=(""header"", ""text/plain"", myFileObject) or attachs=((""header"", ""text/plain"", myFileObject)), it means attachs is a tuple of 3 strings whereas the attachs argument expects a tuple of tuples where each inner tuple represents an attachment. "
5670,Neutral,"Okay, I'll work on this and send a PR soon.
"
5671,Neutral,"I would like to reopen this issue to a discussion for the case when we want to use multiple API credentials.

This could be a new kind of Spider, or just some settings to determine the minimum time interval per Request thread, kind of how `cookiejars` work. Any ideas?
"
5672,Neutral,"Yeah, it looks like that. To make it somehow work you can assign a high priority for these new requests, i.e. use `.replace(body=..., priority=1000)`. This way requests with time set will be processed without a large delay. You also need to check that the body is only replaced once, e.g. you can put a flag to request.meta. 

I think as a hack you can also use `request._body = ...` and don't return a new request.
"
5673,Neutral,"Doesn't [CrawlerRunner](http://doc.scrapy.org/en/1.1/topics/api.html#scrapy.crawler.CrawlerRunner) fulfill your needs?  (Read [this](http://doc.scrapy.org/en/1.1/topics/practices.html#running-multiple-spiders-in-the-same-process) also.)
"
5674,Positive,"Loved the dump stats feature! :heart: 

Question: would it make sense to have an option to use a format more easily parseable? (e.g. JSON)
It would be nice to be able to quickly build a report or plot of some stat like memory stuff, parsing the log file. :)
"
5675,Neutral,"@Preetwinder,
#1405, #1403, #998 
See https://github.com/scrapy/scrapy/issues/1403#issuecomment-149194449

> ... domain should be encoded using IDNA, path should be encoded to UTF8 and then escaped to ASCII, query should be encoded to response encoding and then escaped to ASCII - this is how browsers work. 

I asked here because I think the whole solution is not meant to be put in the link extractor.
"
5676,Neutral,"Update from the StackOverflow question:

> I have pinpointed it to the following line in settings file (I need it because I am using Django 1.8) - django.setup() #new for Django 1.8 --- removing this line starts logging the tracebacks - not sure why

So I guess it's related to how Django sets up its logging? [See Django's default logging configuration.](https://docs.djangoproject.com/en/1.8/topics/logging/#django-s-default-logging-configuration)
"
5677,Neutral,"I'm not sure what can we do with it; I have never seen this issue (also on Firefox), and doc.scrapy.org is hosted by http://readthedocs.org/, so it is hard to debug. If it is a DNS issue with your provider you may try using e.g. Google DNS (8.8.8.8, 8.8.4.4) instead of your provider's DNS default servers.
"
5678,Neutral,"bug for sure, do you have an idea of what can be done to fix it? 
"
5679,Neutral,"Not against the feature,, but one problem with `disallowed_domains` is that your spider could end crawling the entire internet. Simple example: there is a link to `yahoo.com` in some page you crawled ant it is not on `disallowed_domains` Result: your spider will be possibly be crawling for days websites you don't want.
"
5680,Neutral,"I haven't noticed [quotes-crawler](https://github.com/scrapinghub/sample-projects/tree/master/quotes_crawler) is not [the repository as a whole](https://github.com/scrapinghub/sample-projects). My fault.

I agree, with adding a pointer in docs to that specific folder. Or maybe move/copy that folder to a ""Scrapy examples project"".
"
5681,Positive,"`minreq` sounds good to me, thanks @csalazar!
"
5682,Neutral,"Why not overwrite by default and provide an option to append?

On Mon, Jan 20, 2014 at 9:16 AM, Daniel Graña notifications@github.comwrote:

> I've been bitten by this too, I prefer the single option to the modifier.
> 
> +1 for -O as short option name and --overwrite-output (or
> --truncate-output or --new-output) as long option name
> 
> —
> Reply to this email directly or view it on GitHubhttps://github.com/scrapy/scrapy/issues/547#issuecomment-32758317
> .
"
5683,Neutral,May I take this?
5684,Positive,"I'm new, so here's a quick intro: Hi! I'm Jakob :) I've also put some thoughts into add-on management for my GSoC proposal.

I don't think Scrapy should continue when there is an error while loading one of the add-ons. Depending on the add-on it probably means a substantial change in functionality (e.g. results are lost when a pipeline add-on fails). The user should be made to explicitly acknowledge that by disabling the add-on herself, not just be informed through a warning message or similar. Instead of marking an add-on as non-critical they might as well start the spider for a second and see if there are any problems.

I'm not sure if there is an advantage in an `AddOn` class: If we force existing extensions (e.g. a pipeline) to subclass it, this would forbid add-ons from using multiple hooks (an add-on could no longer consist of a pipeline _and_ a Spider middleware, etc.). If we make developers define a new class for their addon (subclassing `AddOn`), we might as well make them define a module/`.py` file, thereby enforcing clearer structure (one file/module per addon) and freeing us from having to instantiate the add-on class.

For the dependency trees, maybe as a first step towards a full-fledged solution the add-ons could be advised to supply some additional variables (besides their name and version), e.g. `REQUIRES`, `MODIFIES`, `PROVIDES`. A rather simple function in the add-on manager could then check whether the requirement of one add-on is in the `MODIFIES` and `PROVIDES` lists other add-ons.
"
5685,Neutral,"@BuGoNee , so you found the root problem?
"
5686,Neutral,"MIME uses us-ascii to encode characters, hence not able to encode the non US-ASCII
characters. Hence to encode the non US-Ascii characters you must add ""utf-8"" for
encoding.
Use of

part1 = MIMEText(u'\u3053\u3093\u306b\u3061\u306f\u3001\u4e16\u754c\uff01\n',
                 ""plain"", ""utf-8"")

It will enable the MIMEText to use utf-8 for encoding the non us-ascii characters.

A small change of this in the def send function will work.

```
  body_msg = msg.attach(MIMEText(body))

    my_msg = msg.as_string().encode('ascii')
    if encoding['my_msg'] == 'ascii':
        dfd = self._sendmail(rcpts, msg.as_string())
    else:
        part1 = MIMEText(body_msg, ""plain"", ""utf-8"")
```

The above code is just to explain how the issue can be solved.

After your comments and idea to improve the solution, I will send
Pull Request to merge with the Scrapy source code.
"
5687,Neutral,"See https://github.com/scrapy/w3lib/releases/tag/v1.14.2
"
5688,Neutral,"quickly fixed in 1e2efe5 even if it's no longer needed on Python 2.7.
"
5689,Neutral,"@tonal , I believe the reason is because of the Content-Type value.
See https://github.com/scrapy/scrapy/issues/193 for a discussion on how browsers handle `application/gzip` responses.
Here, the content-type is `application/octet-stream`, so HttpCompressionMiddleware leaves it as it is.
"
5690,Positive,"well, cmd doesn't seem to recognize contents in single quotes as a single string, as i got ""crawl: error: running 'scrapy crawl' with more than one spider is no longer supported"" from the command line ""scrapy crawl ratemyprof -o 'C:\Users\Public\Music\Sample Music\scrapy' -t csv""

double quotes don't work either. The spiders will work, but the output csv will not be saved to the absolute directory. 

After much trial and error, I found the working open parentheses solution.

Thank you for your reply though~
"
5691,Neutral,"@kmike first of all we change priority, so requests will rotate. I don't know what do you mean by a busy loop; but the heaviest task is reading the request from the queue and this is something the scheduler can't avoid.
"
5692,Neutral,"To do that use `from_crawler` method - see http://doc.scrapy.org/en/latest/topics/extensions.html#writing-your-own-extension. I think this is a documentation bug - it is not clear that Scrapy middlewares have the same features as extensions. Accessing settings is a common use case, I think we should provide examples in middleware docs, even if they are redundant.
"
5693,Neutral,"https://github.com/scrapy/scrapy/pull/1541 didn't fix https://github.com/scrapy/scrapy/issues/1317 completely
"
5694,Neutral,"maybe they are not showing when the left (start) revision is a merge?
"
5695,Negative,"Hi @mrsinguyen,

This is a lxml installation problem: lxml tries to build against libxml installed by MAMP, but for some reason this fails. It seems it is MAMP to blame because Apple distributes libxml with OS X, and MAMP version shouldn't take precedence. I'm not an user of MAMP myself (I use homebrew to get software); for me lxml installs fine on 10.8.4. Maybe uninstalling MAMP could help, or maybe you could try changing some environment variables set by MAMP, I don't know.

Unfortunately, scrapy can't fix this issue: you will have to figure out how to install lxml on your system. 
"
5696,Positive,"Hi @fengfangqian , please use [StackOverflow with tag ""scrapy""](https://stackoverflow.com/questions/tagged/scrapy) or [/r/scrapy](https://www.reddit.com/r/scrapy/) for this kind of questions.
Thank you."
5697,Neutral,"> Can you suggest a commit message?

Something like ""set up Selectors project environment"" maybe.
"
5698,Positive,"@briehanlombaard , thank you for continuing the investigation.
I can confirm that thumbnails are not generated with your example starting from scrapy 1.1.1 (worked on 1.1.0)
I'll also have a look in more details.
"
5699,Neutral,"Please use scrapy-users group for support questions:
https://groups.google.com/forum/#!forum/scrapy-users
"
5700,Positive,"@redapple  Yes. Thanks a lot.
"
5701,Neutral,"**Version Used**: 

**Steps to Reproduce**:
1. Create a new .NET Framework 4.6/UWP/ASP.NET 1.0 portable project
2. Look in project.json, see that my TFM is ""netstandard1.3""
3. Click Project -> Properties

Expected: No button to retarget me to .NET Standard:
Actual:

![image](https://cloud.githubusercontent.com/assets/1103906/18216689/36932b7c-710d-11e6-91c1-1257ab30369d.png)
"
5702,Neutral,"``` C#
        /// <summary>
        /// Check ahead for a deconstruction declaration. This requires at least one good-looking variable and the presence of an equals sign.
        /// Doesn't move the cursor.
        /// PROTOTYPE(tuples) Can this be done without allocations?
        /// </summary>
        private bool IsPossibleDeconstructionDeclaration()
```

in `LanguageParser.cs`
"
5703,Neutral,"Delegate interface to property or field by syntax with overriding. May have syntax :

```
interface IA 
{
    int R();
    int R1();
}

public TA : IA
{
      int R() => 0; 
      int R1() => 1;     
}

public class A : IA 
{
     private _b: TA (public IA | implicit IA);
     int IA.R1()    // override
     {
           // some todo
           return _b.R1();
     }
}
```

Another syntax:

```
interface IA 
{
    int R();
    int R1();
}

public TA : IA
{
      int R() => 0; 
      int R1() => 1;     
}

public class A : IA by _b (public | implicit), Collection 
{
     private _b: TA;

     int IA.R1()    // override
     {
           // some todo
           return _b.R1();
     }
}
```

Special behavior for event - automatic sender substitutio, when no override
"
5704,Neutral,"Extend object initializer block to support method calls and event subscriptions:

```
var timer = new DispatcherTimer {
    Tick += delegate {},
    Interval = TimeSpan.FromSeconds(1d),
    Start()
};
```

->

```
var timer = new DispatcherTimer();
timer.Tick += delegate {};
timer.Interval = TimeSpan.FromSeconds(1d);
timer.Start();
```
"
5705,Neutral,"I am making this a standalone request,

Things I am finding difficult;
Getting initial values from file stored in solution
Using Option <T> to load, store the options.
I would be happy with just a single String that I could parse, bonus points for anything fancier.
I would like the Example in VB or translatable to VB.
Please don't use internal API's
"
5706,Neutral,"On the project system repro (http://github.com/dotnet/roslyn-project-system), I'm finding that it takes at least ~20 seconds to find results of the average type within the Microsoft.VisualStudio.ProjectSystem.Managed project.

Is there a way to see progressive results so I get results sooner?"
5707,Neutral,"Is this a problem?
https://github.com/dotnet/roslyn/blob/master/src/Scripting/Core/Scripting.csproj#L28-L33

Shouldn't line 32 say AssemblyIdentityExtensions.cs?
"
5708,Negative,"The TypeScript language service needs some means of ensuring that formatting doesn't occur in certain contexts, like pressing `Enter` during completion sessions.

As an example, the code `new Array<n` is a valid expression in JavaScript/TypeScript. It's semantically the same as `(new Array()) < n`. 

A user might want to complete `n` with `number`, and press `Enter` at its entry in a completion list, because the intent might have been to eventually write `new Array<number>()`.

However, upon pressing `Enter`, formatting is triggered and the user ends up formatting the code as `new Array < number`. This is undesirable because we are unsure of the immediate intent.

See https://github.com/Microsoft/TypeScript/issues/6123 for more details.
"
5709,Neutral,"Split bug 1 of 2 from #4918

``` C#
using System.Linq;
using System.Text;

public static class LazyToStringExtension
{
    public static string LazyToString<T>(this T obj) where T : class
    {
        StringBuilder sb = new StringBuilder();
        typeof(T)
            .GetProperties(System.Reflection.BindingFlags.Public)
            .Select(x => x$$)
    }
}
```

With caret at `$$`, type period `.`

At [CSharpRecommendationService.GetSymbolsOffOfExpression](https://github.com/dotnet/roslyn/blob/a53f7c1e13e4d722ba10c6ad1a9b5b340138ecff/src/Workspaces/CSharp/Portable/Recommendations/CSharpRecommendationService.cs#L352-L359): 

```
the expression is `identifier x`. 
leftHandBinding is `empty`. [call to `GetSymbolInfo`]
container is `ErrorType`. [call to `GetTypeInfo`]
normalSymbols are `empty`. [call to `GetBestOrAllSymbols`]
```

**Expected**:  Intellisense, quickinfo, Goto definition, Find references work at caret position where the user will type `.GetValue(obj)`

**Actual**: no features work here.

Can the compiler team take a look at why we couldn't bind here?
"
5710,Neutral,"Here's several tests to repro this crash (with OperationWalker hooked up)

```
Microsoft.CodeAnalysis.VisualBasic.UnitTests.Semantics.UserDefinedConversions.BooleanExpressions3
Microsoft.CodeAnalysis.VisualBasic.UnitTests.Semantics.UserDefinedConversions.BooleanExpressions5
Microsoft.CodeAnalysis.VisualBasic.UnitTests.Semantics.UserDefinedConversions.BooleanExpressions0
```

Call stack:

```
Test 'Microsoft.CodeAnalysis.VisualBasic.UnitTests.Semantics.UserDefinedConversions.BooleanExpressions3' failed: Microsoft.CodeAnalysis.ThrowingTraceListener+DebugAssertFailureException : Unexpected value 'IsTrue' of type 'Microsoft.CodeAnalysis.VisualBasic.UnaryOperatorKind'

    ThrowingTraceListener.cs(25,0): at Microsoft.CodeAnalysis.ThrowingTraceListener.Fail(String message, String detailMessage)
    at System.Diagnostics.TraceListener.Fail(String message)
    at System.Diagnostics.TraceInternal.Fail(String message)
    at System.Diagnostics.Debug.Assert(Boolean condition, String message)
    InternalUtilities\ExceptionUtilities.cs(13,0): at Roslyn.Utilities.ExceptionUtilities.UnexpectedValue(Object o)
    BoundTree\Expression.vb(658,0): at Microsoft.CodeAnalysis.VisualBasic.BoundUserDefinedUnaryOperator.get_IUnaryOperatorExpression_UnaryOperationKind()
    c:\GitHub\roslyn-internal\Open\src\Test\Utilities\Shared\Compilation\TestOperationWalker.cs(351,0): at Microsoft.CodeAnalysis.Test.Utilities.TestOperationWalker.VisitUnaryOperatorExpression(IUnaryOperatorExpression operation)
    BoundTree\Expression.vb(668,0): at Microsoft.CodeAnalysis.VisualBasic.BoundUserDefinedUnaryOperator.Accept(OperationVisitor visitor)
    Compilation\OperationWalker.cs(34,0): at Microsoft.CodeAnalysis.Semantics.OperationWalker.Visit(IOperation operation)
    c:\GitHub\roslyn-internal\Open\src\Test\Utilities\Shared\Compilation\TestOperationWalker.cs(41,0): at Microsoft.CodeAnalysis.Test.Utilities.TestOperationWalker.Visit(IOperation operation)
    Compilation\OperationWalker.cs(88,0): at Microsoft.CodeAnalysis.Semantics.OperationWalker.VisitIfStatement(IIfStatement operation)
    BoundTree\Statement.vb(75,0): at Microsoft.CodeAnalysis.VisualBasic.BoundIfStatement.Accept(OperationVisitor visitor)
    Compilation\OperationWalker.cs(34,0): at Microsoft.CodeAnalysis.Semantics.OperationWalker.Visit(IOperation operation)
    c:\GitHub\roslyn-internal\Open\src\Test\Utilities\Shared\Compilation\TestOperationWalker.cs(41,0): at Microsoft.CodeAnalysis.Test.Utilities.TestOperationWalker.Visit(IOperation operation)
    CompilationTestUtils.vb(279,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.CompilationUtils.WalkOperationTrees(VisualBasicCompilation compilation)
    CompilationTestUtils.vb(230,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.CompilationUtils.CreateCompilationWithReferences(IEnumerable`1 sourceTrees, IEnumerable`1 references, VisualBasicCompilationOptions options, String assemblyName)
    CompilationTestUtils.vb(200,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.CompilationUtils.CreateCompilationWithReferences(XElement sources, IEnumerable`1 references, VisualBasicCompilationOptions options, IEnumerable`1& spans, VisualBasicParseOptions parseOptions)
    BasicTestBase.vb(162,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.BasicTestBase.CompileAndVerify(XElement source, IEnumerable`1 allReferences, String expectedOutput, IEnumerable`1 dependencies, Action`1 sourceSymbolValidator, Action`1 validator, Action`1 symbolValidator, SignatureDescription[] expectedSignatures, VisualBasicCompilationOptions options, VisualBasicParseOptions parseOptions, Boolean verify)
    BasicTestBase.vb(129,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.BasicTestBase.CompileAndVerify(XElement source, String expectedOutput, MetadataReference[] additionalRefs, IEnumerable`1 dependencies, Action`1 sourceSymbolValidator, Action`1 validator, Action`1 symbolValidator, SignatureDescription[] expectedSignatures, VisualBasicCompilationOptions options, VisualBasicParseOptions parseOptions, Boolean verify, Boolean useLatestFramework)
    BasicTestBase.vb(51,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.BasicTestBase.CompileAndVerify(XElement source, XCData expectedOutput, MetadataReference[] additionalRefs, IEnumerable`1 dependencies, Action`1 sourceSymbolValidator, Action`1 validator, Action`1 symbolValidator, SignatureDescription[] expectedSignatures, VisualBasicCompilationOptions options, VisualBasicParseOptions parseOptions, Boolean verify)
    Semantics\UserDefinedConversions.vb(3709,0): at Microsoft.CodeAnalysis.VisualBasic.UnitTests.Semantics.UserDefinedConversions.BooleanExpressions3()

```
"
5711,Positive,"Greetings!

This issue exists to discuss the exact requirements to exclude Library and SDK folders from Code Analysis.
We are trying to implement Continuous Integration with Analysis Builds to check the output from EnableExperimentalCppCoreCheck.


**Version Used**: 
Windows Server 2016 - Clean Install
Visual Studio 2015 Update 3
Native C++ Solution

https://github.com/buddhi1980/mandelbulber2/issues/198 REFERENCE https://github.com/buddhi1980/mandelbulber2/commit/1fa29dad9ab901cd1eabadb4396ff0fe115885d5
**Steps to Reproduce**:
1.  git clone ...
2.  Open/Build *.sln
3.  8000+ Warnings


**Expected Behavior**:
Ignore directories specified by CAExcludePath from analysis results.
**Actual Behavior**:
Directories specified by CAExcludePath - non-operation - Analysis has thousands of warnings from QT library and windows SDK source files."
5712,Neutral,"The following program:

```csharp
        static void Main(string[] args)
        {
            void Local1()
            {
                int x;
                Console.WriteLine(x); // error
            }

            void Local2()
            {
                int x;
                Action f = () =>
                {
                    Console.WriteLine(x); // error
                };
            }

            void Local3()
            {
                void Local()
                {
                    int x;
                    Console.WriteLine(x); // error
                }
            }

            void Local4()
            {
                void Local()
                {
                    Action f = () =>
                    {
                        int x;
                        Console.WriteLine(x); // OK
                    };
                }
                Local(); // OK
            }

            void Local5()
            {
                Action f = () =>
                {
                    int x;
                    Console.WriteLine(x); // OK
                };
            }
        }
```

should have no errors reported since all of those local functions have no calls and are thus unreachable.

@gafter To confirm I'm reading the spec correctly on this."
5713,Neutral,"**Version Used**: 
Microsoft.CodeAnalysis v2.0.0-rc2

**Steps to Reproduce**:
Run the next program in VS 2017 RC2 as a .NET Framework console application that targets .NET 4.6.1:
```csharp
using System;
using System.Linq;
using Microsoft.CodeAnalysis;
using Microsoft.CodeAnalysis.CSharp;
using Microsoft.CodeAnalysis.CSharp.Syntax;
using Microsoft.CodeAnalysis.Editing;
using Microsoft.CodeAnalysis.Formatting;
using Microsoft.CodeAnalysis.Simplification;

namespace FormatterSimplifierTest
{
    class Program
    {
        static void Main()
        {
            const string attributeSource = @""
                namespace Z
                {
                    public class SomeAttribute : System.Attribute
                    {
                    }
                }"";

            const string source = @""
                namespace X
                {
                    class C
                    {
                        static void M(string p1)
                        {
                            void N(string p2)
                            {
                            }

                            N(string.Empty);
                        }
                    }
                }"";

            Document document = new AdhocWorkspace()
                .AddProject(""TestProject"", LanguageNames.CSharp)
                .AddMetadataReferences(new[] {MetadataReference.CreateFromFile(typeof(object).Assembly.Location)})
                .WithCompilationOptions(new CSharpCompilationOptions(OutputKind.DynamicallyLinkedLibrary))
                .AddDocument(""Source.cs"", source)
                .Project
                .AddDocument(""Attribute.cs"", attributeSource)
                .Project
                .Documents.First();

            SemanticModel model = document.GetSemanticModelAsync().Result;

            if (model.Compilation.GetDiagnostics().Any())
            {
                throw new Exception(string.Join(Environment.NewLine, model.Compilation.GetDiagnostics()));
            }

            IMethodSymbol mSymbol = (IMethodSymbol) model.Compilation.GetTypeByMetadataName(""X.C"").GetMembers(""M"").Single();
            MethodDeclarationSyntax mSyntax = (MethodDeclarationSyntax) mSymbol.DeclaringSyntaxReferences[0].GetSyntax();
            ParameterSyntax p1Syntax = mSyntax.DescendantNodes().OfType<ParameterSyntax>().First();

            LocalFunctionStatementSyntax nSyntax = mSyntax.DescendantNodes().OfType<LocalFunctionStatementSyntax>().Single();
            ParameterSyntax p2Syntax = nSyntax.DescendantNodes().OfType<ParameterSyntax>().Single();

            INamedTypeSymbol someAttributeSymbol = model.Compilation.GetTypeByMetadataName(""Z.SomeAttribute"");

            Console.WriteLine(AddAttributeTo(p1Syntax, someAttributeSymbol, document));
            Console.WriteLine(""---"");
            Console.WriteLine(AddAttributeTo(p2Syntax, someAttributeSymbol, document));
        }

        private static string AddAttributeTo(SyntaxNode target, INamedTypeSymbol attributeSymbol, Document document)
        {
            SyntaxAnnotation namespaceImportAnnotation = new SyntaxAnnotation();

            DocumentEditor editor = DocumentEditor.CreateAsync(document).Result;

            // Add Z.SomeAttribute
            SyntaxNode attributeSyntax =
                editor.Generator.Attribute(editor.Generator.TypeExpression(attributeSymbol))
                    .WithAdditionalAnnotations(Simplifier.Annotation, Formatter.Annotation, namespaceImportAnnotation);
            editor.AddAttribute(target, attributeSyntax);
            Document documentWithAttribute = editor.GetChangedDocument();
            string documentWithAttributeText = documentWithAttribute.GetSyntaxTreeAsync().Result.ToString();

            // Add namespace import.
            Document documentWithImport =
                ImportAdder.AddImportsAsync(documentWithAttribute, namespaceImportAnnotation).Result;
            string documentWithImportText = documentWithAttribute.GetSyntaxTreeAsync().Result.ToString();

            Document documentSimplified = Simplifier.ReduceAsync(documentWithImport).Result;
            string documentSimplifiedText = documentSimplified.GetSyntaxTreeAsync().Result.ToString();

            Document documentFormatted = Formatter.FormatAsync(documentSimplified).Result;
            string documentFormattedText = documentFormatted.GetSyntaxTreeAsync().Result.ToString();

            return documentFormattedText;
        }
    }
}
```

**Expected Behavior**:
A namespace import is added for `Z.SomeAttribute` on both method and local function parameter.
```

using Z;

namespace X
{
    class C
    {
        static void M([Some] string p1)
        {
            void N(string p2)
            {
            }

            N(string.Empty);
        }
    }
}
---

using Z;

namespace X
{
    class C
    {
        static void M(string p1)
        {
            void N([Some] string p2)
            {
            }

            N(string.Empty);
        }
    }
}
```

**Actual Behavior**:
Namespace import fails silently for `Z.SomeAttribute` on local function `X.C.M.N`. It seems that because of this, the simplifier leaves the attribute untouched.
```

using Z;

namespace X
{
    class C
    {
        static void M([Some] string p1)
        {
            void N(string p2)
            {
            }

            N(string.Empty);
        }
    }
}
---

namespace X
{
    class C
    {
        static void M(string p1)
        {
            void N([global::Z.SomeAttribute] string p2)
            {
            }

            N(string.Empty);
        }
    }
}
```"
5714,Neutral,"_From @heejaechang on February 2, 2017 21:10_

it is related to https://github.com/dotnet/roslyn-project-system/issues/1450

once project has converted, trying to build the project shows this error

2>C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\MSBuild\15.0\Bin\Microsoft.Common.CurrentVersion.targets(1556,5): error MSB5016: The name "".NETStandard,Version"" contains an invalid character ""."".  C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\MSBuild\15.0\Bin\Microsoft.Common.CurrentVersion.targets



_Copied from original issue: dotnet/roslyn-project-system#1451_"
5715,Neutral,"```
at Microsoft.CodeAnalysis.MetadataDecoder`5.DecodeLocalSignatureOrThrow(BlobReader& signatureReader)
at Microsoft.CodeAnalysis.ExpressionEvaluator.MetadataUtilities.GetLocalInfo[TModuleSymbol;TTypeSymbol;TMethodSymbol;TFieldSymbol;TSymbol](MetadataDecoder`5 metadataDecoder; Int32 localSignatureToken)
at Microsoft.CodeAnalysis.CSharp.ExpressionEvaluator.EvaluationContext.CreateMethodContext(CSharpCompilation compilation; Object symReader; Guid moduleVersionId; Int32 methodToken; Int32 methodVersion; Int32 ilOffset; Int32 localSignatureToken)
at Microsoft.CodeAnalysis.CSharp.ExpressionEvaluator.EvaluationContext.CreateMethodContext(CSharpMetadataContext previous; ImmutableArray`1 metadataBlocks; Object symReader; Guid moduleVersionId; Int32 methodToken; Int32 methodVersion; UInt32 ilOffset; Int32 localSignatureToken)
at Microsoft.CodeAnalysis.CSharp.ExpressionEvaluator.CSharpExpressionCompiler.CreateMethodContext(DkmClrAppDomaat appDomain; ImmutableArray`1 metadataBlocks; Lazy`1 unusedLazy...
```
"
5716,Negative,"Currently, if I write a method like this:

```
public async Task<int> FooAsync()
{
    return 42;
}
```

The compiler emits the following warning:

> This async method lacks 'await' operators and will run synchronously. Consider using the 'await' operator to await non-blocking API calls, or 'await Task.Run(...)' to do CPU-bound work on a background thread

And if I look at the IL, I can see that the compiler actually emits a state machine, even tough none is needed.

I think this behavior could be improved.
- First, the compiler could just emit `return Task.FromResult(42)` (and do the same for every `return x`) if the method body contains no `await`. This would avoid the overhead of creating a state machine.
- Second, the warning is annoying. The fact that I use `await` or not in the body is just an implementation detail. If I change the implementation so that I no longer need `await`, I have to remove the `async` modifier and change every `return x` to `return Task.FromResult(x)` to avoid the warning. In some cases I could change the method signature to return `T` instead of `Task<T>`, but it's not always possible (e.g. if I'm implementing an interface or overriding a base class method). And if I change the implementation to make it asynchronous again, I have to do the opposite. IMO, the `async` modifier with no `await` should just mean ""implicitly wrap any return value in a completed task"". 

`async` without `await` should just be treated as a degenerate case, be optimized as such, and not emit a warning.
"
5717,Neutral,"https://ci.dot.net/job/dotnet_roslyn/job/master/job/windows_debug_vs-integration_prtest/3606/consoleFull#6464135312d31e50d-1517-49fc-92b3-2ca637122019

```
Roslyn.VisualStudio.IntegrationTests.CSharp.CSharpWinForms.ChangeControlProperty
      Assert.Contains() Failure
      Not found: this.SomeButton.Text = ""NewButtonText""
      In value:  namespace TestProj
      {
          partial class Form1
          {
              /// <summary>
              /// Required designer variable.
              /// </summary>
              private System.ComponentModel.IContainer components = null;
      
              /// <summary>
              /// Clean up any resources being used.
              /// </summary>
              /// <param name=""disposing"">true if managed resources should be disposed; otherwise, false.</param>
              protected override void Dispose(bool disposing)
              {
                  if (disposing && (components != null))
                  {
                      components.Dispose();
                  }
                  base.Dispose(disposing);
              }
      
              #region Windows Form Designer generated code
      
              /// <summary>
              /// Required method for Designer support - do not modify
              /// the contents of this method with the code editor.
              /// </summary>
              private void InitializeComponent()
              {
                  this.components = new System.ComponentModel.Container();
                  this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
                  this.Text = ""Form1"";
              }
      
              #endregion
          }
      }
      
      
      Stack Trace:
        q:\roslyn\src\VisualStudio\IntegrationTest\IntegrationTests\CSharp\CSharpWinForms.cs(44,0): at Roslyn.VisualStudio.IntegrationTests.CSharp.CSharpWinForms.ChangeControlProperty()
    Roslyn.VisualStudio.IntegrationTests.CSharp.CSharpWinForms.RemoveEventHandler
    Roslyn.VisualStudio.IntegrationTests.CSharp.CSharpWinForms.ChangeControlPropertyInCode
      Assert.Contains() Failure
      Not found: this.SomeButton.Text = ""ButtonTextGoesHere"";
      In value:  namespace TestProj
      {
          partial class Form1
          {
              /// <summary>
              /// Required designer variable.
              /// </summary>
              private System.ComponentModel.IContainer components = null;
      
              /// <summary>
              /// Clean up any resources being used.
              /// </summary>
              /// <param name=""disposing"">true if managed resources should be disposed; otherwise, false.</param>
              protected override void Dispose(bool disposing)
              {
                  if (disposing && (components != null))
                  {
                      components.Dispose();
                  }
                  base.Dispose(disposing);
              }
      
              #region Windows Form Designer generated code
      
              /// <summary>
              /// Required method for Designer support - do not modify
              /// the contents of this method with the code editor.
              /// </summary>
              private void InitializeComponent()
              {
                  this.components = new System.ComponentModel.Container();
                  this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
                  this.Text = ""Form1"";
              }
      
              #endregion
          }
      }
      
      
      Stack Trace:
        q:\roslyn\src\VisualStudio\IntegrationTest\IntegrationTests\CSharp\CSharpWinForms.cs(62,0): at Roslyn.VisualStudio.IntegrationTests.CSharp.CSharpWinForms.ChangeControlPropertyInCode()
```"
5718,Negative,"See also DevDiv.979836 — we need a mechanism to re-try failed file load cases

It is quite common for generated files to be included in the project. When the workspace is trying to read this file, it might get access denied. This results in discrepancy between Error List and actual build output and bogus build errors. This is a bad experience, and a regression from the old language service. We haven't seen this many issues of this nature before Roslyn.

We could try retrying 10 times spaced out by 200 ms. Or use FileShare.ReadWrite or FileShare.Delete, which are more forgiving than FileShare.Read. Or both.

From @Pilchie:
In the native C# language service, we used to have a single retry after 1 second which alleviated many of these sort of issues.

From @heejaechang:

currently, when a workspace try to read a file content, for whatever reason if it fails, it raise workspace failed event and move on. and remains that way until something happens to that file again.

this is a problem since this could cause a lot of errors to show up in IDE. since those file either contains empty content or staled content from whatever it used to have, this will make some errors to show up for that project, but if there is p2p reference to this project, especially skeleton assembly, then, this could cause even more errors to show up in all those project that transitively depends on this project.

what I am observing is when we build or tf sync or even when we load project, if we happen to be out of luck, we gets a lot of this failures and hence a lot of errors in IDE. (I included what I have in my VS right now below)

I think this make IDE experience quite bad. since there is no easy way to fix this once it happens. close solution and re-loading might not fix it sometimes, you need to do that several times sometimes.

so, I think we need a way to mitigate this issue. I think we need some mechanism that listen to this workspace failure events and re-load them.
...

[Failure] The process cannot access the file 'C:\dd\Roslyn2\Main\Open\Compilers\CSharp\Portable\obj\Debug\BoundNodes.xml.Generated.cs' because it is being used by another process.

[Failure] The process cannot access the file 'C:\dd\Roslyn2\Main\Open\Compilers\VisualBasic\Portable\obj\Debug\Syntax.xml.Generated.vb' because it is being used by another process.
"
5719,Neutral,"Today when you make a console application with csc, the compiler assumes the entry point should be Program.Main, that's fine but it would be great if the compiler APIs allows an arbitrary metadata token to be set as the assembly entry point.

/cc @tmat 
"
5720,Neutral,"Source: (in a `Script` document)

``` C#
public static bool HasAtLeast<T>(this IEnumerable<T>
```

Pressing Ctrl+Space on the `bool` shows just `class`, `partial`, and `unsafe`.

![image](https://cloud.githubusercontent.com/assets/313894/5792904/31847b84-9efc-11e4-9cf2-84d50988d082.png)
"
5721,Neutral,"Our merge bot is not running VSI or ETA jobs. It should.

It looks like it doesn't have permission to run ETA or VSI - I suspect that's because it's not in the Microsoft team.
- [X] Add 'dotnet' to orgWhitelist in groovy scripts: `orgWhitelist(['Microsoft', 'dotnet'])`
- [X] Add 'dotnet' to http://dotnet-ci.cloudapp.net/job/roslyn-internal_prtest_win_dbg_eta/ job which doesn't have a groovy script
- [X] Change merge tool to automatically trigger VSI
"
5722,Negative,"![image](https://cloud.githubusercontent.com/assets/1402694/18143656/f21714cc-6f77-11e6-8f38-0dd552eb9161.png)
![image](https://cloud.githubusercontent.com/assets/1402694/18143700/15beb812-6f78-11e6-9f0a-a470b96bded5.png)

The gray dots for ""Suggestion"" severity are way too difficult to see (see under the `string` in `string.Format`). It's definitely worse in Light/Blue Theme than Dark theme. 
"
5723,Neutral,"From my recent experience from developing a language feature.
We could benefit from a little review around language version and Feature.
- A common namespace, for language info.
  - eg `CodeAnalysis.VisualBasic.Language`
  - Feature Availability Checking should be coalesced into a single section of the code base.
    Currently there at least three different places.  
    - `Portable/Scanner/Scanner.vb` [link](https://github.com/dotnet/roslyn/blob/7c51e593bf5dbac6e48f8b659b4bc24097339f21/src/Compilers/VisualBasic/Portable/Scanner/Scanner.vb#L2541)
    - `Portable/Parser/Parser.vb` [link](https://github.com/dotnet/roslyn/blob/7c51e593bf5dbac6e48f8b659b4bc24097339f21/src/Compilers/VisualBasic/Portable/Parser/Parser.vb#L6103)
    - `Portable/Utilities/VisualBasic/TestOptions.vb` [link](https://github.com/dotnet/roslyn/blob/413c49e2fc11a0e01e99d87a253e81691ac541ba/src/Compilers/Test/Utilities/VisualBasic/TestOptions.vb#L31)
    - under namespace `CodeAnalysis.VisualBasic.Language.Features`
    - _So a common implementation could be used._
    - Add informative xml comments on the methods. 
  - Also check against `Features` in parse options.
  - Move `Language Version` to be under.
    - `CodeAnalysis.VisualBasic.Language.Versions`
"
5724,Neutral,"*Copied from dotnet/csharplang#458*
## Summary
All branching keywords like `break`, `continue`, `goto` and most of all `return` should be highlighted in a different color as the standard keyword color.

In Visual Studio and VS Code my suggestion is violet instead of blue.

## Motiviation
Branch points should be visible in a method without any further ado for the reader. No marking of one keyword and get all equivalent keywords highlighted should be required.

## Variations
`break`s in `switch` statements are expected and belong to the constructs normal appearance. They could be kept in the standard highlight color.

![branchhighlight](https://cloud.githubusercontent.com/assets/17041498/25178869/e144d2ba-2507-11e7-94bc-02f106b79de6.png)

"
5725,Negative,"**I have a memory dump that is 1.7GB in size.  Please let me know how I can get this to you!**

**Strange observations:**
1. I read about a hang with Update 3 (https://github.com/dotnet/roslyn/issues/12317) and pulled the cumulative update - KB3165756 (https://msdn.microsoft.com/library/mt752379). It says it successfully installed and shows up in my list of Windows installed updates - as well as the About dialog in VS.  However, my executable and the error message in Application Event Viewer (message below) list the version as 14.25420.1 instead of 14.0. 25431.01 (the cumulative update) so I'm not positive it is actually updated.

2. this seems to be project specific. I deleted the .suo thinking it was corrupt but it didn't change anything. I have also disabled Solution-wide Analysis - again didn't work.

**Version Used**: VS2015 14.0.254.20.1 (Update 3)

**Steps to Reproduce**:

1.  Open VS as administrator
2. Open a solution (seems to be solution-specific)
3. VS completes loading solution
4. within 10-20 seconds, VS just hangs and is non-responsive

**Expected Behavior**:
VS does not hang

**Actual Behavior**:
VS hangs and I have to kill the process

**Error Message from Application Event Viewer after I kill the process:**
The program devenv.exe version 14.0.25420.1 stopped interacting with Windows and was closed. To see if more information about the problem is available, check the problem history in the Security and Maintenance control panel.
 Process ID: 49d0
 Start Time: 01d2a971b6255985
 Termination Time: 4294967295
 Application Path: C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE\devenv.exe
 Report Id: 04cd0394-1566-11e7-b28b-34f39a954916
 Faulting package full name: 
 Faulting package-relative application ID: "
5726,Negative,"Related to test plan #19216

It appears that the current version accepts operators that return by ref (when read from IL).
Should we be accepting ref-readonly returns as well? I believe we should not, since it is a spec violation."
5727,Neutral,"**Steps to Reproduce**:
1. I have project **Foo**.
2. In that project I have a folder with the same name.
3. In that folder I have a file with the following content:

``` csharp
namespace Namespace
{
    public static class Class
    {
        public static void Method()
        {
            var x = new Bar();
        }
    }
}
```

**Bar** is unknown identifier.

When I use ""Generate class 'Bar' in new file"", the file is placed in project folder but It should be placed in folder 'Foo'.

This error occurs when a project and a folder have the same name.
"
5728,Neutral,"PR: [#9431#issuecomment-191697366](https://github.com/dotnet/roslyn/pull/9431#issuecomment-191697366) _Only log formatting events in telemetry when they are enacted by the …_ by @jmarolf
Failure: http://dotnet-ci.cloudapp.net/job/roslyn_prtest_win_dbg_unit32/4737/

**Issue 1: Test Failures**
There were test failures, see Test Results above.

**Issue 2: xUnit returned error code without errors**
xunit produced no error output but had exit code 1

**_18:37:10   Roslyn.InteractiveWindow.UnitTests.dll                                      FAILED 00:00:32.0504962**_
"
5729,Neutral,"Version: build 26209.1 d15rel

Perf trace:

%internal_share%\mlangfs1\public\tomat\Bugs\17373"
5730,Neutral,This likely should play along with the existing Generate-Equals feature.
5731,Neutral,"**Version Used**: Visual Studio ""15"" Previews 3 & 4

**Steps to Reproduce**:

I uncovered this during a typo. Attempt to compile this code:

``` cs
using System;

namespace CS7
{
    class T1 { int a; }
    class Program
    {
        static void Main(string[] args)
        {
            if (T1 is object i)
            {
                Console.WriteLine($""Writing O {i}."");
            }
            else { Console.WriteLine($""Writing Not O.""); }
        }

    }
}
```

**Expected Behavior**: Compiles successfully.

**Actual Behavior**: Exception thrown:

```
""csc.exe"" exited with code -2146232797

Unhandled Exception: System.InvalidOperationException: Unexpected value 'TypeExpression' of type 'Microsoft.CodeAnalysis.CSharp.BoundKind'
   at Microsoft.CodeAnalysis.CSharp.CodeGen.CodeGenerator.EmitExpressionCore(BoundExpression expression, Boolean used)
   at Microsoft.CodeAnalysis.CSharp.CodeGen.CodeGenerator.EmitExpression(BoundExpression expression, Boolean used)
   at Microsoft.CodeAnalysis.CSharp.CodeGen.CodeGenerator.EmitAsExpression(BoundAsOperator asOp, Boolean used)
```
"
5732,Neutral,"The following code produces in a compiler error on VS2015, while it compiles without problems on VS2013:

```
public static class Program
{
    public static void Main(string[] args)
    {
        IEnumerable x = new object[0];
        IEnumerable<dynamic> dynX = x.Cast<dynamic>();

        // CS1061 'object' does not contain a definition for 'Text'...
        // tooltip on 'var' shows IColumn instead of IEnumerable<dynamic>
        var result = dynX.Select(_ => _.Text);
    }

    public static IColumn Select<TResult>(this IColumn source, Func<object, TResult> selector)
    {
        throw new NotImplementedException();
    }
}

public interface IColumn { }
```

This example was made to keep the general flow of things: It starts with having an `IEnumerable`, which is then `Cast<>()` to `dynamic`, on which `Enumerable.Select` is called.

The compiler somehow seems to pick the `IColumn`-specific `Select` method instead of the matching LINQ extension method `Enumerable.Select`, that the VS2013 compiler picks.

This issue is also explained on [Stack Overflow](http://stackoverflow.com/q/31700117/1025421).
"
5733,Neutral,
5734,Neutral,"Related to work for https://github.com/dotnet/roslyn/issues/14364.

Test Microsoft.CodeAnalysis.Editor.UnitTests.FindReferences.FindReferencesTests.TestEventParameterCascading has been disabled.
"
5735,Neutral,"I **absolutely** love the LINQ query syntax, because you can type it quicker and more beautiful than the LINQ method syntax.

I mean this:

``` csharp
var result = from elem in collection
             where elem.foo == ""bar""
             orderby elem.test descending
             select elem.baz;
```

is easer to read than this:

``` csharp
var result = collection
             .Where(_ => _.foo == ""bar"")
             .OrderBy(_ => elem.test)
             .Reverse()
             .Select(_ => _.baz);
```

So I would like to propose more LINQ keywords like `reverse`, `min`, `max`, `count`, `first`, `last`, `oftype`, `tolist`, `toarray` etc. to be implemented.
I would also like to propose the possibility of _""registering""_ own extension methods as valid LINQ keywords. This should not effect the actual compiled code to much, as the query syntax is converted into the method syntax during compile-time.

I could imagine something as follows:

``` csharp
public static class MyExtensionMethods
{
    [LINQExtension(""shuffle"")]
    public static IEnumerable<T> Shuffle<T>(this IEnumerable<T> source)
    {
        // function logic goes here
    }

    [LINQExtension(""print"")]
    public static IEnumerable<T> Print<T>(this IEnumerable<T> source, T element)
    {
    if (element == null)
            Console.WriteLine("" null! "");
        else
            Console.WriteLine(element.ToString());
    }
}

public static class Test
{
    public static int Main(string[] argv)
    {
        int[] collection1 = ....;
        object[] collection2 = ....;

        IEnumerable<int> range1 = from i in collection1
                                  where i < 100
                                  where i > 20
                                  select i
                                  shuffle;
        // the extension method ""shuffle"" could be found by the compiler and compiled

        IEnumerable<object> range2 = from o in collection2
                                     where o.foo == ""test""
                                     print o.bar
                                     foo;
         // the extension method ""foo"" could NOT be found, so the compiler would generate some error like this:
         //     ERROR CS... ON LINE ...: The LINQ Extension method 'foo' could not be found in the current assembly
         // but the exension method ""print"" would be found and compiled
    }
}
```
"
5736,Neutral,"In the following code samples, the completion list preselects ""object"" and will complete as expected on '{'. However, this gets in the way of typing an anonymous type.

``` C#
object o = new |
```

``` C#
static void M1()
{
    M2(new |
}

static void M2(object o) { }
```

There really isn't a reason in the C# language to ever type `new object {`. So, the solution is to tweak completion in this case to not commit on '{' when the preselected type is `System.Object`. This is similar to how completion works when typing '=' in a using directive.
"
5737,Neutral,"In https://github.com/dotnet/roslyn/pull/13274#discussion_r76849261 @AlekseyTs questioned whether we have tests covering the binding of type-inferred deconstruction variables in a for statement. If we do not have such tests, we should.

Similarly, in https://github.com/dotnet/roslyn/pull/13274#discussion_r76849303 we have a similar question for foreach loops.
"
5738,Neutral,"@CyrusNajmabadi brought up a good point that all of our options with the ""dotnet"" prefix can also apply to TypeScript, for example. 

To make these options available to other Microsoft languages, let's rename them to instead start with the ""ms"" prefix...or something along those lines."
5739,Neutral,"**Version Used**: 
Microsoft (R) Visual C# Compiler version 2.3.2.61928 (ec1cde8b)

**Steps to Reproduce**:
Compile the following program in release:
```C#
class Program
{
    static void Main() { }

    static string Create1(int a, int b, int c) =>
        string.Format(
            ""{0} "" +
            ""{1} "" +
            ""{2} "",
            a, b, c);

    static string Create2(int a, int b, int c) =>
        $""{a} "" +
        $""{b} "" +
        $""{c} "";
}
```

**Expected Behavior**:
In both cases, we'd end up with a single input string and array to the underlying Format call.

**Actual Behavior**:
The first example results in a single input string and array:
```
  IL_0000:  ldstr      ""{0} {1} {2} ""
  IL_0005:  ldarg.0
  IL_0006:  box        [System.Runtime]System.Int32
  IL_000b:  ldarg.1
  IL_000c:  box        [System.Runtime]System.Int32
  IL_0011:  ldarg.2
  IL_0012:  box        [System.Runtime]System.Int32
  IL_0017:  call       string [System.Runtime]System.String::Format(string,
                                                                    object,
                                                                    object,
                                                                    object)
````
but rather than effectively concatening the interpolations, the second example results in three distinct arrays and format calls, resulting in three intermediate strings that then need to be concatenated:
```
  IL_0000:  ldstr      ""{0} ""
  IL_0005:  ldarg.0
  IL_0006:  box        [System.Runtime]System.Int32
  IL_000b:  call       string [System.Runtime]System.String::Format(string,
                                                                    object)
  IL_0010:  ldstr      ""{0} ""
  IL_0015:  ldarg.1
  IL_0016:  box        [System.Runtime]System.Int32
  IL_001b:  call       string [System.Runtime]System.String::Format(string,
                                                                    object)
  IL_0020:  ldstr      ""{0} ""
  IL_0025:  ldarg.2
  IL_0026:  box        [System.Runtime]System.Int32
  IL_002b:  call       string [System.Runtime]System.String::Format(string,
                                                                    object)
  IL_0030:  call       string [System.Runtime]System.String::Concat(string,
                                                                    string,
                                                                    string)
```
This is relevant, because splitting string literals across lines with `+` is a common way of avoiding really long lines, and it'd be nice to be able to do the same thing with string interpolation without taking the further perf hit."
5740,Neutral,"Repro step

1, create new console app
2. add this code

...

using System.Threading.Tasks;

public class Program
{
    static void Main(string[] args)
    {
    }

    public Task Foo()
    {
        return null;
    }
}

..

expected
Message	IDE1006	Naming rule violation: Missing suffix: 'Async'	to show u p

actual
nothing happens.

...

does this rule require some special flag in project file?"
5741,Neutral,"The EE rewriter currently occurs before lowering. As a conseqence, it needs to be updated to handle every new language construct, even when those constructs will be lowered away by lowering.

It should be moved to _after_ lowering.

See `EEMethodSymbol.cs` method `GenerateMethodBody`.
"
5742,Neutral,"- [x] IInvalidStatement

We need to test all possible cases where binding different statements can end up as an invalid statement."
5743,Neutral,"**Steps to Reproduce**:

1.  Consider a function where the cursor is at `[||]`
```C#
    private static bool TryGetRuleSeverity(string namingRuleName, IDictionary<string, object> namingRulesSeverity, out string severity)
    {
        var result = from kvp in namingRulesSeverity
                     where kvp.Key.Trim() == $""dotnet_naming_rule.{namingRuleName}.severity"" [||]
    }
```
2.  Hit enter


**Expected Behavior**:
```C#
    private static bool TryGetRuleSeverity(string namingRuleName, IDictionary<string, object> namingRulesSeverity, out string severity)
    {
        var result = from kvp in namingRulesSeverity
                     where kvp.Key.Trim() == $""dotnet_naming_rule.{namingRuleName}.severity"" 
                     [||]
    }
```
**Actual Behavior**:
```C#
    private static bool TryGetRuleSeverity(string namingRuleName, IDictionary<string, object> namingRulesSeverity, out string severity)
    {
        var result = from kvp in namingRulesSeverity
                     where kvp.Key.Trim() == $""dotnet_naming_rule.{namingRuleName}.severity"" +
                     $""""[||]
    }
```"
5744,Neutral,"Microsoft.CodeAnalysis.CSharp.UnitTests.Emit.CompilationEmitTests.BrokenOutStream [FAIL]

```
  Expected:
      Diagnostic(ErrorCode.ERR_PeWritingFailure).WithArguments(""I/O error occurred."")
  Actual:
      // error CS8104: An error occurred while writing the output file.
      Diagnostic(ErrorCode.ERR_PeWritingFailure).WithArguments(""I/O ƒGƒ‰[‚ª”-¶‚µ‚Ü‚µ‚½B"").WithLocation(1, 1)
  Diff:
  ++>     Diagnostic(ErrorCode.ERR_PeWritingFailure).WithArguments(""I/O ƒGƒ‰[‚ª”-¶‚µ‚Ü‚µ‚½B"").WithLocation(1, 1)
  -->     Diagnostic(ErrorCode.ERR_PeWritingFailure).WithArguments(""I/O error occurred."")
  Expected: True
  Actual:   False
  Stack Trace:
       êŠ Xunit.Assert.True(Nullable`1 condition, String userMessage)
       êŠ Microsoft.CodeAnalysis.DiagnosticExtensions.Verify(IEnumerable`1 actual, DiagnosticDescription[] expected, Boolean errorCodeOnly)
       êŠ Microsoft.CodeAnalysis.CSharp.UnitTests.Emit.CompilationEmitTests.BrokenOutStream()
```
"
5745,Neutral,"There are cases where we can be sure that code needs to be peverify-compatible. 

We should consider checking for that and automatically suppress optimizations that could interfere with that. 

See for example bug - https://github.com/dotnet/roslyn/issues/22707
"
5746,Neutral,"``` csharp
if (node.Type != _int32Type)
```

looks like it should be

``` csharp
if (arg.Type != _int32Type)
```
"
5747,Negative,"Consider the following VB program:

``` VB
Module Program

    Sub Main()
        Dim b As Byte
        b += 1

        Console.WriteLine(b)
    End Sub

End Module
```

I tried using the VB compiler API to classify the conversion between the right-side of the compound assignment statement (the numeric literal, `1`) and the type of the left-side (`System.Byte`). My expectation is that this would classify as a narrowing-numeric conversion since `1` has the type, `System.Int32`. However, I was surprised to get back a widening-numeric conversion. Is this by design, or a bug? If it's by design, why?

Here's a C# interactive session I used to verify the result.

```
> #r ""C:\Projects\Roslyn\Open\Binaries\Debug\Microsoft.CodeAnalysis.dll""
> #r ""C:\Projects\Roslyn\Open\Binaries\Debug\Microsoft.CodeAnalysis.VisualBasic.dll""
> using Microsoft.CodeAnalysis;
> using Microsoft.CodeAnalysis.VisualBasic;
> using Microsoft.CodeAnalysis.VisualBasic.Syntax;
> var code = @""
. Module Program
. 
.     Sub Main()
.         Dim b As Byte
.         b += 1
. 
.         Console.WriteLine(b)
.     End Sub
. 
. End Module
. "";
> var tree = SyntaxFactory.ParseSyntaxTree(code);
> var compilation = VisualBasicCompilation.Create(""Test"")
.     .AddSyntaxTrees(tree)
.     .AddReferences(MetadataReference.CreateFromFile(@""C:\Windows\Microsoft.NET\Framework\v4.0.30319\mscorlib.dll""));
> var semanticModel = compilation.GetSemanticModel(tree);
> var statements = tree.GetRoot().DescendantNodes().OfType<ExecutableStatementSyntax>().ToArray();
> var assignment = statements[1] as AssignmentStatementSyntax;
> assignment
AssignmentStatementSyntax(AssignmentStatementSyntax AddAssignmentStatement b += 1)
> var type = semanticModel.GetTypeInfo(assignment.Left).Type;
> type
PENamedTypeSymbolWithEmittedNamespaceName(NamedType System.Byte)
> var conversion = semanticModel.ClassifyConversion(assignment.Right, type);
> conversion
[WideningNumeric, InvolvesNarrowingFromNumericConstant]
> 
```

Note that the conversion includes the internal `InvolvesNarrowingFromNumericConstant` flag as well, which seems a bit suspicious.
"
5748,Neutral,"I have a custom static analyser that is used to verify compiled assemblies against various business standards (is it strong named, is the Authenticode signature valid, etc.), and part of the analyser includes reading the `VS_VERSIONINFO` data out of the portable executable to check the Win32 file information is correct.

I've noticed that if the `[AssemblyTrademark]` attribute is empty (i.e. `[assembly: AssemblyTrademark("""")]`), the `LegalTrademarks` value returns garbage, which then in turn breaks the alignment of values beyond it in the structure, causing more garbage values and the reading of the structure to terminate early.

Below is the expected information that should be read from the binary compiled from [this AppVeyor build](https://ci.appveyor.com/project/experiandataquality/swashbuckle) represented as an `IDictionary<String, string>` output to the Visual Studio Immediate Window.

**Expected Result**:

```
Count = 11
    [0]: {[Comments, An Experian Data Quality-branded wrapper on top of Swashbuckle.]}
    [1]: {[CompanyName, Experian Data Quality]}
    [2]: {[FileDescription, Experian.DataQuality.Swashbuckle]}
    [3]: {[FileVersion, 1.0.0.0]}
    [4]: {[InternalName, Experian.DataQuality.Swashbuckle.dll]}
    [5]: {[LegalCopyright, Copyright (c) Experian Ltd., 2015.]}
    [6]: {[LegalTrademarks, ]}
    [7]: {[OriginalFilename, Experian.DataQuality.Swashbuckle.dll]}
    [8]: {[ProductName, Experian.DataQuality.Swashbuckle]}
    [9]: {[ProductVersion, 1.0.0.0]}
    [10]: {[Assembly Version, 1.0.0.0]}
```

**Actual Result**:

```
Count = 9
    [0]: {[Comments, An Experian Data Quality-branded wrapper on top of Swashbuckle.]}
    [1]: {[CompanyName, Experian Data Quality]}
    [2]: {[FileDescription, Experian.DataQuality.Swashbuckle]}
    [3]: {[FileVersion, 1.0.0.0]}
    [4]: {[InternalName, Experian.DataQuality.Swashbuckle.dll]}
    [5]: {[LegalCopyright, Copyright (c) Experian Ltd., 2015.]}
    [6]: {[LegalTrademarks, r]}
    [7]: {[riginalFilename, E]}
    [8]: {[rian.DataQuality.Swashbuckle.dll, b!ProductName
```

The same code compiled on a machine with Visual Studio 2013 (and not Visual Studio 2015) has the correct version information, so it looks like an issue with the Roslyn compiler's implementation.

I get the same problem compiling locally on a Windows 7 SP1 x64 machine, so it isn't specific to AppVeyor.

The raw bytes of the `VS_VERSIONINFO` section (at least the best that I can represent them here) are below.

From looking at the bytes, I _think_ that there's an extra null character being emitted when the value is blank.

**Expected**:

```
0035ea50h: 00 00 00 00 00 00 00 00 A4 04 34 00 00 00 56 00 ; ........¤.4...V.
0035ea60h: 53 00 5F 00 56 00 45 00 52 00 53 00 49 00 4F 00 ; S._.V.E.R.S.I.O.
0035ea70h: 4E 00 5F 00 49 00 4E 00 46 00 4F 00 00 00 00 00 ; N._.I.N.F.O.....
0035ea80h: BD 04 EF FE 00 00 01 00 00 00 01 00 00 00 00 00 ; ½.ïþ............
0035ea90h: 00 00 01 00 00 00 00 00 3F 00 00 00 00 00 00 00 ; ........?.......
0035eaa0h: 04 00 00 00 02 00 00 00 00 00 00 00 00 00 00 00 ; ................
0035eab0h: 00 00 00 00 44 00 00 00 01 00 56 00 61 00 72 00 ; ....D.....V.a.r.
0035eac0h: 46 00 69 00 6C 00 65 00 49 00 6E 00 66 00 6F 00 ; F.i.l.e.I.n.f.o.
0035ead0h: 00 00 00 00 24 00 04 00 00 00 54 00 72 00 61 00 ; ....$.....T.r.a.
0035eae0h: 6E 00 73 00 6C 00 61 00 74 00 69 00 6F 00 6E 00 ; n.s.l.a.t.i.o.n.
0035eaf0h: 00 00 00 00 00 00 B0 04 04 04 00 00 01 00 53 00 ; ......°.......S.
0035eb00h: 74 00 72 00 69 00 6E 00 67 00 46 00 69 00 6C 00 ; t.r.i.n.g.F.i.l.
0035eb10h: 65 00 49 00 6E 00 66 00 6F 00 00 00 E0 03 00 00 ; e.I.n.f.o...à...
0035eb20h: 01 00 30 00 30 00 30 00 30 00 30 00 34 00 62 00 ; ..0.0.0.0.0.4.b.
0035eb30h: 30 00 00 00 98 00 40 00 01 00 43 00 6F 00 6D 00 ; 0...˜.@...C.o.m.
0035eb40h: 6D 00 65 00 6E 00 74 00 73 00 00 00 41 00 6E 00 ; m.e.n.t.s...A.n.
0035eb50h: 20 00 45 00 78 00 70 00 65 00 72 00 69 00 61 00 ;  .E.x.p.e.r.i.a.
0035eb60h: 6E 00 20 00 44 00 61 00 74 00 61 00 20 00 51 00 ; n. .D.a.t.a. .Q.
0035eb70h: 75 00 61 00 6C 00 69 00 74 00 79 00 2D 00 62 00 ; u.a.l.i.t.y.-.b.
0035eb80h: 72 00 61 00 6E 00 64 00 65 00 64 00 20 00 77 00 ; r.a.n.d.e.d. .w.
0035eb90h: 72 00 61 00 70 00 70 00 65 00 72 00 20 00 6F 00 ; r.a.p.p.e.r. .o.
0035eba0h: 6E 00 20 00 74 00 6F 00 70 00 20 00 6F 00 66 00 ; n. .t.o.p. .o.f.
0035ebb0h: 20 00 53 00 77 00 61 00 73 00 68 00 62 00 75 00 ;  .S.w.a.s.h.b.u.
0035ebc0h: 63 00 6B 00 6C 00 65 00 2E 00 00 00 4C 00 16 00 ; c.k.l.e.....L...
0035ebd0h: 01 00 43 00 6F 00 6D 00 70 00 61 00 6E 00 79 00 ; ..C.o.m.p.a.n.y.
0035ebe0h: 4E 00 61 00 6D 00 65 00 00 00 00 00 45 00 78 00 ; N.a.m.e.....E.x.
0035ebf0h: 70 00 65 00 72 00 69 00 61 00 6E 00 20 00 44 00 ; p.e.r.i.a.n. .D.
0035ec00h: 61 00 74 00 61 00 20 00 51 00 75 00 61 00 6C 00 ; a.t.a. .Q.u.a.l.
0035ec10h: 69 00 74 00 79 00 00 00 6A 00 21 00 01 00 46 00 ; i.t.y...j.!...F.
0035ec20h: 69 00 6C 00 65 00 44 00 65 00 73 00 63 00 72 00 ; i.l.e.D.e.s.c.r.
0035ec30h: 69 00 70 00 74 00 69 00 6F 00 6E 00 00 00 00 00 ; i.p.t.i.o.n.....
0035ec40h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035ec50h: 2E 00 44 00 61 00 74 00 61 00 51 00 75 00 61 00 ; ..D.a.t.a.Q.u.a.
0035ec60h: 6C 00 69 00 74 00 79 00 2E 00 53 00 77 00 61 00 ; l.i.t.y...S.w.a.
0035ec70h: 73 00 68 00 62 00 75 00 63 00 6B 00 6C 00 65 00 ; s.h.b.u.c.k.l.e.
0035ec80h: 00 00 00 00 30 00 08 00 01 00 46 00 69 00 6C 00 ; ....0.....F.i.l.
0035ec90h: 65 00 56 00 65 00 72 00 73 00 69 00 6F 00 6E 00 ; e.V.e.r.s.i.o.n.
0035eca0h: 00 00 00 00 31 00 2E 00 30 00 2E 00 30 00 2E 00 ; ....1...0...0...
0035ecb0h: 30 00 00 00 6A 00 25 00 01 00 49 00 6E 00 74 00 ; 0...j.%...I.n.t.
0035ecc0h: 65 00 72 00 6E 00 61 00 6C 00 4E 00 61 00 6D 00 ; e.r.n.a.l.N.a.m.
0035ecd0h: 65 00 00 00 45 00 78 00 70 00 65 00 72 00 69 00 ; e...E.x.p.e.r.i.
0035ece0h: 61 00 6E 00 2E 00 44 00 61 00 74 00 61 00 51 00 ; a.n...D.a.t.a.Q.
0035ecf0h: 75 00 61 00 6C 00 69 00 74 00 79 00 2E 00 53 00 ; u.a.l.i.t.y...S.
0035ed00h: 77 00 61 00 73 00 68 00 62 00 75 00 63 00 6B 00 ; w.a.s.h.b.u.c.k.
0035ed10h: 6C 00 65 00 2E 00 64 00 6C 00 6C 00 00 00 00 00 ; l.e...d.l.l.....
0035ed20h: 6A 00 23 00 01 00 4C 00 65 00 67 00 61 00 6C 00 ; j.#...L.e.g.a.l.
0035ed30h: 43 00 6F 00 70 00 79 00 72 00 69 00 67 00 68 00 ; C.o.p.y.r.i.g.h.
0035ed40h: 74 00 00 00 43 00 6F 00 70 00 79 00 72 00 69 00 ; t...C.o.p.y.r.i.
0035ed50h: 67 00 68 00 74 00 20 00 28 00 63 00 29 00 20 00 ; g.h.t. .(.c.). .
0035ed60h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035ed70h: 20 00 4C 00 74 00 64 00 2E 00 2C 00 20 00 32 00 ;  .L.t.d...,. .2.
0035ed80h: 30 00 31 00 35 00 2E 00 00 00 00 00 2C 00 02 00 ; 0.1.5.......,...
0035ed90h: 01 00 4C 00 65 00 67 00 61 00 6C 00 54 00 72 00 ; ..L.e.g.a.l.T.r.
0035eda0h: 61 00 64 00 65 00 6D 00 61 00 72 00 6B 00 73 00 ; a.d.e.m.a.r.k.s.
0035edb0h: 00 00 00 00 20 00 00 00 72 00 25 00 01 00 4F 00 ; .... ...r.%...O.
0035edc0h: 72 00 69 00 67 00 69 00 6E 00 61 00 6C 00 46 00 ; r.i.g.i.n.a.l.F.
0035edd0h: 69 00 6C 00 65 00 6E 00 61 00 6D 00 65 00 00 00 ; i.l.e.n.a.m.e...
0035ede0h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035edf0h: 2E 00 44 00 61 00 74 00 61 00 51 00 75 00 61 00 ; ..D.a.t.a.Q.u.a.
0035ee00h: 6C 00 69 00 74 00 79 00 2E 00 53 00 77 00 61 00 ; l.i.t.y...S.w.a.
0035ee10h: 73 00 68 00 62 00 75 00 63 00 6B 00 6C 00 65 00 ; s.h.b.u.c.k.l.e.
0035ee20h: 2E 00 64 00 6C 00 6C 00 00 00 00 00 62 00 21 00 ; ..d.l.l.....b.!.
0035ee30h: 01 00 50 00 72 00 6F 00 64 00 75 00 63 00 74 00 ; ..P.r.o.d.u.c.t.
0035ee40h: 4E 00 61 00 6D 00 65 00 00 00 00 00 45 00 78 00 ; N.a.m.e.....E.x.
0035ee50h: 70 00 65 00 72 00 69 00 61 00 6E 00 2E 00 44 00 ; p.e.r.i.a.n...D.
0035ee60h: 61 00 74 00 61 00 51 00 75 00 61 00 6C 00 69 00 ; a.t.a.Q.u.a.l.i.
0035ee70h: 74 00 79 00 2E 00 53 00 77 00 61 00 73 00 68 00 ; t.y...S.w.a.s.h.
0035ee80h: 62 00 75 00 63 00 6B 00 6C 00 65 00 00 00 00 00 ; b.u.c.k.l.e.....
0035ee90h: 34 00 08 00 01 00 50 00 72 00 6F 00 64 00 75 00 ; 4.....P.r.o.d.u.
0035eea0h: 63 00 74 00 56 00 65 00 72 00 73 00 69 00 6F 00 ; c.t.V.e.r.s.i.o.
0035eeb0h: 6E 00 00 00 31 00 2E 00 30 00 2E 00 30 00 2E 00 ; n...1...0...0...
0035eec0h: 30 00 00 00 38 00 08 00 01 00 41 00 73 00 73 00 ; 0...8.....A.s.s.
0035eed0h: 65 00 6D 00 62 00 6C 00 79 00 20 00 56 00 65 00 ; e.m.b.l.y. .V.e.
0035eee0h: 72 00 73 00 69 00 6F 00 6E 00 00 00 31 00 2E 00 ; r.s.i.o.n...1...
0035eef0h: 30 00 2E 00 30 00 2E 00 30 00 00 00 00 00 00 00 ; 0...0...0.......
```

**Actual**:

```
0035e850h: 00 00 00 00 00 00 00 00 A8 04 34 00 00 00 56 00 ; ........¨.4...V.
0035e860h: 53 00 5F 00 56 00 45 00 52 00 53 00 49 00 4F 00 ; S._.V.E.R.S.I.O.
0035e870h: 4E 00 5F 00 49 00 4E 00 46 00 4F 00 00 00 00 00 ; N._.I.N.F.O.....
0035e880h: BD 04 EF FE 00 00 01 00 00 00 01 00 00 00 1E 00 ; ½.ïþ............
0035e890h: 00 00 01 00 00 00 1E 00 3F 00 00 00 00 00 00 00 ; ........?.......
0035e8a0h: 04 00 00 00 02 00 00 00 00 00 00 00 00 00 00 00 ; ................
0035e8b0h: 00 00 00 00 44 00 00 00 01 00 56 00 61 00 72 00 ; ....D.....V.a.r.
0035e8c0h: 46 00 69 00 6C 00 65 00 49 00 6E 00 66 00 6F 00 ; F.i.l.e.I.n.f.o.
0035e8d0h: 00 00 00 00 24 00 04 00 00 00 54 00 72 00 61 00 ; ....$.....T.r.a.
0035e8e0h: 6E 00 73 00 6C 00 61 00 74 00 69 00 6F 00 6E 00 ; n.s.l.a.t.i.o.n.
0035e8f0h: 00 00 00 00 00 00 B0 04 08 04 00 00 01 00 53 00 ; ......°.......S.
0035e900h: 74 00 72 00 69 00 6E 00 67 00 46 00 69 00 6C 00 ; t.r.i.n.g.F.i.l.
0035e910h: 65 00 49 00 6E 00 66 00 6F 00 00 00 E4 03 00 00 ; e.I.n.f.o...ä...
0035e920h: 01 00 30 00 30 00 30 00 30 00 30 00 34 00 62 00 ; ..0.0.0.0.0.4.b.
0035e930h: 30 00 00 00 98 00 40 00 01 00 43 00 6F 00 6D 00 ; 0...˜.@...C.o.m.
0035e940h: 6D 00 65 00 6E 00 74 00 73 00 00 00 41 00 6E 00 ; m.e.n.t.s...A.n.
0035e950h: 20 00 45 00 78 00 70 00 65 00 72 00 69 00 61 00 ;  .E.x.p.e.r.i.a.
0035e960h: 6E 00 20 00 44 00 61 00 74 00 61 00 20 00 51 00 ; n. .D.a.t.a. .Q.
0035e970h: 75 00 61 00 6C 00 69 00 74 00 79 00 2D 00 62 00 ; u.a.l.i.t.y.-.b.
0035e980h: 72 00 61 00 6E 00 64 00 65 00 64 00 20 00 77 00 ; r.a.n.d.e.d. .w.
0035e990h: 72 00 61 00 70 00 70 00 65 00 72 00 20 00 6F 00 ; r.a.p.p.e.r. .o.
0035e9a0h: 6E 00 20 00 74 00 6F 00 70 00 20 00 6F 00 66 00 ; n. .t.o.p. .o.f.
0035e9b0h: 20 00 53 00 77 00 61 00 73 00 68 00 62 00 75 00 ;  .S.w.a.s.h.b.u.
0035e9c0h: 63 00 6B 00 6C 00 65 00 2E 00 00 00 4C 00 16 00 ; c.k.l.e.....L...
0035e9d0h: 01 00 43 00 6F 00 6D 00 70 00 61 00 6E 00 79 00 ; ..C.o.m.p.a.n.y.
0035e9e0h: 4E 00 61 00 6D 00 65 00 00 00 00 00 45 00 78 00 ; N.a.m.e.....E.x.
0035e9f0h: 70 00 65 00 72 00 69 00 61 00 6E 00 20 00 44 00 ; p.e.r.i.a.n. .D.
0035ea00h: 61 00 74 00 61 00 20 00 51 00 75 00 61 00 6C 00 ; a.t.a. .Q.u.a.l.
0035ea10h: 69 00 74 00 79 00 00 00 6A 00 21 00 01 00 46 00 ; i.t.y...j.!...F.
0035ea20h: 69 00 6C 00 65 00 44 00 65 00 73 00 63 00 72 00 ; i.l.e.D.e.s.c.r.
0035ea30h: 69 00 70 00 74 00 69 00 6F 00 6E 00 00 00 00 00 ; i.p.t.i.o.n.....
0035ea40h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035ea50h: 2E 00 44 00 61 00 74 00 61 00 51 00 75 00 61 00 ; ..D.a.t.a.Q.u.a.
0035ea60h: 6C 00 69 00 74 00 79 00 2E 00 53 00 77 00 61 00 ; l.i.t.y...S.w.a.
0035ea70h: 73 00 68 00 62 00 75 00 63 00 6B 00 6C 00 65 00 ; s.h.b.u.c.k.l.e.
0035ea80h: 00 00 00 00 32 00 09 00 01 00 46 00 69 00 6C 00 ; ....2.....F.i.l.
0035ea90h: 65 00 56 00 65 00 72 00 73 00 69 00 6F 00 6E 00 ; e.V.e.r.s.i.o.n.
0035eaa0h: 00 00 00 00 31 00 2E 00 30 00 2E 00 33 00 30 00 ; ....1...0...3.0.
0035eab0h: 2E 00 30 00 00 00 00 00 6A 00 25 00 01 00 49 00 ; ..0.....j.%...I.
0035eac0h: 6E 00 74 00 65 00 72 00 6E 00 61 00 6C 00 4E 00 ; n.t.e.r.n.a.l.N.
0035ead0h: 61 00 6D 00 65 00 00 00 45 00 78 00 70 00 65 00 ; a.m.e...E.x.p.e.
0035eae0h: 72 00 69 00 61 00 6E 00 2E 00 44 00 61 00 74 00 ; r.i.a.n...D.a.t.
0035eaf0h: 61 00 51 00 75 00 61 00 6C 00 69 00 74 00 79 00 ; a.Q.u.a.l.i.t.y.
0035eb00h: 2E 00 53 00 77 00 61 00 73 00 68 00 62 00 75 00 ; ..S.w.a.s.h.b.u.
0035eb10h: 63 00 6B 00 6C 00 65 00 2E 00 64 00 6C 00 6C 00 ; c.k.l.e...d.l.l.
0035eb20h: 00 00 00 00 66 00 21 00 01 00 4C 00 65 00 67 00 ; ....f.!...L.e.g.
0035eb30h: 61 00 6C 00 43 00 6F 00 70 00 79 00 72 00 69 00 ; a.l.C.o.p.y.r.i.
0035eb40h: 67 00 68 00 74 00 00 00 43 00 6F 00 70 00 79 00 ; g.h.t...C.o.p.y.
0035eb50h: 72 00 69 00 67 00 68 00 74 00 20 00 A9 00 20 00 ; r.i.g.h.t. .©. .
0035eb60h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035eb70h: 20 00 4C 00 74 00 64 00 2E 00 2C 00 20 00 32 00 ;  .L.t.d...,. .2.
0035eb80h: 30 00 31 00 35 00 2E 00 00 00 00 00 2A 00 01 00 ; 0.1.5.......*...
0035eb90h: 01 00 4C 00 65 00 67 00 61 00 6C 00 54 00 72 00 ; ..L.e.g.a.l.T.r.
0035eba0h: 61 00 64 00 65 00 6D 00 61 00 72 00 6B 00 73 00 ; a.d.e.m.a.r.k.s.
0035ebb0h: 00 00 00 00 00 00 00 00 72 00 25 00 01 00 4F 00 ; ........r.%...O.
0035ebc0h: 72 00 69 00 67 00 69 00 6E 00 61 00 6C 00 46 00 ; r.i.g.i.n.a.l.F.
0035ebd0h: 69 00 6C 00 65 00 6E 00 61 00 6D 00 65 00 00 00 ; i.l.e.n.a.m.e...
0035ebe0h: 45 00 78 00 70 00 65 00 72 00 69 00 61 00 6E 00 ; E.x.p.e.r.i.a.n.
0035ebf0h: 2E 00 44 00 61 00 74 00 61 00 51 00 75 00 61 00 ; ..D.a.t.a.Q.u.a.
0035ec00h: 6C 00 69 00 74 00 79 00 2E 00 53 00 77 00 61 00 ; l.i.t.y...S.w.a.
0035ec10h: 73 00 68 00 62 00 75 00 63 00 6B 00 6C 00 65 00 ; s.h.b.u.c.k.l.e.
0035ec20h: 2E 00 64 00 6C 00 6C 00 00 00 00 00 62 00 21 00 ; ..d.l.l.....b.!.
0035ec30h: 01 00 50 00 72 00 6F 00 64 00 75 00 63 00 74 00 ; ..P.r.o.d.u.c.t.
0035ec40h: 4E 00 61 00 6D 00 65 00 00 00 00 00 45 00 78 00 ; N.a.m.e.....E.x.
0035ec50h: 70 00 65 00 72 00 69 00 61 00 6E 00 2E 00 44 00 ; p.e.r.i.a.n...D.
0035ec60h: 61 00 74 00 61 00 51 00 75 00 61 00 6C 00 69 00 ; a.t.a.Q.u.a.l.i.
0035ec70h: 74 00 79 00 2E 00 53 00 77 00 61 00 73 00 68 00 ; t.y...S.w.a.s.h.
0035ec80h: 62 00 75 00 63 00 6B 00 6C 00 65 00 00 00 00 00 ; b.u.c.k.l.e.....
0035ec90h: 36 00 09 00 01 00 50 00 72 00 6F 00 64 00 75 00 ; 6.....P.r.o.d.u.
0035eca0h: 63 00 74 00 56 00 65 00 72 00 73 00 69 00 6F 00 ; c.t.V.e.r.s.i.o.
0035ecb0h: 6E 00 00 00 31 00 2E 00 30 00 2E 00 33 00 30 00 ; n...1...0...3.0.
0035ecc0h: 2E 00 30 00 00 00 00 00 38 00 08 00 01 00 41 00 ; ..0.....8.....A.
0035ecd0h: 73 00 73 00 65 00 6D 00 62 00 6C 00 79 00 20 00 ; s.s.e.m.b.l.y. .
0035ece0h: 56 00 65 00 72 00 73 00 69 00 6F 00 6E 00 00 00 ; V.e.r.s.i.o.n...
0035ecf0h: 31 00 2E 00 30 00 2E 00 30 00 2E 00 30 00 00 00 ; 1...0...0...0...
```
"
5749,Neutral,"If signatures in an interface include inaccessible types, it is only legal for a public type to explicitly implement that interface.

I still get a lightbulb suggestion/refactoring to try the (bogus) implicit implementation:

![image](https://cloud.githubusercontent.com/assets/5943573/8915092/c63619b8-3457-11e5-91e9-c5c0c1ef7718.png)

It would be nice if only ""Implement interface explicitly"" was offered in this scenario.
"
5750,Neutral,"We were still discussing whether this should default to ""global scope"" or ""use scope"". As a result it was not implemented to report either and now crashes with ""Unreachable""

We should report something. It seems we are leaning towards ""global scope"".
We can change that later, but we should report something. 
"
5751,Neutral,"## Proposition

An easy way to implement default constructor that only bind the parameter of class properties
## Situation

When you have a class/struct and want to enforce the initialization through constructor we have to do something like this:

``` csharp
public class Access
{
    public string Name { get; set; }
    public bool IsActive { get; set; }


    public Access( // It's obvious that it's the constructos for Access class, is's inside it!
        string name, // Have to duplicate the name and type of the property
        bool isActive) // Again the name and type of the property
    {
        this.Name = name; // Obvious associations
        this.IsActive = isActive; // Obvious associations
    }
}
```

Why not write something like:

``` csharp
public class Access
{
    public string Name { get; set; }
    public bool IsActive { get; set; }

    public(Name, IsActive = true)
}
```

We could even use DataContracts and remove the necessity to validate the parameters, it would be very helpful for creating small helper classes.

``` csharp
public class Access
{
    public string Name { get; set; }
    public bool IsActive { get; set; }

    public([NotNull]Name, IsActive = true)
}
```
"
5752,Neutral,"We should implement a proper way to display help for csharp/vb script directives without interfere with other user of `interactiveWindow` class.

src\interactivewindow\editor\commands\interactivewindowcommands.cs
"
5753,Positive,"@antiufo this looks very very nice (disclaimer, I haven't actually tried it).

But I fear it will reach a very limited audience being maintained as a separate tool. Do you have any plans to propose/integrate all or parts of this into the ""mainstream"" compiler here?

Anything you learned from it that would suggests it cannot/should not be done in the general case?
"
5754,Positive,"Thanks for reporting.  We will take a look at this. 
"
5755,Neutral,"ping @mattwar is this something you think we should do?
"
5756,Neutral,"This is a regression in 15.3, right?  Let's fix"
5757,Negative,"Sorry to dredge this up again.

Is there not (also?) an issue with the dynamic runtime here?

Having decided that as the reuslt of `Api1()` is implicitly convertible to `false` there is no need to evaluate `Api2()` in order to evaluate the first `&&`, should the result not be `false` rather than a `Waffle` instance?

In the static binder, the first `&&` is known to be a `bool&&` and so the result is a `bool`. Having decided that the first `&&` is a `bool&&`, should the dynamic runtime not pass a `bool` result onwards?
"
5758,Positive,"@alrz Nice thought, but in order to use an extension on an object I would need to expose that object, which I do not wish to do in this case.  All interactions with the `Runspace` instance need to be mediated by my wrapper class(es).  In order to attain proper isolation using extension properties I would have to create, instantiate and expose yet another wrapper object... at which point I am back where I started with an Indexer class with all of the same issues.

I suppoort #6136 in principle - I think it'd be a nice feature to have - but don't see a simple implementation path.  Indexed properties (named indexers) already have been implemented in VB so there are no obvious impediments to C# implementation.  This is a comparatively simple feature to add.
"
5759,Neutral,"@rainersigwald 

Right now we are catching most of the exceptions that come from our ToolTask, printing them (to your log), and then returning a failure error-code.  (you can see our current implementation (here)[http://source.roslyn.io/#Microsoft.Build.Tasks.CodeAnalysis/ManagedCompiler.cs,473])

Should we be doing error handling at this level, or should we allow our exceptions to percolate up to MSBuild for it to be handled there?"
5760,Neutral,"Tracking a potential issue in NuGet here - https://github.com/NuGet/Home/issues/1125, and working directly with the package owner on dropping init.ps1
"
5761,Neutral,"To add to that, the reason I closed this issue is that, besides the lack of community interest, my informed opinion is that this would never rise to the level needed for us to devote any effort to making it happen, and even if someone on the language design team tried to push it, there would be pushback.

However, you're welcome to open an issue on csharplang and continue discussion of the proposal. If there were enough community support it is possible (though unlikely in my opinion) that we would devote resources to this instead of the scores of (in my opinion) more valuable proposals under consideration.
"
5762,Neutral,"We have an option to ""Diagnose"" xml doc comments but not emit them, but that also triggers all the other warnings and errors, and so I don't think VS integration sets it.

We might need some finer grained control over the compiler's handling of xml doc comments.  I remember discussing this with @amcasey a LONG time ago, but I don't think we resolved anything.
"
5763,Neutral,"If there is an extensibility point in the compiler that would allow special project types to add/remove simplification fixes, then this should be filed at aspnet/Razor.

If there is not, I guess it won't be easy to make this for Razor only. Then the issue would either be ""add such extensibility point"", or add simplification fix for `string.ToString()` but that wouldn't have the effect you are looking for.

Finally, I am not sure how Razor works, but if it is boxing `Something` then including/excluding `.ToString()` would make a difference if `Something` had a `ToString()` method that hides the `object.ToString()` one  - which I agree is not a common scenario, but the greying out would kind of rely on an implementation detail.

Is your concern readability or performance? I would expect that `string.ToString()` gets optimized out.
"
5764,Neutral,">  but wouldn't it give you a hard time to rewrite the mentioned field names with the compiler generated synthesized field names

I think you're misunderstanding how the compiler works.  The compiler will just ""bind"" the references in the getter/setter to this field symbol.  The field symbol will be emitted with a special name.  But the emitting for the field references shoudl happen naturally and transparently.
"
5765,Neutral,"Yes there might be something else going on, as the project that I'm trying to open is part of a fairly complex solution (not open source unfortunately). The problem is certainly references like the one above, because if I comment out ""<ReferenceOutputAssembly>false</ReferenceOutputAssembly>"", the project opens. However, I tried to find a minimal repro with a toy project, and failed so far. Are there any know issues in Roslyn 1.0 that result in the exception above, and that can be avoided by not using  ""<ReferenceOutputAssembly>false</ReferenceOutputAssembly>""?
"
5766,Neutral,"@DustinCampbell, you already fixed this.  Can you add a link to the original issue.
"
5767,Negative,"""game development... has a habit of gladly abandoning the usual ways of safe code design for that 0.1% of the bottleneck code in favor of maximum efficiency. Unfortunately, there are cases where C# gets in the way of that last bit of optimization.""  

C# gets in the way [because that's what it was designed to do](https://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29#Design_goals).  

If you want to write code that disregards correctness in favour of performance, you should be writing that code in a language that doesn't enforce correctness (C/C++), not trying to make a correctness-enforcing language less so. Especially since scenarios where performance is preferable to correctness, is an extremely tiny minority of C# use cases.
"
5768,Negative,"@CyrusNajmabadi,

You really aren't listening. No one is saying that a decision on a new discussion medium need be made straight away, or that ""something happens immediately "". Quite the opposite: that decision needs to be reached, in due course, after discussion with the community.

The only thing that needs to happen very soon, is for the team to acknowledge that the mailing list wasn't the right solution and that alternative options will be proposed to the community. Sure we likely will have to wait for those proposals until after VS2017 goes live. That's not a problem. The only problem is you appearing to refuse to acknowledge our rejection of the mailing list as the discussion forum. "
5769,Neutral,"Well, we seem too have different expectation as to what LangaugeLevel should do.

You say you have enabled optimizations in the past, but there is an underlying change in language semantics that is much harder to identify as a root cause than a `MissingMethodException`. And, it's not (just) an optimization.

I disabled optimizations in my bug hunting, and the failures remained. Portraying it as an optimization isn't quite exact - it's clearly a change in semantics. Quite close to a language feature, IMO. I admit that the semantics were not the failure mode for me, but treating them based on the `LanguageLevel` certainly would have helped, and is likely to help others bitten by that issue.

I like the change, in fact when I found out about it I wondered why it was not in C# 2.0, but given its slightly lopsided introduction please consider a more cautious `if`.
"
5770,Negative,"What a silly screenshot! :smile: We cover the modal dialog with an assert dialog that says there's a modal dialog.
"
5771,Neutral,"@Shiney I understand that the variable `j` will be in scope after `if`, but it won't be definitely assigned.
"
5772,Neutral,"Tagging @heejaechang  and @srivatsn 
"
5773,Positive,"You're free to start working on it. Thanks!
"
5774,Neutral,"@vsadov, @jcouv FYI.
"
5775,Neutral,"> Ah, I didn't notice there was a qualified member access. Let me double check, but likely this is no repro. I will close it out.

The first scenario is not a qualified member access. Make sure to check that one too."
5776,Neutral,"@agocke This is probably residue from the ""throw expression"" implementation, which is your feature.
"
5777,Neutral,"@mkosieradzki, @tmat it looks like **CreateSubmission** is public again on the last 1.1 pre-release. I'm trying to do exactly the same thing, parsing a top-level expression into a LINQ expression tree (btw, it looks like this is a very recurrent scenario, would be great if it was trivial to solve in Roslyn).

Anyway, **GetSemanticModel** is throwing an **ArgumentException** for me in the following example:

``` csharp
var script = @""1+1"";
var tree = CSharpSyntaxTree.ParseText(script, new CSharpParseOptions(kind:SourceCodeKind.Interactive));
var root = (ExpressionSyntax)tree.GetRoot().DescendantNodes().OfType<ExpressionSyntax>().First();
var compilation = CSharpCompilation.CreateSubmission(""ScriptTest"");
var semantics = compilation.GetSemanticModel(tree, ignoreAccessibility:false);
var type = semantics.GetTypeInfo(root);
```

I've tried adding the syntax tree before calling **GetSemanticModel** or changing the _ignoreAccessibility_ argument and it's still throwing with a cryptic message **_""Additional information: tree""**_.

Is the semantic computation of interactive expressions still not supported in the current pre-release?
"
5778,Neutral,"@tmat  what is the user scenario where this would be useful?
"
5779,Neutral,"I came to post a similar issue. If you would like another repo example see https://github.com/leftler/RoslynIssue

 I did not realize I could just check `project.MetadataReferences` in my repo I did 

```
    [TestMethod]
    public async Task TestFailingDummyProgramWithDefaultSettings()
    {
        var ws = Microsoft.CodeAnalysis.MSBuild.MSBuildWorkspace.Create();
        var solution = await ws.OpenSolutionAsync(@""..\FailingProgram\DummyProgram.sln"");
        Assert.AreEqual(1, solution.Projects.Count());

        foreach (var project in solution.Projects)
        {
            var comp = await project.GetCompilationAsync();
            Assert.IsTrue(comp.References.Any(x=>x.Display.EndsWith(@""\mscorlib.dll"")), ""Reference to mscorlib.dll not found found"");
        }
    }
```
"
5780,Neutral,Needed for V1 ? 
5781,Neutral,"@AdamSpeight2008 I don't think we can provide legal advice here.
"
5782,Neutral,"We are now taking language feature discussion in other repositories:
- https://github.com/dotnet/csharplang for C# specific issues
- https://github.com/dotnet/vblang for VB-specific features
- https://github.com/dotnet/csharplang for features that affect both languages

Features that are under active design or development, or which are ""championed"" by someone on the language design team, have already been moved either as issues or as checked-in design documents. For example, the proposal in this repo ""Proposal: Partial interface implementation a.k.a. Traits"" (issue 16139 and a few other issues that request the same thing) are now tracked by the language team at issue 52 in https://github.com/dotnet/csharplang/issues, and there is a draft spec at https://github.com/dotnet/csharplang/blob/master/proposals/default-interface-methods.md and further discussion at issue 288 in https://github.com/dotnet/csharplang/issues. Prototyping of the compiler portion of language features is still tracked here; see, for example, https://github.com/dotnet/roslyn/tree/features/DefaultInterfaceImplementation and issue 17952.

In order to facilitate that transition, we have started closing language design discussions from [the roslyn repo](https://github.com/dotnet/roslyn) with a note briefly explaining why. When we are aware of an existing discussion for the feature already in the new repo, we are adding a link to that. But we're not adding new issues to the new repos for existing discussions in this repo that the language design team does not currently envision taking on. Our intent is to eventually close the language design issues in the Roslyn repo and encourage discussion in one of the new repos instead.

Our intent is not to shut down discussion on language design - you can still continue discussion on the closed issues if you want - but rather we would like to encourage people to move discussion to where we are more likely to be paying attention (the new repo), or to abandon discussions that are no longer of interest to you.

If you happen to notice that one of the closed issues has a relevant issue in the new repo, and we have not added a link to the new issue, we would appreciate you providing a link from the old to the new discussion. That way people who are still interested in the discussion can start paying attention to the new issue.

Also, we'd welcome any ideas you might have on how we could better manage the transition. Comments and discussion about closing and/or moving issues should be directed to https://github.com/dotnet/roslyn/issues/18002. Comments and discussion about this issue can take place here or on an issue in the relevant repo.

I am not moving this particular issue because I don't have confidence that the LDM would likely consider doing this.
"
5783,Neutral,"`DeclarationTreeBuilder.VisitCompilationUnit` always passes `ImmutableArray(Of ReferenceDirective).Empty` to `RootSingleNamespaceDeclaration`.
"
5784,Negative,"Sorry that I am replying to one already checked in. but can we make ID property to return object rather than string? Also, is filename good enough ID for such generic class (AnalyzerFileReference)? Anything that has same filename will now get de-duped.
-          heejae

From: Tom Meschter [mailto:notifications@github.com]
Sent: Tuesday, May 5, 2015 11:32 AM
To: dotnet/roslyn
Cc: HeeJae Chang
Subject: Re: [roslyn] HostAnalyzerManager.GetAnalyzerReferenceId should generate a unique ID (#1710)

Closed #1710https://github.com/dotnet/roslyn/issues/1710 via 66a58f2https://github.com/dotnet/roslyn/commit/66a58f2fab031a5c5472d72b6d48c9cb2338db02.

—
Reply to this email directly or view it on GitHubhttps://github.com/dotnet/roslyn/issues/1710#event-297502335.
"
5785,Negative,"@jskeet I was talking about your example in the original post all this time, while you meant something like `public const CancellationToken Never = default(CancellationToken);`. Phew.
"
5786,Negative,"@alrz,

Whilst `***` _might_ have been OK for sequence patterns, it really doesn't work with underscores as many fonts join them together, making `__` and `___` far too hard to tell apart.
"
5787,Neutral,"Also, I think this would imply that a conditional expression when one of the alternatives is `dynamic` shouldn't compile, because:
- there is an implicit conversion ([implicit dynamic conversion](https://github.com/ljw1004/csharpspec/blob/gh-pages/conversions.md#implicit-dynamic-conversions)) from `dynamic` to any type
- there is an implicit conversion (either [implicit reference conversions](https://github.com/ljw1004/csharpspec/blob/gh-pages/conversions.md#implicit-reference-conversions) or [boxing conversion](https://github.com/ljw1004/csharpspec/blob/gh-pages/conversions.md#boxing-conversions)) from almost any type to `dynamic`
"
5788,Negative,"What about a common sense and reasonably [easy to implement feature](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/6524086-concurrentdictionary-and-dictionary-please-add-me) to retrieve a key from a Dictionary, HashSet, SortedDictionary, or any other container class that uses keys?

Right now, only values can be retrieved from a Dictionary - not the key.  Unless iterating through the dictionary with a foreach loop - which would be prohibitively expensive when doing a simple look up.  It would be nice if a method could be provided that would return the key/value pair for a given key from a matching ""key"".  The reason why it would be useful is because the Equals method does not necessarily mean that 2 objects are exactly equal - since the Equals method can and often does only use a subset of the fields of a class to make that determination.  I have come across cases where it would have been quite helpful to access the stored key in the dictionary when my code found the item in the dictionary.  There were other fields in the stored key that I needed to access that were not present in the key used to access the dictionary, so I had to use the suggested work around given in the link above.
"
5789,Neutral,"A visitor does is not supposed to _recurse_ down to visit children. It only dispatches for the single syntax node you call `Visit` on. So the behavior is by design.
"
5790,Neutral,"that's exactly what #6400 is about.
"
5791,Neutral,"I'm not concerned with C# overload resolution here.  That's not a problem API Compat should be concerned with.  I'm concerned with API compat's ability to correctly understand how we currently version methods with named / optional parameters.  
"
5792,Neutral,"@jaredpar:

```
14:12:58 D:\j\workspace\microbuild_pr---d013602c\src\Tools\MicroBuild\..\..\..\Binaries\Release\SignRoslyn\SignRoslyn.exe -test -binariesPath ""D:\j\workspace\microbuild_pr---d013602c\src\Tools\MicroBuild\..\..\..\Binaries\Release""
14:12:58   
14:12:58   Unhandled Exception: System.ArgumentException: An item with the same key has already been added.
14:12:58      at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
14:12:58      at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
14:12:58      at SignRoslyn.Program.ReadSignData(String rootBinaryPath) in D:\j\workspace\microbuild_pr---d013602c\src\Tools\SignRoslyn\Program.cs:line 45
14:12:58      at SignRoslyn.Program.Main(String[] args) in D:\j\workspace\microbuild_pr---d013602c\src\Tools\SignRoslyn\Program.cs:line 24
14:12:58 D:\j\workspace\microbuild_pr---d013602c\src\Tools\MicroBuild\Build.proj(30,5): error MSB3073: The command ""D:\j\workspace\microbuild_pr---d013602c\src\Tools\MicroBuild\..\..\..\Binaries\Release\SignRoslyn\SignRoslyn.exe -test -binariesPath ""D:\j\workspace\microbuild_pr---d013602c\src\Tools\MicroBuild\..\..\..\Binaries\Release"""" exited with code -532462766.
```
"
5793,Positive,"VS Connect 2015 - Short C# Pattern Matching demo

https://channel9.msdn.com/Events/Visual-Studio/Connect-event-2015/010

Good stuff starts at 0:28:42 and ends at 0:33:06.
"
5794,Neutral,"Doesn't look like it, just tested. We still have a non-null Instance here. The reason appears to be that we actually do have a `BoundThisReference` as the `InstanceOpt` of the method group we create the `IMethodReference` from."
5795,Neutral,"@MadsTorgersen and I came up with a way to prevent this from being a breaking change. I’ll revise the proposal shortly.
"
5796,Positive,Cool. I guess we have accidentally broke this and then accidentally fixed it too :-o. @ivanbasov do we have the right unit tests in place?
5797,Negative,"@gafter Have you guys considered it for C# and the patent is really a roadblock? I'm certain other languages besides Java have OO enums. Pretty ironic if a patent with your name on it now prevents you from doing something similar in your current role.
"
5798,Positive,"Oh yes, that's right. We actually need

``` C#
public interface IRefEnumerable<T>
{
    IRefEnumerator<T> GetEnumerator()
}

public interface IRefEnumerator<T>
{
    ref T Current { get; }
    bool MoveNext { get; }
}
```
"
5799,Neutral,Cache invalidation problem?
5800,Negative,"@diab0l That would make me blush every time I type it!
"
5801,Neutral,"@Hosch250 IOperation is currently only a prototype.  We're working on actually producing a full, real supported API for it.  We'll keep your use case in mind as we go through our list of work items.  Tagging @jinujoseph for visibility.

Note that I think is simply 'by design'.  your ""bool _foo;"" is simply a field.  A field initializer would be something like ""bool _foo = **code**;""   IOperation attempts to give you a rich semantic tree to represent the code that actually executes, not really the symbols that may be initialized from the code that executes.  
"
5802,Neutral,"I am using the interop libraries, don't know how they were generated but your example is something I will look into.

My question was more generic. In a typical case I want to check x for Nothing and if not Nothing check a x.method for valid value. It appears the ""else"" part is where my return goes (or I need to use Not).

Unless I am misunderstanding how this works I guess invertIf will be a very popular refactoring. 

If x?.age>0 then
Else
Return 0
End if

Sent from my iPhone
I apologize for any typos Siri might have made.
(503) 803-6077

> On Aug 6, 2015, at 6:05 AM, codespare notifications@github.com wrote:
> 
> The simplest approach depends on what you can modify. Above, I assume you are using the API as documented https://developer.intuit.com/docs/0100_accounting with XML messages over HTTP, in which case xsd.exe generates the following (shortened) type from https://developer.intuit.com/docs/@api/deki/files/54/bankingaccount_1.xsd:
> 
> Option Strict Off
> Option Explicit On
> 
> Imports System.Xml.Serialization
> 
> '
> 'This source code was auto-generated by xsd, Version=4.6.81.0.
> '
> 
> '''<remarks/>
> <System.CodeDom.Compiler.GeneratedCodeAttribute(""xsd"", ""4.6.81.0""),  _
>  System.SerializableAttribute(),  _
>  System.Diagnostics.DebuggerStepThroughAttribute(),  _
>  System.ComponentModel.DesignerCategoryAttribute(""code""),  _
>  System.Xml.Serialization.XmlTypeAttribute(AnonymousType:=true, [Namespace]:=""http://schema.intuit.com/platform/fdatafeed/bankingaccount/v1""),  _
>  System.Xml.Serialization.XmlRootAttribute([Namespace]:=""http://schema.intuit.com/platform/fdatafeed/bankingaccount/v1"", IsNullable:=false)>  _
> Partial Public Class BankingAccount
>     Inherits Object
>     Implements System.ComponentModel.INotifyPropertyChanged
> 
> ```
> Private bankingAccountTypeField As System.Nullable(Of BankingAccountType)
> 
> Private bankingAccountTypeFieldSpecified As Boolean
> 
> Private postedDateField As System.Nullable(Of Date)
> 
> Private postedDateFieldSpecified As Boolean
> 
> Private availableBalanceAmountField As System.Nullable(Of Decimal)
> 
> Private availableBalanceAmountFieldSpecified As Boolean
> 
> Private interestTypeField As String
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlElementAttribute(IsNullable:=true)>  _
> Public Property bankingAccountType() As System.Nullable(Of BankingAccountType)
>     Get
>         Return Me.bankingAccountTypeField
>     End Get
>     Set
>         Me.bankingAccountTypeField = value
>         Me.RaisePropertyChanged(""bankingAccountType"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlIgnoreAttribute()>  _
> Public Property bankingAccountTypeSpecified() As Boolean
>     Get
>         Return Me.bankingAccountTypeFieldSpecified
>     End Get
>     Set
>         Me.bankingAccountTypeFieldSpecified = value
>         Me.RaisePropertyChanged(""bankingAccountTypeSpecified"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlElementAttribute(IsNullable:=true)>  _
> Public Property postedDate() As System.Nullable(Of Date)
>     Get
>         Return Me.postedDateField
>     End Get
>     Set
>         Me.postedDateField = value
>         Me.RaisePropertyChanged(""postedDate"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlIgnoreAttribute()>  _
> Public Property postedDateSpecified() As Boolean
>     Get
>         Return Me.postedDateFieldSpecified
>     End Get
>     Set
>         Me.postedDateFieldSpecified = value
>         Me.RaisePropertyChanged(""postedDateSpecified"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlElementAttribute(IsNullable:=true)>  _
> Public Property availableBalanceAmount() As System.Nullable(Of Decimal)
>     Get
>         Return Me.availableBalanceAmountField
>     End Get
>     Set
>         Me.availableBalanceAmountField = value
>         Me.RaisePropertyChanged(""availableBalanceAmount"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlIgnoreAttribute()>  _
> Public Property availableBalanceAmountSpecified() As Boolean
>     Get
>         Return Me.availableBalanceAmountFieldSpecified
>     End Get
>     Set
>         Me.availableBalanceAmountFieldSpecified = value
>         Me.RaisePropertyChanged(""availableBalanceAmountSpecified"")
>     End Set
> End Property
> 
> '''<remarks/>
> <System.Xml.Serialization.XmlElementAttribute(IsNullable:=true)>  _
> Public Property interestType() As String
>     Get
>         Return Me.interestTypeField
>     End Get
>     Set
>         Me.interestTypeField = value
>         Me.RaisePropertyChanged(""interestType"")
>     End Set
> End Property
> 
> Public Event PropertyChanged As System.ComponentModel.PropertyChangedEventHandler Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged
> 
> Protected Sub RaisePropertyChanged(ByVal propertyName As String)
>     Dim propertyChanged As System.ComponentModel.PropertyChangedEventHandler = Me.PropertyChangedEvent
>     If (Not (propertyChanged) Is Nothing) Then
>         propertyChanged(Me, New System.ComponentModel.PropertyChangedEventArgs(propertyName))
>     End If
> End Sub
> ```
> 
> End Class
> 
> '''<remarks/>
> <System.CodeDom.Compiler.GeneratedCodeAttribute(""xsd"", ""4.6.81.0""),  _
>  System.SerializableAttribute(),  _
>  System.Xml.Serialization.XmlTypeAttribute([Namespace]:=""http://schema.intuit.com/platform/fdatafeed/bankingaccount/v1"")>  _
> Public Enum BankingAccountType
> 
> ```
> '''<remarks/>
> CHECKING
> 
> '''<remarks/>
> SAVINGS
> 
> '''<remarks/>
> MONEYMRKT
> 
> '''<remarks/>
> RECURRINGDEPOSIT
> 
> '''<remarks/>
> CD
> 
> '''<remarks/>
> CASHMANAGEMENT
> 
> '''<remarks/>
> OVERDRAFT
> ```
> 
> End Enum
> which supports null coalescing:
> 
> ```
> Sub Foo(acc As BankingAccount)
>     Dim interestType = If(acc.interestType, ""none"")
> End Sub
> ```
> 
> The specifics you are after likely differ from that very example, but looking for a fix upstream in the chain to end up with a more usable API surface is quite generic. And in the case of a web service API and code generation, you can often achieve improvements without modifying the language and compiler. In your example, that would be in the definition of 'x' type and its properties.
> 
> —
> Reply to this email directly or view it on GitHub.
"
5803,Negative,"This proposal seems even worse than the one for hiding variables inside properties. If you really need `/* my very complicated getter logic */` or `/* my even more complicated setter logic */`, then use methods. Properties are intended to be a way of encapsulating a field; not a place to put complex logic.
"
5804,Neutral,"If your expectation is to get an operator like `bool.operator |(bool, bool)`, when `||` appears in the source, then that is reasonable and this could be considered a bug. If you expect `bool.operator ||(bool, bool)` then that isn't reasonable."
5805,Neutral,"Has there been any movement on this in the nightlies? Not the suggestion to change the language (though that would be awesome too), just interested in getting extension method support in scripts for now... Has it been discussed how this will implemented within the team yet?

I'm not particularly fond of introducing magic directives that are specific to the scripting compiler. Lifting any class that contains extensions seems like a more general approach to me.

Another thought I had was to create overloads and/or fluent extensions to the scripting APIs that allow passing in additional script code that goes outside the submission class. Then you could put whatever you needed in there, including static classes with extension methods. In cases like ScriptCS where you want the whole thing to be captured in a single text file or string, the Roslyn scripting consumers would be responsible for implementing the functionality however it's appropriate for them (with the `#extensions` directive, using a delimiter between global and nested code, etc.).

```
string globalCode = @""
    public static class MyExtensions
    {
        //...
    }
"";

string scriptCode = @""
    //...
"";

ScriptOptions options = new ScriptOptions()
    .WithReferences(assemblies)
    .WithNamespaces(namespaces)
    .WithGlobalCode(globalCode);
CSharpScript.Eval(scriptCode, options);
```
"
5806,Positive,"Having read through the various options, I have to say it's hard not to support Github as the place for this. 

The proximity to the source itself is the killer: being able to hit a discussion, potentially contribute *and* then see it linked to a checkin is enough to nullify the deficiencies in Github itself as a place for discussion.

So the proposal as made gets my vote."
5807,Neutral,"Please verify.
"
5808,Positive,"I see now. thanks!

FWIW, I _didn't_ fix this recently because the test that's running (`TestAddAndRemoveViaTextChangeManyTimes`) is the one I added when fixing #8423. Have we seen this fail consistently?
"
5809,Neutral,"The equivalent C# code just no-ops, so I'll copy that approach.
"
5810,Neutral,"Riddle me this. I'm creating an object and then initialize the member `P` or I'm creating an object and assigning a value to a variable in a block?

```
var foo = new Foo ()
{
   P = 5
}
```
"
5811,Positive,"@JeffreySax 

> Resolving it in favor of the imported method does not break code, but seems illogical to me. I would assume the type member would take precedence over an external member or extension method.

Seems reasonable to me simply because I don't think that option 3 is even an option and I don't find option 4 _attractive_ that is I wouldn't want to have an attribute or anything like that. :)

However, it really depends how common this case is if it isn't common at all then it _might_ be okay to introduce a breaking change and issue an error.
"
5812,Neutral,"> This also happens for instance fields, but not for local variables.

Instance variables are another case where removing the self assign is observable.  Although a bit obscure it is possible for `this` to be `null`.  Hence removing a self assign instance variables is potentially removing a NRE from the code.  
"
5813,Neutral,"@vbcodec can you tell me how to get the immediate window to display while NOT debugging? It is not in the View Menu. I have tried in VS Windows Forms and Class Library projects.
"
5814,Neutral,"It would be good to avoid copies as much as possible. We wouldn't need this API if we didn't care about making a copy -- we could just read it from the file on disk and close the file.

We use the metadata only when we are calculating the IL/metadata delta. I assume the module won't be unloaded during that time (the debugger is in break state). Instead of the debugger notifying us about metadata that were unloaded it would be simpler if we called the method each time we need the metadata. On our side we could then cache symbols built from the metadata based on whether we get the same answer (pointer, size) as we did last time. If we don't we throw the symbols away and rebuild them from the new metadata. 
"
5815,Neutral,"@HaloFour 

My proposal would be to let `switch` be as it is, and remain with whatever meaning it has in C# as of now. However additionally we could introduce a more powerful, say, `match`, which doesn't have fallthrough behaviour, and works with pattern matching. Like this:

```
match (contactInfo)
{
    case Telephone(var t): Console.WriteLine($""We have a telephone number: {t}"");
    // no implicit fallthrough
    case Email(var e): => Console.WriteLine($""We have an email address: {e}"");
}
```

instead of

```
switch (contactInfo)
{
    case Telephone(var t): Console.WriteLine($""We have a telephone number: {t}"");
    break;
    case Email(var e): => Console.WriteLine($""We have an email address: {e}"");
    break;
}
```
"
5816,Neutral,"I'll double check if I really need them.
"
5817,Neutral,"@HaloFour 

It wouldn't be true for `foreach`.  Because `Arguments<T>` is a concrete type the `foreach` loop can take advantage of the `struct` enumerator on the type.  This avoids the heap allocation.

If you used `LINQ` methods then yes that would cause the allocation.  But that is true for every collection type though due to the architecture of the enumerator pattern. 
"
5818,Neutral,"@jmarolf - do you have a repro for this? There is nothing in the dump that points to the exception thrown by InlineTemp. The only exception i see is the ImmutableArray thing which @shyamnamboodiripad  fixed.  none of the stackframes have anything interesting or to do with inline temp.  without a repro, i'm afraid this isn't actionable. 
"
5819,Neutral,"I would propose we'd use the same comparison operator VB uses for names.  Which you can see here:
https://github.com/dotnet/roslyn/blob/master/src/Compilers/Core/Portable/CaseInsensitiveComparison.cs

I personally like this proposal _though not in isolation_.  Specifically, i think this is a sensible proposal that will get pattern matching working for a huge swath of existing code out there.  On top of this i'd like some system to be made available for the types that this pattern doesn't work on.  If we have both, then i think that's going to make pattern matching very viable with very low friction.
"
5820,Neutral,"@MgSam I don't know what others think and I don't think that it's so much about typing but with the new _proposed_ syntax when you write something like `foo.1` you know that it's a tuple just by looking at it, much like you can reason about indexers today e.g. `foo[0]` I think that it certainly make things easier.

With `foo.Item1` we can only _assume_ that it is but it's not as obvious as it can be.

This might be a minor point, I don't know.
"
5821,Neutral,"@VSadov that is correct for simple FXCop rules. However, for FXCop/SDL dataflow rules based on Phoenix analysis engine, we end up skipping analysis completely for all methods, except one. This leads to incorrect call graph and hence incorrect analysis. I am working on trying to fix the Phoenix pereader to handle this case of multiple methods sharing same start RVA, so that such symbols can share identical function units for analysis and we generate a correct callgraph.

Yes, the SDL dataflow rule tests that regressed with new compiler can be fixed /changed, they are specifically validating that the errors are fired for each identical method, but the new behavior also seems reasonable as we will fire on at least one method. They are more concerned about broken dataflow/callgraph.

Feel free to resolve this as by design, I was just curious whether we un-intentionally enabled this analysis for debug builds.
"
5822,Neutral,"@breyed So have you verified that the machine code is different on 4.6 between the two assemblies?
"
5823,Neutral,"My guess is that PCL is asking - ""What is your output path for a target framework of `.NETPortable,Version=v5.0` and xproj doesn't know.  We need to think about how we flow the netstandard version from project.json into this.

I think same issue is affecting adding a reference the other way.
"
5824,Neutral,"@gafter I don't think we should make Reflection produce different results than metadata reader. 
"
5825,Neutral,"I updated the `PerformInsertion.ps1` in place.
"
5826,Neutral,"The change from an error to a warning was intentional -- it was in fact a feature request from DNX. The runtime error is only reported on Desktop CLR not on CoreCLR. 
"
5827,Positive,"The following seems to be able to fix it:

```
try
{
  int exponentMagnitude = int.Parse(source.Substring(firstExponent, lastExponent - firstExponent));
  if (exponentSign == '-')
  {
    exponent -= exponentMagnitude;
  }
  else
  {
    exponent += exponentMagnitude;
  }
}
catch (OverflowException)
{
  exponent = exponentSign == '-' ? int.MinValue : int.MaxValue;
}
```

Not to keen on exceptional code though. 

Update: Why not, let's make a PR :D
"
5828,Neutral,"@tmat good to close now?
"
5829,Neutral,"hey @Unknown6656 ""Structure guides"" are these new lines that we draw in the IDE:

![image](https://cloud.githubusercontent.com/assets/4564579/21289273/8017a0fa-c44d-11e6-8a78-116500ce8649.png)

Internally we have a common infrastructure for outlining-regions as well as these new guides.  "
5830,Negative,"I doubt that @MadsTorgersen interpretation is correct. It would lead to some counterintuitive results. See, for example, https://github.com/dotnet/csharplang/issues/271. Moving to the csharplang repo."
5831,Neutral,"Some similar proposals: #3415, #3251, #524.
"
5832,Neutral,"@Thaina 

An expression form of `switch` is common in functional languages for pattern matching.  You're right that the syntax is largely unnecessary as the same functionality can be accomplished through nested `if`/`else` or ternary operators.  Although a single `switch` can optimize better by reusing patterns.

Functional languages also often have list/query comprehension, but C# already has that and it's called LINQ.  I see no reason to duplicate it yet again.  I disagree that you're syntax is sufficiently ""better"" than all of the current existing forms.

Here's the issue that discussed making existing keywords behave as expressions:  #3640
"
5833,Neutral,"@dsaf 

First thing that comes to mind looking at that keyboard is that Facebook could probably make a fortune selling keyboards with a dedicated ""Like"" button.

I do agree that care must be made when considering special characters as they might be very difficult to use with non-US keyboard layouts.  Now if you excuse me I need to order a Thunderbolt 3 Esc-key dongle.
"
5834,Negative,"Sorry, you'll need to create the directories(aka `keys`)  that don't exist in the path.
"
5835,Positive,"> @jcouv I have a crash dump file and I'm investigating it.

Much appreciated Julien!  Tuples are new so there are likely to be a few rough edges (see also issue [#21812](https://github.com/dotnet/roslyn/issues/21812) which has two other crash scenarios involving tuples)...hopefully many will be resolved by 15.4!
"
5836,Neutral,"None of the SyntaxFactory API's insert whitespace trivia. It's expected that syntax created via the factory is formatted before presentation. You can use the Formatter class in the workspace layer or the  SyntaxNode.NormalizeWhitespace API to adjust the whitespace.
"
5837,Negative,@alrz I understand but it still feels a bit odd that we need to use commas (_or underscores_) at one place and (_only_) underscores at another.
5838,Neutral,"@alrz 

> What is the recommended naming convention for tuple item names, specially in case of a partially named one?  If `(2, x: 3)` is going to be used like `t.Item1` and `t.x` it wouldn't be consistent. 

We don't have recommendations at this time.

> Are named tuples allowed in an is expression? Issues arise when recursive patterns are introduced in the language (#11744).

You mean on the left-hand-side? #11744 is about tuple patterns.
"
5839,Neutral,"Yup.
"
5840,Neutral,"I see #3798 (Options can be populated from .editorconfig files), but will there be support for going the other way - exporting our current style preferences into an .editorconfig file?
"
5841,Neutral,"I don't think the behaviour here should change. If there were any subclasses of `Program`, they'd be accessible after completion.
"
5842,Neutral,"@davkean  with the above fix, it looks like diagnostics left out won't happen anymore.

...

I sometime see fix all stuck and mess up everything including diagnostic engines. looking into that issue now."
5843,Negative,"Disagree - they are per package, putting those facades under 4.6 doesn't even make sense to me.
"
5844,Negative,"Got caught by this again today, readonly GCHandles never show as deallocated when free is called for the same reason"
5845,Neutral,"Now that Find Refs is hierarchical, the search term (declarations) are the top-level nodes, making it somewhat easier to find. 

@kuhlenh @Pilchie Can we just fold this into https://github.com/dotnet/roslyn/issues/903?
"
5846,Positive,"This is https://bugzilla.xamarin.com/show_bug.cgi?id=30171 and it is fixed in 4.0.1.44

I have managed to compile C# compiler! it only does not work :)
"
5847,Neutral,"Cause vbcscompiler to be started by compiling a small program.

Then attach to that process using the debugger.

Then run the compiles that you wish to debug the behavior of.
"
5848,Neutral,"@josejmoran an actually doable solution to (half of) what you want is this: make your favourite editor or IDE expand ""hello @name"" into $""hello {name}"". 

Saved you the typing, doesn't break old code. 

As in: it would be a lot (a LOT) easier getting this accepted as one of the syntax helpers offered by VS or Resharper vNext than getting it into C# vNext.
"
5849,Positive,"Unable to reproduce on our side. If anyone is able to get a stack trace (using devenv /log), or repro steps, or any hints as to how to make this happen, please let us know and we will reactivate this bug and investigate. Thanks!
"
5850,Neutral,"> Allowing `var` at type member level - complicates type checking and IDE tooling so much

[Eric Lippert wrote an article about this in 2009.](http://blogs.msdn.com/b/ericlippert/archive/2009/01/26/why-no-var-on-fields.aspx) He says that doing this would require ""deep re-architecture of the compiler"". Though one deep re-architecture of the compiler later, things may be different. (He mentions other issues too and also proposes a `new()` syntax to solve the issue.)

> Introducing constructor type arguments inference - using collection initializer expressions to infer `Dictionary` type seems to be overly complex solution (+ we still have to repeat `Dictionary` type usage):
> 
> ``` c#
> public static readonly Dictionary<int, string> StaticData = new Dictionary {
>   {123, ""abc""},
>   {456, ""def""}
> };
> ```

This sounds like duplicate of #2319 (and this specific syntax has the same ambiguity issues as that proposal).
"
5851,Neutral,"@AlexanderTaeschner It's listed in [What's New for Visual C#](https://msdn.microsoft.com/en-us/library/hh156499.aspx) (search for ""exception filters""), and [the linked article](https://msdn.microsoft.com/en-us/library/0yd65esw.aspx) contains few paragraphs about it. Although the example there is incredibly bad: it uses the wrong keyword (`if` instead of `when`) and also contains two other errors on the same line (`Catch` instead of `catch` and smart quotes instead of `""`).
"
5852,Neutral,"@jmarolf I have installed Windows 7/x64. Attached are two screenshots of my running processes
![taskmanager1](https://cloud.githubusercontent.com/assets/8020659/18305707/16b6a5ce-74e9-11e6-812e-2d041d5bfa1c.png)
![taskmanager2](https://cloud.githubusercontent.com/assets/8020659/18305706/16b63bc0-74e9-11e6-8f9b-64f8aa642362.png)
"
5853,Positive,"@AnthonyDGreen Great! Please work with @theoy to assign a milestone and it shall be done.
"
5854,Neutral,"Let's pull this back in if we get complaints.
"
5855,Neutral,"That prohibition is intentional in order to avoid the ambiguity in attempting to resolve an assignment between a conversion and a simple cast.  The conversion operators are intended to bridge between two types which are otherwise incompatible with one another.  The spec further explicitly prohibits redefining existing conversion operations, which would include downcasts.
"
5856,Positive,"Nah, don't spend time figuring out friendly messages for it not working - rather just bring it back and make it work ;)
"
5857,Positive,"I *really* like this.  I thought we woudl be going with an approach where alll you saw were the IInvocationExpressions in the tree.  I really like the intermediary IQueryExpression and IQueryClauses.  

Note: we have to define what is the right ting to do when someone says ""give me the IOperation for a node"".  Clearly for the Query and the Claues you should get the IQueryExpression and IQueryClause.  However, for something like ""select x > 2"", if you ask for the IOperation for ""x > 2"" we need to make sure you get the operation representing hte binary expression, and not some clause, or lambda (IMO).  "
5858,Neutral,"Now ""RoslynLight.sln"" builds without error/warning, but ""Roslyn.sln"" still does.
"
5859,Neutral,"New repro:
1. Use InstallDogfood to install Main-Signed-Release 20150325.1.
2. Open Roslyn.sln.
3. Close all open files.
4. Open PublicAPI.txt in Workspaces.Desktop.
5. Remove the first five lines (the ones referring to `CommandLineProject` and `FileTextLoader`).
6. Open CommandLineProject.cs.
7. Put the cursor on `CommandLineProject`, open the light bulb, and click the link to fix all occurrences in the project.

**Expected:**
Preview shows fixes for both `CommandLineProject` and `FileTextLoader`.

**Actual:**
Preview shows fixes for only `CommandLineProject`.
"
5860,Neutral,"My goal is to have the language grammar itself accessible via an api  
One approach is attributes on the parse functions. 

```
<grammar(""hh ::= ( ('0'|'1') '0'-'9' ) | ('2' '0'-'2')"">
<grammar(""mm ::= ('0'-'5')('0'-'9')>
<grammar(""ss ::= ('0'-'5')('0'-'9')>
<grammar(""time ::= hh ':' mm (':' ss)?>
<grammer(""literal-time ::= '#' time '#'"">
Function Parse_DateLiteral ....
```

Then have it statically verified it matches the grammar.  
"
5861,Positive,"I don't believe we handle this - I think it happens directly in the editor.
"
5862,Positive,"@bbarry && @svick : Thanks for the explanations. That helps.
"
5863,Negative,"@HaloFour That guideline even doesn't have any `async`-related section. But in more up to date resources (like the one that I have mentioned) this is considered as a _limitation_ and they just try to _workaround_ that _limitation_. Currently, you don't need to use any _pattern_ for asynchronous programming in C# thanks to language support. But when it comes to constructors, you should get back to the pattern-based programming. I think this mindset (like that you shouldn't do that there, etc) is for when you are working with a language with bare minimum feature set. It's almost 2016 man.
"
5864,Neutral,"@HaloFour it would accomplish situation, when you need methods from interfaces IA and IB, but there is no common divider for them. And underlying type can't implement an interface which is does not exist yet. And this is exactly what we are trying to do: allow compiler to generate this interface for us. You can specify `I take everything that implements IFoo and IBar` but you cannot pass a variable of type ` Foo and Bar`. It's not fair I think.

> That also doesn't take into account the possibility of base types being included in the intersection.

That's not true. I said `Always generate another interface`. So if there is already an `IFooBar` interface we just ignore it because it may add additional methods which is NOT what type intersection is."
5865,Positive,"Verified. Thank you for the fix
"
5866,Neutral,"I believe that AsyncMethodBuilderMemberCollection.ValidateBuilderType() shouldn't allow such arity mismatches.
Here is the current arity check from that method.
```cs
bool isArityOk = isGeneric
                 ? builderType.IsUnboundGenericType && builderType.ContainingType?.IsGenericType != true
                 : !builderType.IsGenericType;
```"
5867,Neutral,"@rawling No, that is not the way that `&&` works in the presence of user-defined operator overloading. See 7.12.2:

> 7.12.2 User-defined conditional logical operators
> When the operands of && or || are of types that declare an applicable user-defined operator & or operator |, both of the following must be true, where T is the type in which the selected operator is declared:
> • The return type and the type of each parameter of the selected operator must be T. In other words, the operator must compute the logical AND or the logical OR of two operands of type T, and must return a result of type T.
> • T must contain declarations of operator true and operator false.
> A binding-time error occurs if either of these requirements is not satisfied. Otherwise, the && or || operation is evaluated by combining the user-defined operator true or operator false with the selected user-defined operator:
> • The operation x && y is evaluated as T.false(x) ? x : T.&(x, y), where T.false(x) is an invocation of the operator false declared in T, and T.&(x, y) is an invocation of the selected operator &. In other words, x is first evaluated and operator false is invoked on the result to determine if x is definitely false. Then, if x is definitely false, the result of the operation is the value previously computed for x. Otherwise, y is evaluated, and the selected operator & is invoked on the value previously computed for x and the value computed for y to produce the result of the operation.
"
5868,Neutral,This will ensure we aren't doing late stage fixups of the nuspec: https://github.com/dotnet/roslyn/pull/21991
5869,Neutral,"@kingces95 that is because you have old bits laying around in

'C:\USERS\KINGC\APPDATA\LOCAL\MICROSOFT\VISUALSTUDIO\15.0_DA80E4B2ROSLYNDEV\EXTENSIONS\MICROSOFT\ROSLYN LANGUAGE SERVICES FOR VISUAL STUDIO 15\42.42.42.42424\*'

@jasonmalinowski 's change moved all stuff in there to 
'C:\USERS\KINGC\APPDATA\LOCAL\MICROSOFT\VISUALSTUDIO\15.0_DA80E4B2ROSLYNDEV\EXTENSIONS\MICROSOFT\ROSLYN LANGUAGE SERVICES\42.42.42.42424\*'

and VS now gets confused because bits exist in 2 places when there should be only one.

delete 15.0_DA80E4B2ROSLYNDEV folders from both %localappdata% and %appdata%\MS\VS folder

and re-launch devenv /rootsuffix RoslynDev

that should fix it."
5870,Negative,"> I know that keywords over symbols is a tenet of C# design. However, perhaps it is worth questioning that in this case.

No, I don't think it is.  Sure, if you're more familiar with Go then Go-syntax would be easier for you to digest.  But would you argue that Go should adopt C# syntax so that Go can be adopted easier by C# programmers?  No, you wouldn't.  C# shouldn't try to syntactically be every other language.

And I personally find the Go syntax pretty ugly.  A simple and obvious declaration has been replaced by a jumble of punctuation.  It also removes the one most important element from focus, namely that this is a variable *declaration*."
5871,Neutral,"A lot, not all, but a lot of this can be done with extension methods today. The issue is they do not work on method groups. If extension methods targeting delegates were made available on method groups then a library could implement this sort of piping. For example, Scala has an `andThen` method which works a lot like this.
"
5872,Neutral,"@jcouv yes, I'll move it."
5873,Neutral,"Eric Lippert outlined the problems with this proposal in an interesting-to-read (as usual) [blog post](http://ericlippert.com/2013/07/15/why-are-generic-constraints-not-inherited/).
"
5874,Neutral,@DavidArno There already is a `maybe/option` type. Just that it is within the `Roslyn` codebase and not `System`
5875,Neutral,"Let's remove it.  I've heard no feedback asking for anything different, or the re-addition of the option."
5876,Neutral,"It seems like we force observation of the text during the call to Workspace.OnDocumentOpened.
"
5877,Neutral,`LNode` is the .NET implementation of [Loyc trees](http://loyc.net/loyc-trees/). The API is [described here](http://loyc.net/loyc-trees/dotnet.html).
5878,Neutral,"I'd much prefer that existing BCL classes that 'only take a `T[]`' were extended to support `IList<T>` (or `IReadOnlyList<T>` as the case may be), then we don't need additional CLR magic. Under this model `{ReadOnly}Slice<T>` are just wrappers around `I{ReadOnly}List<T>` with constrained offset/length (much like `ArraySegment<T>`). `Copy()` etc can be supported too.

There's a sort-of tangential issue around being able to treat unmanaged memory as `T[]` which the proposal mentions. I'd like to be able to do this for (e.g.) passing `byte*` to `Stream`s (without first copying it into a `byte[]`), but this could probably be handled as (another!) `Stream` method.
"
5879,Negative,"@HaloFour I don't mean unity itself but the way that game engine work toward this day mostly about attach script
unity also have unityscript. which not derived from monobehaviour explicitly

I'd agree that someone already argued that point 17+ years ago. But as all the same things that was being argued 17+ years ago that C# don't need generic and return ref. So what now?

If you called my point on linq as opinion then yours on this feature too is your opinion. Everything is opinion from the start that what C# would look like at each version. So argument about 17+ years is invalid

At 17+ years ago there is no unity. At 17+ years ago C# was not an opensource on github. And most people using it today is newcomer, not only people in 17+ years ago
"
5880,Neutral,"Yes; exactly.
I couldn't tell when that line was added due to renames.
"
5881,Positive,"This is mostly due to RefactoringEssentials accessing internal types through reflection which were refactored inbetween RTM and Update 1.

E.g. see these commits which fixed Update 1 support:
https://github.com/icsharpcode/RefactoringEssentials/commit/2dd5434c753cd486d87121c8638c8505f0a4c05a
https://github.com/icsharpcode/RefactoringEssentials/commit/179bb4301d19d94411b8d1c2aa835becc12f31b9

Your exception might indicate further not yet fixed reflection hacks: https://github.com/icsharpcode/RefactoringEssentials/blob/cc1171ff9cb41c6764ab8563b3e630a6cec2b95b/RefactoringEssentials/Util/TypeExtensions.cs#L22-L29

The only bad thing the roslyn team might have done here is hiding useful APIs :smile:

EDIT: I've just tried to provoke the crash using the ReplaceWithSingleCallToFirstOrDefaultAnalyzer analyzer and also tried to reproduce the crash in the C# Interactive but the types and methods it's accessing do still exists and the TypeExtensions file wasn't touched since May which is really weird that it's crashing there. And when it's only happening with xunit... it sounds like it wasn't able to load the roslyn dlls for some reason.
"
5882,Negative,"@gafter 

That it would.  But if you changed the second `y` to a `z` then you would not be permitted to use either identifier as neither could be proven to be definitely assigned.

I wouldn't argue for altering that behavior in normal Boolean expressions.  However I do think that pattern matching with `switch` and `match` would be quite handicapped if it didn't have support for both ""OR"" patterns as well as permitting reuse of the identifier where the compiler could prove that the variable could only receive a value from one of the patterns.  Notably F# already supports this with ""OR"" patterns and requires that both sides bind the same set of variables:

``` fsharp
let result =
    match point with
    | (0, x) | (5, x) -> x
    | (10, x) | (15, y) -> x // ERROR: The two sides of this 'or' pattern bind different sets of variables
    | _ -> 0
```

@alrz Maybe not, but it seems weird to have two ways to express Boolean logic and they apply to completely different places.  Can't say I care for `unless` either, evaluating backwards lexically is very unintuitive.
"
5883,Neutral,@jasonmalinowski @Pilchie  I've found a repro for this: https://github.com/dotnet/roslyn-project-system/issues/1350. It looks like we're putting you in some sort of bad state - need to debug it.
5884,Positive,"I think it is better to leave the `default` keyword as a 'function', when inside a body.

First, it is concise, not one time a 'function' another time a 'keyword';

Second, it is better to always write down, what default is returned; maybe one time it may be the class, the other time it may be a derived class.

verbosity is one of the advantages of C#, just see the 'superfluid' `abstract` keyword on the before the `class` keyword, because it is clear that it must be an abstract class, as at least one function inside is abstract - greetings from C++ ;-)

For instanciation, like in the optional parameter above, it could really ease typing and reading the code.
"
5885,Neutral,"> BuildArgumentsForErrorRecovery doesn't affect the compiler's semantic analysis today.

Of course it does, it affects SemanticModel behavior in lambdas.
"
5886,Neutral,"But one issue remains: ""setup"" is a noun; in this error message it ought to be ""set up."""
5887,Positive,"1 case better is better than no cases better :)
"
5888,Neutral,"Verification is blocked by a debugger bug 1171881.
"
5889,Positive,"@la-yumba All good points and all things we'd like to do eventually, but we need to stop somewhere, take a breath, and ship before we complete everything.
"
5890,Neutral,"Fixed by #3298.
"
5891,Negative,"I bet Microsoft assumed that they were making the ""right decision"" when they violated these simple tenets previously with C, only to have to follow up with breaking changes and yet another dialect.  I still know organizations that cannot migrate off of Visual C++ 6.0 because of those bad decisions.

The syntax and grammar that C# chose to adopt comes with an assumption of behavior, including scope.  Sure, C# has deviated in a variety of areas, particularly where it beat C++ to the punch (if `var` were a new proposal today I would be arguing that `auto` be the keyword).  This is of the biggest deviations and directly contrary to the existing behaviors that have previously been hammered out through standardization.  These arguments have all already happened.

Apart from the insanely late timeframe of these changes (seriously, you're talking RC2 here, there should be *nothing* even remotely up for discussion), what's worse is that this decision pollutes the entire future of pattern matching in the language.  All because a few lazy developers don't feel like predeclaring their variables?"
5892,Neutral,What scenario would you use such a feature for?
5893,Neutral,"As a comparison, PostSharp has something like this, calling it [attribute multicasting](http://www.postsharp.net/blog/post/multicasting-of-custom-attributes). The way it works there is that the attribute class has to inherit from `MulticastAttribute` and have `[MulticastAttributeUsage]`. When you then apply that attribute for example on a class, PostSharp understands that it should apply to all its members.

Not sure what that means for this proposal: on one hand, it shows demand for such feature, on the other, it shows that something similar can be implemented without language support.
"
5894,Positive,"@gafter Great point.  The compiler could spit out a private static function that accepts the original range variable (or a tuple of all current range variables) and returns an `IEnumerable<tuple>` of the original range variable(s) plus the variable patterns, then `yield return` a single result on a match.

Going with implicit filtering:

``` cs
from person in list
let Student { Grade is var grade, Name is var name } = person
where grade > 65
select new { Grade = grade, Name = name };
```

converted (somewhat) into:

``` cs
IEnumerable<(Person, int, string)> $match(Person person) {
    switch (person) {
        case Student { Grade is var grade, Name is var Name }:
            yield return (person, grade, name);
        default: yield break;
    };
};

list
    .SelectMany($match)
    .Where(projected => projected.Item2 > 65)
    .Select(projected => new { Grade = projected.Item2, Name = projected.Item3 });
```
"
5895,Positive,"Glad to hear :-)
I took a note to add some details to the tuples feature document."
5896,Neutral,This was failing due to missing System.xml.ReaderWriter not deployed with compiler swr. Omar fixed it yesterday.
5897,Negative,"From telemetry.  Apologies for the lack of type names - it was fixed after Update 1 shipped.
"
5898,Neutral,"@gafter Can you please elaborate, why structurally equivalent delegates would be a breaking change? Because if it wasn't the case, auto generated delegates and function types would solve the issue with `ref` and `out` parameters, right?
"
5899,Neutral,"Since this is CSI, you should probably do something simple.  If we wanted to spend the time though, being Console is no impediment.  You can do crazy stuff in console.
"
5900,Neutral,"We should see what it would take to just make this work (i.e. ask the CLR to support non-virtual calls).
"
5901,Neutral,"SyntaxGenerator has the WithTypeParameter and WithTypeConstraint API's for adding type parameters and constraints.
"
5902,Neutral,"@mariusmg I think it would be more confusing to have `readonly` mean something different for locals than it does for fields.  Proposal #115 already aims to have `readonly` locals and parameters.
"
5903,Positive,"@CyrusNajmabadi  In which case a Analyser and codefix is that is needed, and not a change to how the langauge works. :)
"
5904,Positive,"@svick Thank you recommending that for I can subscribed to it

But it seem those thread has no movement so long. And I think it overkill to add language feature just for intellisense. All we need for dynamic is intellisense so it should not be syntax to compiled

If we need to extend compiler to support new syntax would it be harder to implement?
That being said, I like those syntax too if it possible to implement"
5905,Positive,"You reverted your own change :)
"
5906,Positive,"Hi, thanks for the response. I still think the original behavior was superior and more universal. 

Switch solves just one specific case- what if someone else likes not to indent both namespace and first level of classes? (Maybe you could force him to change such habit, but what about code that already exists?) 

Per file configuration sounds frustrating - would you want to fiddle with settings each time you open a file and add two lines to it? 

And true, mixed indentation in one file is definitively bad practice, but it happens in real world. As a result of multiple devs with different indentation settings eventually editing the same file, for example. And once this happens and you have to maintain such a codebase, there is no way to do it in VS2015. Reformatting the code is not an option, mainly because it would fog the source control history. 
"
5907,Neutral,"@DustinCampbell: So this is a confirmed bug that you would like someone to fix? What would be the resolution: Language keywords like `int` or .NET type names like `global::System.Int32`?
"
5908,Neutral,"@HaloFour  but if you create a value anonymous type it does not lose type equivalence across assemblies because it does not exist for now, we can implement it to save type equivalence across assemblies.

Value types have other equals and compareTo implementations than objects.

Does anyone thought about GC? What will be with objects inside Tuples? When can be removed? Will are be disposed? Is it related at all?
"
5909,Neutral,"I think there is a known problem being worked on here: https://github.com/Microsoft/msbuild/issues/2369

You can try setting ""MSBUILD_EXE_PATH"" in the environment to point to C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\MSBuild\15.0\msbuild.exe on your machine."
5910,Neutral,"Is there anything to be done for VB?
"
5911,Neutral,"When I wrote that comment the first example was

> ```
> void Foo(T1 t1, T2 t2, T3 t3, T4 t4)
> {
> }
> ```
"
5912,Neutral,"@axel-habermaier Yup, perf optimization. Let's say you want live code generation, such that every change you made to your source re-ran the generator when you needed it to.

If generators could run on any file at any time, producing any result, we would have to re-run the generator for basically every keystroke. Obviously not scalable.

I don't think requiring adding an attribute to your generated types is crazy, but I'm also considering whether or not it's too expensive to use semantic analysis to trigger the generation. This would let you apply the attribute to some interface or base type, then every type that implements/overrides those types would automatically trigger generation.
"
5913,Neutral,"This report doesn't mention an analyzer project, and the callstack is clearly CPS..."
5914,Negative,"This is worse than above, if appears that if the project is connected to source control, you cannot edit anything on the designer/code behind if both the form and code behind are open and/or checked out.
"
5915,Positive,"Please just open a bug on CSharpLang so that we actually spec this out and approve this as an actual language change.  It sounds like you're interested in this work so I think we could argue you could be the champion here, and you coudl def provide a PR as part of that championing."
5916,Neutral,"Would it be feasible to just try this feature out? Code Contracts is starting to release early 2015 support so couldn't a roslyn extension be used to replace ccrewrite to try variations of this syntax out? Is this a crazy idea? I know it would be a lot of work but when you think about a future where this language feature actually exists Code Contracts should have some kind of interoperability with it anyway.
"
5917,Neutral,"What's the point? You can already have `enum`s with 16-bit underlying type (`ushort`).
"
5918,Neutral,"#7881 #850
"
5919,Neutral,"Assigning to @rchande to validate this is the same issue the @Pilchie mentioned and if it is then close it out.
"
5920,Neutral,"@diryboy I was referring to proposal #115 to introduce `readonly` parameters and variables in which they explicitly mention a `var`-like shorthand for inferred local variables using either `let` or `val`, although I do believe they were leaning towards `val`.  My mention has nothing to do with `IDisposable` rather the fact that these variables would have to be readonly.
"
5921,Neutral,This issue was moved to dotnet/roslyn-project-system#1874
5922,Neutral,"If the CLR already supports enum/delegate generic constraints, why was it excluded from C#7?

> El 22 jun. 2016, a las 1:34 p.m., HaloFour notifications@github.com escribió:
> 
> @FunctionalFirst
> 
> I'm not sure why a compiler enforced constraint is fake, but a CLR constraint isn't.
> 
> Perhaps ""fake"" was a bad choice of words. It's not a CLR generic type constraint, which is what C# supports. It's a different beast altogether.
> 
> F# stores metadata about compile-time constraints, so they do survive beyond the defining assembly.
> 
> Not to any other language. Those ""constraints"" disappear if I reference the assembly from C#.
> 
> Anywho, I'm not trying to disparage F#. It supports its own type system within the confines of what the CLR affords. If the CLR supported more generic type constraints I assume that F# would take advantage of them where it could.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub, or mute the thread.
"
5923,Positive,"@diryboy No problem, thanks for following up!
"
5924,Positive,"Further information that hopefully could help.

I had this issue this morning on a single WPF project (VS 2017 15.3.3) solution.

The task ServiceHub.RoslynCodeAnalysisService32.exe stayed running after I closed and trying to kill it through task manager only showed 'Access denied' message.

I solved it through an elevated command prompt running taskkill. But it would not completely kill the process:

`C:\WINDOWS\system32>taskkill.exe /F /T /PID 12732
ERROR: The process with PID 12732 (child process of PID 12528) could not be terminated.
Reason: There is no running instance of the task.

C:\WINDOWS\system32>taskkill.exe /F /T /PID 12528
ERROR: The process ""12528"" not found.

C:\WINDOWS\system32>taskkill.exe /F /T /PID 12152
SUCCESS: The process with PID 9684 (child process of PID 12152) has been terminated.
ERROR: The process with PID 12152 (child process of PID 1360) could not be terminated.
Reason: There is no running instance of the task.

C:\WINDOWS\system32>taskkill.exe /F /T /PID 12152
ERROR: The process with PID 12152 (child process of PID 1360) could not be terminated.
Reason: There is no running instance of the task.

C:\WINDOWS\system32>taskkill.exe /F /T /PID 12732
ERROR: The process with PID 12732 (child process of PID 12528) could not be terminated.
Reason: There is no running instance of the task.

C:\WINDOWS\system32>taskkill.exe /F /T /PID 12528
ERROR: The process ""12528"" not found.`

The interesting thing to note, and what finally allowed me to close this task, was Process ID: 1360, which was Windows Explorer (not file explorer) but windows itself. After killing the windows process, I was able to end both Roslyn and Devenv without further issues. Restarting explorer through Task manager brought windows back.

I hope this could help, let me know if you need anything else. I get this issue a lot.

Regards

Ronnie
"
5925,Neutral,"@GeirGrusom  Let's say we know that there is always going the be a specific shared method, implemented on the those inheriting `derived`

For example `.CreateNew( )`

``` vb
Public MustInherit Class Parsed
    Friend Sub New(s As Source.Span, Last As Source.Reader)
        Me.Span = s
        Me.Last = Last
    End Sub
    Public ReadOnly Property Span As Source.Span
    Public ReadOnly Property Last As Source.Reader

    Public MustInherit Class Parsed(Of q As Parsed)
        Inherits Parsed
        Friend Sub New(s As Source.Span, last As Source.Reader)
            MyBase.New(s, last)
        End Sub
        MustOverride Function GetParser() As Parser(Of q)
    End Class

End Class

Public MustInherit Class Parser
End Class
Public MustInherit Class Parser(Of t As Parsed)
    Inherits Parser
    Public MustOverride Function Parse(sr As Source.Reader, ByRef output As t) As Boolean
End Class
```

``` vb
Public Class Whitespace
    Inherits Parsed.Parsed(Of Whitespace)

    Private Shared _Default As New Whitespace()
    Public Shared Shadows Function Parser() As Parser(Of Whitespace)
        Return _Default.GetParser()
    End Function

    Private Sub New()
        MyBase.New(Nothing, Nothing)
    End Sub
    Private Sub New(s As Source.Span, Last As Source.Reader)
        MyBase.New(s, Last)
    End Sub

    Public Overrides Function GetParser() As Parser(Of Whitespace)
        Return New _Parser
    End Function

    Public Class _Parser
        Inherits Parser(Of Whitespace)

        Public Sub New()
            MyBase.New
        End Sub

        Public Overrides Function Parse(sr As Source.Reader, ByRef output As Whitespace) As Boolean
            Dim bx = sr
            If sr.OK Then
                Dim ix0 = sr.Index
                While sr.Value.HasValue AndAlso Char.IsWhiteSpace(sr.Value.Value)
                    sr = sr.Next
                End While
                output = New Whitespace(sr.Source.GetSpan(ix0, sr.Index), sr)
                Return True
            End If
            output = New Whitespace(bx.Source.GetSpan(bx.Index, bx.Index), bx)
            Return False
        End Function
    End Class

End Class
```

---

``` vb
Public Class Opt
    Public ReadOnly Property State As Boolean
    Protected Friend Sub New(state As Boolean)
        Me.State = state

    End Sub

    Public Class opt(Of t As Parsed)
        Inherits Opt
        Protected Friend Sub New(state As Boolean, Content As t)
            MyBase.New(state)
            Me.Content = Content
        End Sub
        Public ReadOnly Property Content As t
    End Class

    Public Shared Function ional(Of T As Parsed.Parsed(Of T))(p As Parser(Of T), sr As Source.Reader) As opt(Of T)
        Dim output As T
        Dim Res = p.Parse(sr, output)
'...
    End Function
End Class
```

``` vb
        Dim o = Opt.ional(Whitespace.Parser, sr )
```

Instead on passing in the ""default"" `parser`,

we could access it via `Shared(t)`.

``` vb
   Public Shared Function ional(Of T As Parsed.Parsed(Of T))( sr As Source.Reader) As opt(Of T)
        Dim output As T
        Dim Res = shared(T).GetParser.Parse(sr, output)
'...
    End Function
End Class
```

``` vb
        Dim o = Opt.ional(Of Whitespace)( sr )
```
"
5926,Neutral,"The behavior is consistent with behavior of VS2013 compiler. Moving to 2.0. I am not sure if it is worth changing the behavior at all.
"
5927,Neutral,"@hawkerm We do not have any specific date. We review and re-prioritize open issues regularly for each release. Unfortunately, we have had other work that was deemed more important than this one. 

Are you blocked or can you find a workaround for your scenario?"
5928,Neutral,"Git side completed in eb2f0d8bf5f777ed68cc136b79d5ae1c71e14aee and TFS side completed in 1474215.
"
5929,Neutral,"This is a special case of the more general issue #14146 for expression variables.
"
5930,Neutral,"I suspect this is because normally while computing fixes we won't force CompilationEndActions. In the case of a fixall since it's a blocking long running operation anyway, we should force compilationendactions but I suspect it's going through a similar codepath and not waiting for those diagnostics. 
"
5931,Neutral,"@333fred , @AlekseyTs , Is there some thing we need to take care here ? "
5932,Neutral,"Couple of things that triggered me
- Slice as its own type as opposed to Slice returning child array type
- Slice as mutable reference to original array by default
- Lack of mentioning aliasing analysis work for overlapping references

The easiest solution is to deepcopy everywhere and make everything mutable and let CLR/RyuJIT deal with it, but essentially those are what kills performance. What gives performance is constant/immutable references and copy-as-needed per mutation. String is already immutable which should make it easy to slice. I'm neither aliasing nor GC expert, so I can't comment on the problem of 'small ref holding onto large superset'. I'm hoping this is a problem experts have previously tackled and have mitigation strategies.
"
5933,Negative,"@HaloFour I guess I do see the value in these points...

re. mutability, I don't find it to be such a huge issue given that `readonly` does protect against modifying members of the struct (somehow I wasn't aware of this).

Specifically, the following is not allowed:

``` c#
struct Point { public int x; public int y; }
readonly Point p = new Point { x = 1, y = 2 };
p.x = 3;
```

If somehow you could declare `readonly` for locals, that would be great, but local variables are already mutable by default anyway, so this doesn't seem hugely inconsistent.
"
5934,Negative,"@tenor 

I have some problems to see the compatibility between your original ""the spec says the code is fine"" and ""the spec backs your claim"", because I understand that the code I posted was wrong (= the compiler thinks differently than what I expect). But this is precisely the problem with abstract, without-code-sample talking and why I don't want to continue this conversation (IMHO, a pointless waste of time).

> There could be potential overloads

Logically, but you were using this text to refer to a scenario where only one overload was present. Do you want to consider multiple overloads? Excellent! Show a code or explain how the described behaviour works under such conditions. But using a given spec to justify/criticise a completely different situation doesn't seem too correct.

> That's why the compiler allows the code

Again no. This is a 1-overload scenario, the multiple-overload rules don't apply here. Your spec is applied when determining which overload, out of various ones, should be used. Here there is no possible confusion; just one overload, no doubt about which one to use. 

The following code does illustrate a multi-overload scenario:

``` C#
private static void CallingMethod()
{
    //DateTime dateVar = ReturnString(""""); //It doesn't compile.

    dynamic dynamicVar = new DateTime(); // """";
    DateTime dateVar = ReturnString(dynamicVar); //Now it compiles.
}

private static string ReturnString(string arg)
{
    return arg;
}

private static string ReturnString(DateTime arg)
{
    return arg.ToString();
}
```

If you test this code, you would see that there is no confusion here either: `dynamic dynamicVar = new DateTime();` provokes `ReturnString(DateTime arg)` to be selected; and dynamic `dynamicVar = """"; ReturnString(string arg)`. There is an error because of trying to store a `string` in a `DateTime` variable, but the overload-selection part works fine. Again this code shouldn't compile (because both methods return a `string` rather than the expected `DateTime` variable) and again it does. So the number of overloads doesn't seem to be an issue here; but you are free to go deeper into all this by considering more complex situations.

> calls to static methods (like in the example you provided), there will be no derived types and so the compiler should be able to catch the error

I am neither sure about what you are trying to say there nor I honestly care. See, I think that I have fully covered my being-nice promise, also that my position is quite clear. I don't want to continue with this conversion, please respect that. 
"
5935,Neutral,"Example, acutally the definition for a property since C# 1 is in reality:

``` C#
public class AClass {
    int _field;
    public int myProperty get { return _field; }    // internally converted to get_myProperty();
    public int myProperty set { _field=value; }    // internally converted to set_myProperty(int value);
}
```

That is how it **is** until today. You see that there is no real block scope! And as there is no block scope, there is no enclosing local scope for variables.
"
5936,Neutral,@JosephWoodward Is this issue still open?
5937,Neutral,"What's the process for getting the fixed bits on my system?
"
5938,Neutral,"Verified this test no longer crashes. I'll unskip it.
"
5939,Neutral,"by the way, what is VS used? update 1 or update 2?
"
5940,Neutral,"@MgSam, @mikedn: Also, this feature would be completely optional for backwards compatibility reasons. If you don't like it, don't use it. I for one would find it useful, occasionally.
"
5941,Neutral,"@Miista I guess so, but it seems to fit what people are generally saying: tuple types are handy for private or internal methods, but records are preferable for public APIs and maintenance.

IntelliSense bookkeeping of tuple names doesn't really work for public APIs anyway, so it seems it would be better if tuples were limited to assembly internal methods only.
"
5942,Neutral,"Currently you can also explicitly cast the expression to Action<T> or call the constructor.

```
// Call constructor
Body = Activities.Invoke(new Action<int>(i =>
{
    runCount++;
    throw new Exception(""broke"");
}))

// Explicit Cast
Body = Activities.Invoke((Action<int>)(i =>
{
    runCount++;
    throw new Exception(""broke"");
}))
```
"
5943,Neutral,"Okay that makes sense.

If this is to happen, I'd like to see it in tandem with allowing statements at the top level, ie that class/method definitions are basically treated on the same level as statements. That would allow you to define functions outside of a class, allow for this, and allow statements at the top level (which makes it possible to treat C# as a scripting language, mentioned in #98).
"
5944,Neutral,"@mwpowellhtx

> Along same lines, what does a `Func<>` signature look like for a Tuple return type, never mind delegate?

`Func <(int, int)>`"
5945,Neutral,"> How can I get a callback after the Visual studio Suggested Action occurs.

Create your own CodeActoinOperation.  We will call ""Apply"" on it when the action occurs.  So, at the end of Apply, it will be after the suggested action occurs."
5946,Positive,"@Pilchie I did _not_ recall that.  It's somewhat surprising though.  What makes determining what's visible so expensive? Thanks!

@jasonmalinowski Do you recall what the issue was?
"
5947,Neutral,"@jnm2, @HaloFour I'm pretty sure it possible to do that today, if you can build and run Roslyn on VS 2015 Update 3 and then test its features on the experimental instance you probably can enable that for the non-experimental instance, I'm not sure what it requires but I'm pretty sure it's possible, so the infrastructure to do it is probably there.

_p.s. I don't know whether it's a good idea to do that unofficially and why one would want to do it but I wrote that just to indicate that I think the infrastructure is there._



"
5948,Positive,"@alrz,

Then don't use it like everywhere :)

It's a really nice feature for test method names and therefore is a good proposal. The fact that bad programmers will misuse it should not be a blocker to this proposal. If we adopted that strategy, we'd have no programming languages at all!
"
5949,Neutral,"> That method effectively makes it impossible to do stuff like:

Yes.  But the workaround is to use different names.  Each approach has pros/cons.  If we chose narrow scope the pros was you could reuse names, but the cons was you couldn't use the feature if you wanted wide scoe.

If we chose wide scope (which we did) the pro was you could use it for wide/narrow scenarios, but the con was you'd need different names.  We decided we wanted a feature that was applicable to hte most scenarios possible and so we went with the final design. "
5950,Neutral,"Closing as issue already has a resolution.
"
5951,Neutral,"@lorcanmooney
Do still the package downgrades after doing `restore.cmd /clean`, then issue the build test command? 
"
5952,Neutral,"Given our focus on shutting down for VS 2015, I don't think we can take this now.  @mkrueger: I think you said you had a workaround for now?  Also, presumably if we fix it shortly after VS2015, you could leverage an out-of-band release of our NuGet packages?
"
5953,Neutral,Mondo escrow triage: meets the bar.
5954,Neutral,"Isn't that what Navigate Backward (first button in the Standard toolbar, shortcut <kbd>Ctrl</kbd>+<kbd>-</kbd>) is for?
"
5955,Neutral,"Resource file project items already generate type-safe classes in C#.
"
5956,Positive,"@davkean sounds good.  I'd actually like to limit it by number of days.  Right now we save 14 days of artifacts and 30 days of builds standard.  The code that runs through at the end of the job and does the pruning is actually pretty expensive so limiting it by date is best.

I may actually lower the standard for artfiacts down to like 7 days, at least for PR tests, based on how much space we end up using (right now we are at 3.5 TB)
"
5957,Neutral,Various reports of this issue turned out to because of lack of codeflow. Now all such issues should be fixed and we've had a round of testing with vendors as well. Closing again.
5958,Neutral,"@bondsbw You can put whatever you want inside the `MySpecialFormatting` method. It has complete control of the formatting of the string and its inserts. You can even have it return some type other than `string`.
"
5959,Neutral,"@gafter I don't think that real problem with `using` statement is additional indentions nor that you have to implement an interface — this is not a bad thing at all, so there is a contract for types that need cleanup. I think the actual problem here is that you might forget to dispose disposable types, defer statement doesn't help with this at all, it rather encourages you to not implementat `IDisposable` inetrface and explicitly call methods like `Close` or `Free` which in presence of `IDisposable` seem like code smells.
"
5960,Neutral,"@tmat Can you please field this question? Where are docs and/or samples for `DiaSymReader.Native`?
"
5961,Neutral,"`inScopeHoistedLocals` correctly has an uppercase ""Q"".  However, it appears (superficially, at least) that `NamedType ConsoleApplication200.Module1.VB$StateMachine_0_F` has a field with a lowercase ""q"".
"
5962,Neutral,"@davidroth Hi David.

sound like this issue - https://github.com/dotnet/roslyn/issues/10358

no fix yet, but we are aware of the issue @Pilchie @jasonmalinowski 
"
5963,Negative,"To me this  (`structA.0`) doesn't feel like c# if you want something like this why not `structA[0]` you can implement this with no changes to the language and it has an advantage of allowing you this `structA[someVariable]`
And regarding the whole tuple unless you allow something like this 
`(int res1, string res2) data = await Method1Async(),Method2Async();`
or
`(int res1, string res2) data = await  Task.WhenAll( Method1Async(),Method2Async());`
 possible I don't see the point, I mean it's nice but the tuple is most useful as a replacement for `out` on async methods and as symmetry for params. If you don't make this possible when you add it to the language people won't use it .
"
5964,Neutral,"Hi @ILAgent.  I'm not able to reproduce this with the latest builds.  It's possible that we've fixed it, but to confirm, can you can a look in your Event viewer for any events from "".NET Runtime"" that would include the callstack of the crash?"
5965,Neutral,"Removed ""Approved for Next Preview"".
"
5966,Neutral,"[Screenshot](http://dotnet-ci.cloudapp.net/job/roslyn-internal_prtest_win_vsi_p2/568/artifact/Open/Binaries/Release/Screenshots/2016-05-09_21-22-47_96%20-%20Exception%20System.Reflection.TargetInvocationException.png) shows we didn't get the diagnostic and/or code fix when light bulb was invoked. HeeJae, can you take a look?
"
5967,Negative,"Weirdly, VbcCore and CscCore are in the same bucket here - and should also be complaining, as they don't have support clauses either, not sure why they aren't complaining @rchande?
"
5968,Neutral,"The rule set files have proven limiting in a number of ways. What we'd like to do is design an expansion of the .editorconfig support to cover additional use cases like this, but it's on the back burner while we get basic analyzer configuration features working with it. The one issue we've filed so far related to this is #19026."
5969,Neutral,I upgraded VS2017 to Release 2 and performed a bunch of nuget updates and got this problem.  I undid all the changes and then just upgraded the Microsoft.CodeCom.Providers.DotNetCompilerPlatform from 1.0.5 to 1.0.6.  After the upgrade I stopped getting a roslyn folder in my bin folder.  I reverted to 1.0.5 and started getting the folder again.
5970,Negative,"Sorry for my English... I try to mean that, for `IAsyncDispose` interface, do we really (technically) need to return a `Task` or can that return type of `Dispose` method be any awaitable?
"
5971,Positive,"Thanks! hopefully they will update the roadmap page so people would know about it too! :)
"
5972,Positive,"I recommend this page: https://github.com/dotnet/roslyn/wiki/Getting-Started-C%23-Syntax-Analysis

Using the syntax visualizer can also be super helpful.

It's really helpful to know how Roslyn's syntax API works.  And then it's important to actually start looking at some trees to see what all the different types of nodes are and what are the types you care about for your scenario.  Roslyn has 100+ node types (yup, C# is a complex language).  So jumping directly in without reading up a bit is going to be challenging :)
"
5973,Negative,"@bondsbw I don't think this adds much. 

The code

``` CSharp
var filteredCollection =
    from t in myCollection
    where t < 7
    select t;

foreach (var x in filteredCollection)
{
    //...
}
```

Can already be shortened to:

``` CSharp
foreach(var x in myCollection.Where(x => x < 7))
{
    //...
}
```

Also the code:

``` CSharp
var query = 
    from c in svcContext.ContactSet
    join a in svcContext.AccountSet
        on c.ContactId equals a.PrimaryContactId.Id
    where c.LastName == ""Wilcox"" || c.LastName == ""Andrews""
    where a.Address1_Telephone1.Contains(""(206)"")
        || a.Address1_Telephone1.Contains(""(425)"")
    select new
    {
        Contact = new Contact
        {
            FirstName = c.FirstName,
            LastName = c.LastName,
        },
        Account = new Account
        {
            Address1_Telephone1 = a.Address1_Telephone1
        }
    };
```

can already be shortened to:

``` CSharp
var query = 
    from c in svcContext.ContactSet
    join a in svcContext.AccountSet
        on c.ContactId equals a.PrimaryContactId.Id
    where c.LastName == ""Wilcox"" || c.LastName == ""Andrews""
    where a.Address1_Telephone1.Contains(""(206)"")
        || a.Address1_Telephone1.Contains(""(425)"")
    select new
    {
        c.FirstName,
        c.LastName,
        a.Address1_Telephone1
    };
```

and if you _really_ want to avoid the anonymous type projection entirely you can write:

``` CSharp
var query = 
    from c in svcContext.ContactSet
    join a in svcContext.AccountSet
        on c.ContactId equals a.PrimaryContactId.Id
    where c.LastName == ""Wilcox"" || c.LastName == ""Andrews""
    where a.Address1_Telephone1.Contains(""(206)"")
        || a.Address1_Telephone1.Contains(""(425)"")
    select (Action)(()=>
    {
       Console.WriteLine(""Contact Name: {0} {1}"", c.FirstName, c.LastName);
       Console.WriteLine(""Account Phone: {0}"", a.Account.Address1_Telephone1);
    });
foreach(var a in query)
{
    a();
}
```

Also the proposed example:

``` CSharp
foreach c in svcContext.ContactSet
    join a in svcContext.AccountSet
        on c.ContactId equals a.PrimaryContactId.Id
    where c.LastName == ""Wilcox"" || c.LastName == ""Andrews""
    where a.Address1_Telephone1.Contains(""(206)"")
        || a.Address1_Telephone1.Contains(""(425)"")
{
    Console.WriteLine(""Contact Name: {0} {1}"", c.FirstName, c.LastName);
    Console.WriteLine(""Account Phone: {0}"", a.Account.Address1_Telephone1);
}
```

is confusing because the scoping is, at least to me, non obvious. Since c is the range variable following `foreach`, I would not expect a to be in scope. It would only make sense if foreach were the last clause.

Other proposals for expanding LINQ syntax, such as the one proposing the ability to specify an IEqualityComparer inline (#100) add real value.
"
5974,Neutral,"@DavidArno Why you think it must be implied?

We always mutate reference type in foreach and it never need to be reenumerated

Changing value of a memory block, be it a reference type or ref of value type, is still the same memory block and it never need to reenumerate the same pointer
"
5975,Positive,"@HaloFour,

Ah, got it now. Thanks for taking the time to explain. In thicky-mode today :smile:  
"
5976,Neutral,"Yes, you can use decimal as a default value but that's because there's a special attribute - `System.Runtime.CompilerServices.DecimalConstantAttribute`. A similar one exists for `DateTime`.

Does this mean that when you add a user defined literal operator to a type the compiler should automatically generate such an attribute? Sounds kind of ugly because the public surface of the library containing the type will end up containing another type that's really just an implementation detail.

And assuming we go the custom attribute way, what has this to do with user defined literals? It seems to me that one could simply mark a constructor as ""const/literal/pure/etc."" to make this happen, similar to what @mirhagk suggested but only for constructors which have only primitive types as parameters.

Or, if you only care about DateTime, the C# compiler could simply treat some of the DateTime constructors specially and generate the DateTimeConstantAttribute. The language doesn't need to support DateTime literals to solve this problem.
"
5977,Neutral,"@cathalmf I know that is valid syntax, but the behavior is inconsistent. If I use
```csharp
NullableType(ParseTypeName(typeof(DateTime).Name).WithAdditionalAnnotations(Simplifier.Annotation))
```
This code will generate `DateTime?` instead of `DateTime ?`"
5978,Neutral,No longer repros in 2.0 RTM
5979,Neutral,"Just tried this locally and it doesn't reproduce for me.  Attached a debugger and set to break on all exceptions and nothing came up here.  
"
5980,Neutral,"It appears the break is caused by an intentional change in overload resolution. It needs to be resolved in the language design meeting (i.e. it is a language design issue), not in the compiler. The compiler is behaving as specified.
"
5981,Positive,"There's no way I can do without this pattern for some view model properties:

```c#
public int BoundProperty
{
    get { return boundProperty; }
    set
    {
        if (boundProperty == value) return;
        boundProperty = value;
        OnBoundPropertyChanged();
    }
}

private async void OnBoundPropertyChanged()
{
    // ...
}
```

Not to mention the (rare) `async void TrySetBoundProperty(int value)` situation.
Exactly how would this be improved by banning `async void`? I'm using it very tastefully here and in a few other non-UI-related scenarios. In each case, it's _not_ the caller's responsibility to know that something async has been triggered.
"
5982,Negative,"What?! ""Suggestion"" isn't related to the Error List?"
5983,Negative,"_Shooting from the hip here._

> Allow extension methods in non-static classes

Does allowing extension methods in interfaces make sense? Consider the current scenario with `IEnumerable<T>`, had interface extension methods been available the extension methods could have been placed in the interface saving marginally on namespace pollution (instead of the current situation with `Enumerable`). This would mean that interfaces would be one step closer to becoming mixins.
- Implement as a native CLR feature - con: needs CLR support
- Implement by automatically moving the methods into a compiler-generated class - con: bad language interopability
"
5984,Neutral,"@orthoxerox It's proposed in #206 in the same form that you've presented here.
"
5985,Positive,"@DavidArno Would love to chat more about communication styles and whatnot.  However, this is clearly not the right venue for that.  I'd be happy to chat about this directly, but it doesn't seem appropriate in this topic.  Feel free to reach my by any means (email/gitter/whatever).  I'd really appreciate your help in improving how I discuss things with all of you! :)
"
5986,Neutral,"Also fyi @dotnet/roslyn-compiler. I've dug into this a bit more, and in this particular case, the BoundLambda node here actually has a type, unlike in this scenario:

```C#
using System;

class Program
{
    static void Main(string[] args)
    {
      Action f =(int num) => num;
    }
}
```

This appears to be true in my limited testing for any scenario in which the lambda expression's return type cannot be converted to the expected return type of the delegate, but everything else about the lambda is valid C#. This causes `BoundExpressionExtensions.HasExpressionType` to return true, which violates the comment `// null literal, method group, and anonymous function expressions have no type.`."
5987,Neutral,"@svick API paging is very non-chatty with respect to async overhead because the HTTP call is about 1e6x more expensive.

@benaadams that is a good point, but should apply less to sequences than it applies to ""scalar"" tasks. Or does it? Maybe new patterns will emerge. But I have written quite a few IO layers of various kinds and for some reason I don't recall any instance where I had a chatty sequence based on IO. For some reason it'S either scalars or low-volume sequences.

My favorite trick to make chatty sequences non-chatty is chunking. I sometimes do: `items.AsChunked(1000).AsParallel().Select(chunk => chunk.ConvertAll(x=> ...)).AsEnumerable().Flatten()`. So that's a workaround that will apply to async sequences as well. (But so far that trick was only needed for CPU-bound work since IO is too bulky to need it.)

@divega I was thinking about that as well.
"
5988,Positive,"Oops, wrong button, mean to cancel :)"
5989,Positive,"Great, thanks @alrz."
5990,Neutral,"Note - I was hitting this on Sort System first again today, even though the Add Using for NuGet had roamed."
5991,Neutral,"@svick 
What is the problem to have something like that:

``` csharp
from x in collection1
from y in collection2
where (x, i) => { return x != null && i % 2 == 0; } && (y, i) => { return i % 2 == 1; }  
select x;
```

Which will be translated to 

``` csharp
int xi = 0;
foreach (var x in collection1)
{
  int yi = 0;  
  foreach(var y in collection2)
  {
    if ((x != null && xi % 2 == 0) && (yi % 2 == 1))
    {
      yield return x;
    }
    yi++;    
  }
  xi++;
}
```
"
5992,Neutral,"@jasonmalinowski Nope, still no idea
"
5993,Neutral,"@lachbaer 

The problem with that entire concept is that the very target you intend is also the least likely to actually employ this feature.  Someone who slops together a giant monolithic class full of interdependencies isn't going to take the time to whittle down those dependencies into concrete scoping blocks anymore than they're likely to refactor that giant class into smaller classes.  C# shouldn't add features which encourage abuse of the language and incorrect design patterns.
"
5994,Neutral,"This is just a bug which needs to be fixed,and manish already knows what needs to be done here. @mavasani do you have any concern from design perspective ? "
5995,Neutral,"This looks like another duplicate of https://github.com/dotnet/roslyn/issues/19033, which is fixed in master."
5996,Neutral,"Yes.  I definitely think we shoudl have an API from the compiler to tell us what chained constructor a constructor calls.

@dotnet/roslyn-compiler 

Can we add something like this?  We have APIs to tell you this when there is a this/base call (or an invocation in VB).  However, when the chaining is implicit, it's not clear which constructor is called.  This is an issue especially with wonky constructors (like ones with optional or params parameters).
"
5997,Neutral,"I think that this would complicate the language too much just to fix a relatively rare issue. A significant benefit of GC is that you usually don't have to think about references too much, it just works.

And your proposal probably wouldn't even fix the issue completely. Consider a LINQ method like `Enumerable.Select()`: it takes a reference to a lambda (which in turn can reference some local variable) and stores it in an object which it returns. I believe this would violate your `&` constraint, which would mean you can't ever use LINQ while referencing a `&` value in the lambda.

You could try to solve this specific case somehow, but there are probably lots of other coding patterns that wouldn't work well with your proposal.

Also, wouldn't the alternative syntax invalidate much more existing code (since it would change what unadorned type of a parameter means)?
"
5998,Neutral,"Another related issue is that we're not properly rcedirecting this assembly version:

https://github.com/dotnet/roslyn/blob/master/src/Compilers/Core/MSBuildTask/AssemblyResolution.cs

It's not listed there and should be. "
5999,Positive,"Here are the problems I am hearing about on this thread.

**Problem**: _Design notes are published frequently enough._

I don’t have too much to add here.  Mads is in charge to the language design process and I will gracefully defer to him in all matters concerning it.
That being said I personally like the idea of language design discussions happening on a separate repo so things are easier to keep track of.  What are the other people’s feelings on this?

**Problem**: _Don’t have a clear picture of what the team’s priorities are or what we are working on._

We operate internally on a 3-week sprint cycle.  We could just publish some notes updating people on what we accomplished in the past 3 weeks and what our priorities are for the next 3 weeks.  Would people want to see this or would it be too much noise?

**Problem**: _I can’t find a centralized place that can give me the tl;dr version of what’s happening._

Perhaps we should have a landing page such as [http://www.typescriptlang.org/](http://www.typescriptlang.org/) that gives people on overview of what is currently planned. We have been doing blog posts about new features but I don't think we have a grand central location for all this info.

I just wanted to say thanks to @DavidArno for starting this discussion. I am very glad that people are voicing concerns about our process and how we are designing and building Roslyn.  The only way we can improve is if people continue to help us find the problems and we work together to find the best solutions.  What are the other pain points I've missed that we can do something about?
"
6000,Neutral,"From what I've seen so far: it should be easier to implement this for everything, rather than for just `typeof`. There is only `AbstractSyntaxContext` nearby, which does not have the stuff about `typeof`. I guess, it should be common for both C# and VB and the latter does not have `typeof`?
Just inserting one arrow should not be hard to do, I think it is just pushing down things from http://source.roslyn.io/#Microsoft.CodeAnalysis.CSharp.Features/Completion/CompletionProviders/SymbolCompletionProvider.cs,77 to http://source.roslyn.io/#Microsoft.CodeAnalysis.CSharp.Features/Completion/CompletionProviders/SymbolCompletionProvider.ItemRules.cs,49 plus some logic to fix the display text. I don't think brace completion triggers in this case (if implemented like in the previous sentence), though, and I don't know why.
"
